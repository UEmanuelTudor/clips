(self.webpackChunkclips=self.webpackChunkclips||[]).push([[812],{3327:(L,C,l)=>{"use strict";l.r(C),l.d(C,{defaultOptions:()=>A,fetchFile:()=>H,getCreateFFmpegCore:()=>g});const A={corePath:`https://unpkg.com/@ffmpeg/core@${l(3681).devDependencies["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`};var h=l(5861),e=l(6945),P=l(3630);const R=function(){var J=(0,h.Z)(function*(w,E){(0,e.log)("info",`fetch ${w}`);const v=yield(yield fetch(w)).arrayBuffer();(0,e.log)("info",`${w} file size = ${v.byteLength} bytes`);const G=new Blob([v],{type:E}),T=URL.createObjectURL(G);return(0,e.log)("info",`${w} blob URL = ${T}`),T});return function(E,v){return J.apply(this,arguments)}}(),g=function(){var J=(0,h.Z)(function*({corePath:w,workerPath:E,wasmPath:v}){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){if("string"!=typeof w)throw Error("corePath should be a string!");const O=new URL(w,"file:///C:/xampp/htdocs/ANGULAR/Complete%20Angular%20Developer%20in%202023%20Zero%20to%20Mastery/clips/node_modules/@ffmpeg/ffmpeg/src/browser/getCreateFFmpegCore.js").href,j=yield R(O,"application/javascript"),$=yield R(void 0!==v?v:O.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),I=yield R(void 0!==E?E:O.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return typeof createFFmpegCore>"u"?new Promise(Y=>{if(globalThis.importScripts(j),typeof createFFmpegCore>"u")throw Error((0,P.CREATE_FFMPEG_CORE_IS_NOT_DEFINED)(O));(0,e.log)("info","ffmpeg-core.js script loaded"),Y({createFFmpegCore,corePath:j,wasmPath:$,workerPath:I})}):((0,e.log)("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:j,wasmPath:$,workerPath:I}))}if("string"!=typeof w)throw Error("corePath should be a string!");const G=new URL(w,"file:///C:/xampp/htdocs/ANGULAR/Complete%20Angular%20Developer%20in%202023%20Zero%20to%20Mastery/clips/node_modules/@ffmpeg/ffmpeg/src/browser/getCreateFFmpegCore.js").href,T=yield R(G,"application/javascript"),D=yield R(void 0!==v?v:G.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),k=yield R(void 0!==E?E:G.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return typeof createFFmpegCore>"u"?new Promise(O=>{const j=document.createElement("script"),$=()=>{if(j.removeEventListener("load",$),typeof createFFmpegCore>"u")throw Error((0,P.CREATE_FFMPEG_CORE_IS_NOT_DEFINED)(G));(0,e.log)("info","ffmpeg-core.js script loaded"),O({createFFmpegCore,corePath:T,wasmPath:D,workerPath:k})};j.src=T,j.type="text/javascript",j.addEventListener("load",$),document.getElementsByTagName("head")[0].appendChild(j)}):((0,e.log)("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:T,wasmPath:D,workerPath:k}))});return function(E){return J.apply(this,arguments)}}(),H=function(){var J=(0,h.Z)(function*(w){let E=w;return typeof w>"u"?new Uint8Array:("string"==typeof w?E=/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(w)?atob(w.split(",")[1]).split("").map(v=>v.charCodeAt(0)):yield(yield fetch(new URL(w,"file:///C:/xampp/htdocs/ANGULAR/Complete%20Angular%20Developer%20in%202023%20Zero%20to%20Mastery/clips/node_modules/@ffmpeg/ffmpeg/src/browser/fetchFile.js").href)).arrayBuffer():(w instanceof File||w instanceof Blob)&&(E=yield(J=>new Promise((w,E)=>{const v=new FileReader;v.onload=()=>{w(v.result)},v.onerror=({target:{error:{code:G}}})=>{E(Error(`File could not be read! Code=${G}`))},v.readAsArrayBuffer(J)}))(w)),new Uint8Array(E))});return function(E){return J.apply(this,arguments)}}()},6151:L=>{L.exports={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}}},9639:(L,C,l)=>{var F=l(7156).default;const{defaultArgs:x,baseOptions:A}=l(6151),h=l(8333),{defaultOptions:e,getCreateFFmpegCore:P}=l(3327),{version:R}=l(3681),g=Error("ffmpeg.wasm is not ready, make sure you have completed load().");L.exports=(U={})=>{const{log:H,logger:J,progress:w,...E}={...A,...e,...U};let v=null,G=null,T=null,D=null,k=!1,O=()=>{},j=H,$=w,I=0,Y=0,S=!1,B=0;const Q=(u,d)=>{O({type:u,message:d}),j&&console.log(`[${u}] ${d}`)},re=u=>{const[d,m,y]=u.split(":");return 60*parseFloat(d)*60+60*parseFloat(m)+parseFloat(y)},K=({type:u,message:d})=>{Q(u,d),((u,d)=>{if("string"==typeof u)if(u.startsWith("  Duration")){const m=u.split(", ")[0].split(": ")[1],y=re(m);d({duration:y,ratio:B}),(0===I||I>y)&&(I=y,S=!0)}else if(S&&u.startsWith("    Stream")){const m=u.match(/([\d.]+) fps/);if(m){const y=parseFloat(m[1]);Y=I*y}else Y=0;S=!1}else if(u.startsWith("frame")||u.startsWith("size")){const m=u.split("time=")[1].split(" ")[0],y=re(m),V=u.match(/frame=\s*(\d+)/);if(Y&&V){const N=parseFloat(V[1]);B=Math.min(N/Y,1)}else B=y/I;d({ratio:B,time:y})}else u.startsWith("video:")&&(d({ratio:1}),I=0)})(d,$),(u=>{"FFMPEG_END"===u&&null!==T&&(T(),T=null,D=null,k=!1)})(d)},X=function(){var u=F(function*(){if(Q("info","load ffmpeg-core"),null!==v)throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.");{Q("info","loading ffmpeg-core");const{createFFmpegCore:d,corePath:m,workerPath:y,wasmPath:V}=yield P(E);v=yield d({mainScriptUrlOrBlob:m,printErr:N=>K({type:"fferr",message:N}),print:N=>K({type:"ffout",message:N}),locateFile:(N,W)=>{if(typeof window<"u"||typeof WorkerGlobalScope<"u"){if(typeof V<"u"&&N.endsWith("ffmpeg-core.wasm"))return V;if(typeof y<"u"&&N.endsWith("ffmpeg-core.worker.js"))return y}return W+N}}),G=v.cwrap(E.mainName||"proxy_main","number",["number","number"]),Q("info","ffmpeg-core loaded")}});return function(){return u.apply(this,arguments)}}();return Q("info",`use ffmpeg.wasm v${R}`),{setProgress:u=>{$=u},setLogger:u=>{O=u},setLogging:u=>{j=u},load:X,isLoaded:()=>null!==v,run:(...u)=>{if(Q("info",`run ffmpeg command: ${u.join(" ")}`),null===v)throw g;if(k)throw Error("ffmpeg.wasm can only run one command at a time");return k=!0,new Promise((d,m)=>{const y=[...x,...u].filter(V=>0!==V.length);T=d,D=m,G(...h(v,y))})},exit:()=>{if(null===v)throw g;D&&D("ffmpeg has exited"),k=!1;try{v.exit(1)}catch(u){Q(u.message),D&&D(u)}finally{v=null,G=null,T=null,D=null}},FS:(u,...d)=>{if(Q("info",`run FS.${u} ${d.map(m=>"string"==typeof m?m:`<${m.length} bytes binary file>`).join(" ")}`),null===v)throw g;{let m=null;try{m=v.FS[u](...d)}catch{throw Error("readdir"===u?`ffmpeg.FS('readdir', '${d[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`:"readFile"===u?`ffmpeg.FS('readFile', '${d[0]}') error. Check if the path exists`:"Oops, something went wrong in FS operation.")}return m}}}}},260:(L,C,l)=>{l(7854);const F=l(9639),{fetchFile:x}=l(3327);L.exports={createFFmpeg:F,fetchFile:x}},3630:L=>{L.exports={CREATE_FFMPEG_CORE_IS_NOT_DEFINED:l=>`\ncreateFFmpegCore is not defined. ffmpeg.wasm is unable to find createFFmpegCore after loading ffmpeg-core.js from ${l}. Use another URL when calling createFFmpeg():\n\nconst ffmpeg = createFFmpeg({\n  corePath: 'http://localhost:3000/ffmpeg-core.js',\n});\n`}},6945:L=>{let C=!1,l=()=>{};L.exports={logging:C,setLogging:h=>{C=h},setCustomLogger:h=>{l=h},log:(h,e)=>{l({type:h,message:e}),C&&console.log(`[${h}] ${e}`)}}},8333:L=>{L.exports=(C,l)=>{const F=C._malloc(l.length*Uint32Array.BYTES_PER_ELEMENT);return l.forEach((x,A)=>{const h=C.lengthBytesUTF8(x)+1,e=C._malloc(h);C.stringToUTF8(x,e,h),C.setValue(F+Uint32Array.BYTES_PER_ELEMENT*A,e,"i32")}),[l.length,F]}},5812:(L,C,l)=>{"use strict";l.r(C),l.d(C,{VideoModule:()=>Ae});var F=l(4755),x=l(9120),A=l(5861),h=l(591),e=l(6547),P=l(4411),R=l(1609),g=l(2142),U=l(3446),H=l(235),J=l(8549);function w(r,a){if(1&r&&(e.TgZ(0,"app-alert",9)(1,"p"),e._uU(2),e.qZA()()),2&r){const t=e.oxw();e.Q6J("color",t.alertColor),e.xp6(2),e.Oqu(t.alertMsg)}}const E=function(r,a){return{"opacity-50":r,"hover:bg-indigo-700":a}};let v=(()=>{class r{constructor(t,o){this.modal=t,this.clipService=o,this.activeClip=null,this.inSubmission=!1,this.showAlert=!1,this.alertColor="blue",this.alertMsg="Please wait! Updating clip.",this.update=new e.vpe,this.clipID=new g.NI("",{nonNullable:!0}),this.title=new g.NI("",{validators:[g.kI.required,g.kI.minLength(3)],nonNullable:!0}),this.editForm=new g.cw({title:this.title,id:this.clipID})}ngOnInit(){this.modal.register("editClip")}ngOnDestroy(){this.modal.unregister("editClip")}ngOnChanges(){this.activeClip&&(this.inSubmission=!1,this.showAlert=!1,this.clipID.setValue(this.activeClip.docID),this.title.setValue(this.activeClip.title))}submit(){var t=this;return(0,A.Z)(function*(){if(t.activeClip){t.inSubmission=!0,t.showAlert=!0,t.alertColor="blue",t.alertMsg="Please wait! Updating clip.";try{yield t.clipService.updateClip(t.clipID.value,t.title.value)}catch{return t.inSubmission=!1,t.alertColor="red",void(t.alertMsg="Something went wrong. Try again later")}t.activeClip.title=t.title.value,t.update.emit(t.activeClip),t.inSubmission=!1,t.alertColor="green",t.alertMsg="Success!"}})()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(R.Z),e.Y36(P.Y))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit"]],inputs:{activeClip:"activeClip"},outputs:{update:"update"},features:[e.TTD],decls:12,vars:8,consts:[["modalID","editClip"],["heading","",1,"text-2xl","font-bold"],[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mt-4"],[1,"block","text-xl","mb-4"],["placeholder","Enter Title",3,"control"],[1,"mt-4","text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","rounded-md","text-white","bg-indigo-600","focus:outline-none",3,"disabled","ngClass"],[3,"color"]],template:function(t,o){1&t&&(e.TgZ(0,"app-modal",0)(1,"p",1),e._uU(2,"Edit Video"),e.qZA(),e.YNc(3,w,3,2,"app-alert",2),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return o.submit()}),e.TgZ(5,"div",4)(6,"label",5),e._uU(7,"Title"),e.qZA(),e._UZ(8,"app-input",6),e.qZA(),e.TgZ(9,"div",7)(10,"button",8),e._uU(11," Update "),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("ngIf",o.showAlert),e.xp6(1),e.Q6J("formGroup",o.editForm),e.xp6(4),e.Q6J("control",o.title),e.xp6(2),e.Q6J("disabled",o.inSubmission)("ngClass",e.WLB(5,E,o.inSubmission,!o.inSubmission)))},dependencies:[F.mk,F.O5,U.z,H.a,J.w,g._Y,g.JL,g.sg]}),r})();const G=function(r){return["/","clip",r]};function T(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"div",10)(1,"a",11),e._UZ(2,"img",12),e.qZA(),e.TgZ(3,"div",13)(4,"a",14),e._uU(5),e.qZA(),e.TgZ(6,"a",15),e.NdJ("click",function(c){const M=e.CHM(t).$implicit,Z=e.oxw();return e.KtG(Z.copyToClipboard(c,M.docID))}),e._uU(7," Copy Link "),e.qZA()(),e.TgZ(8,"div",16)(9,"a",17),e.NdJ("click",function(c){const M=e.CHM(t).$implicit,Z=e.oxw();return e.KtG(Z.openModal(c,M))}),e.TgZ(10,"span",18),e._uU(11,"build"),e.qZA()(),e.TgZ(12,"a",19),e.NdJ("click",function(c){const M=e.CHM(t).$implicit,Z=e.oxw();return e.KtG(Z.deleteClip(c,M))}),e.TgZ(13,"span",18),e._uU(14,"delete"),e.qZA()()()()}if(2&r){const t=a.$implicit;e.xp6(2),e.Q6J("src",t.screenshotURL,e.LSH),e.xp6(2),e.Q6J("routerLink",e.VKq(3,G,t.docID)),e.xp6(1),e.hij(" ",t.title," ")}}let D=(()=>{class r{constructor(t,o,c,b){this.router=t,this.route=o,this.clipService=c,this.modal=b,this.videoOrder="1",this.clips=[],this.activeClip=null,this.sort$=new h.X(this.videoOrder)}ngOnInit(){this.route.queryParams.subscribe(t=>{this.videoOrder="2"==t.sort?t.sort:"1",this.sort$.next(this.videoOrder)}),this.clipService.getUserClips(this.sort$).subscribe(t=>{this.clips=[],t.forEach(o=>{this.clips.push(Object.assign({docID:o.id},o.data()))})})}sort(t){const{value:o}=t.target;this.router.navigate([],{relativeTo:this.route,queryParams:{sort:o}})}openModal(t,o){t.preventDefault(),this.activeClip=o,this.modal.toggleModal("editClip")}update(t){this.clips.forEach((o,c)=>{o.docID==t.docID&&(this.clips[c].title=t.title)})}deleteClip(t,o){t.preventDefault(),this.clipService.deleteClip(o),this.clips.forEach((c,b)=>{c.docID==o.docID&&this.clips.splice(b,1)})}copyToClipboard(t,o){return(0,A.Z)(function*(){if(t.preventDefault(),!o)return;const c=`${location.origin}/clip/${o}`;yield navigator.clipboard.writeText(c),alert("Link Copied!")})()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(x.F0),e.Y36(x.gz),e.Y36(P.Y),e.Y36(R.Z))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-manage"]],decls:13,vars:4,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","justify-between"],["routerLink","/upload",1,"bg-indigo-400","text-white","py-4","px-10","text-xl"],[1,"text-black","px-8","text-xl","outline-none","appearance-none",3,"change"],["value","1",3,"selected"],["value","2",3,"selected"],[1,"container","mx-auto","my-8"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary flex flex-col justify-start",4,"ngFor","ngForOf"],[3,"activeClip","update"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","flex","flex-col","justify-start"],["href","#"],["crossorigin","",1,"card-img-top","rounded-tl-2xl","w-full",3,"src"],[1,"p-6","text-2xl"],[1,"font-bold","mb-2",3,"routerLink"],["href","#",1,"bg-gray-400","text-white","px-2","py-1","ml-2","text-sm","rounded",3,"click"],[1,"flex","text-center","text-2xl","bg-gray-800","p-2","mt-auto"],["href","#",1,"flex-1","p-2","border-right","border-r-2","border-gray-700","transition","hover:text-indigo-400",3,"click"],[1,"material-icons","text-base"],["href","#",1,"flex-1","p-2","rounded-br-2xl","transition","hover:text-indigo-400",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"a",2),e._uU(3," Upload Videos "),e.qZA(),e.TgZ(4,"select",3),e.NdJ("change",function(b){return o.sort(b)}),e.TgZ(5,"option",4),e._uU(6,"Recent Uploads"),e.qZA(),e.TgZ(7,"option",5),e._uU(8,"Oldest Uploads"),e.qZA()()()(),e.TgZ(9,"div",6)(10,"div",7),e.YNc(11,T,15,5,"div",8),e.qZA()(),e.TgZ(12,"app-edit",9),e.NdJ("update",function(b){return o.update(b)}),e.qZA()),2&t&&(e.xp6(5),e.Q6J("selected","1"===o.videoOrder),e.xp6(2),e.Q6J("selected","2"===o.videoOrder),e.xp6(4),e.Q6J("ngForOf",o.clips),e.xp6(1),e.Q6J("activeClip",o.activeClip))},dependencies:[F.sg,x.rH,g.YN,g.Kr,v]}),r})();var k,O=new Uint8Array(16);function j(){if(!k&&!(k=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return k(O)}const $=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var S=[],B=0;B<256;++B)S.push((B+256).toString(16).substr(1));const Q=function ie(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(S[r[a+0]]+S[r[a+1]]+S[r[a+2]]+S[r[a+3]]+"-"+S[r[a+4]]+S[r[a+5]]+"-"+S[r[a+6]]+S[r[a+7]]+"-"+S[r[a+8]]+S[r[a+9]]+"-"+S[r[a+10]]+S[r[a+11]]+S[r[a+12]]+S[r[a+13]]+S[r[a+14]]+S[r[a+15]]).toLowerCase();if(!function I(r){return"string"==typeof r&&$.test(r)}(t))throw TypeError("Stringified UUID is invalid");return t},q=function re(r,a,t){var o=(r=r||{}).random||(r.rng||j)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,a){t=t||0;for(var c=0;c<16;++c)a[t+c]=o[c];return a}return Q(o)};var K=l(7545),X=l(9260),ne=l(3426),i=l(567),n=l(3884),s=l(4941),f=l(260);let p=(()=>{class r{constructor(){this.isRunning=!1,this.isReady=!1,this.ffmpeg=(0,f.createFFmpeg)({log:!0})}init(){var t=this;return(0,A.Z)(function*(){t.isReady||(yield t.ffmpeg.load(),t.isReady=!0)})()}getScreenshots(t){var o=this;return(0,A.Z)(function*(){o.isRunning=!0;const c=yield(0,f.fetchFile)(t);o.ffmpeg.FS("writeFile",t.name,c);const b=[1,2,3],M=[];b.forEach(oe=>{M.push("-i",t.name,"-ss",`00:00:0${oe}`,"-frames:v","1","-filter:v","scale=510:-1",`output_0${oe}.png`)}),yield o.ffmpeg.run(...M);const Z=[];return b.forEach(oe=>{const ee=o.ffmpeg.FS("readFile",`output_0${oe}.png`),te=new Blob([ee.buffer],{type:"image/png"}),z=URL.createObjectURL(te);Z.push(z)}),o.isRunning=!1,Z})()}blobFromURL(t){return(0,A.Z)(function*(){return yield(yield fetch(t)).blob()})()}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),_=(()=>{class r{handleEvent(t){t.preventDefault()}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=e.lG2({type:r,selectors:[["","app-event-blocker",""]],hostBindings:function(t,o){1&t&&e.NdJ("drop",function(b){return o.handleEvent(b)})("dragover",function(b){return o.handleEvent(b)})}}),r})();var u=l(6550);let d=(()=>{class r{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustUrl(t)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.H7,16))},r.\u0275pipe=e.Yjl({name:"safeURL",type:r,pure:!0}),r})();function m(r,a){1&r&&(e.TgZ(0,"span",5),e._uU(1," settings "),e.qZA())}function y(r,a){1&r&&(e.TgZ(0,"span",5),e._uU(1," autorenew "),e.qZA())}const V=function(r){return{"bg-indigo-400 border-indigo-400 border-solid":r}};function N(r,a){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",8),e.NdJ("dragend",function(){e.CHM(t);const c=e.oxw(2);return e.KtG(c.isDragover=!1)})("dragover",function(){e.CHM(t);const c=e.oxw(2);return e.KtG(c.isDragover=!0)})("dragenter",function(){e.CHM(t);const c=e.oxw(2);return e.KtG(c.isDragover=!0)})("dragleave",function(){e.CHM(t);const c=e.oxw(2);return e.KtG(c.isDragover=!1)})("mouseleave",function(){e.CHM(t);const c=e.oxw(2);return e.KtG(c.isDragover=!1)})("drop",function(c){e.CHM(t);const b=e.oxw(2);return e.KtG(b.storeFile(c))}),e.TgZ(2,"h5"),e._uU(3,"Drop your file here (mp4 only!)"),e.qZA(),e.YNc(4,y,2,0,"span",9),e.qZA(),e.TgZ(5,"input",10),e.NdJ("change",function(c){e.CHM(t);const b=e.oxw(2);return e.KtG(b.storeFile(c))}),e.qZA(),e.BQk()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.VKq(2,V,t.isDragover)),e.xp6(3),e.Q6J("ngIf",t.ffmpegService.isRunning)}}function W(r,a){if(1&r&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"percent"),e.qZA()),2&r){const t=e.oxw(4);e.xp6(1),e.Oqu(e.lcZ(2,1,t.percentage))}}function fe(r,a){if(1&r&&(e.TgZ(0,"app-alert",21)(1,"p"),e._uU(2),e.qZA(),e.YNc(3,W,3,3,"p",22),e.qZA()),2&r){const t=e.oxw(3);e.Q6J("color",t.alertColor),e.xp6(2),e.Oqu(t.alertMsg),e.xp6(1),e.Q6J("ngIf",t.showPercentage)}}const de=function(r,a){return{"border-green-400":r,"border-transparation":a}};function ge(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"div",23),e.NdJ("click",function(){const b=e.CHM(t).$implicit,M=e.oxw(3);return e.KtG(M.selectedScreenshot=b)}),e._UZ(1,"img",24),e.ALo(2,"safeURL"),e.qZA()}if(2&r){const t=a.$implicit,o=e.oxw(3);e.Q6J("ngClass",e.WLB(4,de,t===o.selectedScreenshot,t!==o.selectedScreenshot)),e.xp6(1),e.Q6J("src",e.lcZ(2,2,t),e.LSH)}}const me=function(r,a){return{"opacity-50":r,"hover:bg-indigo-700":a}};function he(r,a){if(1&r){const t=e.EpF();e.YNc(0,fe,4,3,"app-alert",11),e.TgZ(1,"form",12),e.NdJ("ngSubmit",function(){e.CHM(t);const c=e.oxw(2);return e.KtG(c.uploadFile())}),e.TgZ(2,"h2",13),e._uU(3,"Select a Thumbnail"),e.qZA(),e.TgZ(4,"div",14),e.YNc(5,ge,3,7,"div",15),e.qZA(),e.TgZ(6,"div",16)(7,"label",17),e._uU(8,"Title"),e.qZA(),e._UZ(9,"app-input",18),e.qZA(),e.TgZ(10,"div",19)(11,"button",20),e._uU(12," Publish "),e.qZA()()()}if(2&r){const t=e.oxw(2);e.Q6J("ngIf",t.showAlert),e.xp6(1),e.Q6J("formGroup",t.uploadForm),e.xp6(4),e.Q6J("ngForOf",t.screenshots),e.xp6(4),e.Q6J("control",t.title),e.xp6(2),e.Q6J("disabled",t.inSubmission)("ngClass",e.WLB(6,me,t.inSubmission,!t.inSubmission))}}function ve(r,a){if(1&r&&(e.YNc(0,N,6,4,"ng-container",6),e.YNc(1,he,13,9,"ng-template",null,7,e.W1O)),2&r){const t=e.MAs(2),o=e.oxw();e.Q6J("ngIf",!o.nextStep)("ngIfElse",t)}}let ye=(()=>{class r{constructor(t,o,c,b,M){this.storage=t,this.auth=o,this.clipsService=c,this.router=b,this.ffmpegService=M,this.isDragover=!1,this.file=null,this.nextStep=!1,this.showAlert=!1,this.alertColor="blue",this.alertMsg="Please wait! Your clip is being uploaded.",this.inSubmission=!1,this.percentage=0,this.showPercentage=!1,this.user=null,this.screenshots=[],this.selectedScreenshot="",this.title=new g.NI("",{validators:[g.kI.required,g.kI.minLength(3)],nonNullable:!0}),this.uploadForm=new g.cw({title:this.title}),o.user.subscribe(Z=>this.user=Z),this.ffmpegService.init()}ngOnDestroy(){var t;null===(t=this.task)||void 0===t||t.cancel()}storeFile(t){var o=this;return(0,A.Z)(function*(){var c,b,M,Z;o.ffmpegService.isRunning||(o.isDragover=!1,o.file=t.dataTransfer?null!==(b=null===(c=t.dataTransfer)||void 0===c?void 0:c.files.item(0))&&void 0!==b?b:null:null!==(Z=null===(M=t.target.files)||void 0===M?void 0:M.item(0))&&void 0!==Z?Z:null,o.file&&"video/mp4"===o.file.type&&(o.screenshots=yield o.ffmpegService.getScreenshots(o.file),o.selectedScreenshot=o.screenshots[0],o.title.setValue(o.file.name.replace(/\.[^/.]+$/,"")),o.nextStep=!0))})()}uploadFile(){var t=this;return(0,A.Z)(function*(){t.uploadForm.disable(),t.showAlert=!0,t.alertColor="blue",t.alertMsg="Please wait! Your clip is being uploaded.",t.inSubmission=!0,t.showPercentage=!0;const o=q(),c=`clips/${o}.mp4`,b=yield t.ffmpegService.blobFromURL(t.selectedScreenshot),M=`screenshots/${o}.png`;t.task=t.storage.upload(c,t.file);const Z=t.storage.ref(c);t.screenshotTask=t.storage.upload(M,b);const oe=t.storage.ref(M);var ee;(0,ne.aj)([t.task.percentageChanges(),t.screenshotTask.percentageChanges()]).subscribe(ee=>{const[te,z]=ee;te&&z&&(t.percentage=(te+z)/200)}),(0,i.D)([t.task.snapshotChanges(),t.screenshotTask.snapshotChanges()]).pipe((0,K.w)(()=>(0,i.D)([Z.getDownloadURL(),oe.getDownloadURL()]))).subscribe({next:(ee=(0,A.Z)(function*(te){var z,se;const[Se,Ue]=te,pe={uid:null===(z=t.user)||void 0===z?void 0:z.uid,displayName:null===(se=t.user)||void 0===se?void 0:se.displayName,title:t.title.value,fileName:`${o}.mp4`,url:Se,screenshotURL:Ue,screenshotFileName:`${o}.png`,timestamp:X.Z.firestore.FieldValue.serverTimestamp()},Ee=yield t.clipsService.createClip(pe);console.log(pe),t.alertColor="green",t.alertMsg="Success! Your clip is now ready to share with the world.",t.showPercentage=!1,setTimeout(()=>{t.router.navigate(["clip",Ee.id])},1e3)}),function(z){return ee.apply(this,arguments)}),error:ee=>{t.uploadForm.enable(),t.alertColor="red",t.alertMsg="Upload failed! Please try again later.",t.inSubmission=!0,t.showPercentage=!1,console.error(ee)}})})()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(n.Q1),e.Y36(s.zQ),e.Y36(P.Y),e.Y36(x.F0),e.Y36(p))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-upload"]],decls:8,vars:2,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-6"],["class","material-icons text-center text-6xl p-8 animate-spin",4,"ngIf","ngIfElse"],["uploadEditorCtr",""],[1,"material-icons","text-center","text-6xl","p-8","animate-spin"],[4,"ngIf","ngIfElse"],["uploadFormCtr",""],["app-event-blocker","",1,"w-full","px-10","py-40","rounded","text-center","cursor-pointer","border","border-dashed","border-gray-400","transition","duration-500","hover:text-white","hover:bg-indigo-400","hover:border-indigo-400","hover:border-solid","text-xl",3,"ngClass","dragend","dragover","dragenter","dragleave","mouseleave","drop"],["class","material-icons text-center text-6xl p-8 animate-spin",4,"ngIf"],["type","file",1,"mt-4",3,"change"],[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-4","text-xl"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","border-8 cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"block","text-xl","mb-4"],["placeholder","Enter Title",3,"control"],[1,"mt-4","text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","rounded-md","text-white","bg-indigo-600","focus:outline-none",3,"disabled","ngClass"],[3,"color"],[4,"ngIf"],[1,"border-8","cursor-pointer",3,"ngClass","click"],[3,"src"]],template:function(t,o){if(1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2),e._uU(3,"Upload Video"),e.qZA(),e.ynx(4),e.YNc(5,m,2,0,"span",3),e.BQk(),e.YNc(6,ve,3,2,"ng-template",null,4,e.W1O),e.qZA()()),2&t){const c=e.MAs(7);e.xp6(5),e.Q6J("ngIf",!o.ffmpegService.isReady)("ngIfElse",c)}},dependencies:[F.mk,F.sg,F.O5,H.a,J.w,_,g._Y,g.JL,g.sg,F.Zx,d]}),r})();var be=l(4843),ae=l(4850),_e=l(2986);const le=(0,ae.U)(r=>!!r);let ce=(()=>{class r{constructor(t,o){this.router=t,this.auth=o,this.canActivate=(c,b)=>{const M=c.data.authGuardPipe||(()=>le);return this.auth.user.pipe((0,_e.q)(1),M(c,b),(0,ae.U)(Z=>"boolean"==typeof Z?Z:Array.isArray(Z)?this.router.createUrlTree(Z):this.router.parseUrl(Z)))}}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(x.F0),e.LFG(s.zQ))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})();const ue=()=>("/",(0,be.z)(le,(0,ae.U)(a=>a||"/"))),Ce=[{path:"manage",component:D,data:{authOnly:!0,authGuardPipe:ue},canActivate:[ce]},{path:"upload",component:ye,data:{authOnly:!0,authGuardPipe:ue},canActivate:[ce]},{path:"manage-clips",redirectTo:"manage"}];let Fe=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[x.Bz.forChild(Ce),x.Bz]}),r})();var Te=l(4466);let Ae=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[F.ez,Fe,Te.m,g.UX]}),r})()},7854:L=>{var C=function(l){"use strict";var h,F=Object.prototype,x=F.hasOwnProperty,A=Object.defineProperty||function(i,n,s){i[n]=s.value},e="function"==typeof Symbol?Symbol:{},P=e.iterator||"@@iterator",R=e.asyncIterator||"@@asyncIterator",g=e.toStringTag||"@@toStringTag";function U(i,n,s){return Object.defineProperty(i,n,{value:s,enumerable:!0,configurable:!0,writable:!0}),i[n]}try{U({},"")}catch{U=function(n,s,f){return n[s]=f}}function H(i,n,s,f){var _=Object.create((n&&n.prototype instanceof D?n:D).prototype),u=new K(f||[]);return A(_,"_invoke",{value:ie(i,s,u)}),_}function J(i,n,s){try{return{type:"normal",arg:i.call(n,s)}}catch(f){return{type:"throw",arg:f}}}l.wrap=H;var w="suspendedStart",E="suspendedYield",v="executing",G="completed",T={};function D(){}function k(){}function O(){}var j={};U(j,P,function(){return this});var $=Object.getPrototypeOf,I=$&&$($(X([])));I&&I!==F&&x.call(I,P)&&(j=I);var Y=O.prototype=D.prototype=Object.create(j);function S(i){["next","throw","return"].forEach(function(n){U(i,n,function(s){return this._invoke(n,s)})})}function B(i,n){function s(_,u,d,m){var y=J(i[_],i,u);if("throw"!==y.type){var V=y.arg,N=V.value;return N&&"object"==typeof N&&x.call(N,"__await")?n.resolve(N.__await).then(function(W){s("next",W,d,m)},function(W){s("throw",W,d,m)}):n.resolve(N).then(function(W){V.value=W,d(V)},function(W){return s("throw",W,d,m)})}m(y.arg)}var f;A(this,"_invoke",{value:function p(_,u){function d(){return new n(function(m,y){s(_,u,m,y)})}return f=f?f.then(d,d):d()}})}function ie(i,n,s){var f=w;return function(_,u){if(f===v)throw new Error("Generator is already running");if(f===G){if("throw"===_)throw u;return ne()}for(s.method=_,s.arg=u;;){var d=s.delegate;if(d){var m=Q(d,s);if(m){if(m===T)continue;return m}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(f===w)throw f=G,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);f=v;var y=J(i,n,s);if("normal"===y.type){if(f=s.done?G:E,y.arg===T)continue;return{value:y.arg,done:s.done}}"throw"===y.type&&(f=G,s.method="throw",s.arg=y.arg)}}}function Q(i,n){var s=n.method,f=i.iterator[s];if(f===h)return n.delegate=null,"throw"===s&&i.iterator.return&&(n.method="return",n.arg=h,Q(i,n),"throw"===n.method)||"return"!==s&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+s+"' method")),T;var p=J(f,i.iterator,n.arg);if("throw"===p.type)return n.method="throw",n.arg=p.arg,n.delegate=null,T;var _=p.arg;return _?_.done?(n[i.resultName]=_.value,n.next=i.nextLoc,"return"!==n.method&&(n.method="next",n.arg=h),n.delegate=null,T):_:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,T)}function re(i){var n={tryLoc:i[0]};1 in i&&(n.catchLoc=i[1]),2 in i&&(n.finallyLoc=i[2],n.afterLoc=i[3]),this.tryEntries.push(n)}function q(i){var n=i.completion||{};n.type="normal",delete n.arg,i.completion=n}function K(i){this.tryEntries=[{tryLoc:"root"}],i.forEach(re,this),this.reset(!0)}function X(i){if(i){var n=i[P];if(n)return n.call(i);if("function"==typeof i.next)return i;if(!isNaN(i.length)){var s=-1,f=function p(){for(;++s<i.length;)if(x.call(i,s))return p.value=i[s],p.done=!1,p;return p.value=h,p.done=!0,p};return f.next=f}}return{next:ne}}function ne(){return{value:h,done:!0}}return k.prototype=O,A(Y,"constructor",{value:O,configurable:!0}),A(O,"constructor",{value:k,configurable:!0}),k.displayName=U(O,g,"GeneratorFunction"),l.isGeneratorFunction=function(i){var n="function"==typeof i&&i.constructor;return!!n&&(n===k||"GeneratorFunction"===(n.displayName||n.name))},l.mark=function(i){return Object.setPrototypeOf?Object.setPrototypeOf(i,O):(i.__proto__=O,U(i,g,"GeneratorFunction")),i.prototype=Object.create(Y),i},l.awrap=function(i){return{__await:i}},S(B.prototype),U(B.prototype,R,function(){return this}),l.AsyncIterator=B,l.async=function(i,n,s,f,p){void 0===p&&(p=Promise);var _=new B(H(i,n,s,f),p);return l.isGeneratorFunction(n)?_:_.next().then(function(u){return u.done?u.value:_.next()})},S(Y),U(Y,g,"Generator"),U(Y,P,function(){return this}),U(Y,"toString",function(){return"[object Generator]"}),l.keys=function(i){var n=Object(i),s=[];for(var f in n)s.push(f);return s.reverse(),function p(){for(;s.length;){var _=s.pop();if(_ in n)return p.value=_,p.done=!1,p}return p.done=!0,p}},l.values=X,K.prototype={constructor:K,reset:function(i){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(q),!i)for(var n in this)"t"===n.charAt(0)&&x.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=h)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(i){if(this.done)throw i;var n=this;function s(m,y){return _.type="throw",_.arg=i,n.next=m,y&&(n.method="next",n.arg=h),!!y}for(var f=this.tryEntries.length-1;f>=0;--f){var p=this.tryEntries[f],_=p.completion;if("root"===p.tryLoc)return s("end");if(p.tryLoc<=this.prev){var u=x.call(p,"catchLoc"),d=x.call(p,"finallyLoc");if(u&&d){if(this.prev<p.catchLoc)return s(p.catchLoc,!0);if(this.prev<p.finallyLoc)return s(p.finallyLoc)}else if(u){if(this.prev<p.catchLoc)return s(p.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<p.finallyLoc)return s(p.finallyLoc)}}}},abrupt:function(i,n){for(var s=this.tryEntries.length-1;s>=0;--s){var f=this.tryEntries[s];if(f.tryLoc<=this.prev&&x.call(f,"finallyLoc")&&this.prev<f.finallyLoc){var p=f;break}}p&&("break"===i||"continue"===i)&&p.tryLoc<=n&&n<=p.finallyLoc&&(p=null);var _=p?p.completion:{};return _.type=i,_.arg=n,p?(this.method="next",this.next=p.finallyLoc,T):this.complete(_)},complete:function(i,n){if("throw"===i.type)throw i.arg;return"break"===i.type||"continue"===i.type?this.next=i.arg:"return"===i.type?(this.rval=this.arg=i.arg,this.method="return",this.next="end"):"normal"===i.type&&n&&(this.next=n),T},finish:function(i){for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n];if(s.finallyLoc===i)return this.complete(s.completion,s.afterLoc),q(s),T}},catch:function(i){for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n];if(s.tryLoc===i){var f=s.completion;if("throw"===f.type){var p=f.arg;q(s)}return p}}throw new Error("illegal catch attempt")},delegateYield:function(i,n,s){return this.delegate={iterator:X(i),resultName:n,nextLoc:s},"next"===this.method&&(this.arg=h),T}},l}(L.exports);try{regeneratorRuntime=C}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=C:Function("r","regeneratorRuntime = r")(C)}},7156:L=>{function C(F,x,A,h,e,P,R){try{var g=F[P](R),U=g.value}catch(H){return void A(H)}g.done?x(U):Promise.resolve(U).then(h,e)}L.exports=function l(F){return function(){var x=this,A=arguments;return new Promise(function(h,e){var P=F.apply(x,A);function R(U){C(P,h,e,R,g,"next",U)}function g(U){C(P,h,e,R,g,"throw",U)}R(void 0)})}},L.exports.__esModule=!0,L.exports.default=L.exports},3681:L=>{"use strict";L.exports=JSON.parse('{"name":"@ffmpeg/ffmpeg","version":"0.11.6","description":"FFmpeg WebAssembly version","main":"src/index.js","types":"src/index.d.ts","directories":{"example":"examples"},"scripts":{"start":"node scripts/server.js","start:worker":"node scripts/worker-server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","build:worker":"rimraf dist && webpack --config scripts/webpack.config.worker.prod.js","prepublishOnly":"npm run build","lint":"eslint src","wait":"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:node":"node node_modules/mocha/bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html"},"browser":{"./src/node/index.js":"./src/browser/index.js"},"repository":{"type":"git","url":"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},"keywords":["ffmpeg","WebAssembly","video"],"author":"Jerome Wu <jeromewus@gmail.com>","license":"MIT","bugs":{"url":"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},"engines":{"node":">=12.16.1"},"homepage":"https://github.com/ffmpegwasm/ffmpeg.wasm#readme","dependencies":{"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},"devDependencies":{"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.11.0","@types/emscripten":"^1.39.4","babel-eslint":"^10.1.0","babel-loader":"^8.1.0","chai":"^4.2.0","cors":"^2.8.5","eslint":"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1","express":"^4.17.1","mocha":"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.3.0","webpack":"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"}}')}}]);