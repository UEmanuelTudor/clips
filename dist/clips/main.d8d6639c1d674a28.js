(self.webpackChunkclips=self.webpackChunkclips||[]).push([[179],{6217:(en,ut,X)=>{"use strict";X.d(ut,{nm:()=>mo});var E=X(8405);X(6547),X(259);var ge=X(5861),re=X(6881),Ct=X(4859),bt=X(2090),st=X(1877);const Y=new Map,Te={activated:!1,tokenObservers:[]},Xe={initialized:!1,enabled:!1};function ot(vt){return Y.get(vt)||Object.assign({},Te)}function xt(){return Xe}const Wt="https://content-firebaseappcheck.googleapis.com/v1",vn="exchangeDebugToken",an={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Vt{constructor(ft,At,un,kn,Gn){if(this.operation=ft,this.retryPolicy=At,this.getWaitDuration=un,this.lowerBound=kn,this.upperBound=Gn,this.pending=null,this.nextErrorWaitInterval=kn,kn>Gn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(ft){var At=this;return(0,ge.Z)(function*(){At.stop();try{At.pending=new bt.BH,yield function qt(vt){return new Promise(ft=>{setTimeout(ft,vt)})}(At.getNextRun(ft)),At.pending.resolve(),yield At.pending.promise,At.pending=new bt.BH,yield At.operation(),At.pending.resolve(),yield At.pending.promise,At.process(!0).catch(()=>{})}catch(un){At.retryPolicy(un)?At.process(!1).catch(()=>{}):At.stop()}})()}getNextRun(ft){if(ft)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const At=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),At}}}const on=new bt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function kr(){return(kr=(0,ge.Z)(function*({url:vt,body:ft},At){const un={"Content-Type":"application/json"},kn=At.getImmediate({optional:!0});if(kn){const Ci=yield kn.getHeartbeatsHeader();Ci&&(un["X-Firebase-Client"]=Ci)}const Gn={method:"POST",body:JSON.stringify(ft),headers:un};let cn,$n;try{cn=yield fetch(vt,Gn)}catch(Ci){throw on.create("fetch-network-error",{originalErrorMessage:Ci?.message})}if(200!==cn.status)throw on.create("fetch-status-error",{httpStatus:cn.status});try{$n=yield cn.json()}catch(Ci){throw on.create("fetch-parse-error",{originalErrorMessage:Ci?.message})}const fr=$n.ttl.match(/^([\d.]+)(s)$/);if(!fr||!fr[2]||isNaN(Number(fr[1])))throw on.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${$n.ttl}`});const Er=1e3*Number(fr[1]),$r=Date.now();return{token:$n.token,expireTimeMillis:$r+Er,issuedAtTimeMillis:$r}})).apply(this,arguments)}const Tr="firebase-app-check-database",Rr=1,ir="firebase-app-check-store";let oi=null;function Ei(){return(Ei=(0,ge.Z)(function*(vt,ft){const un=(yield function _r(){return oi||(oi=new Promise((vt,ft)=>{try{const At=indexedDB.open(Tr,Rr);At.onsuccess=un=>{vt(un.target.result)},At.onerror=un=>{var kn;ft(on.create("storage-open",{originalErrorMessage:null===(kn=un.target.error)||void 0===kn?void 0:kn.message}))},At.onupgradeneeded=un=>{0===un.oldVersion&&un.target.result.createObjectStore(ir,{keyPath:"compositeKey"})}}catch(At){ft(on.create("storage-open",{originalErrorMessage:At?.message}))}}),oi)}()).transaction(ir,"readwrite"),Gn=un.objectStore(ir).put({compositeKey:vt,value:ft});return new Promise((cn,$n)=>{Gn.onsuccess=fr=>{cn()},un.onerror=fr=>{var Er;$n(on.create("storage-set",{originalErrorMessage:null===(Er=fr.target.error)||void 0===Er?void 0:Er.message}))}})})).apply(this,arguments)}const Sr=new st.Yd("@firebase/app-check");function ms(vt,ft){return(0,bt.hl)()?function sr(vt,ft){return function Rn(vt,ft){return Ei.apply(this,arguments)}(function cs(vt){return`${vt.options.appId}-${vt.name}`}(vt),ft)}(vt,ft).catch(At=>{Sr.warn(`Failed to write token to IndexedDB. Error: ${At}`)}):Promise.resolve()}function Hr(){return(Hr=(0,ge.Z)(function*(){const vt=xt();if(vt.enabled&&vt.token)return vt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const $i={error:"UNKNOWN_ERROR"};function Zi(vt){return bt.US.encodeString(JSON.stringify(vt),!1)}function Ar(vt){return ni.apply(this,arguments)}function ni(){return(ni=(0,ge.Z)(function*(vt,ft=!1){const At=vt.app;!function Nn(vt){if(!ot(vt).activated)throw on.create("use-before-activation",{appName:vt.name})}(At);const un=ot(At);let Gn,kn=un.token;if(kn&&!Oe(kn)&&(un.token=void 0,kn=void 0),!kn){const fr=yield un.cachedTokenPromise;fr&&(Oe(fr)?kn=fr:yield ms(At,void 0))}if(!ft&&kn&&Oe(kn))return{token:kn.token};let $n,cn=!1;if(function Li(){return xt().enabled}()){un.exchangeTokenPromise||(un.exchangeTokenPromise=function xr(vt,ft){return kr.apply(this,arguments)}(function In(vt,ft){const{projectId:At,appId:un,apiKey:kn}=vt.options;return{url:`${Wt}/projects/${At}/apps/${un}:${vn}?key=${kn}`,body:{debug_token:ft}}}(At,yield function Si(){return Hr.apply(this,arguments)}()),vt.heartbeatServiceProvider).finally(()=>{un.exchangeTokenPromise=void 0}),cn=!0);const fr=yield un.exchangeTokenPromise;return yield ms(At,fr),un.token=fr,{token:fr.token}}try{un.exchangeTokenPromise||(un.exchangeTokenPromise=un.provider.getToken().finally(()=>{un.exchangeTokenPromise=void 0}),cn=!0),kn=yield ot(At).exchangeTokenPromise}catch(fr){"appCheck/throttled"===fr.code?Sr.warn(fr.message):Sr.error(fr),Gn=fr}return kn?Gn?$n=Oe(kn)?{token:kn.token,internalError:Gn}:gt(Gn):($n={token:kn.token},un.token=kn,yield ms(At,kn)):$n=gt(Gn),cn&&function be(vt,ft){const At=ot(vt).tokenObservers;for(const un of At)try{"EXTERNAL"===un.type&&null!=ft.error?un.error(ft.error):un.next(ft)}catch{}}(At,$n),$n})).apply(this,arguments)}function tt(vt,ft){const At=ot(vt),un=At.tokenObservers.filter(kn=>kn.next!==ft);0===un.length&&At.tokenRefresher&&At.tokenRefresher.isRunning()&&At.tokenRefresher.stop(),At.tokenObservers=un}function ve(vt){const{app:ft}=vt,At=ot(ft);let un=At.tokenRefresher;un||(un=function Ce(vt){const{app:ft}=vt;return new Vt((0,ge.Z)(function*(){let un;if(un=ot(ft).token?yield Ar(vt,!0):yield Ar(vt),un.error)throw un.error;if(un.internalError)throw un.internalError}),()=>!0,()=>{const At=ot(ft);if(At.token){let un=At.token.issuedAtTimeMillis+.5*(At.token.expireTimeMillis-At.token.issuedAtTimeMillis)+3e5;return un=Math.min(un,At.token.expireTimeMillis-3e5),Math.max(0,un-Date.now())}return 0},an.RETRIAL_MIN_WAIT,an.RETRIAL_MAX_WAIT)}(vt),At.tokenRefresher=un),!un.isRunning()&&At.isTokenAutoRefreshEnabled&&un.start()}function Oe(vt){return vt.expireTimeMillis-Date.now()>0}function gt(vt){return{token:Zi($i),error:vt}}class nn{constructor(ft,At){this.app=ft,this.heartbeatServiceProvider=At}_delete(){const{tokenObservers:ft}=ot(this.app);for(const At of ft)tt(this.app,At.next);return Promise.resolve()}}const Ra="app-check-internal";!function so(){(0,re._registerComponent)(new Ct.wA("app-check",vt=>function gn(vt,ft){return new nn(vt,ft)}(vt.getProvider("app").getImmediate(),vt.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((vt,ft,At)=>{vt.getProvider(Ra).initialize()})),(0,re._registerComponent)(new Ct.wA(Ra,vt=>function me(vt){return{getToken:ft=>Ar(vt,ft),addTokenListener:ft=>function Vs(vt,ft,At,un){const{app:kn}=vt,Gn=ot(kn);if(Gn.tokenObservers=[...Gn.tokenObservers,{next:At,error:un,type:ft}],Gn.token&&Oe(Gn.token)){const $n=Gn.token;Promise.resolve().then(()=>{At({token:$n.token}),ve(vt)}).catch(()=>{})}Gn.cachedTokenPromise.then(()=>ve(vt))}(vt,"INTERNAL",ft),removeTokenListener:ft=>tt(vt.app,ft)}}(vt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,re.registerVersion)("@firebase/app-check","0.7.0")}();class mo{constructor(){return(0,E.vb)("app-check")}}typeof window<"u"&&window},4941:(en,ut,X)=>{"use strict";X.d(ut,{zQ:()=>vn,ww:()=>an,rT:()=>xt,f7:()=>Sn,L6:()=>ot,_Q:()=>Rt,lh:()=>Wt,Qv:()=>Xe,nw:()=>Yt});var E=X(6547),N=X(8929),fe=X(1086),Be=X(6498),_e=X(5254),xe=X(6787),He=X(7770),Re=X(7545),Ue=X(4850),ye=X(341),Ae=X(2654),Fe=X(5279),rt=X(5283);class ce extends N.xQ{constructor(Vt=Number.POSITIVE_INFINITY,qt=Number.POSITIVE_INFINITY,En){super(),this.scheduler=En,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=Vt<1?1:Vt,this._windowTime=qt<1?1:qt,qt===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(Vt){if(!this.isStopped){const qt=this._events;qt.push(Vt),qt.length>this._bufferSize&&qt.shift()}super.next(Vt)}nextTimeWindow(Vt){this.isStopped||(this._events.push(new wt(this._getNow(),Vt)),this._trimBufferThenGetEvents()),super.next(Vt)}_subscribe(Vt){const qt=this._infiniteTimeWindow,En=qt?this._events:this._trimBufferThenGetEvents(),on=this.scheduler,Jt=En.length;let Nn;if(this.closed)throw new Fe.N;if(this.isStopped||this.hasError?Nn=Ae.w.EMPTY:(this.observers.push(Vt),Nn=new rt.W(this,Vt)),on&&Vt.add(Vt=new He.ht(Vt,on)),qt)for(let Cn=0;Cn<Jt&&!Vt.closed;Cn++)Vt.next(En[Cn]);else for(let Cn=0;Cn<Jt&&!Vt.closed;Cn++)Vt.next(En[Cn].value);return this.hasError?Vt.error(this.thrownError):this.isStopped&&Vt.complete(),Nn}_getNow(){return(this.scheduler||ye.c).now()}_trimBufferThenGetEvents(){const Vt=this._getNow(),qt=this._bufferSize,En=this._windowTime,on=this._events,Jt=on.length;let Nn=0;for(;Nn<Jt&&!(Vt-on[Nn].time<En);)Nn++;return Jt>qt&&(Nn=Math.max(Nn,Jt-qt)),Nn>0&&on.splice(0,Nn),on}}class wt{constructor(Vt,qt){this.time=Vt,this.value=qt}}function Ye(Ut,Vt,qt){let En;return En=Ut&&"object"==typeof Ut?Ut:{bufferSize:Ut,windowTime:Vt,refCount:!1,scheduler:qt},on=>on.lift(function Ke({bufferSize:Ut=Number.POSITIVE_INFINITY,windowTime:Vt=Number.POSITIVE_INFINITY,refCount:qt,scheduler:En}){let on,Nn,Jt=0,Cn=!1,pr=!1;return function(kr){let On;Jt++,!on||Cn?(Cn=!1,on=new ce(Ut,Vt,En),On=on.subscribe(this),Nn=kr.subscribe({next(Ai){on.next(Ai)},error(Ai){Cn=!0,on.error(Ai)},complete(){pr=!0,Nn=void 0,on.complete()}}),pr&&(Nn=void 0)):On=on.subscribe(this),this.add(()=>{Jt--,On.unsubscribe(),On=void 0,Nn&&!pr&&qt&&0===Jt&&(Nn.unsubscribe(),Nn=void 0,on=void 0)})}}(En))}var Ze=X(7224);function lt(Ut,Vt){return Vt?(0,Re.w)(()=>Ut,Vt):(0,Re.w)(()=>Ut)}var q=X(8915),ge=X(2198),re=X(8405),Ct=X(2011),bt=X(4755),st=X(6217),Y=X(9260);const Xe=new E.OlP("angularfire2.auth.use-emulator"),ot=new E.OlP("angularfire2.auth.settings"),Rt=new E.OlP("angularfire2.auth.tenant-id"),xt=new E.OlP("angularfire2.auth.langugage-code"),Wt=new E.OlP("angularfire2.auth.use-device-language"),Sn=new E.OlP("angularfire.auth.persistence"),Yt=(Ut,Vt,qt,En,on,Jt,Nn,Cn)=>(0,Ct.cc)(`${Ut.name}.auth`,"AngularFireAuth",Ut.name,()=>{const pr=Vt.runOutsideAngular(()=>Ut.auth());if(qt&&pr.useEmulator(...qt),En&&(pr.tenantId=En),pr.languageCode=on,Jt&&pr.useDeviceLanguage(),Nn)for(const[xr,kr]of Object.entries(Nn))pr.settings[xr]=kr;return Cn&&pr.setPersistence(Cn),pr},[qt,En,on,Jt,Nn,Cn]);let vn=(()=>{class Ut{constructor(qt,En,on,Jt,Nn,Cn,pr,xr,kr,On,Ai,In){const Tr=new N.xQ,Rr=(0,fe.of)(void 0).pipe((0,He.QV)(Nn.outsideAngular),(0,Re.w)(()=>Jt.runOutsideAngular(()=>Promise.resolve().then(X.bind(X,8073)))),(0,Ue.U)(()=>(0,Ct.on)(qt,Jt,En)),(0,Ue.U)(ir=>Yt(ir,Jt,Cn,xr,kr,On,pr,Ai)),Ye({bufferSize:1,refCount:!1}));if((0,bt.PM)(on))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,fe.of)(null);else{Rr.pipe((0,Ze.P)()).subscribe();const Pi=Rr.pipe((0,Re.w)(Ht=>Ht.getRedirectResult().then(sr=>sr,()=>null)),re.iC,Ye({bufferSize:1,refCount:!1})),oi=Rr.pipe((0,Re.w)(Ht=>new Be.y(sr=>({unsubscribe:Jt.runOutsideAngular(()=>Ht.onAuthStateChanged(Hn=>sr.next(Hn),Hn=>sr.error(Hn),()=>sr.complete()))})))),_r=Rr.pipe((0,Re.w)(Ht=>new Be.y(sr=>({unsubscribe:Jt.runOutsideAngular(()=>Ht.onIdTokenChanged(Hn=>sr.next(Hn),Hn=>sr.error(Hn),()=>sr.complete()))}))));this.authState=Pi.pipe(lt(oi),(0,q.R)(Nn.outsideAngular),(0,He.QV)(Nn.insideAngular)),this.user=Pi.pipe(lt(_r),(0,q.R)(Nn.outsideAngular),(0,He.QV)(Nn.insideAngular)),this.idToken=this.user.pipe((0,Re.w)(Ht=>Ht?(0,_e.D)(Ht.getIdToken()):(0,fe.of)(null))),this.idTokenResult=this.user.pipe((0,Re.w)(Ht=>Ht?(0,_e.D)(Ht.getIdTokenResult()):(0,fe.of)(null))),this.credential=(0,xe.T)(Pi,Tr,this.authState.pipe((0,ge.h)(Ht=>!Ht))).pipe((0,Ue.U)(Ht=>Ht?.user?Ht:null),(0,q.R)(Nn.outsideAngular),(0,He.QV)(Nn.insideAngular))}return(0,Ct.pX)(this,Rr,Jt,{spy:{apply:(ir,Pi,oi)=>{(ir.startsWith("signIn")||ir.startsWith("createUser"))&&oi.then(_r=>Tr.next(_r))}}})}}return Ut.\u0275fac=function(qt){return new(qt||Ut)(E.LFG(Ct.Dh),E.LFG(Ct.xv,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(re.HU),E.LFG(Xe,8),E.LFG(ot,8),E.LFG(Rt,8),E.LFG(xt,8),E.LFG(Wt,8),E.LFG(Sn,8),E.LFG(st.nm,8))},Ut.\u0275prov=E.Yz7({token:Ut,factory:Ut.\u0275fac,providedIn:"any"}),Ut})(),an=(()=>{class Ut{constructor(){Y.Z.registerVersion("angularfire",re.q4.full,"auth-compat")}}return Ut.\u0275fac=function(qt){return new(qt||Ut)},Ut.\u0275mod=E.oAB({type:Ut}),Ut.\u0275inj=E.cJS({providers:[vn]}),Ut})()},1:(en,ut,X)=>{"use strict";X.d(ut,{ST:()=>at,yb:()=>mt});var E=X(6547),N=X(353),fe=X(6498),Be=X(5254),_e=X(1086),xe=X(8405),He=X(1059),Re=X(3489);function Ue(){return i=>i.lift(new ye)}class ye{call(e,t){return t.subscribe(new Ae(e))}}class Ae extends Re.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var Fe=X(4850),rt=X(2014);class wt{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Ye(e,this.compare,this.keySelector))}}class Ye extends Re.L{constructor(e,t,c){super(e),this.keySelector=c,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:f}=this;t=f?f(e):e}catch(f){return this.destination.error(f)}let c=!1;if(this.hasKey)try{const{compare:f}=this;c=f(this.key,t)}catch(f){return this.destination.error(f)}else this.hasKey=!0;c||(this.key=t,this.destination.next(e))}}var ot,Ke=X(2198),Ze=X(2011),lt=X(4755),ge=(X(8073),X(3942)),re=X(5861),Ct=X(6881),bt=X(4859),st=X(1877),Y=X(2090),Te=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xe={},Rt=Rt||{},xt=Te||self;function Wt(){}function Sn(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Yt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var an="closure_uid_"+(1e9*Math.random()>>>0),Ut=0;function Vt(i,e,t){return i.call.apply(i.bind,arguments)}function qt(i,e,t){if(!i)throw Error();if(2<arguments.length){var c=Array.prototype.slice.call(arguments,2);return function(){var f=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(f,c),i.apply(e,f)}}return function(){return i.apply(e,arguments)}}function En(i,e,t){return(En=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Vt:qt).apply(null,arguments)}function on(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var c=t.slice();return c.push.apply(c,arguments),i.apply(this,c)}}function Jt(i,e){function t(){}t.prototype=e.prototype,i.$=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.ac=function(c,f,y){for(var S=Array(arguments.length-2),L=2;L<arguments.length;L++)S[L-2]=arguments[L];return e.prototype[f].apply(c,S)}}function Nn(){this.s=this.s,this.o=this.o}Nn.prototype.s=!1,Nn.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function vn(i){Object.prototype.hasOwnProperty.call(i,an)&&i[an]||(i[an]=++Ut)}(this)},Nn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const pr=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function xr(i){const e=i.length;if(0<e){const t=Array(e);for(let c=0;c<e;c++)t[c]=i[c];return t}return[]}function kr(i,e){for(let t=1;t<arguments.length;t++){const c=arguments[t];if(Sn(c)){const f=i.length||0,y=c.length||0;i.length=f+y;for(let S=0;S<y;S++)i[f+S]=c[S]}else i.push(c)}}function On(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}On.prototype.h=function(){this.defaultPrevented=!0};var Ai=function(){if(!xt.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{xt.addEventListener("test",Wt,e),xt.removeEventListener("test",Wt,e)}catch{}return i}();function In(i){return/^[\s\xa0]*$/.test(i)}var Tr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Rr(i,e){return i<e?-1:i>e?1:0}function ir(){var i=xt.navigator;return i&&(i=i.userAgent)?i:""}function Pi(i){return-1!=ir().indexOf(i)}function oi(i){return oi[" "](i),i}function _r(i,e,t){return Object.prototype.hasOwnProperty.call(i,e)?i[e]:i[e]=t(e)}oi[" "]=Wt;var Oi,i,Ht=Pi("Opera"),sr=Pi("Trident")||Pi("MSIE"),Hn=Pi("Edge"),tn=Hn||sr,Rn=Pi("Gecko")&&!(-1!=ir().toLowerCase().indexOf("webkit")&&!Pi("Edge"))&&!(Pi("Trident")||Pi("MSIE"))&&!Pi("Edge"),Ei=-1!=ir().toLowerCase().indexOf("webkit")&&!Pi("Edge");function ai(){var i=xt.document;return i?i.documentMode:void 0}e:{var cs="",Sr=(i=ir(),Rn?/rv:([^\);]+)(\)|;)/.exec(i):Hn?/Edge\/([\d\.]+)/.exec(i):sr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Ei?/WebKit\/(\S+)/.exec(i):Ht?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Sr&&(cs=Sr?Sr[1]:""),sr){var fo=ai();if(null!=fo&&fo>parseFloat(cs)){Oi=String(fo);break e}}Oi=cs}var Kr={},Li=xt.document&&sr&&(ai()||parseInt(Oi,10))||void 0;function Si(i,e){if(On.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,c=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Rn){e:{try{oi(e.nodeName);var f=!0;break e}catch{}f=!1}f||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,c?(this.clientX=void 0!==c.clientX?c.clientX:c.pageX,this.clientY=void 0!==c.clientY?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Hr[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Si.$.h.call(this)}}Jt(Si,On);var Hr={2:"touch",3:"pen",4:"mouse"};Si.prototype.h=function(){Si.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Mn="closure_listenable_"+(1e6*Math.random()|0),$i=0;function Zi(i,e,t,c,f){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!c,this.la=f,this.key=++$i,this.fa=this.ia=!1}function Ar(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function ni(i,e,t){for(const c in i)e.call(t,i[c],c,i)}function ds(i){const e={};for(const t in i)e[t]=i[t];return e}const Zr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vs(i,e){let t,c;for(let f=1;f<arguments.length;f++){for(t in c=arguments[f],c)i[t]=c[t];for(let y=0;y<Zr.length;y++)t=Zr[y],Object.prototype.hasOwnProperty.call(c,t)&&(i[t]=c[t])}}function tt(i){this.src=i,this.g={},this.h=0}function ve(i,e){var t=e.type;if(t in i.g){var y,c=i.g[t],f=pr(c,e);(y=0<=f)&&Array.prototype.splice.call(c,f,1),y&&(Ar(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Ce(i,e,t,c){for(var f=0;f<i.length;++f){var y=i[f];if(!y.fa&&y.listener==e&&y.capture==!!t&&y.la==c)return f}return-1}tt.prototype.add=function(i,e,t,c,f){var y=i.toString();(i=this.g[y])||(i=this.g[y]=[],this.h++);var S=Ce(i,e,c,f);return-1<S?(e=i[S],t||(e.ia=!1)):((e=new Zi(e,this.src,y,!!c,f)).ia=t,i.push(e)),e};var be="closure_lm_"+(1e6*Math.random()|0),Oe={};function gt(i,e,t,c,f){if(c&&c.once)return me(i,e,t,c,f);if(Array.isArray(e)){for(var y=0;y<e.length;y++)gt(i,e[y],t,c,f);return null}return t=ii(t),i&&i[Mn]?i.O(e,t,Yt(c)?!!c.capture:!!c,f):nn(i,e,t,!1,c,f)}function nn(i,e,t,c,f,y){if(!e)throw Error("Invalid event type");var S=Yt(f)?!!f.capture:!!f,L=ar(i);if(L||(i[be]=L=new tt(i)),(t=L.add(e,t,c,S,y)).proxy)return t;if(c=function gn(){const e=Gt;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=c,c.src=i,c.listener=t,i.addEventListener)Ai||(f=S),void 0===f&&(f=!1),i.addEventListener(e.toString(),c,f);else if(i.attachEvent)i.attachEvent(ct(e.toString()),c);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(c)}return t}function me(i,e,t,c,f){if(Array.isArray(e)){for(var y=0;y<e.length;y++)me(i,e[y],t,c,f);return null}return t=ii(t),i&&i[Mn]?i.P(e,t,Yt(c)?!!c.capture:!!c,f):nn(i,e,t,!0,c,f)}function Ee(i,e,t,c,f){if(Array.isArray(e))for(var y=0;y<e.length;y++)Ee(i,e[y],t,c,f);else c=Yt(c)?!!c.capture:!!c,t=ii(t),i&&i[Mn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Ce(y=i.g[e],t,c,f))&&(Ar(y[t]),Array.prototype.splice.call(y,t,1),0==y.length&&(delete i.g[e],i.h--))):i&&(i=ar(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Ce(e,t,c,f)),(t=-1<i?e[i]:null)&&qe(t))}function qe(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[Mn])ve(e.i,i);else{var t=i.type,c=i.proxy;e.removeEventListener?e.removeEventListener(t,c,i.capture):e.detachEvent?e.detachEvent(ct(t),c):e.addListener&&e.removeListener&&e.removeListener(c),(t=ar(e))?(ve(t,i),0==t.h&&(t.src=null,e[be]=null)):Ar(i)}}}function ct(i){return i in Oe?Oe[i]:Oe[i]="on"+i}function Gt(i,e){if(i.fa)i=!0;else{e=new Si(e,this);var t=i.listener,c=i.la||i.src;i.ia&&qe(i),i=t.call(c,e)}return i}function ar(i){return(i=i[be])instanceof tt?i:null}var Nr="__closure_events_fn_"+(1e9*Math.random()>>>0);function ii(i){return"function"==typeof i?i:(i[Nr]||(i[Nr]=function(e){return i.handleEvent(e)}),i[Nr])}function Dt(){Nn.call(this),this.i=new tt(this),this.S=this,this.J=null}function yt(i,e){var t,c=i.J;if(c)for(t=[];c;c=c.J)t.push(c);if(i=i.S,c=e.type||e,"string"==typeof e)e=new On(e,i);else if(e instanceof On)e.target=e.target||i;else{var f=e;Vs(e=new On(c,i),f)}if(f=!0,t)for(var y=t.length-1;0<=y;y--){var S=e.g=t[y];f=Kt(S,c,!0,e)&&f}if(f=Kt(S=e.g=i,c,!0,e)&&f,f=Kt(S,c,!1,e)&&f,t)for(y=0;y<t.length;y++)f=Kt(S=e.g=t[y],c,!1,e)&&f}function Kt(i,e,t,c){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var f=!0,y=0;y<e.length;++y){var S=e[y];if(S&&!S.fa&&S.capture==t){var L=S.listener,J=S.la||S.src;S.ia&&ve(i.i,S),f=!1!==L.call(J,c)&&f}}return f&&!c.defaultPrevented}Jt(Dt,Nn),Dt.prototype[Mn]=!0,Dt.prototype.removeEventListener=function(i,e,t,c){Ee(this,i,e,t,c)},Dt.prototype.N=function(){if(Dt.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],c=0;c<t.length;c++)Ar(t[c]);delete i.g[e],i.h--}}this.J=null},Dt.prototype.O=function(i,e,t,c){return this.i.add(String(i),e,!1,t,c)},Dt.prototype.P=function(i,e,t,c){return this.i.add(String(i),e,!0,t,c)};var er=xt.JSON.stringify;function Qn(){var i=go;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Ji,yr=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Fr,i=>i.reset());class Fr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function si(i){xt.setTimeout(()=>{throw i},0)}function Yr(i,e){Ji||function Fi(){var i=xt.Promise.resolve(void 0);Ji=function(){i.then(Fs)}}(),po||(Ji(),po=!0),go.add(i,e)}var po=!1,go=new class cr{constructor(){this.h=this.g=null}add(e,t){const c=yr.get();c.set(e,t),this.h?this.h.next=c:this.g=c,this.h=c}};function Fs(){for(var i;i=Qn();){try{i.h.call(i.g)}catch(t){si(t)}var e=yr;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}po=!1}function Zs(i,e){Dt.call(this),this.h=i||1,this.g=e||xt,this.j=En(this.qb,this),this.l=Date.now()}function Oa(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function Hs(i,e,t){if("function"==typeof i)t&&(i=En(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=En(i.handleEvent,i)}return 2147483647<Number(e)?-1:xt.setTimeout(i,e||0)}function Lo(i){i.g=Hs(()=>{i.g=null,i.i&&(i.i=!1,Lo(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Jt(Zs,Dt),(ot=Zs.prototype).ga=!1,ot.T=null,ot.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),yt(this,"tick"),this.ga&&(Oa(this),this.start()))}},ot.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.N=function(){Zs.$.N.call(this),Oa(this),delete this.g};class Ra extends Nn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Lo(this)}N(){super.N(),this.g&&(xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function so(i){Nn.call(this),this.h=i,this.g={}}Jt(so,Nn);var $s=[];function sa(i,e,t,c){Array.isArray(t)||(t&&($s[0]=t.toString()),t=$s);for(var f=0;f<t.length;f++){var y=gt(e,t[f],c||i.handleEvent,!1,i.h||i);if(!y)break;i.g[y.key]=y}}function mo(i){ni(i.g,function(e,t){this.g.hasOwnProperty(t)&&qe(e)},i),i.g={}}function Wi(){this.g=!0}function es(i,e,t,c){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Wa(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var c=t[i];if(!(2>c.length)){var f=c[1];if(Array.isArray(f)&&!(1>f.length)){var y=f[0];if("noop"!=y&&"stop"!=y&&"close"!=y)for(var S=1;S<f.length;S++)f[S]=""}}}return er(t)}catch{return e}}(i,t)+(c?" "+c:"")})}so.prototype.N=function(){so.$.N.call(this),mo(this)},so.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wi.prototype.Ea=function(){this.g=!1},Wi.prototype.info=function(){};var Gs={},mu=null;function ba(){return mu=mu||new Dt}function Is(i){On.call(this,Gs.Ta,i)}function wr(i){const e=ba();yt(e,new Is(e))}function gi(i,e){On.call(this,Gs.STAT_EVENT,i),this.stat=e}function wi(i){const e=ba();yt(e,new gi(e,i))}function aa(i,e){On.call(this,Gs.Ua,i),this.size=e}function xs(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return xt.setTimeout(function(){i()},e)}Gs.Ta="serverreachability",Jt(Is,On),Gs.STAT_EVENT="statevent",Jt(gi,On),Gs.Ua="timingevent",Jt(aa,On);var vt={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ft={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function At(){}function kn(){}At.prototype.h=null;var fr,Gn={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function cn(){On.call(this,"d")}function $n(){On.call(this,"c")}function Er(){}function $r(i,e,t,c){this.l=i,this.j=e,this.m=t,this.W=c||1,this.U=new so(this),this.P=Wo,this.V=new Zs(i=tn?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new Ci}function Ci(){this.i=null,this.g="",this.h=!1}Jt(cn,On),Jt($n,On),Jt(Er,At),Er.prototype.g=function(){return new XMLHttpRequest},Er.prototype.i=function(){return{}},fr=new Er;var Wo=45e3,Ri={},js={};function Bi(i,e,t){i.L=1,i.v=Bo(ao(e)),i.s=t,i.S=!0,Dr(i,null)}function Dr(i,e){i.G=Date.now(),ji(i),i.A=ao(i.v);var t=i.A,c=i.W;Array.isArray(c)||(c=[String(c)]),Su(t.i,"t",c),i.C=0,t=i.l.I,i.h=new Ci,i.g=Xa(i.l,t?e:null,!i.s),0<i.O&&(i.M=new Ra(En(i.Pa,i,i.g),i.O)),sa(i.U,i.g,"readystatechange",i.nb),e=i.I?ds(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),wr(),function ya(i,e,t,c,f,y){i.info(function(){if(i.g)if(y)for(var S="",L=y.split("&"),J=0;J<L.length;J++){var ue=L[J].split("=");if(1<ue.length){var Me=ue[0];ue=ue[1];var it=Me.split("_");S=2<=it.length&&"type"==it[1]?S+(Me+"=")+ue+"&":S+(Me+"=redacted&")}}else S=null;else S=y;return"XMLHTTP REQ ("+c+") [attempt "+f+"]: "+e+"\n"+t+"\n"+S})}(i.j,i.u,i.A,i.m,i.W,i.s)}function wo(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function Qo(i,e,t){let f,c=!0;for(;!i.J&&i.C<t.length;){if(f=oo(i,t),f==js){4==e&&(i.o=4,wi(14),c=!1),es(i.j,i.m,null,"[Incomplete Response]");break}if(f==Ri){i.o=4,wi(15),es(i.j,i.m,t,"[Invalid Chunk]"),c=!1;break}es(i.j,i.m,f,null),jo(i,f)}wo(i)&&f!=js&&f!=Ri&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,wi(16),c=!1),i.i=i.i&&c,c?0<t.length&&!i.ca&&(i.ca=!0,(e=i.l).g==i&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ya(e),e.L=!0,wi(11))):(es(i.j,i.m,t,"[Invalid Chunked Response]"),Fo(i),hs(i))}function oo(i,e){var t=i.C,c=e.indexOf("\n",t);return-1==c?js:(t=Number(e.substring(t,c)),isNaN(t)?Ri:(c+=1)+t>e.length?js:(e=e.substr(c,t),i.C=c+t,e))}function ji(i){i.Y=Date.now()+i.P,Xo(i,i.P)}function Xo(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=xs(En(i.lb,i),e)}function vo(i){i.B&&(xt.clearTimeout(i.B),i.B=null)}function hs(i){0==i.l.H||i.J||as(i.l,i)}function Fo(i){vo(i);var e=i.M;e&&"function"==typeof e.ra&&e.ra(),i.M=null,Oa(i.V),mo(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.ra())}function jo(i,e){try{var t=i.l;if(0!=t.H&&(t.g==i||Za(t.h,i)))if(!i.K&&Za(t.h,i)&&3==t.H){try{var c=t.Ja.g.parse(e)}catch{c=null}if(Array.isArray(c)&&3==c.length){var f=c;if(0==f[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<i.G))break e;yu(t),Vo(t)}Cu(t),wi(18)}}else t.Fa=f[1],0<t.Fa-t.V&&37500>f[2]&&t.M&&0==t.A&&!t.v&&(t.v=xs(En(t.ib,t),6e3));if(1>=Ka(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else Io(t,11)}else if((i.K||t.g==i)&&yu(t),!In(e))for(f=t.Ja.g.parse(e),e=0;e<f.length;e++){let ue=f[e];if(t.V=ue[0],ue=ue[1],2==t.H)if("c"==ue[0]){t.J=ue[1],t.oa=ue[2];const Me=ue[3];null!=Me&&(t.qa=Me,t.j.info("VER="+t.qa));const it=ue[4];null!=it&&(t.Ga=it,t.j.info("SVER="+t.Ga));const Pt=ue[5];null!=Pt&&"number"==typeof Pt&&0<Pt&&(t.K=c=1.5*Pt,t.j.info("backChannelRequestTimeoutMs_="+c)),c=t;const Xt=i.g;if(Xt){const bn=Xt.g?Xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bn){var y=c.h;y.g||-1==bn.indexOf("spdy")&&-1==bn.indexOf("quic")&&-1==bn.indexOf("h2")||(y.j=y.l,y.g=new Set,y.h&&(ta(y,y.h),y.h=null))}if(c.F){const rr=Xt.g?Xt.g.getResponseHeader("X-HTTP-Session-Id"):null;rr&&(c.Da=rr,Ii(c.G,c.F,rr))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-i.G,t.j.info("Handshake RTT: "+t.S+"ms"));var S=i;if((c=t).wa=ks(c,c.I?c.oa:null,c.Y),S.K){ts(c.h,S);var L=S,J=c.K;J&&L.setTimeout(J),L.B&&(vo(L),ji(L)),c.g=S}else kl(c);0<t.i.length&&Ua(t)}else"stop"!=ue[0]&&"close"!=ue[0]||Io(t,7);else 3==t.H&&("stop"==ue[0]||"close"==ue[0]?"stop"==ue[0]?Io(t,7):la(t):"noop"!=ue[0]&&t.l&&t.l.Aa(ue),t.A=0)}wr()}catch{}}function qo(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Sn(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function Jo(i){if(i.sa&&"function"==typeof i.sa)return i.sa();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(Sn(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const c in i)e[t++]=c;return e}}}(i),c=function Ds(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Sn(i)){for(var e=[],t=i.length,c=0;c<t;c++)e.push(i[c]);return e}for(c in e=[],t=0,i)e[t++]=i[c];return e}(i),f=c.length,y=0;y<f;y++)e.call(void 0,c[y],t&&t[y],i)}(ot=$r.prototype).setTimeout=function(i){this.P=i},ot.nb=function(i){i=i.target;const e=this.M;e&&3==Jr(i)?e.l():this.Pa(i)},ot.Pa=function(i){try{if(i==this.g)e:{const Me=Jr(this.g);var e=this.g.Ia();if(this.g.da(),!(3>Me)&&(3!=Me||tn||this.g&&(this.h.h||this.g.ja()||Ms(this.g)))){this.J||4!=Me||7==e||wr(),vo(this);var t=this.g.da();this.aa=t;t:if(wo(this)){var c=Ms(this.g);i="";var f=c.length,y=4==Jr(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Fo(this),hs(this);var S="";break t}this.h.i=new xt.TextDecoder}for(e=0;e<f;e++)this.h.h=!0,i+=this.h.i.decode(c[e],{stream:y&&e==f-1});c.splice(0,f),this.h.g+=i,this.C=0,S=this.h.g}else S=this.g.ja();if(this.i=200==t,function _a(i,e,t,c,f,y,S){i.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+f+"]: "+e+"\n"+t+"\n"+y+" "+S})}(this.j,this.u,this.A,this.m,this.W,Me,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var L,J=this.g;if((L=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!In(L)){var ue=L;break t}}ue=null}if(!(t=ue)){this.i=!1,this.o=3,wi(12),Fo(this),hs(this);break e}es(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jo(this,t)}this.S?(Qo(this,Me,S),tn&&this.i&&3==Me&&(sa(this.U,this.V,"tick",this.mb),this.V.start())):(es(this.j,this.m,S,null),jo(this,S)),4==Me&&Fo(this),this.i&&!this.J&&(4==Me?as(this.l,this):(this.i=!1,ji(this)))}else 400==t&&0<S.indexOf("Unknown SID")?(this.o=3,wi(12)):(this.o=0,wi(13)),Fo(this),hs(this)}}}catch{}},ot.mb=function(){if(this.g){var i=Jr(this.g),e=this.g.ja();this.C<e.length&&(vo(this),Qo(this,i,e),this.i&&4!=i&&ji(this))}},ot.cancel=function(){this.J=!0,Fo(this)},ot.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function oa(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(wr(),wi(17)),Fo(this),this.o=2,hs(this)):Xo(this,this.Y-i)};var Na=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ua(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof ua){this.h=void 0!==e?e:i.h,La(this,i.j),this.s=i.s,this.g=i.g,vs(this,i.m),this.l=i.l,e=i.i;var t=new Xr;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Uo(this,t),this.o=i.o}else i&&(t=String(i).match(Na))?(this.h=!!e,La(this,t[1]||"",!0),this.s=As(t[2]||""),this.g=As(t[3]||"",!0),vs(this,t[4]),this.l=As(t[5]||"",!0),Uo(this,t[6]||"",!0),this.o=As(t[7]||"")):(this.h=!!e,this.i=new Xr(null,this.h))}function ao(i){return new ua(i)}function La(i,e,t){i.j=t?As(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function vs(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Uo(i,e,t){e instanceof Xr?(i.i=e,function Ml(i,e){e&&!i.j&&(Mi(i),i.i=null,i.g.forEach(function(t,c){var f=c.toLowerCase();c!=f&&(Fa(this,c),Su(this,f,t))},i)),i.j=e}(i.i,i.h)):(t||(e=Ta(e,Qs)),i.i=new Xr(e,i.h))}function Ii(i,e,t){i.i.set(e,t)}function Bo(i){return Ii(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function As(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Ta(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,ea),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function ea(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}ua.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Ta(e,yo,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Ta(e,yo,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(Ta(t,"/"==t.charAt(0)?Ys:Ko,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Ta(t,Xs)),i.join("")};var yo=/[#\/\?@]/g,Ko=/[#\?:]/g,Ys=/[#\?]/g,Qs=/[#\?@]/g,Xs=/#/g;function Xr(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Mi(i){i.g||(i.g=new Map,i.h=0,i.i&&function Wr(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var c=i[t].indexOf("="),f=null;if(0<=c){var y=i[t].substring(0,c);f=i[t].substring(c+1)}else y=i[t];e(y,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Fa(i,e){Mi(i),e=wu(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function ja(i,e){return Mi(i),e=wu(i,e),i.g.has(e)}function Su(i,e,t){Fa(i,e),0<t.length&&(i.i=null,i.g.set(wu(i,e),xr(t)),i.h+=t.length)}function wu(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function qa(i){this.l=i||tl,i=xt.PerformanceNavigationTiming?0<(i=xt.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(xt.g&&xt.g.Ka&&xt.g.Ka()&&xt.g.Ka().ec),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ot=Xr.prototype).add=function(i,e){Mi(this),this.i=null,i=wu(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},ot.forEach=function(i,e){Mi(this),this.g.forEach(function(t,c){t.forEach(function(f){i.call(e,f,c,this)},this)},this)},ot.sa=function(){Mi(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let c=0;c<e.length;c++){const f=i[c];for(let y=0;y<f.length;y++)t.push(e[c])}return t},ot.Z=function(i){Mi(this);let e=[];if("string"==typeof i)ja(this,i)&&(e=e.concat(this.g.get(wu(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},ot.set=function(i,e){return Mi(this),this.i=null,ja(this,i=wu(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},ot.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var c=e[t];const y=encodeURIComponent(String(c)),S=this.Z(c);for(c=0;c<S.length;c++){var f=y;""!==S[c]&&(f+="="+encodeURIComponent(String(S[c]))),i.push(f)}}return this.i=i.join("&")};var tl=10;function _o(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Ka(i){return i.h?1:i.g?i.g.size:0}function Za(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function ta(i,e){i.g?i.g.add(e):i.h=e}function ts(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function ne(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.F);return e}return xr(i.i)}function Z(){}function W(){this.g=new Z}function ke(i,e,t){const c=t||"";try{qo(i,function(f,y){let S=f;Yt(f)&&(S=er(f)),e.push(c+y+"="+encodeURIComponent(S))})}catch(f){throw e.push(c+"type="+encodeURIComponent("_badmap")),f}}function qn(i,e,t,c,f){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,f(c)}catch{}}function fs(i){this.l=i.fc||null,this.j=i.ob||!1}function oe(i,e){Dt.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=ee,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}qa.prototype.cancel=function(){if(this.i=ne(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Z.prototype.stringify=function(i){return xt.JSON.stringify(i,void 0)},Z.prototype.parse=function(i){return xt.JSON.parse(i,void 0)},Jt(fs,At),fs.prototype.g=function(){return new oe(this.l,this.j)},fs.prototype.i=function(i){return function(){return i}}({}),Jt(oe,Dt);var ee=0;function Ne(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function et(i){i.readyState=4,i.l=null,i.j=null,i.A=null,dt(i)}function dt(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(ot=oe.prototype).open=function(i,e){if(this.readyState!=ee)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,dt(this)},ot.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||xt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,et(this)),this.readyState=ee},ot.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,dt(this)),this.g&&(this.readyState=3,dt(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof xt.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ne(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},ot.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?et(this):dt(this),3==this.readyState&&Ne(this)}},ot.Za=function(i){this.g&&(this.response=this.responseText=i,et(this))},ot.Ya=function(i){this.g&&(this.response=i,et(this))},ot.ka=function(){this.g&&et(this)},ot.setRequestHeader=function(i,e){this.v.append(i,e)},ot.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(oe.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Nt=xt.JSON.parse;function Qt(i){Dt.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=tr,this.L=this.M=!1}Jt(Qt,Dt);var tr="",dr=/^https?$/i,Pr=["POST","PUT"];function Ui(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Gr(i),ns(i)}function Gr(i){i.F||(i.F=!0,yt(i,"complete"),yt(i,"error"))}function ui(i){if(i.h&&typeof Rt<"u"&&(!i.C[1]||4!=Jr(i)||2!=i.da()))if(i.v&&4==Jr(i))Hs(i.La,0,i);else if(yt(i,"readystatechange"),4==Jr(i)){i.h=!1;try{const L=i.da();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var c;if(c=0===L){var f=String(i.I).match(Na)[1]||null;if(!f&&xt.self&&xt.self.location){var y=xt.self.location.protocol;f=y.substr(0,y.length-1)}c=!dr.test(f?f.toLowerCase():"")}t=c}if(t)yt(i,"complete"),yt(i,"success");else{i.m=6;try{var S=2<Jr(i)?i.g.statusText:""}catch{S=""}i.j=S+" ["+i.da()+"]",Gr(i)}}finally{ns(i)}}}function ns(i,e){if(i.g){qi(i);const t=i.g,c=i.C[0]?Wt:null;i.g=null,i.C=null,e||yt(i,"ready");try{t.onreadystatechange=c}catch{}}}function qi(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(xt.clearTimeout(i.A),i.A=null)}function Jr(i){return i.g?i.g.readyState:0}function Ms(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case tr:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function bo(i){let e="";return ni(i,function(t,c){e+=c,e+=":",e+=t,e+="\r\n"}),e}function rs(i,e,t){e:{for(c in t){var c=!1;break e}c=!0}c||(t=bo(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Ii(i,e,t))}function Ki(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function uo(i){this.Ga=0,this.i=[],this.j=new Wi,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ki("failFast",!1,i),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ki("baseRetryDelayMs",5e3,i),this.hb=Ki("retryDelaySeedMs",1e4,i),this.eb=Ki("forwardChannelMaxRetries",2,i),this.xa=Ki("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.dc||!1,this.K=void 0,this.I=i&&i.supportsCrossDomainXhr||!1,this.J="",this.h=new qa(i&&i.concurrentRequestLimit),this.Ja=new W,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.j.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function la(i){if(Vi(i),3==i.H){var e=i.W++,t=ao(i.G);Ii(t,"SID",i.J),Ii(t,"RID",e),Ii(t,"TYPE","terminate"),vu(i,t),(e=new $r(i,i.j,e,void 0)).L=2,e.v=Bo(ao(t)),t=!1,xt.navigator&&xt.navigator.sendBeacon&&(t=xt.navigator.sendBeacon(e.v.toString(),"")),!t&&xt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Xa(e.l,null),e.g.ha(e.v)),e.G=Date.now(),ji(e)}Iu(i)}function Vo(i){i.g&&(Ya(i),i.g.cancel(),i.g=null)}function Vi(i){Vo(i),i.u&&(xt.clearTimeout(i.u),i.u=null),yu(i),i.h.cancel(),i.m&&("number"==typeof i.m&&xt.clearTimeout(i.m),i.m=null)}function Ua(i){_o(i.h)||i.m||(i.m=!0,Yr(i.Na,i),i.C=0)}function Jl(i,e){var t;t=e?e.m:i.W++;const c=ao(i.G);Ii(c,"SID",i.J),Ii(c,"RID",t),Ii(c,"AID",i.V),vu(i,c),i.o&&i.s&&rs(c,i.o,i.s),t=new $r(i,i.j,t,i.C+1),null===i.o&&(t.I=i.s),e&&(i.i=e.F.concat(i.i)),e=ei(i,t,1e3),t.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),ta(i.h,t),Bi(t,c,e)}function vu(i,e){i.ma&&ni(i.ma,function(t,c){Ii(e,c,t)}),i.l&&qo({},function(t,c){Ii(e,c,t)})}function ei(i,e,t){t=Math.min(i.i.length,t);var c=i.l?En(i.l.Va,i.l,i):null;e:{var f=i.i;let y=-1;for(;;){const S=["count="+t];-1==y?0<t?(y=f[0].h,S.push("ofs="+y)):y=0:S.push("ofs="+y);let L=!0;for(let J=0;J<t;J++){let ue=f[J].h;const Me=f[J].g;if(ue-=y,0>ue)y=Math.max(0,f[J].h-100),L=!1;else try{ke(Me,S,"req"+ue+"_")}catch{c&&c(Me)}}if(L){c=S.join("&");break e}}}return i=i.i.splice(0,t),e.F=i,c}function kl(i){i.g||i.u||(i.ba=1,Yr(i.Ma,i),i.A=0)}function Cu(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=xs(En(i.Ma,i),Ea(i,i.A)),i.A++,0))}function Ya(i){null!=i.B&&(xt.clearTimeout(i.B),i.B=null)}function Qa(i){i.g=new $r(i,i.j,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=ao(i.wa);Ii(e,"RID","rpc"),Ii(e,"SID",i.J),Ii(e,"CI",i.M?"0":"1"),Ii(e,"AID",i.V),Ii(e,"TYPE","xmlhttp"),vu(i,e),i.o&&i.s&&rs(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.oa,t.L=1,t.v=Bo(ao(e)),t.s=null,t.S=!0,Dr(t,i)}function yu(i){null!=i.v&&(xt.clearTimeout(i.v),i.v=null)}function as(i,e){var t=null;if(i.g==e){yu(i),Ya(i),i.g=null;var c=2}else{if(!Za(i.h,e))return;t=e.F,ts(i.h,e),c=1}if(0!=i.H)if(i.ta=e.aa,e.i)if(1==c){t=e.s?e.s.length:0,e=Date.now()-e.G;var f=i.C;yt(c=ba(),new aa(c,t)),Ua(i)}else kl(i);else if(3==(f=e.o)||0==f&&0<i.ta||!(1==c&&function Co(i,e){return!(Ka(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.F.concat(i.i),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=xs(En(i.Na,i,e),Ea(i,i.C)),i.C++,0)))}(i,e)||2==c&&Cu(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),f){case 1:Io(i,5);break;case 4:Io(i,10);break;case 3:Io(i,6);break;default:Io(i,2)}}function Ea(i,e){let t=i.ab+Math.floor(Math.random()*i.hb);return i.l||(t*=2),t*e}function Io(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var c=En(i.pb,i);t||(t=new ua("//www.google.com/images/cleardot.gif"),xt.location&&"http"==xt.location.protocol||La(t,"https"),Bo(t)),function $t(i,e){const t=new Wi;if(xt.Image){const c=new Image;c.onload=on(qn,t,c,"TestLoadImage: loaded",!0,e),c.onerror=on(qn,t,c,"TestLoadImage: error",!1,e),c.onabort=on(qn,t,c,"TestLoadImage: abort",!1,e),c.ontimeout=on(qn,t,c,"TestLoadImage: timeout",!1,e),xt.setTimeout(function(){c.ontimeout&&c.ontimeout()},1e4),c.src=i}else e(!1)}(t.toString(),c)}else wi(2);i.H=0,i.l&&i.l.za(e),Iu(i),Vi(i)}function Iu(i){if(i.H=0,i.pa=[],i.l){const e=ne(i.h);(0!=e.length||0!=i.i.length)&&(kr(i.pa,e),kr(i.pa,i.i),i.h.i.length=0,xr(i.i),i.i.length=0),i.l.ya()}}function ks(i,e,t){var c=t instanceof ua?ao(t):new ua(t,void 0);if(""!=c.g)e&&(c.g=e+"."+c.g),vs(c,c.m);else{var f=xt.location;c=f.protocol,e=e?e+"."+f.hostname:f.hostname,f=+f.port;var y=new ua(null,void 0);c&&La(y,c),e&&(y.g=e),f&&vs(y,f),t&&(y.l=t),c=y}return e=i.Da,(t=i.F)&&e&&Ii(c,t,e),Ii(c,"VER",i.qa),vu(i,c),c}function Xa(i,e,t){if(e&&!i.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Qt(t&&i.Ha&&!i.va?new fs({ob:!0}):i.va)).Oa(i.I),e}function Bu(){}function Vu(){if(sr&&!(10<=Number(Li)))throw Error("Environmental error: no available transport.")}function li(i,e){Dt.call(this),this.g=new uo(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!In(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!In(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new B(this)}function Ja(i){cn.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function eu(){$n.call(this),this.status=1}function B(i){this.g=i}function z(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ie(i,e,t){t||(t=0);var c=Array(16);if("string"==typeof e)for(var f=0;16>f;++f)c[f]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(f=0;16>f;++f)c[f]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var y=i.g[3],S=(e=i.g[0])+(y^(t=i.g[1])&((f=i.g[2])^y))+c[0]+3614090360&4294967295;S=(t=(f=(y=(e=(t=(f=(y=(e=(t=(f=(y=(e=(t=(f=(y=(e=(t=(f=(y=(e=(t=(f=(y=(e=(t=(f=(y=(e=(t=(f=(y=(e=(t=(f=(y=(e=(t=(f=(y=(e=(t=(f=(y=(e=(t=(f=(y=(e=(t=(f=(y=(e=(t=(f=(y=(e=(t=(f=(y=(e=t+(S<<7&4294967295|S>>>25))+((S=y+(f^e&(t^f))+c[1]+3905402710&4294967295)<<12&4294967295|S>>>20))+((S=f+(t^y&(e^t))+c[2]+606105819&4294967295)<<17&4294967295|S>>>15))+((S=t+(e^f&(y^e))+c[3]+3250441966&4294967295)<<22&4294967295|S>>>10))+((S=e+(y^t&(f^y))+c[4]+4118548399&4294967295)<<7&4294967295|S>>>25))+((S=y+(f^e&(t^f))+c[5]+1200080426&4294967295)<<12&4294967295|S>>>20))+((S=f+(t^y&(e^t))+c[6]+2821735955&4294967295)<<17&4294967295|S>>>15))+((S=t+(e^f&(y^e))+c[7]+4249261313&4294967295)<<22&4294967295|S>>>10))+((S=e+(y^t&(f^y))+c[8]+1770035416&4294967295)<<7&4294967295|S>>>25))+((S=y+(f^e&(t^f))+c[9]+2336552879&4294967295)<<12&4294967295|S>>>20))+((S=f+(t^y&(e^t))+c[10]+4294925233&4294967295)<<17&4294967295|S>>>15))+((S=t+(e^f&(y^e))+c[11]+2304563134&4294967295)<<22&4294967295|S>>>10))+((S=e+(y^t&(f^y))+c[12]+1804603682&4294967295)<<7&4294967295|S>>>25))+((S=y+(f^e&(t^f))+c[13]+4254626195&4294967295)<<12&4294967295|S>>>20))+((S=f+(t^y&(e^t))+c[14]+2792965006&4294967295)<<17&4294967295|S>>>15))+((S=t+(e^f&(y^e))+c[15]+1236535329&4294967295)<<22&4294967295|S>>>10))+((S=e+(f^y&(t^f))+c[1]+4129170786&4294967295)<<5&4294967295|S>>>27))+((S=y+(t^f&(e^t))+c[6]+3225465664&4294967295)<<9&4294967295|S>>>23))+((S=f+(e^t&(y^e))+c[11]+643717713&4294967295)<<14&4294967295|S>>>18))+((S=t+(y^e&(f^y))+c[0]+3921069994&4294967295)<<20&4294967295|S>>>12))+((S=e+(f^y&(t^f))+c[5]+3593408605&4294967295)<<5&4294967295|S>>>27))+((S=y+(t^f&(e^t))+c[10]+38016083&4294967295)<<9&4294967295|S>>>23))+((S=f+(e^t&(y^e))+c[15]+3634488961&4294967295)<<14&4294967295|S>>>18))+((S=t+(y^e&(f^y))+c[4]+3889429448&4294967295)<<20&4294967295|S>>>12))+((S=e+(f^y&(t^f))+c[9]+568446438&4294967295)<<5&4294967295|S>>>27))+((S=y+(t^f&(e^t))+c[14]+3275163606&4294967295)<<9&4294967295|S>>>23))+((S=f+(e^t&(y^e))+c[3]+4107603335&4294967295)<<14&4294967295|S>>>18))+((S=t+(y^e&(f^y))+c[8]+1163531501&4294967295)<<20&4294967295|S>>>12))+((S=e+(f^y&(t^f))+c[13]+2850285829&4294967295)<<5&4294967295|S>>>27))+((S=y+(t^f&(e^t))+c[2]+4243563512&4294967295)<<9&4294967295|S>>>23))+((S=f+(e^t&(y^e))+c[7]+1735328473&4294967295)<<14&4294967295|S>>>18))+((S=t+(y^e&(f^y))+c[12]+2368359562&4294967295)<<20&4294967295|S>>>12))+((S=e+(t^f^y)+c[5]+4294588738&4294967295)<<4&4294967295|S>>>28))+((S=y+(e^t^f)+c[8]+2272392833&4294967295)<<11&4294967295|S>>>21))+((S=f+(y^e^t)+c[11]+1839030562&4294967295)<<16&4294967295|S>>>16))+((S=t+(f^y^e)+c[14]+4259657740&4294967295)<<23&4294967295|S>>>9))+((S=e+(t^f^y)+c[1]+2763975236&4294967295)<<4&4294967295|S>>>28))+((S=y+(e^t^f)+c[4]+1272893353&4294967295)<<11&4294967295|S>>>21))+((S=f+(y^e^t)+c[7]+4139469664&4294967295)<<16&4294967295|S>>>16))+((S=t+(f^y^e)+c[10]+3200236656&4294967295)<<23&4294967295|S>>>9))+((S=e+(t^f^y)+c[13]+681279174&4294967295)<<4&4294967295|S>>>28))+((S=y+(e^t^f)+c[0]+3936430074&4294967295)<<11&4294967295|S>>>21))+((S=f+(y^e^t)+c[3]+3572445317&4294967295)<<16&4294967295|S>>>16))+((S=t+(f^y^e)+c[6]+76029189&4294967295)<<23&4294967295|S>>>9))+((S=e+(t^f^y)+c[9]+3654602809&4294967295)<<4&4294967295|S>>>28))+((S=y+(e^t^f)+c[12]+3873151461&4294967295)<<11&4294967295|S>>>21))+((S=f+(y^e^t)+c[15]+530742520&4294967295)<<16&4294967295|S>>>16))+((S=t+(f^y^e)+c[2]+3299628645&4294967295)<<23&4294967295|S>>>9))+((S=e+(f^(t|~y))+c[0]+4096336452&4294967295)<<6&4294967295|S>>>26))+((S=y+(t^(e|~f))+c[7]+1126891415&4294967295)<<10&4294967295|S>>>22))+((S=f+(e^(y|~t))+c[14]+2878612391&4294967295)<<15&4294967295|S>>>17))+((S=t+(y^(f|~e))+c[5]+4237533241&4294967295)<<21&4294967295|S>>>11))+((S=e+(f^(t|~y))+c[12]+1700485571&4294967295)<<6&4294967295|S>>>26))+((S=y+(t^(e|~f))+c[3]+2399980690&4294967295)<<10&4294967295|S>>>22))+((S=f+(e^(y|~t))+c[10]+4293915773&4294967295)<<15&4294967295|S>>>17))+((S=t+(y^(f|~e))+c[1]+2240044497&4294967295)<<21&4294967295|S>>>11))+((S=e+(f^(t|~y))+c[8]+1873313359&4294967295)<<6&4294967295|S>>>26))+((S=y+(t^(e|~f))+c[15]+4264355552&4294967295)<<10&4294967295|S>>>22))+((S=f+(e^(y|~t))+c[6]+2734768916&4294967295)<<15&4294967295|S>>>17))+((S=t+(y^(f|~e))+c[13]+1309151649&4294967295)<<21&4294967295|S>>>11))+((y=(e=t+((S=e+(f^(t|~y))+c[4]+4149444226&4294967295)<<6&4294967295|S>>>26))+((S=y+(t^(e|~f))+c[11]+3174756917&4294967295)<<10&4294967295|S>>>22))^((f=y+((S=f+(e^(y|~t))+c[2]+718787259&4294967295)<<15&4294967295|S>>>17))|~e))+c[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(f+(S<<21&4294967295|S>>>11))&4294967295,i.g[2]=i.g[2]+f&4294967295,i.g[3]=i.g[3]+y&4294967295}function Ge(i,e){this.h=e;for(var t=[],c=!0,f=i.length-1;0<=f;f--){var y=0|i[f];c&&y==e||(t[f]=y,c=!1)}this.g=t}(ot=Qt.prototype).Oa=function(i){this.M=i},ot.ha=function(i,e,t,c){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():fr.g(),this.C=function un(i){return i.h||(i.h=i.i())}(this.u?this.u:fr),this.g.onreadystatechange=En(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(y){return void Ui(this,y)}if(i=t||"",t=new Map(this.headers),c)if(Object.getPrototypeOf(c)===Object.prototype)for(var f in c)t.set(f,c[f]);else{if("function"!=typeof c.keys||"function"!=typeof c.get)throw Error("Unknown input type for opt_headers: "+String(c));for(const y of c.keys())t.set(y,c.get(y))}c=Array.from(t.keys()).find(y=>"content-type"==y.toLowerCase()),f=xt.FormData&&i instanceof xt.FormData,!(0<=pr(Pr,e))||c||f||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[y,S]of t)this.g.setRequestHeader(y,S);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{qi(this),0<this.B&&((this.L=function Mr(i){return sr&&function ms(){return _r(Kr,9,function(){let i=0;const e=Tr(String(Oi)).split("."),t=Tr("9").split("."),c=Math.max(e.length,t.length);for(let S=0;0==i&&S<c;S++){var f=e[S]||"",y=t[S]||"";do{if(f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""],y=/(\d*)(\D*)(.*)/.exec(y)||["","","",""],0==f[0].length&&0==y[0].length)break;i=Rr(0==f[1].length?0:parseInt(f[1],10),0==y[1].length?0:parseInt(y[1],10))||Rr(0==f[2].length,0==y[2].length)||Rr(f[2],y[2]),f=f[3],y=y[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=En(this.ua,this)):this.A=Hs(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(y){Ui(this,y)}},ot.ua=function(){typeof Rt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yt(this,"timeout"),this.abort(8))},ot.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,yt(this,"complete"),yt(this,"abort"),ns(this))},ot.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ns(this,!0)),Qt.$.N.call(this)},ot.La=function(){this.s||(this.G||this.v||this.l?ui(this):this.kb())},ot.kb=function(){ui(this)},ot.da=function(){try{return 2<Jr(this)?this.g.status:-1}catch{return-1}},ot.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ot.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Nt(e)}},ot.Ia=function(){return this.m},ot.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=uo.prototype).qa=8,ot.H=1,ot.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const f=new $r(this,this.j,i,void 0);let y=this.s;if(this.U&&(y?(y=ds(y),Vs(y,this.U)):y=this.U),null!==this.o||this.O||(f.I=y,y=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var c=this.i[t];if(void 0===(c="__data__"in c.g&&"string"==typeof(c=c.g.__data__)?c.length:void 0))break;if(4096<(e+=c)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ei(this,f,e),Ii(t=ao(this.G),"RID",i),Ii(t,"CVER",22),this.F&&Ii(t,"X-HTTP-Session-Id",this.F),vu(this,t),y&&(this.O?e="headers="+encodeURIComponent(String(bo(y)))+"&"+e:this.o&&rs(t,this.o,y)),ta(this.h,f),this.bb&&Ii(t,"TYPE","init"),this.P?(Ii(t,"$req",e),Ii(t,"SID","null"),f.ba=!0,Bi(f,t,null)):Bi(f,t,e),this.H=2}}else 3==this.H&&(i?Jl(this,i):0==this.i.length||_o(this.h)||Jl(this))},ot.Ma=function(){if(this.u=null,Qa(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var i=2*this.S;this.j.info("BP detection timer enabled: "+i),this.B=xs(En(this.jb,this),i)}},ot.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,wi(10),Vo(this),Qa(this))},ot.ib=function(){null!=this.v&&(this.v=null,Vo(this),Cu(this),wi(19))},ot.pb=function(i){i?(this.j.info("Successfully pinged google.com"),wi(2)):(this.j.info("Failed to ping google.com"),wi(1))},(ot=Bu.prototype).Ba=function(){},ot.Aa=function(){},ot.za=function(){},ot.ya=function(){},ot.Va=function(){},Vu.prototype.g=function(i,e){return new li(i,e)},Jt(li,Dt),li.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var i=this.g,e=this.l,t=this.h||void 0;wi(0),i.Y=e,i.ma=t||{},i.M=i.aa,i.G=ks(i,null,i.Y),Ua(i)},li.prototype.close=function(){la(this.g)},li.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=er(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.fb++,i)),3==e.H&&Ua(e)},li.prototype.N=function(){this.g.l=null,delete this.j,la(this.g),delete this.g,li.$.N.call(this)},Jt(Ja,cn),Jt(eu,$n),Jt(B,Bu),B.prototype.Ba=function(){yt(this.g,"a")},B.prototype.Aa=function(i){yt(this.g,new Ja(i))},B.prototype.za=function(i){yt(this.g,new eu)},B.prototype.ya=function(){yt(this.g,"b")},Jt(z,function he(){this.blockSize=-1}),z.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},z.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var t=e-this.blockSize,c=this.m,f=this.h,y=0;y<e;){if(0==f)for(;y<=t;)Ie(this,i,y),y+=this.blockSize;if("string"==typeof i){for(;y<e;)if(c[f++]=i.charCodeAt(y++),f==this.blockSize){Ie(this,c),f=0;break}}else for(;y<e;)if(c[f++]=i[y++],f==this.blockSize){Ie(this,c),f=0;break}}this.h=f,this.i+=e},z.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var t=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&t,t/=256;for(this.j(i),i=Array(16),e=t=0;4>e;++e)for(var c=0;32>c;c+=8)i[t++]=this.g[e]>>>c&255;return i};var Lt={};function zt(i){return-128<=i&&128>i?_r(Lt,i,function(e){return new Ge([0|e],0>e?-1:0)}):new Ge([0|i],0>i?-1:0)}function ur(i){if(isNaN(i)||!isFinite(i))return hi;if(0>i)return Jn(ur(-i));for(var e=[],t=1,c=0;i>=t;c++)e[c]=i/t|0,t*=mi;return new Ge(e,0)}var mi=4294967296,hi=zt(0),mr=zt(1),us=zt(16777216);function fi(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function Gi(i){return-1==i.h}function Jn(i){for(var e=i.g.length,t=[],c=0;c<e;c++)t[c]=~i.g[c];return new Ge(t,~i.h).add(mr)}function xo(i,e){return i.add(Jn(e))}function Do(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function Js(i,e){this.g=i,this.h=e}function is(i,e){if(fi(e))throw Error("division by zero");if(fi(i))return new Js(hi,hi);if(Gi(i))return e=is(Jn(i),e),new Js(Jn(e.g),Jn(e.h));if(Gi(e))return e=is(i,Jn(e)),new Js(Jn(e.g),e.h);if(30<i.g.length){if(Gi(i)||Gi(e))throw Error("slowDivide_ only works with positive integers.");for(var t=mr,c=e;0>=c.X(i);)t=tu(t),c=tu(c);var f=jr(t,1),y=jr(c,1);for(c=jr(c,2),t=jr(t,2);!fi(c);){var S=y.add(c);0>=S.X(i)&&(f=f.add(t),y=S),c=jr(c,1),t=jr(t,1)}return e=xo(i,f.R(e)),new Js(f,e)}for(f=hi;0<=i.X(e);){for(t=Math.max(1,Math.floor(i.ea()/e.ea())),c=48>=(c=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,c-48),S=(y=ur(t)).R(e);Gi(S)||0<S.X(i);)S=(y=ur(t-=c)).R(e);fi(y)&&(y=mr),f=f.add(y),i=xo(i,S)}return new Js(f,i)}function tu(i){for(var e=i.g.length+1,t=[],c=0;c<e;c++)t[c]=i.D(c)<<1|i.D(c-1)>>>31;return new Ge(t,i.h)}function jr(i,e){var t=e>>5;e%=32;for(var c=i.g.length-t,f=[],y=0;y<c;y++)f[y]=0<e?i.D(y+t)>>>e|i.D(y+t+1)<<32-e:i.D(y+t);return new Ge(f,i.h)}(ot=Ge.prototype).ea=function(){if(Gi(this))return-Jn(this).ea();for(var i=0,e=1,t=0;t<this.g.length;t++){var c=this.D(t);i+=(0<=c?c:mi+c)*e,e*=mi}return i},ot.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(fi(this))return"0";if(Gi(this))return"-"+Jn(this).toString(i);for(var e=ur(Math.pow(i,6)),t=this,c="";;){var f=is(t,e).g,y=((0<(t=xo(t,f.R(e))).g.length?t.g[0]:t.h)>>>0).toString(i);if(fi(t=f))return y+c;for(;6>y.length;)y="0"+y;c=y+c}},ot.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},ot.X=function(i){return Gi(i=xo(this,i))?-1:fi(i)?0:1},ot.abs=function(){return Gi(this)?Jn(this):this},ot.add=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],c=0,f=0;f<=e;f++){var y=c+(65535&this.D(f))+(65535&i.D(f)),S=(y>>>16)+(this.D(f)>>>16)+(i.D(f)>>>16);c=S>>>16,t[f]=(S&=65535)<<16|(y&=65535)}return new Ge(t,-2147483648&t[t.length-1]?-1:0)},ot.R=function(i){if(fi(this)||fi(i))return hi;if(Gi(this))return Gi(i)?Jn(this).R(Jn(i)):Jn(Jn(this).R(i));if(Gi(i))return Jn(this.R(Jn(i)));if(0>this.X(us)&&0>i.X(us))return ur(this.ea()*i.ea());for(var e=this.g.length+i.g.length,t=[],c=0;c<2*e;c++)t[c]=0;for(c=0;c<this.g.length;c++)for(var f=0;f<i.g.length;f++){var y=this.D(c)>>>16,S=65535&this.D(c),L=i.D(f)>>>16,J=65535&i.D(f);t[2*c+2*f]+=S*J,Do(t,2*c+2*f),t[2*c+2*f+1]+=y*J,Do(t,2*c+2*f+1),t[2*c+2*f+1]+=S*L,Do(t,2*c+2*f+1),t[2*c+2*f+2]+=y*L,Do(t,2*c+2*f+2)}for(c=0;c<e;c++)t[c]=t[2*c+1]<<16|t[2*c];for(c=e;c<2*e;c++)t[c]=0;return new Ge(t,0)},ot.gb=function(i){return is(this,i).h},ot.and=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],c=0;c<e;c++)t[c]=this.D(c)&i.D(c);return new Ge(t,this.h&i.h)},ot.or=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],c=0;c<e;c++)t[c]=this.D(c)|i.D(c);return new Ge(t,this.h|i.h)},ot.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],c=0;c<e;c++)t[c]=this.D(c)^i.D(c);return new Ge(t,this.h^i.h)},Vu.prototype.createWebChannel=Vu.prototype.g,li.prototype.send=li.prototype.u,li.prototype.open=li.prototype.m,li.prototype.close=li.prototype.close,vt.NO_ERROR=0,vt.TIMEOUT=8,vt.HTTP_ERROR=6,ft.COMPLETE="complete",kn.EventType=Gn,Gn.OPEN="a",Gn.CLOSE="b",Gn.ERROR="c",Gn.MESSAGE="d",Dt.prototype.listen=Dt.prototype.O,Qt.prototype.listenOnce=Qt.prototype.P,Qt.prototype.getLastError=Qt.prototype.Sa,Qt.prototype.getLastErrorCode=Qt.prototype.Ia,Qt.prototype.getStatus=Qt.prototype.da,Qt.prototype.getResponseJson=Qt.prototype.Wa,Qt.prototype.getResponseText=Qt.prototype.ja,Qt.prototype.send=Qt.prototype.ha,Qt.prototype.setWithCredentials=Qt.prototype.Oa,z.prototype.digest=z.prototype.l,z.prototype.reset=z.prototype.reset,z.prototype.update=z.prototype.j,Ge.prototype.add=Ge.prototype.add,Ge.prototype.multiply=Ge.prototype.R,Ge.prototype.modulo=Ge.prototype.gb,Ge.prototype.compare=Ge.prototype.X,Ge.prototype.toNumber=Ge.prototype.ea,Ge.prototype.toString=Ge.prototype.toString,Ge.prototype.getBits=Ge.prototype.D,Ge.fromNumber=ur,Ge.fromString=function ti(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return Jn(ti(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=ur(Math.pow(e,8)),c=hi,f=0;f<i.length;f+=8){var y=Math.min(8,i.length-f),S=parseInt(i.substring(f,f+y),e);8>y?(y=ur(Math.pow(e,y)),c=c.R(y).add(ur(S))):c=(c=c.R(t)).add(ur(S))}return c};var Sa=Xe.createWebChannelTransport=function(){return new Vu},wc=Xe.getStatEventTarget=function(){return ba()},_u=Xe.ErrorCode=vt,zs=Xe.EventType=ft,ec=Xe.Event=Gs,bu=Xe.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},_n=Xe.FetchXmlHttpFactory=fs,qr=Xe.WebChannel=kn,Cc=Xe.XhrIo=Qt,nl=Xe.Md5=z,Us=Xe.Integer=Ge;const nd="@firebase/firestore";class Ws{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ws.UNAUTHENTICATED=new Ws(null),Ws.GOOGLE_CREDENTIALS=new Ws("google-credentials-uid"),Ws.FIRST_PARTY=new Ws("first-party-uid"),Ws.MOCK_USER=new Ws("mock-user");let eo="9.22.0";const nu=new st.Yd("@firebase/firestore");function rl(){return nu.logLevel}function Pn(i,...e){if(nu.logLevel<=st.in.DEBUG){const t=e.map(xu);nu.debug(`Firestore (${eo}): ${i}`,...t)}}function lo(i,...e){if(nu.logLevel<=st.in.ERROR){const t=e.map(xu);nu.error(`Firestore (${eo}): ${i}`,...t)}}function ys(i,...e){if(nu.logLevel<=st.in.WARN){const t=e.map(xu);nu.warn(`Firestore (${eo}): ${i}`,...t)}}function xu(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Xn(i="Unexpected state"){const e=`FIRESTORE (${eo}) INTERNAL ASSERTION FAILED: `+i;throw lo(e),new Error(e)}function Ln(i,e){i||Xn()}function Bn(i,e){return i}const jt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class mn extends Y.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ao{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Pl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ic{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ws.UNAUTHENTICATED))}shutdown(){}}class xc{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class fl{constructor(e){this.t=e,this.currentUser=Ws.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var c=this;let f=this.i;const y=ue=>this.i!==f?(f=this.i,t(ue)):Promise.resolve();let S=new Ao;this.o=()=>{this.i++,this.currentUser=this.u(),S.resolve(),S=new Ao,e.enqueueRetryable(()=>y(this.currentUser))};const L=()=>{const ue=S;e.enqueueRetryable((0,re.Z)(function*(){yield ue.promise,yield y(c.currentUser)}))},J=ue=>{Pn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=ue,this.auth.addAuthTokenListener(this.o),L()};this.t.onInit(ue=>J(ue)),setTimeout(()=>{if(!this.auth){const ue=this.t.getImmediate({optional:!0});ue?J(ue):(Pn("FirebaseAuthCredentialsProvider","Auth not yet detected"),S.resolve(),S=new Ao)}},0),L()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(c=>this.i!==e?(Pn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):c?(Ln("string"==typeof c.accessToken),new Pl(c.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ln(null===e||"string"==typeof e),new Ws(e)}}class Th{constructor(e,t,c){this.h=e,this.l=t,this.m=c,this.type="FirstParty",this.user=Ws.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Ol{constructor(e,t,c){this.h=e,this.l=t,this.m=c}getToken(){return Promise.resolve(new Th(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ws.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ca{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rd{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const c=y=>{null!=y.error&&Pn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${y.error.message}`);const S=y.token!==this.T;return this.T=y.token,Pn("FirebaseAppCheckTokenProvider",`Received ${S?"new":"existing"} token.`),S?t(y.token):Promise.resolve()};this.o=y=>{e.enqueueRetryable(()=>c(y))};const f=y=>{Pn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=y,this.appCheck.addTokenListener(this.o)};this.I.onInit(y=>f(y)),setTimeout(()=>{if(!this.appCheck){const y=this.I.getImmediate({optional:!0});y?f(y):Pn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ln("string"==typeof t.token),this.T=t.token,new Ca(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function id(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let c=0;c<i;c++)t[c]=Math.floor(256*Math.random());return t}class Dc{static A(){const t=62*Math.floor(256/62);let c="";for(;c.length<20;){const f=id(40);for(let y=0;y<f.length;++y)c.length<20&&f[y]<t&&(c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(f[y]%62))}return c}}function Ir(i,e){return i<e?-1:i>e?1:0}function Hu(i,e,t){return i.length===e.length&&i.every((c,f)=>t(c,e[f]))}function $u(i){return i+"\0"}class Ti{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new mn(jt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new mn(jt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new mn(jt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new mn(jt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ti.fromMillis(Date.now())}static fromDate(e){return Ti.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),c=Math.floor(1e6*(e-1e3*t));return new Ti(t,c)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ir(this.nanoseconds,e.nanoseconds):Ir(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Zn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Zn(e)}static min(){return new Zn(new Ti(0,0))}static max(){return new Zn(new Ti(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Qr{constructor(e,t,c){void 0===t?t=0:t>e.length&&Xn(),void 0===c?c=e.length-t:c>e.length-t&&Xn(),this.segments=e,this.offset=t,this.len=c}get length(){return this.len}isEqual(e){return 0===Qr.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Qr?e.forEach(c=>{t.push(c)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,c=this.limit();t<c;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const c=Math.min(e.length,t.length);for(let f=0;f<c;f++){const y=e.get(f),S=t.get(f);if(y<S)return-1;if(y>S)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class pi extends Qr{construct(e,t,c){return new pi(e,t,c)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const c of e){if(c.indexOf("//")>=0)throw new mn(jt.INVALID_ARGUMENT,`Invalid segment (${c}). Paths must not contain // in them.`);t.push(...c.split("/").filter(f=>f.length>0))}return new pi(t)}static emptyPath(){return new pi([])}}const qs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ps extends Qr{construct(e,t,c){return new Ps(e,t,c)}static isValidIdentifier(e){return qs.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ps.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ps(["__name__"])}static fromServerFormat(e){const t=[];let c="",f=0;const y=()=>{if(0===c.length)throw new mn(jt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(c),c=""};let S=!1;for(;f<e.length;){const L=e[f];if("\\"===L){if(f+1===e.length)throw new mn(jt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const J=e[f+1];if("\\"!==J&&"."!==J&&"`"!==J)throw new mn(jt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);c+=J,f+=2}else"`"===L?(S=!S,f++):"."!==L||S?(c+=L,f++):(y(),f++)}if(y(),S)throw new mn(jt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ps(t)}static emptyPath(){return new Ps([])}}class Yn{constructor(e){this.path=e}static fromPath(e){return new Yn(pi.fromString(e))}static fromName(e){return new Yn(pi.fromString(e).popFirst(5))}static empty(){return new Yn(pi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pi.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return pi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Yn(new pi(e.slice()))}}class Ia{constructor(e,t,c,f){this.indexId=e,this.collectionGroup=t,this.fields=c,this.indexState=f}}function ss(i){return i.fields.find(e=>2===e.kind)}function k(i){return i.fields.filter(e=>2!==e.kind)}Ia.UNKNOWN_ID=-1;class D{constructor(e,t){this.fieldPath=e,this.kind=t}}class ae{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ae(0,Tt.min())}}function Pe(i,e){const t=i.toTimestamp().seconds,c=i.toTimestamp().nanoseconds+1,f=Zn.fromTimestamp(1e9===c?new Ti(t+1,0):new Ti(t,c));return new Tt(f,Yn.empty(),e)}function Le(i){return new Tt(i.readTime,i.key,-1)}class Tt{constructor(e,t,c){this.readTime=e,this.documentKey=t,this.largestBatchId=c}static min(){return new Tt(Zn.min(),Yn.empty(),-1)}static max(){return new Tt(Zn.max(),Yn.empty(),-1)}}function wn(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Yn.comparator(i.documentKey,e.documentKey),0!==t?t:Ir(i.largestBatchId,e.largestBatchId))}const vr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hr{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ci(i){return Ks.apply(this,arguments)}function Ks(){return Ks=(0,re.Z)(function*(i){if(i.code!==jt.FAILED_PRECONDITION||i.message!==vr)throw i;Pn("LocalStore","Unexpectedly lost primary lease")}),Ks.apply(this,arguments)}class Ot{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ot((c,f)=>{this.nextCallback=y=>{this.wrapSuccess(e,y).next(c,f)},this.catchCallback=y=>{this.wrapFailure(t,y).next(c,f)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ot?t:Ot.resolve(t)}catch(t){return Ot.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ot.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ot.reject(t)}static resolve(e){return new Ot((t,c)=>{t(e)})}static reject(e){return new Ot((t,c)=>{c(e)})}static waitFor(e){return new Ot((t,c)=>{let f=0,y=0,S=!1;e.forEach(L=>{++f,L.next(()=>{++y,S&&y===f&&t()},J=>c(J))}),S=!0,y===f&&t()})}static or(e){let t=Ot.resolve(!1);for(const c of e)t=t.next(f=>f?Ot.resolve(f):c());return t}static forEach(e,t){const c=[];return e.forEach((f,y)=>{c.push(t.call(this,f,y))}),this.waitFor(c)}static mapArray(e,t){return new Ot((c,f)=>{const y=e.length,S=new Array(y);let L=0;for(let J=0;J<y;J++){const ue=J;t(e[ue]).next(Me=>{S[ue]=Me,++L,L===y&&c(S)},Me=>f(Me))}})}static doWhile(e,t){return new Ot((c,f)=>{const y=()=>{!0===e()?t().next(()=>{y()},f):c()};y()})}}class xa{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Ao,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new iu(e,t.error)):this.v.resolve()},this.transaction.onerror=c=>{const f=Ud(c.target.error);this.v.reject(new iu(e,f))}}static open(e,t,c,f){try{return new xa(t,e.transaction(f,c))}catch(y){throw new iu(t,y)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Pn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Af(t)}}class da{constructor(e,t,c){this.name=e,this.version=t,this.V=c,12.2===da.S((0,Y.z$)())&&lo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pn("SimpleDb","Removing database:",e),Qi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Y.hl)())return!1;if(da.C())return!0;const e=(0,Y.z$)(),t=da.S(e),c=0<t&&t<10,f=da.N(e),y=0<f&&f<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||c||y)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),c=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(c)}static N(e){const t=e.match(/Android ([\d.]+)/i),c=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(c)}$(e){var t=this;return(0,re.Z)(function*(){return t.db||(Pn("SimpleDb","Opening database:",t.name),t.db=yield new Promise((c,f)=>{const y=indexedDB.open(t.name,t.version);y.onsuccess=S=>{c(S.target.result)},y.onblocked=()=>{f(new iu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},y.onerror=S=>{const L=S.target.error;f("VersionError"===L.name?new mn(jt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===L.name?new mn(jt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+L):new iu(e,L))},y.onupgradeneeded=S=>{Pn("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',S.oldVersion),t.V.O(S.target.result,y.transaction,S.oldVersion,t.version).next(()=>{Pn("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=c=>t.F(c)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,c,f){var y=this;return(0,re.Z)(function*(){const S="readonly"===t;let L=0;for(;;){++L;try{y.db=yield y.$(e);const J=xa.open(y.db,e,S?"readonly":"readwrite",c),ue=f(J).next(Me=>(J.P(),Me)).catch(Me=>(J.abort(Me),Ot.reject(Me))).toPromise();return ue.catch(()=>{}),yield J.R,ue}catch(J){const ue=J,Me="FirebaseError"!==ue.name&&L<3;if(Pn("SimpleDb","Transaction failed with error:",ue.message,"Retrying:",Me),y.close(),!Me)return Promise.reject(ue)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ac{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Qi(this.L.delete())}}class iu extends mn{constructor(e,t){super(jt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Yi(i){return"IndexedDbTransactionError"===i.name}class Af{constructor(e){this.store=e}put(e,t){let c;return void 0!==t?(Pn("SimpleDb","PUT",this.store.name,e,t),c=this.store.put(t,e)):(Pn("SimpleDb","PUT",this.store.name,"<auto-key>",e),c=this.store.put(e)),Qi(c)}add(e){return Pn("SimpleDb","ADD",this.store.name,e,e),Qi(this.store.add(e))}get(e){return Qi(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pn("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pn("SimpleDb","DELETE",this.store.name,e),Qi(this.store.delete(e))}count(){return Pn("SimpleDb","COUNT",this.store.name),Qi(this.store.count())}j(e,t){const c=this.options(e,t);if(c.index||"function"!=typeof this.store.getAll){const f=this.cursor(c),y=[];return this.W(f,(S,L)=>{y.push(L)}).next(()=>y)}{const f=this.store.getAll(c.range);return new Ot((y,S)=>{f.onerror=L=>{S(L.target.error)},f.onsuccess=L=>{y(L.target.result)}})}}H(e,t){const c=this.store.getAll(e,null===t?void 0:t);return new Ot((f,y)=>{c.onerror=S=>{y(S.target.error)},c.onsuccess=S=>{f(S.target.result)}})}J(e,t){Pn("SimpleDb","DELETE ALL",this.store.name);const c=this.options(e,t);c.Y=!1;const f=this.cursor(c);return this.W(f,(y,S,L)=>L.delete())}X(e,t){let c;t?c=e:(c={},t=e);const f=this.cursor(c);return this.W(f,t)}Z(e){const t=this.cursor({});return new Ot((c,f)=>{t.onerror=y=>{const S=Ud(y.target.error);f(S)},t.onsuccess=y=>{const S=y.target.result;S?e(S.primaryKey,S.value).next(L=>{L?S.continue():c()}):c()}})}W(e,t){const c=[];return new Ot((f,y)=>{e.onerror=S=>{y(S.target.error)},e.onsuccess=S=>{const L=S.target.result;if(!L)return void f();const J=new Ac(L),ue=t(L.primaryKey,L.value,J);if(ue instanceof Ot){const Me=ue.catch(it=>(J.done(),Ot.reject(it)));c.push(Me)}J.isDone?f():null===J.K?L.continue():L.continue(J.K)}}).next(()=>Ot.waitFor(c))}options(e,t){let c;return void 0!==e&&("string"==typeof e?c=e:t=e),{index:c,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const c=this.store.index(e.index);return e.Y?c.openKeyCursor(e.range,t):c.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Qi(i){return new Ot((e,t)=>{i.onsuccess=c=>{e(c.target.result)},i.onerror=c=>{const f=Ud(c.target.error);t(f)}})}let su=!1;function Ud(i){const e=da.S((0,Y.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const c=new mn("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return su||(su=!0,setTimeout(()=>{throw c},0)),c}}return i}class sd{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Pn("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,re.Z)(function*(){t.task=null;try{Pn("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(c){Yi(c)?Pn("IndexBackiller","Ignoring IndexedDB error during index backfill: ",c):yield ci(c)}yield t.et(6e4)}))}}class Gu{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,re.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",c=>t.st(c,e))})()}st(e,t){const c=new Set;let f=t,y=!0;return Ot.doWhile(()=>!0===y&&f>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(S=>{if(null!==S&&!c.has(S))return Pn("IndexBackiller",`Processing collection: ${S}`),this.it(e,S,f).next(L=>{f-=L,c.add(S)});y=!1})).next(()=>t-f)}it(e,t,c){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(f=>this.localStore.localDocuments.getNextDocuments(e,t,f,c).next(y=>{const S=y.changes;return this.localStore.indexManager.updateIndexEntries(e,S).next(()=>this.rt(f,y)).next(L=>(Pn("IndexBackiller",`Updating offset: ${L}`),this.localStore.indexManager.updateCollectionGroup(e,t,L))).next(()=>S.size)}))}rt(e,t){let c=e;return t.changes.forEach((f,y)=>{const S=Le(y);wn(S,c)>0&&(c=S)}),new Tt(c.readTime,c.documentKey,Math.max(t.batchId,e.largestBatchId))}}let fn=(()=>{class i{constructor(t,c){this.previousValue=t,c&&(c.sequenceNumberHandler=f=>this.ot(f),this.ut=f=>c.writeSequenceNumber(f))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return i.ct=-1,i})();function od(i){return null==i}function Da(i){return 0===i&&1/i==-1/0}function pl(i){return"number"==typeof i&&Number.isInteger(i)&&!Da(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function Mo(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Aa(e)),e=zu(i.get(t),e);return Aa(e)}function zu(i,e){let t=e;const c=i.length;for(let f=0;f<c;f++){const y=i.charAt(f);switch(y){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=y}}return t}function Aa(i){return i+"\x01\x01"}function ha(i){const e=i.length;if(Ln(e>=2),2===e)return Ln("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),pi.emptyPath();const t=e-2,c=[];let f="";for(let y=0;y<e;){const S=i.indexOf("\x01",y);switch((S<0||S>t)&&Xn(),i.charAt(S+1)){case"\x01":const L=i.substring(y,S);let J;0===f.length?J=L:(f+=L,J=f,f=""),c.push(J);break;case"\x10":f+=i.substring(y,S),f+="\0";break;case"\x11":f+=i.substring(y,S+1);break;default:Xn()}y=S+2}return new pi(c)}const Rl=["userId","batchId"];function Ba(i,e){return[i,Mo(e)]}function Nl(i,e,t){return[i,Mo(e),t]}const Mf={},jg=["prefixPath","collectionGroup","readTime","documentId"],tc=["prefixPath","collectionGroup","documentId"],Eh=["collectionGroup","readTime","prefixPath","documentId"],Ll=["canonicalId","targetId"],Mc=["targetId","path"],kf=["path","targetId"],kc=["collectionId","parent"],Fl=["indexId","uid"],nc=["uid","sequenceNumber"],ad=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Sh=["indexId","uid","orderedDocumentKey"],jl=["userId","collectionPath","documentId"],Pc=["userId","collectionPath","largestBatchId"],Ul=["userId","collectionGroup","largestBatchId"],rc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],wp=[...rc,"documentOverlays"],Bd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Bl=Bd,Du=[...Bl,"indexConfiguration","indexState","indexEntries"];class Au extends hr{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Os(i,e){const t=Bn(i);return da.M(t.ht,e)}function Vl(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function ou(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function il(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Rs{constructor(e,t){this.comparator=e,this.root=t||na.EMPTY}insert(e,t){return new Rs(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,na.BLACK,null,null))}remove(e){return new Rs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,na.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const c=this.comparator(e,t.key);if(0===c)return t.value;c<0?t=t.left:c>0&&(t=t.right)}return null}indexOf(e){let t=0,c=this.root;for(;!c.isEmpty();){const f=this.comparator(e,c.key);if(0===f)return t+c.left.size;f<0?c=c.left:(t+=c.left.size+1,c=c.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,c)=>(e(t,c),!1))}toString(){const e=[];return this.inorderTraversal((t,c)=>(e.push(`${t}:${c}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ic(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ic(this.root,e,this.comparator,!1)}getReverseIterator(){return new ic(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ic(this.root,e,this.comparator,!0)}}class ic{constructor(e,t,c,f){this.isReverse=f,this.nodeStack=[];let y=1;for(;!e.isEmpty();)if(y=t?c(e.key,t):1,t&&f&&(y*=-1),y<0)e=this.isReverse?e.left:e.right;else{if(0===y){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class na{constructor(e,t,c,f,y){this.key=e,this.value=t,this.color=c??na.RED,this.left=f??na.EMPTY,this.right=y??na.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,c,f,y){return new na(e??this.key,t??this.value,c??this.color,f??this.left,y??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,c){let f=this;const y=c(e,f.key);return f=y<0?f.copy(null,null,null,f.left.insert(e,t,c),null):0===y?f.copy(null,t,null,null,null):f.copy(null,null,null,null,f.right.insert(e,t,c)),f.fixUp()}removeMin(){if(this.left.isEmpty())return na.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let c,f=this;if(t(e,f.key)<0)f.left.isEmpty()||f.left.isRed()||f.left.left.isRed()||(f=f.moveRedLeft()),f=f.copy(null,null,null,f.left.remove(e,t),null);else{if(f.left.isRed()&&(f=f.rotateRight()),f.right.isEmpty()||f.right.isRed()||f.right.left.isRed()||(f=f.moveRedRight()),0===t(e,f.key)){if(f.right.isEmpty())return na.EMPTY;c=f.right.min(),f=f.copy(c.key,c.value,null,null,f.right.removeMin())}f=f.copy(null,null,null,null,f.right.remove(e,t))}return f.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,na.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,na.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xn();const e=this.left.check();if(e!==this.right.check())throw Xn();return e+(this.isRed()?0:1)}}na.EMPTY=null,na.RED=!0,na.BLACK=!1,na.EMPTY=new class{constructor(){this.size=0}get key(){throw Xn()}get value(){throw Xn()}get color(){throw Xn()}get left(){throw Xn()}get right(){throw Xn()}copy(i,e,t,c,f){return this}insert(i,e,t){return new na(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ns{constructor(e){this.comparator=e,this.data=new Rs(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,c)=>(e(t),!1))}forEachInRange(e,t){const c=this.data.getIteratorFrom(e[0]);for(;c.hasNext();){const f=c.getNext();if(this.comparator(f.key,e[1])>=0)return;t(f.key)}}forEachWhile(e,t){let c;for(c=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();c.hasNext();)if(!e(c.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Pf(this.data.getIterator())}getIteratorFrom(e){return new Pf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(c=>{t=t.add(c)}),t}isEqual(e){if(!(e instanceof Ns)||this.size!==e.size)return!1;const t=this.data.getIterator(),c=e.data.getIterator();for(;t.hasNext();){const f=t.getNext().key,y=c.getNext().key;if(0!==this.comparator(f,y))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ns(this.comparator);return t.data=e,t}}class Pf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function au(i){return i.hasNext()?i.getNext():void 0}class Va{constructor(e){this.fields=e,e.sort(Ps.comparator)}static empty(){return new Va([])}unionWith(e){let t=new Ns(Ps.comparator);for(const c of this.fields)t=t.add(c);for(const c of e)t=t.add(c);return new Va(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Hu(this.fields,e.fields,(t,c)=>t.isEqual(c))}}class Cp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ni{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(c){try{return atob(c)}catch(f){throw typeof DOMException<"u"&&f instanceof DOMException?new Cp("Invalid base64 string: "+f):f}}(e);return new Ni(t)}static fromUint8Array(e){const t=function(c){let f="";for(let y=0;y<c.length;++y)f+=String.fromCharCode(c[y]);return f}(e);return new Ni(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let c=0;c<e.length;c++)t[c]=e.charCodeAt(c);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ir(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ni.EMPTY_BYTE_STRING=new Ni("");const sc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ri(i){if(Ln(!!i),"string"==typeof i){let e=0;const t=sc.exec(i);if(Ln(!!t),t[1]){let f=t[1];f=(f+"000000000").substr(0,9),e=Number(f)}const c=new Date(i);return{seconds:Math.floor(c.getTime()/1e3),nanos:e}}return{seconds:to(i.seconds),nanos:to(i.nanos)}}function to(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function xi(i){return"string"==typeof i?Ni.fromBase64String(i):Ni.fromUint8Array(i)}function ku(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function fa(i){const e=i.mapValue.fields.__previous_value__;return ku(e)?fa(e):e}function Pu(i){const e=ri(i.mapValue.fields.__local_write_time__.timestampValue);return new Ti(e.seconds,e.nanos)}class wh{constructor(e,t,c,f,y,S,L,J,ue){this.databaseId=e,this.appId=t,this.persistenceKey=c,this.host=f,this.ssl=y,this.forceLongPolling=S,this.autoDetectLongPolling=L,this.longPollingOptions=J,this.useFetchStreams=ue}}class O{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new O("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof O&&e.projectId===this.projectId&&e.database===this.database}}const G={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},pe={nullValue:"NULL_VALUE"};function ze(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ku(i)?4:uu(i)?9007199254740991:10:Xn()}function ht(i,e){if(i===e)return!0;const t=ze(i);if(t!==ze(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Pu(i).isEqual(Pu(e));case 3:return function(c,f){if("string"==typeof c.timestampValue&&"string"==typeof f.timestampValue&&c.timestampValue.length===f.timestampValue.length)return c.timestampValue===f.timestampValue;const y=ri(c.timestampValue),S=ri(f.timestampValue);return y.seconds===S.seconds&&y.nanos===S.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return f=e,xi(i.bytesValue).isEqual(xi(f.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(c,f){return to(c.geoPointValue.latitude)===to(f.geoPointValue.latitude)&&to(c.geoPointValue.longitude)===to(f.geoPointValue.longitude)}(i,e);case 2:return function(c,f){if("integerValue"in c&&"integerValue"in f)return to(c.integerValue)===to(f.integerValue);if("doubleValue"in c&&"doubleValue"in f){const y=to(c.doubleValue),S=to(f.doubleValue);return y===S?Da(y)===Da(S):isNaN(y)&&isNaN(S)}return!1}(i,e);case 9:return Hu(i.arrayValue.values||[],e.arrayValue.values||[],ht);case 10:return function(c,f){const y=c.mapValue.fields||{},S=f.mapValue.fields||{};if(Vl(y)!==Vl(S))return!1;for(const L in y)if(y.hasOwnProperty(L)&&(void 0===S[L]||!ht(y[L],S[L])))return!1;return!0}(i,e);default:return Xn()}var f}function It(i,e){return void 0!==(i.values||[]).find(t=>ht(t,e))}function Ft(i,e){if(i===e)return 0;const t=ze(i),c=ze(e);if(t!==c)return Ir(t,c);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ir(i.booleanValue,e.booleanValue);case 2:return function(f,y){const S=to(f.integerValue||f.doubleValue),L=to(y.integerValue||y.doubleValue);return S<L?-1:S>L?1:S===L?0:isNaN(S)?isNaN(L)?0:-1:1}(i,e);case 3:return Kn(i.timestampValue,e.timestampValue);case 4:return Kn(Pu(i),Pu(e));case 5:return Ir(i.stringValue,e.stringValue);case 6:return function(f,y){const S=xi(f),L=xi(y);return S.compareTo(L)}(i.bytesValue,e.bytesValue);case 7:return function(f,y){const S=f.split("/"),L=y.split("/");for(let J=0;J<S.length&&J<L.length;J++){const ue=Ir(S[J],L[J]);if(0!==ue)return ue}return Ir(S.length,L.length)}(i.referenceValue,e.referenceValue);case 8:return function(f,y){const S=Ir(to(f.latitude),to(y.latitude));return 0!==S?S:Ir(to(f.longitude),to(y.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(f,y){const S=f.values||[],L=y.values||[];for(let J=0;J<S.length&&J<L.length;++J){const ue=Ft(S[J],L[J]);if(ue)return ue}return Ir(S.length,L.length)}(i.arrayValue,e.arrayValue);case 10:return function(f,y){if(f===G.mapValue&&y===G.mapValue)return 0;if(f===G.mapValue)return 1;if(y===G.mapValue)return-1;const S=f.fields||{},L=Object.keys(S),J=y.fields||{},ue=Object.keys(J);L.sort(),ue.sort();for(let Me=0;Me<L.length&&Me<ue.length;++Me){const it=Ir(L[Me],ue[Me]);if(0!==it)return it;const Pt=Ft(S[L[Me]],J[ue[Me]]);if(0!==Pt)return Pt}return Ir(L.length,ue.length)}(i.mapValue,e.mapValue);default:throw Xn()}}function Kn(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Ir(i,e);const t=ri(i),c=ri(e),f=Ir(t.seconds,c.seconds);return 0!==f?f:Ir(t.nanos,c.nanos)}function Fn(i){return gr(i)}function gr(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(c){const f=ri(c);return`time(${f.seconds},${f.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?xi(i.bytesValue).toBase64():"referenceValue"in i?Yn.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(c){let f="[",y=!0;for(const S of c.values||[])y?y=!1:f+=",",f+=gr(S);return f+"]"}(i.arrayValue):"mapValue"in i?function(c){const f=Object.keys(c.fields||{}).sort();let y="{",S=!0;for(const L of f)S?S=!1:y+=",",y+=`${L}:${gr(c.fields[L])}`;return y+"}"}(i.mapValue):Xn();var e}function Or(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Ho(i){return!!i&&"integerValue"in i}function To(i){return!!i&&"arrayValue"in i}function gl(i){return!!i&&"nullValue"in i}function ud(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Hl(i){return!!i&&"mapValue"in i}function Zo(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return ou(i.mapValue.fields,(t,c)=>e.mapValue.fields[t]=Zo(c)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zo(i.arrayValue.values[t]);return e}return Object.assign({},i)}function uu(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function ld(i){return"nullValue"in i?pe:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Or(O.empty(),Yn.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Xn()}function Of(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Or(O.empty(),Yn.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?G:Xn()}function Wu(i,e){const t=Ft(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Oc(i,e){const t=Ft(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Ha{constructor(e){this.value=e}static empty(){return new Ha({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let c=0;c<e.length-1;++c)if(t=(t.mapValue.fields||{})[e.get(c)],!Hl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zo(t)}setAll(e){let t=Ps.emptyPath(),c={},f=[];e.forEach((S,L)=>{if(!t.isImmediateParentOf(L)){const J=this.getFieldsMap(t);this.applyChanges(J,c,f),c={},f=[],t=L.popLast()}S?c[L.lastSegment()]=Zo(S):f.push(L.lastSegment())});const y=this.getFieldsMap(t);this.applyChanges(y,c,f)}delete(e){const t=this.field(e.popLast());Hl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ht(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let c=0;c<e.length;++c){let f=t.mapValue.fields[e.get(c)];Hl(f)&&f.mapValue.fields||(f={mapValue:{fields:{}}},t.mapValue.fields[e.get(c)]=f),t=f}return t.mapValue.fields}applyChanges(e,t,c){ou(t,(f,y)=>e[f]=y);for(const f of c)delete e[f]}clone(){return new Ha(Zo(this.value))}}function Ch(i){const e=[];return ou(i.fields,(t,c)=>{const f=new Ps([t]);if(Hl(c)){const y=Ch(c.mapValue).fields;if(0===y.length)e.push(f);else for(const S of y)e.push(f.child(S))}else e.push(f)}),new Va(e)}class _s{constructor(e,t,c,f,y,S,L){this.key=e,this.documentType=t,this.version=c,this.readTime=f,this.createTime=y,this.data=S,this.documentState=L}static newInvalidDocument(e){return new _s(e,0,Zn.min(),Zn.min(),Zn.min(),Ha.empty(),0)}static newFoundDocument(e,t,c,f){return new _s(e,1,t,Zn.min(),c,f,0)}static newNoDocument(e,t){return new _s(e,2,t,Zn.min(),Zn.min(),Ha.empty(),0)}static newUnknownDocument(e,t){return new _s(e,3,t,Zn.min(),Zn.min(),Ha.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Zn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ha.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ha.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof _s&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _s(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ml{constructor(e,t){this.position=e,this.inclusive=t}}function Vd(i,e,t){let c=0;for(let f=0;f<i.position.length;f++){const y=e[f],S=i.position[f];if(c=y.field.isKeyField()?Yn.comparator(Yn.fromName(S.referenceValue),t.key):Ft(S,t.data.field(y.field)),"desc"===y.dir&&(c*=-1),0!==c)break}return c}function sl(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!ht(i.position[t],e.position[t]))return!1;return!0}class cd{constructor(e,t="asc"){this.field=e,this.dir=t}}function Hd(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class dd{}class Hi extends dd{constructor(e,t,c){super(),this.field=e,this.op=t,this.value=c}static create(e,t,c){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,c):new Ug(e,t,c):"array-contains"===t?new Bg(e,c):"in"===t?new Vg(e,c):"not-in"===t?new Ap(e,c):"array-contains-any"===t?new pd(e,c):new Hi(e,t,c)}static createKeyFieldInFilter(e,t,c){return"in"===t?new xp(e,c):new Dp(e,c)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ft(t,this.value)):null!==t&&ze(this.value)===ze(t)&&this.matchesComparison(Ft(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class bs extends dd{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new bs(e,t)}matches(e){return hd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function hd(i){return"and"===i.op}function Ip(i){return"or"===i.op}function oc(i){return fd(i)&&hd(i)}function fd(i){for(const e of i.filters)if(e instanceof bs)return!1;return!0}function Ih(i){if(i instanceof Hi)return i.field.canonicalString()+i.op.toString()+Fn(i.value);if(oc(i))return i.filters.map(e=>Ih(e)).join(",");{const e=i.filters.map(t=>Ih(t)).join(",");return`${i.op}(${e})`}}function Rf(i,e){return i instanceof Hi?(t=i,(c=e)instanceof Hi&&t.op===c.op&&t.field.isEqual(c.field)&&ht(t.value,c.value)):i instanceof bs?function(t,c){return c instanceof bs&&t.op===c.op&&t.filters.length===c.filters.length&&t.filters.reduce((f,y,S)=>f&&Rf(y,c.filters[S]),!0)}(i,e):void Xn();var t,c}function xh(i,e){const t=i.filters.concat(e);return bs.create(t,i.op)}function Dh(i){return i instanceof Hi?`${(e=i).field.canonicalString()} ${e.op} ${Fn(e.value)}`:i instanceof bs?function(e){return e.op.toString()+" {"+e.getFilters().map(Dh).join(" ,")+"}"}(i):"Filter";var e}class Ug extends Hi{constructor(e,t,c){super(e,t,c),this.key=Yn.fromName(c.referenceValue)}matches(e){const t=Yn.comparator(e.key,this.key);return this.matchesComparison(t)}}class xp extends Hi{constructor(e,t){super(e,"in",t),this.keys=Ah(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Dp extends Hi{constructor(e,t){super(e,"not-in",t),this.keys=Ah(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ah(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(c=>Yn.fromName(c.referenceValue))}class Bg extends Hi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return To(t)&&It(t.arrayValue,this.value)}}class Vg extends Hi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&It(this.value.arrayValue,t)}}class Ap extends Hi{constructor(e,t){super(e,"not-in",t)}matches(e){if(It(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!It(this.value.arrayValue,t)}}class pd extends Hi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!To(t)||!t.arrayValue.values)&&t.arrayValue.values.some(c=>It(this.value.arrayValue,c))}}class Xm{constructor(e,t=null,c=[],f=[],y=null,S=null,L=null){this.path=e,this.collectionGroup=t,this.orderBy=c,this.filters=f,this.limit=y,this.startAt=S,this.endAt=L,this.dt=null}}function gd(i,e=null,t=[],c=[],f=null,y=null,S=null){return new Xm(i,e,t,c,f,y,S)}function $l(i){const e=Bn(i);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(c=>Ih(c)).join(","),t+="|ob:",t+=e.orderBy.map(c=>{return(f=c).field.canonicalString()+f.dir;var f}).join(","),od(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(c=>Fn(c)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(c=>Fn(c)).join(",")),e.dt=t}return e.dt}function md(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!Hd(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Rf(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!sl(i.startAt,e.startAt)&&sl(i.endAt,e.endAt)}function Nf(i){return Yn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function $d(i,e){return i.filters.filter(t=>t instanceof Hi&&t.field.isEqual(e))}function Hg(i,e,t){let c=pe,f=!0;for(const y of $d(i,e)){let S=pe,L=!0;switch(y.op){case"<":case"<=":S=ld(y.value);break;case"==":case"in":case">=":S=y.value;break;case">":S=y.value,L=!1;break;case"!=":case"not-in":S=pe}Wu({value:c,inclusive:f},{value:S,inclusive:L})<0&&(c=S,f=L)}if(null!==t)for(let y=0;y<i.orderBy.length;++y)if(i.orderBy[y].field.isEqual(e)){const S=t.position[y];Wu({value:c,inclusive:f},{value:S,inclusive:t.inclusive})<0&&(c=S,f=t.inclusive);break}return{value:c,inclusive:f}}function wy(i,e,t){let c=G,f=!0;for(const y of $d(i,e)){let S=G,L=!0;switch(y.op){case">=":case">":S=Of(y.value),L=!1;break;case"==":case"in":case"<=":S=y.value;break;case"<":S=y.value,L=!1;break;case"!=":case"not-in":S=G}Oc({value:c,inclusive:f},{value:S,inclusive:L})>0&&(c=S,f=L)}if(null!==t)for(let y=0;y<i.orderBy.length;++y)if(i.orderBy[y].field.isEqual(e)){const S=t.position[y];Oc({value:c,inclusive:f},{value:S,inclusive:t.inclusive})>0&&(c=S,f=t.inclusive);break}return{value:c,inclusive:f}}class vl{constructor(e,t=null,c=[],f=[],y=null,S="F",L=null,J=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=c,this.filters=f,this.limit=y,this.limitType=S,this.startAt=L,this.endAt=J,this.wt=null,this._t=null}}function Mh(i,e,t,c,f,y,S,L){return new vl(i,e,t,c,f,y,S,L)}function ol(i){return new vl(i)}function vd(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Gd(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function kh(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function ac(i){return null!==i.collectionGroup}function uc(i){const e=Bn(i);if(null===e.wt){e.wt=[];const t=kh(e),c=Gd(e);if(null!==t&&null===c)t.isKeyField()||e.wt.push(new cd(t)),e.wt.push(new cd(Ps.keyField(),"asc"));else{let f=!1;for(const y of e.explicitOrderBy)e.wt.push(y),y.field.isKeyField()&&(f=!0);if(!f){const y=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new cd(Ps.keyField(),y))}}}return e.wt}function pa(i){const e=Bn(i);if(!e._t)if("F"===e.limitType)e._t=gd(e.path,e.collectionGroup,uc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const y of uc(e))t.push(new cd(y.field,"desc"===y.dir?"asc":"desc"));const c=e.endAt?new ml(e.endAt.position,e.endAt.inclusive):null,f=e.startAt?new ml(e.startAt.position,e.startAt.inclusive):null;e._t=gd(e.path,e.collectionGroup,t,e.filters,e.limit,c,f)}return e._t}function Rc(i,e){e.getFirstInequalityField(),kh(i);const t=i.filters.concat([e]);return new vl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function lu(i,e,t){return new vl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Ph(i,e){return md(pa(i),pa(e))&&i.limitType===e.limitType}function Oh(i){return`${$l(pa(i))}|lt:${i.limitType}`}function qu(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(c=>Dh(c)).join(", ")}]`),od(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(c=>{return`${(f=c).field.canonicalString()} (${f.dir})`;var f}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(c=>Fn(c)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(c=>Fn(c)).join(",")),`Target(${t})`}(pa(i))}; limitType=${i.limitType})`}function yd(i,e){return e.isFoundDocument()&&function(t,c){const f=c.key.path;return null!==t.collectionGroup?c.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(f):Yn.isDocumentKey(t.path)?t.path.isEqual(f):t.path.isImmediateParentOf(f)}(i,e)&&function(t,c){for(const f of uc(t))if(!f.field.isKeyField()&&null===c.data.field(f.field))return!1;return!0}(i,e)&&function(t,c){for(const f of t.filters)if(!f.matches(c))return!1;return!0}(i,e)&&(c=e,!((t=i).startAt&&!function(f,y,S){const L=Vd(f,y,S);return f.inclusive?L<=0:L<0}(t.startAt,uc(t),c)||t.endAt&&!function(f,y,S){const L=Vd(f,y,S);return f.inclusive?L>=0:L>0}(t.endAt,uc(t),c)));var t,c}function lc(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Rh(i){return(e,t)=>{let c=!1;for(const f of uc(i)){const y=Mp(f,e,t);if(0!==y)return y;c=c||f.field.isKeyField()}return 0}}function Mp(i,e,t){const c=i.field.isKeyField()?Yn.comparator(e.key,t.key):function(f,y,S){const L=y.data.field(f),J=S.data.field(f);return null!==L&&null!==J?Ft(L,J):Xn()}(i.field,e,t);switch(i.dir){case"asc":return c;case"desc":return-1*c;default:return Xn()}}class Ku{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),c=this.inner[t];if(void 0!==c)for(const[f,y]of c)if(this.equalsFn(f,e))return y}has(e){return void 0!==this.get(e)}set(e,t){const c=this.mapKeyFn(e),f=this.inner[c];if(void 0===f)return this.inner[c]=[[e,t]],void this.innerSize++;for(let y=0;y<f.length;y++)if(this.equalsFn(f[y][0],e))return void(f[y]=[e,t]);f.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),c=this.inner[t];if(void 0===c)return!1;for(let f=0;f<c.length;f++)if(this.equalsFn(c[f][0],e))return 1===c.length?delete this.inner[t]:c.splice(f,1),this.innerSize--,!0;return!1}forEach(e){ou(this.inner,(t,c)=>{for(const[f,y]of c)e(f,y)})}isEmpty(){return il(this.inner)}size(){return this.innerSize}}const Lf=new Rs(Yn.comparator);function cu(){return Lf}const zd=new Rs(Yn.comparator);function ga(...i){let e=zd;for(const t of i)e=e.insert(t.key,t);return e}function Wd(i){let e=zd;return i.forEach((t,c)=>e=e.insert(t,c.overlayedDocument)),e}function Ou(){return $o()}function Nh(){return $o()}function $o(){return new Ku(i=>i.toString(),(i,e)=>i.isEqual(e))}const qd=new Rs(Yn.comparator),kp=new Ns(Yn.comparator);function vi(...i){let e=kp;for(const t of i)e=e.add(t);return e}const Lh=new Ns(Ir);function _d(){return Lh}function Ff(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Da(e)?"-0":e}}function jf(i){return{integerValue:""+i}}function Fh(i,e){return pl(e)?jf(e):Ff(i,e)}class Nc{constructor(){this._=void 0}}function $g(i,e,t){return i instanceof cc?function(c,f){const y={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return f&&ku(f)&&(f=fa(f)),f&&(y.fields.__previous_value__=f),{mapValue:y}}(t,e):i instanceof Fc?jc(i,e):i instanceof Gl?Pp(i,e):function(c,f){const y=Lc(c,f),S=jh(y)+jh(c.gt);return Ho(y)&&Ho(c.gt)?jf(S):Ff(c.serializer,S)}(i,e)}function Gg(i,e,t){return i instanceof Fc?jc(i,e):i instanceof Gl?Pp(i,e):t}function Lc(i,e){return i instanceof Ru?Ho(t=e)||(c=t)&&"doubleValue"in c?e:{integerValue:0}:null;var c,t}class cc extends Nc{}class Fc extends Nc{constructor(e){super(),this.elements=e}}function jc(i,e){const t=Op(e);for(const c of i.elements)t.some(f=>ht(f,c))||t.push(c);return{arrayValue:{values:t}}}class Gl extends Nc{constructor(e){super(),this.elements=e}}function Pp(i,e){let t=Op(e);for(const c of i.elements)t=t.filter(f=>!ht(f,c));return{arrayValue:{values:t}}}class Ru extends Nc{constructor(e,t){super(),this.serializer=e,this.gt=t}}function jh(i){return to(i.integerValue||i.doubleValue)}function Op(i){return To(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Nu{constructor(e,t){this.field=e,this.transform=t}}class Rp{constructor(e,t){this.version=e,this.transformResults=t}}class no{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new no}static exists(e){return new no(void 0,e)}static updateTime(e){return new no(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bd(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Kd{}function zg(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Uc(i.key,no.none()):new Ed(i.key,i.data,no.none());{const t=i.data,c=Ha.empty();let f=new Ns(Ps.comparator);for(let y of e.fields)if(!f.has(y)){let S=t.field(y);null===S&&y.length>1&&(y=y.popLast(),S=t.field(y)),null===S?c.delete(y):c.set(y,S),f=f.add(y)}return new Zu(i.key,c,new Va(f.toArray()),no.none())}}function Np(i,e,t){i instanceof Ed?function(c,f,y){const S=c.value.clone(),L=zn(c.fieldTransforms,f,y.transformResults);S.setAll(L),f.convertToFoundDocument(y.version,S).setHasCommittedMutations()}(i,e,t):i instanceof Zu?function(c,f,y){if(!bd(c.precondition,f))return void f.convertToUnknownDocument(y.version);const S=zn(c.fieldTransforms,f,y.transformResults),L=f.data;L.setAll(Uh(c)),L.setAll(S),f.convertToFoundDocument(y.version,L).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Td(i,e,t,c){return i instanceof Ed?function(f,y,S,L){if(!bd(f.precondition,y))return S;const J=f.value.clone(),ue=dc(f.fieldTransforms,L,y);return J.setAll(ue),y.convertToFoundDocument(y.version,J).setHasLocalMutations(),null}(i,e,t,c):i instanceof Zu?function(f,y,S,L){if(!bd(f.precondition,y))return S;const J=dc(f.fieldTransforms,L,y),ue=y.data;return ue.setAll(Uh(f)),ue.setAll(J),y.convertToFoundDocument(y.version,ue).setHasLocalMutations(),null===S?null:S.unionWith(f.fieldMask.fields).unionWith(f.fieldTransforms.map(Me=>Me.field))}(i,e,t,c):(S=t,bd(i.precondition,y=e)?(y.convertToNoDocument(y.version).setHasLocalMutations(),null):S);var y,S}function Bf(i,e){let t=null;for(const c of i.fieldTransforms){const f=e.data.field(c.field),y=Lc(c.transform,f||null);null!=y&&(null===t&&(t=Ha.empty()),t.set(c.field,y))}return t||null}function Lp(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(c=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===c||t&&c&&Hu(t,c,(f,y)=>function Uf(i,e){return i.field.isEqual(e.field)&&(c=e.transform,(t=i.transform)instanceof Fc&&c instanceof Fc||t instanceof Gl&&c instanceof Gl?Hu(t.elements,c.elements,ht):t instanceof Ru&&c instanceof Ru?ht(t.gt,c.gt):t instanceof cc&&c instanceof cc);var t,c}(f,y))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,c}class Ed extends Kd{constructor(e,t,c,f=[]){super(),this.key=e,this.value=t,this.precondition=c,this.fieldTransforms=f,this.type=0}getFieldMask(){return null}}class Zu extends Kd{constructor(e,t,c,f,y=[]){super(),this.key=e,this.data=t,this.fieldMask=c,this.precondition=f,this.fieldTransforms=y,this.type=1}getFieldMask(){return this.fieldMask}}function Uh(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const c=i.data.field(t);e.set(t,c)}}),e}function zn(i,e,t){const c=new Map;Ln(i.length===t.length);for(let f=0;f<t.length;f++){const y=i[f],S=y.transform,L=e.data.field(y.field);c.set(y.field,Gg(S,L,t[f]))}return c}function dc(i,e,t){const c=new Map;for(const f of i){const y=f.transform,S=t.data.field(f.field);c.set(f.field,$g(y,S,e))}return c}class Uc extends Kd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sd extends Kd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Bc{constructor(e,t,c,f){this.batchId=e,this.localWriteTime=t,this.baseMutations=c,this.mutations=f}applyToRemoteDocument(e,t){const c=t.mutationResults;for(let f=0;f<this.mutations.length;f++){const y=this.mutations[f];y.key.isEqual(e.key)&&Np(y,e,c[f])}}applyToLocalView(e,t){for(const c of this.baseMutations)c.key.isEqual(e.key)&&(t=Td(c,e,t,this.localWriteTime));for(const c of this.mutations)c.key.isEqual(e.key)&&(t=Td(c,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const c=Nh();return this.mutations.forEach(f=>{const y=e.get(f.key),S=y.overlayedDocument;let L=this.applyToLocalView(S,y.mutatedFields);L=t.has(f.key)?null:L;const J=zg(S,L);null!==J&&c.set(f.key,J),S.isValidDocument()||S.convertToNoDocument(Zn.min())}),c}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),vi())}isEqual(e){return this.batchId===e.batchId&&Hu(this.mutations,e.mutations,(t,c)=>Lp(t,c))&&Hu(this.baseMutations,e.baseMutations,(t,c)=>Lp(t,c))}}class Lu{constructor(e,t,c,f){this.batch=e,this.commitVersion=t,this.mutationResults=c,this.docVersions=f}static from(e,t,c){Ln(e.mutations.length===c.length);let f=qd;const y=e.mutations;for(let S=0;S<y.length;S++)f=f.insert(y[S].key,c[S].version);return new Lu(e,t,c,f)}}class Vf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Bh{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ls,yi;function wd(i){switch(i){default:return Xn();case jt.CANCELLED:case jt.UNKNOWN:case jt.DEADLINE_EXCEEDED:case jt.RESOURCE_EXHAUSTED:case jt.INTERNAL:case jt.UNAVAILABLE:case jt.UNAUTHENTICATED:return!1;case jt.INVALID_ARGUMENT:case jt.NOT_FOUND:case jt.ALREADY_EXISTS:case jt.PERMISSION_DENIED:case jt.FAILED_PRECONDITION:case jt.ABORTED:case jt.OUT_OF_RANGE:case jt.UNIMPLEMENTED:case jt.DATA_LOSS:return!0}}function Zd(i){if(void 0===i)return lo("GRPC error has no .code"),jt.UNKNOWN;switch(i){case Ls.OK:return jt.OK;case Ls.CANCELLED:return jt.CANCELLED;case Ls.UNKNOWN:return jt.UNKNOWN;case Ls.DEADLINE_EXCEEDED:return jt.DEADLINE_EXCEEDED;case Ls.RESOURCE_EXHAUSTED:return jt.RESOURCE_EXHAUSTED;case Ls.INTERNAL:return jt.INTERNAL;case Ls.UNAVAILABLE:return jt.UNAVAILABLE;case Ls.UNAUTHENTICATED:return jt.UNAUTHENTICATED;case Ls.INVALID_ARGUMENT:return jt.INVALID_ARGUMENT;case Ls.NOT_FOUND:return jt.NOT_FOUND;case Ls.ALREADY_EXISTS:return jt.ALREADY_EXISTS;case Ls.PERMISSION_DENIED:return jt.PERMISSION_DENIED;case Ls.FAILED_PRECONDITION:return jt.FAILED_PRECONDITION;case Ls.ABORTED:return jt.ABORTED;case Ls.OUT_OF_RANGE:return jt.OUT_OF_RANGE;case Ls.UNIMPLEMENTED:return jt.UNIMPLEMENTED;case Ls.DATA_LOSS:return jt.DATA_LOSS;default:return Xn()}}(yi=Ls||(Ls={}))[yi.OK=0]="OK",yi[yi.CANCELLED=1]="CANCELLED",yi[yi.UNKNOWN=2]="UNKNOWN",yi[yi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yi[yi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yi[yi.NOT_FOUND=5]="NOT_FOUND",yi[yi.ALREADY_EXISTS=6]="ALREADY_EXISTS",yi[yi.PERMISSION_DENIED=7]="PERMISSION_DENIED",yi[yi.UNAUTHENTICATED=16]="UNAUTHENTICATED",yi[yi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yi[yi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yi[yi.ABORTED=10]="ABORTED",yi[yi.OUT_OF_RANGE=11]="OUT_OF_RANGE",yi[yi.UNIMPLEMENTED=12]="UNIMPLEMENTED",yi[yi.INTERNAL=13]="INTERNAL",yi[yi.UNAVAILABLE=14]="UNAVAILABLE",yi[yi.DATA_LOSS=15]="DATA_LOSS";class Cd{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Id}static getOrCreateInstance(){return null===Id&&(Id=new Cd),Id}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Id=null;function ra(){return new TextEncoder}const Hf=new Us([4294967295,4294967295],0);function Vc(i){const e=ra().encode(i),t=new nl;return t.update(e),new Uint8Array(t.digest())}function Tu(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),c=e.getUint32(4,!0),f=e.getUint32(8,!0),y=e.getUint32(12,!0);return[new Us([t,c],0),new Us([f,y],0)]}class Yu{constructor(e,t,c){if(this.bitmap=e,this.padding=t,this.hashCount=c,t<0||t>=8)throw new yl(`Invalid padding: ${t}`);if(c<0)throw new yl(`Invalid hash count: ${c}`);if(e.length>0&&0===this.hashCount)throw new yl(`Invalid hash count: ${c}`);if(0===e.length&&0!==t)throw new yl(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Us.fromNumber(this.It)}Et(e,t,c){let f=e.add(t.multiply(Us.fromNumber(c)));return 1===f.compare(Hf)&&(f=new Us([f.getBits(0),f.getBits(1)],0)),f.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Vc(e),[c,f]=Tu(t);for(let y=0;y<this.hashCount;y++){const S=this.Et(c,f,y);if(!this.At(S))return!1}return!0}static create(e,t,c){const f=e%8==0?0:8-e%8,y=new Uint8Array(Math.ceil(e/8)),S=new Yu(y,f,t);return c.forEach(L=>S.insert(L)),S}insert(e){if(0===this.It)return;const t=Vc(e),[c,f]=Tu(t);for(let y=0;y<this.hashCount;y++){const S=this.Et(c,f,y);this.Rt(S)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zl{constructor(e,t,c,f,y){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=c,this.documentUpdates=f,this.resolvedLimboDocuments=y}static createSynthesizedRemoteEventForCurrentChange(e,t,c){const f=new Map;return f.set(e,St.createSynthesizedTargetChangeForCurrentChange(e,t,c)),new zl(Zn.min(),f,new Rs(Ir),cu(),vi())}}class St{constructor(e,t,c,f,y){this.resumeToken=e,this.current=t,this.addedDocuments=c,this.modifiedDocuments=f,this.removedDocuments=y}static createSynthesizedTargetChangeForCurrentChange(e,t,c){return new St(c,t,vi(),vi(),vi())}}class hc{constructor(e,t,c,f){this.Pt=e,this.removedTargetIds=t,this.key=c,this.bt=f}}class Wl{constructor(e,t){this.targetId=e,this.Vt=t}}class al{constructor(e,t,c=Ni.EMPTY_BYTE_STRING,f=null){this.state=e,this.targetIds=t,this.resumeToken=c,this.cause=f}}class Yd{constructor(){this.St=0,this.Dt=w(),this.Ct=Ni.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=vi(),t=vi(),c=vi();return this.Dt.forEach((f,y)=>{switch(y){case 0:e=e.add(f);break;case 2:t=t.add(f);break;case 1:c=c.add(f);break;default:Xn()}}),new St(this.Ct,this.xt,e,t,c)}Ft(){this.Nt=!1,this.Dt=w()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class _l{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=cu(),this.zt=fc(),this.Wt=new Rs(Ir)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const c=this.Zt(t);switch(e.state){case 0:this.te(t)&&c.$t(e.resumeToken);break;case 1:c.Ut(),c.kt||c.Ft(),c.$t(e.resumeToken);break;case 2:c.Ut(),c.kt||this.removeTarget(t);break;case 3:this.te(t)&&(c.Kt(),c.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),c.$t(e.resumeToken));break;default:Xn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((c,f)=>{this.te(f)&&t(f)})}ne(e){var t;const c=e.targetId,f=e.Vt.count,y=this.se(c);if(y){const S=y.target;if(Nf(S))if(0===f){const L=new Yn(S.path);this.Yt(c,L,_s.newNoDocument(L,Zn.min()))}else Ln(1===f);else{const L=this.ie(c);if(L!==f){const J=this.re(e,L);0!==J&&(this.ee(c),this.Wt=this.Wt.insert(c,2===J?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Cd.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(ue,Me,it){var Pt,Xt,bn,rr,or,Di;const ls={localCacheCount:Me,existenceFilterCount:it.count},ki=it.unchangedNames;return ki&&(ls.bloomFilter={applied:0===ue,hashCount:null!==(Pt=ki?.hashCount)&&void 0!==Pt?Pt:0,bitmapLength:null!==(rr=null===(bn=null===(Xt=ki?.bits)||void 0===Xt?void 0:Xt.bitmap)||void 0===bn?void 0:bn.length)&&void 0!==rr?rr:0,padding:null!==(Di=null===(or=ki?.bits)||void 0===or?void 0:or.padding)&&void 0!==Di?Di:0}),ls}(J,L,e.Vt))}}}}re(e,t){const{unchangedNames:c,count:f}=e.Vt;if(!c||!c.bits)return 1;const{bits:{bitmap:y="",padding:S=0},hashCount:L=0}=c;let J,ue;try{J=xi(y).toUint8Array()}catch(Me){if(Me instanceof Cp)return ys("Decoding the base64 bloom filter in existence filter failed ("+Me.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw Me}try{ue=new Yu(J,S,L)}catch(Me){return ys(Me instanceof yl?"BloomFilter error: ":"Applying bloom filter failed: ",Me),1}return 0===ue.It?1:f!==t-this.oe(e.targetId,ue)?2:0}oe(e,t){const c=this.Gt.getRemoteKeysForTarget(e);let f=0;return c.forEach(y=>{const S=this.Gt.ue(),L=`projects/${S.projectId}/databases/${S.database}/documents/${y.path.canonicalString()}`;t.vt(L)||(this.Yt(e,y,null),f++)}),f}ce(e){const t=new Map;this.Qt.forEach((y,S)=>{const L=this.se(S);if(L){if(y.current&&Nf(L.target)){const J=new Yn(L.target.path);null!==this.jt.get(J)||this.ae(S,J)||this.Yt(S,J,_s.newNoDocument(J,e))}y.Mt&&(t.set(S,y.Ot()),y.Ft())}});let c=vi();this.zt.forEach((y,S)=>{let L=!0;S.forEachWhile(J=>{const ue=this.se(J);return!ue||"TargetPurposeLimboResolution"===ue.purpose||(L=!1,!1)}),L&&(c=c.add(y))}),this.jt.forEach((y,S)=>S.setReadTime(e));const f=new zl(e,t,this.Wt,this.jt,c);return this.jt=cu(),this.zt=fc(),this.Wt=new Rs(Ir),f}Jt(e,t){if(!this.te(e))return;const c=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,c),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,c){if(!this.te(e))return;const f=this.Zt(e);this.ae(e,t)?f.Bt(t,1):f.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),c&&(this.jt=this.jt.insert(t,c))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Yd,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Ns(Ir),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Pn("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Yd),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function fc(){return new Rs(Yn.comparator)}function w(){return new Rs(Yn.comparator)}const v={asc:"ASCENDING",desc:"DESCENDING"},b={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},x={and:"AND",or:"OR"};class K{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function le(i,e){return i.useProto3Json||od(e)?e:{value:e}}function Je(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _t(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function dn(i,e){return Je(i,e.toTimestamp())}function Bt(i){return Ln(!!i),Zn.fromTimestamp(function(e){const t=ri(e);return new Ti(t.seconds,t.nanos)}(i))}function Un(i,e){return(t=i,new pi(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Wn(i){const e=pi.fromString(i);return Ln(du(e)),e}function zr(i,e){return Un(i.databaseId,e.path)}function zi(i,e){const t=Wn(e);if(t.get(1)!==i.databaseId.projectId)throw new mn(jt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new mn(jt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Yn(bl(t))}function ma(i,e){return Un(i.databaseId,e)}function Fu(i){const e=Wn(i);return 4===e.length?pi.emptyPath():bl(e)}function $a(i){return new pi(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function bl(i){return Ln(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function pc(i,e,t){return{name:zr(i,e),fields:t.value.mapValue.fields}}function $f(i,e,t){const c=zi(i,e.name),f=Bt(e.updateTime),y=e.createTime?Bt(e.createTime):Zn.min(),S=new Ha({mapValue:{fields:e.fields}}),L=_s.newFoundDocument(c,f,y,S);return t&&L.setHasCommittedMutations(),t?L.setHasCommittedMutations():L}function Tl(i,e){let t;if(e instanceof Ed)t={update:pc(i,e.key,e.value)};else if(e instanceof Uc)t={delete:zr(i,e.key)};else if(e instanceof Zu)t={update:pc(i,e.key,e.data),updateMask:Up(e.fieldMask)};else{if(!(e instanceof Sd))return Xn();t={verify:zr(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(c=>function(f,y){const S=y.transform;if(S instanceof cc)return{fieldPath:y.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(S instanceof Fc)return{fieldPath:y.field.canonicalString(),appendMissingElements:{values:S.elements}};if(S instanceof Gl)return{fieldPath:y.field.canonicalString(),removeAllFromArray:{values:S.elements}};if(S instanceof Ru)return{fieldPath:y.field.canonicalString(),increment:S.gt};throw Xn()}(0,c))),e.precondition.isNone||(t.currentDocument=void 0!==(f=e.precondition).updateTime?{updateTime:dn(i,f.updateTime)}:void 0!==f.exists?{exists:f.exists}:Xn()),t;var f}function Vh(i,e){const t=e.currentDocument?void 0!==(f=e.currentDocument).updateTime?no.updateTime(Bt(f.updateTime)):void 0!==f.exists?no.exists(f.exists):no.none():no.none(),c=e.updateTransforms?e.updateTransforms.map(f=>function(y,S){let L=null;"setToServerValue"in S?(Ln("REQUEST_TIME"===S.setToServerValue),L=new cc):"appendMissingElements"in S?L=new Fc(S.appendMissingElements.values||[]):"removeAllFromArray"in S?L=new Gl(S.removeAllFromArray.values||[]):"increment"in S?L=new Ru(y,S.increment):Xn();const J=Ps.fromServerFormat(S.fieldPath);return new Nu(J,L)}(i,f)):[];var f;if(e.update){const f=zi(i,e.update.name),y=new Ha({mapValue:{fields:e.update.fields}});if(e.updateMask){const S=new Va((e.updateMask.fieldPaths||[]).map(ue=>Ps.fromServerFormat(ue)));return new Zu(f,y,S,t,c)}return new Ed(f,y,t,c)}if(e.delete){const f=zi(i,e.delete);return new Uc(f,t)}if(e.verify){const f=zi(i,e.verify);return new Sd(f,t)}return Xn()}function mc(i,e){return{documents:[ma(i,e.path)]}}function Gf(i,e){const t={structuredQuery:{}},c=e.path;null!==e.collectionGroup?(t.parent=ma(i,c),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ma(i,c.popLast()),t.structuredQuery.from=[{collectionId:c.lastSegment()}]);const f=function(J){if(0!==J.length)return Jm(bs.create(J,"and"))}(e.filters);f&&(t.structuredQuery.where=f);const y=function(J){if(0!==J.length)return J.map(ue=>{return{field:Hc((Me=ue).field),direction:j_(Me.dir)};var Me})}(e.orderBy);y&&(t.structuredQuery.orderBy=y);const S=le(i,e.limit);var L,J;return null!==S&&(t.structuredQuery.limit=S),e.startAt&&(t.structuredQuery.startAt={before:(L=e.startAt).inclusive,values:L.position}),e.endAt&&(t.structuredQuery.endAt={before:!(J=e.endAt).inclusive,values:J.position}),t}function Wg(i){let e=Fu(i.parent);const t=i.structuredQuery,c=t.from?t.from.length:0;let f=null;if(c>0){Ln(1===c);const Me=t.from[0];Me.allDescendants?f=Me.collectionId:e=e.child(Me.collectionId)}let y=[];t.where&&(y=function(Me){const it=Cy(Me);return it instanceof bs&&oc(it)?it.getFilters():[it]}(t.where));let S=[];t.orderBy&&(S=t.orderBy.map(Me=>{return new cd(Qd((it=Me).field),function(Pt){switch(Pt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(it.direction));var it}));let L=null;t.limit&&(L=function(Me){let it;return it="object"==typeof Me?Me.value:Me,od(it)?null:it}(t.limit));let J=null;var Me;t.startAt&&(J=new ml((Me=t.startAt).values||[],!!Me.before));let ue=null;return t.endAt&&(ue=function(Me){return new ml(Me.values||[],!Me.before)}(t.endAt)),Mh(e,f,S,y,L,"F",J,ue)}function Cy(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Qd(e.unaryFilter.field);return Hi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const c=Qd(e.unaryFilter.field);return Hi.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const f=Qd(e.unaryFilter.field);return Hi.create(f,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const y=Qd(e.unaryFilter.field);return Hi.create(y,"!=",{nullValue:"NULL_VALUE"});default:return Xn()}}(i):void 0!==i.fieldFilter?Hi.create(Qd((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return bs.create(e.compositeFilter.filters.map(t=>Cy(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Xn()}}(e.compositeFilter.op))}(i):Xn();var e}function j_(i){return v[i]}function Iy(i){return b[i]}function xy(i){return x[i]}function Hc(i){return{fieldPath:i.canonicalString()}}function Qd(i){return Ps.fromServerFormat(i.fieldPath)}function Jm(i){return i instanceof Hi?function(e){if("=="===e.op){if(ud(e.value))return{unaryFilter:{field:Hc(e.field),op:"IS_NAN"}};if(gl(e.value))return{unaryFilter:{field:Hc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ud(e.value))return{unaryFilter:{field:Hc(e.field),op:"IS_NOT_NAN"}};if(gl(e.value))return{unaryFilter:{field:Hc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hc(e.field),op:Iy(e.op),value:e.value}}}(i):i instanceof bs?function(e){const t=e.getFilters().map(c=>Jm(c));return 1===t.length?t[0]:{compositeFilter:{op:xy(e.op),filters:t}}}(i):Xn()}function Up(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function du(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class hu{constructor(e,t,c,f,y=Zn.min(),S=Zn.min(),L=Ni.EMPTY_BYTE_STRING,J=null){this.target=e,this.targetId=t,this.purpose=c,this.sequenceNumber=f,this.snapshotVersion=y,this.lastLimboFreeSnapshotVersion=S,this.resumeToken=L,this.expectedCount=J}withSequenceNumber(e){return new hu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Xd{constructor(e){this.fe=e}}function ev(i,e){const t=e.key,c={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:$c(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())c.document={name:zr(f=i.fe,(y=e).key),fields:y.data.value.mapValue.fields,updateTime:Je(f,y.version.toTimestamp()),createTime:Je(f,y.createTime.toTimestamp())};else if(e.isNoDocument())c.noDocument={path:t.path.toArray(),readTime:Hh(e.version)};else{if(!e.isUnknownDocument())return Xn();c.unknownDocument={path:t.path.toArray(),version:Hh(e.version)}}var f,y;return c}function $c(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Hh(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function zf(i){const e=new Ti(i.seconds,i.nanoseconds);return Zn.fromTimestamp(e)}function Wf(i,e){const t=(e.baseMutations||[]).map(y=>Vh(i.fe,y));for(let y=0;y<e.mutations.length-1;++y)y+1<e.mutations.length&&void 0!==e.mutations[y+1].transform&&(e.mutations[y].updateTransforms=e.mutations[y+1].transform.fieldTransforms,e.mutations.splice(y+1,1),++y);const c=e.mutations.map(y=>Vh(i.fe,y)),f=Ti.fromMillis(e.localWriteTimeMs);return new Bc(e.batchId,f,t,c)}function $h(i){const e=zf(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?zf(i.lastLimboFreeSnapshotVersion):Zn.min();let c;var f;return void 0!==i.query.documents?(Ln(1===(f=i.query).documents.length),c=pa(ol(Fu(f.documents[0])))):c=pa(Wg(i.query)),new hu(c,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,Ni.fromBase64String(i.resumeToken))}function Bp(i,e){const t=Hh(e.snapshotVersion),c=Hh(e.lastLimboFreeSnapshotVersion);let f;f=Nf(e.target)?mc(i.fe,e.target):Gf(i.fe,e.target);const y=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$l(e.target),readTime:t,resumeToken:y,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:c,query:f}}function Vp(i){const e=Wg({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?lu(e,e.limit,"L"):e}function Ay(i,e){return new Vf(e.largestBatchId,Vh(i.fe,e.overlayMutation))}function tv(i,e){const t=e.path.lastSegment();return[i,Mo(e.path.popLast()),t]}function My(i,e,t,c){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:Hh(c.readTime),documentKey:Mo(c.documentKey.path),largestBatchId:c.largestBatchId}}class U_{getBundleMetadata(e,t){return nv(e).get(t).next(c=>{if(c)return{id:(f=c).bundleId,createTime:zf(f.createTime),version:f.version};var f})}saveBundleMetadata(e,t){return nv(e).put({bundleId:(c=t).id,createTime:Hh(Bt(c.createTime)),version:c.version});var c}getNamedQuery(e,t){return rv(e).get(t).next(c=>{if(c)return{name:(f=c).name,query:Vp(f.bundledQuery),readTime:zf(f.readTime)};var f})}saveNamedQuery(e,t){return rv(e).put({name:(c=t).name,readTime:Hh(Bt(c.readTime)),bundledQuery:c.bundledQuery});var c}}function nv(i){return Os(i,"bundles")}function rv(i){return Os(i,"namedQueries")}class qf{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new qf(e,t.uid||"")}getOverlay(e,t){return Gc(e).get(tv(this.userId,t)).next(c=>c?Ay(this.serializer,c):null)}getOverlays(e,t){const c=Ou();return Ot.forEach(t,f=>this.getOverlay(e,f).next(y=>{null!==y&&c.set(f,y)})).next(()=>c)}saveOverlays(e,t,c){const f=[];return c.forEach((y,S)=>{const L=new Vf(t,S);f.push(this.we(e,L))}),Ot.waitFor(f)}removeOverlaysForBatchId(e,t,c){const f=new Set;t.forEach(S=>f.add(Mo(S.getCollectionPath())));const y=[];return f.forEach(S=>{const L=IDBKeyRange.bound([this.userId,S,c],[this.userId,S,c+1],!1,!0);y.push(Gc(e).J("collectionPathOverlayIndex",L))}),Ot.waitFor(y)}getOverlaysForCollection(e,t,c){const f=Ou(),y=Mo(t),S=IDBKeyRange.bound([this.userId,y,c],[this.userId,y,Number.POSITIVE_INFINITY],!0);return Gc(e).j("collectionPathOverlayIndex",S).next(L=>{for(const J of L){const ue=Ay(this.serializer,J);f.set(ue.getKey(),ue)}return f})}getOverlaysForCollectionGroup(e,t,c,f){const y=Ou();let S;const L=IDBKeyRange.bound([this.userId,t,c],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Gc(e).X({index:"collectionGroupOverlayIndex",range:L},(J,ue,Me)=>{const it=Ay(this.serializer,ue);y.size()<f||it.largestBatchId===S?(y.set(it.getKey(),it),S=it.largestBatchId):Me.done()}).next(()=>y)}we(e,t){return Gc(e).put(function(c,f,y){const[S,L,J]=tv(f,y.mutation.key);return{userId:f,collectionPath:L,documentId:J,collectionGroup:y.mutation.key.getCollectionGroup(),largestBatchId:y.largestBatchId,overlayMutation:Tl(c.fe,y.mutation)}}(this.serializer,this.userId,t))}}function Gc(i){return Os(i,"documentOverlays")}class zc{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(to(e.integerValue));else if("doubleValue"in e){const c=to(e.doubleValue);isNaN(c)?this.ye(t,13):(this.ye(t,15),Da(c)?t.pe(0):t.pe(c))}else if("timestampValue"in e){const c=e.timestampValue;this.ye(t,20),"string"==typeof c?t.Ie(c):(t.Ie(`${c.seconds||""}`),t.pe(c.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(xi(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const c=e.geoPointValue;this.ye(t,45),t.pe(c.latitude||0),t.pe(c.longitude||0)}else"mapValue"in e?uu(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Xn()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const c=e.fields||{};this.ye(t,55);for(const f of Object.keys(c))this.Te(f,t),this.me(c[f],t)}Pe(e,t){const c=e.values||[];this.ye(t,50);for(const f of c)this.me(f,t)}ve(e,t){this.ye(t,37),Yn.fromName(e).path.forEach(c=>{this.ye(t,60),this.be(c,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Jd(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function ky(i){const e=64-function(t){let c=0;for(let f=0;f<8;++f){const y=Jd(255&t[f]);if(c+=y,8!==y)break}return c}(i);return Math.ceil(e/8)}zc.Ve=new zc;class va{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let c=t.next();for(;!c.done;)this.De(c.value),c=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let c=t.next();for(;!c.done;)this.Ne(c.value),c=t.next();this.ke()}Me(e){for(const t of e){const c=t.charCodeAt(0);if(c<128)this.De(c);else if(c<2048)this.De(960|c>>>6),this.De(128|63&c);else if(t<"\ud800"||"\udbff"<t)this.De(480|c>>>12),this.De(128|63&c>>>6),this.De(128|63&c);else{const f=t.codePointAt(0);this.De(240|f>>>18),this.De(128|63&f>>>12),this.De(128|63&f>>>6),this.De(128|63&f)}}this.Ce()}$e(e){for(const t of e){const c=t.charCodeAt(0);if(c<128)this.Ne(c);else if(c<2048)this.Ne(960|c>>>6),this.Ne(128|63&c);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|c>>>12),this.Ne(128|63&c>>>6),this.Ne(128|63&c);else{const f=t.codePointAt(0);this.Ne(240|f>>>18),this.Ne(128|63&f>>>12),this.Ne(128|63&f>>>6),this.Ne(128|63&f)}}this.ke()}Oe(e){const t=this.Fe(e),c=ky(t);this.Be(1+c),this.buffer[this.position++]=255&c;for(let f=t.length-c;f<t.length;++f)this.buffer[this.position++]=255&t[f]}Le(e){const t=this.Fe(e),c=ky(t);this.Be(1+c),this.buffer[this.position++]=~(255&c);for(let f=t.length-c;f<t.length;++f)this.buffer[this.position++]=~(255&t[f])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(f){const y=new DataView(new ArrayBuffer(8));return y.setFloat64(0,f,!1),new Uint8Array(y.buffer)}(e),c=0!=(128&t[0]);t[0]^=c?255:128;for(let f=1;f<t.length;++f)t[f]^=c?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let c=2*this.buffer.length;c<t&&(c=t);const f=new Uint8Array(c);f.set(this.buffer),this.buffer=f}}class iv{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Py{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Gh{constructor(){this.je=new va,this.ze=new iv(this.je),this.We=new Py(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Wc{constructor(e,t,c,f){this.indexId=e,this.documentKey=t,this.arrayValue=c,this.directionalValue=f}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,c=new Uint8Array(t);return c.set(this.directionalValue,0),t!==e?c.set([0],this.directionalValue.length):++c[c.length-1],new Wc(this.indexId,this.documentKey,this.arrayValue,c)}}function eh(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Oy(i.arrayValue,e.arrayValue),0!==t?t:(t=Oy(i.directionalValue,e.directionalValue),0!==t?t:Yn.comparator(i.documentKey,e.documentKey)))}function Oy(i,e){for(let t=0;t<i.length&&t<e.length;++t){const c=i[t]-e[t];if(0!==c)return c}return i.length-e.length}class B_{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const c=t;c.isInequality()?this.Ze=c:this.Xe.push(c)}}tn(e){Ln(e.collectionGroup===this.collectionId);const t=ss(e);if(void 0!==t&&!this.en(t))return!1;const c=k(e);let f=0,y=0;for(;f<c.length&&this.en(c[f]);++f);if(f===c.length)return!0;if(void 0!==this.Ze){const S=c[f];if(!this.nn(this.Ze,S)||!this.sn(this.Ye[y++],S))return!1;++f}for(;f<c.length;++f)if(y>=this.Ye.length||!this.sn(this.Ye[y++],c[f]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function sv(i){var e,t;if(Ln(i instanceof Hi||i instanceof bs),i instanceof Hi){if(i instanceof Vg){const f=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(y=>Hi.create(i.field,"==",y)))||[];return bs.create(f,"or")}return i}const c=i.filters.map(f=>sv(f));return bs.create(c,i.op)}function Hp(i){if(0===i.getFilters().length)return[];const e=ps(sv(i));return Ln(Kf(e)),ov(e)||av(e)?[e]:e.getFilters()}function ov(i){return i instanceof Hi}function av(i){return i instanceof bs&&oc(i)}function Kf(i){return ov(i)||av(i)||function(e){if(e instanceof bs&&Ip(e)){for(const t of e.getFilters())if(!ov(t)&&!av(t))return!1;return!0}return!1}(i)}function ps(i){if(Ln(i instanceof Hi||i instanceof bs),i instanceof Hi)return i;if(1===i.filters.length)return ps(i.filters[0]);const e=i.filters.map(c=>ps(c));let t=bs.create(e,i.op);return t=$p(t),Kf(t)?t:(Ln(t instanceof bs),Ln(hd(t)),Ln(t.filters.length>1),t.filters.reduce((c,f)=>zh(c,f)))}function zh(i,e){let t;return Ln(i instanceof Hi||i instanceof bs),Ln(e instanceof Hi||e instanceof bs),t=i instanceof Hi?e instanceof Hi?bs.create([i,e],"and"):Kg(i,e):e instanceof Hi?Kg(e,i):function(c,f){if(Ln(c.filters.length>0&&f.filters.length>0),hd(c)&&hd(f))return xh(c,f.getFilters());const y=Ip(c)?c:f,S=Ip(c)?f:c,L=y.filters.map(J=>zh(J,S));return bs.create(L,"or")}(i,e),$p(t)}function Kg(i,e){if(hd(e))return xh(e,i.getFilters());{const t=e.filters.map(c=>zh(i,c));return bs.create(t,"or")}}function $p(i){if(Ln(i instanceof Hi||i instanceof bs),i instanceof Hi)return i;const e=i.getFilters();if(1===e.length)return $p(e[0]);if(fd(i))return i;const t=e.map(f=>$p(f)),c=[];return t.forEach(f=>{f instanceof Hi?c.push(f):f instanceof bs&&(f.op===i.op?c.push(...f.filters):c.push(f))}),1===c.length?c[0]:bs.create(c,i.op)}class Ry{constructor(){this.rn=new Gp}addToCollectionParentIndex(e,t){return this.rn.add(t),Ot.resolve()}getCollectionParents(e,t){return Ot.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Ot.resolve()}deleteFieldIndex(e,t){return Ot.resolve()}getDocumentsMatchingTarget(e,t){return Ot.resolve(null)}getIndexType(e,t){return Ot.resolve(0)}getFieldIndexes(e,t){return Ot.resolve([])}getNextCollectionGroupToUpdate(e){return Ot.resolve(null)}getMinOffset(e,t){return Ot.resolve(Tt.min())}getMinOffsetFromCollectionGroup(e,t){return Ot.resolve(Tt.min())}updateCollectionGroup(e,t,c){return Ot.resolve()}updateIndexEntries(e,t){return Ot.resolve()}}class Gp{constructor(){this.index={}}add(e){const t=e.lastSegment(),c=e.popLast(),f=this.index[t]||new Ns(pi.comparator),y=!f.has(c);return this.index[t]=f.add(c),y}has(e){const t=e.lastSegment(),c=e.popLast(),f=this.index[t];return f&&f.has(c)}getEntries(e){return(this.index[e]||new Ns(pi.comparator)).toArray()}}const Zg=new Uint8Array(0);class Ny{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Gp,this.un=new Ku(c=>$l(c),(c,f)=>md(c,f)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const c=t.lastSegment(),f=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const y={collectionId:c,parent:Mo(f)};return uv(e).put(y)}return Ot.resolve()}getCollectionParents(e,t){const c=[],f=IDBKeyRange.bound([t,""],[$u(t),""],!1,!0);return uv(e).j(f).next(y=>{for(const S of y){if(S.collectionId!==t)break;c.push(ha(S.parent))}return c})}addFieldIndex(e,t){const c=lv(e),f={indexId:(S=t).indexId,collectionGroup:S.collectionGroup,fields:S.fields.map(L=>[L.fieldPath.canonicalString(),L.kind])};var S;delete f.indexId;const y=c.add(f);if(t.indexState){const S=xd(e);return y.next(L=>{S.put(My(L,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return y.next()}deleteFieldIndex(e,t){const c=lv(e),f=xd(e),y=Wh(e);return c.delete(t.indexId).next(()=>f.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>y.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const c=Wh(e);let f=!0;const y=new Map;return Ot.forEach(this.cn(t),S=>this.an(e,S).next(L=>{f&&(f=!!L),y.set(S,L)})).next(()=>{if(f){let S=vi();const L=[];return Ot.forEach(y,(J,ue)=>{var Me;Pn("IndexedDbIndexManager",`Using index ${Me=J,`id=${Me.indexId}|cg=${Me.collectionGroup}|f=${Me.fields.map(ki=>`${ki.fieldPath}:${ki.kind}`).join(",")}`} to execute ${$l(t)}`);const it=function(ki,Ro){const io=ss(Ro);if(void 0===io)return null;for(const No of $d(ki,io.fieldPath))switch(No.op){case"array-contains-any":return No.value.arrayValue.values||[];case"array-contains":return[No.value]}return null}(ue,J),Pt=function(ki,Ro){const io=new Map;for(const No of k(Ro))for(const hl of $d(ki,No.fieldPath))switch(hl.op){case"==":case"in":io.set(No.fieldPath.canonicalString(),hl.value);break;case"not-in":case"!=":return io.set(No.fieldPath.canonicalString(),hl.value),Array.from(io.values())}return null}(ue,J),Xt=function(ki,Ro){const io=[];let No=!0;for(const hl of k(Ro)){const Fg=0===hl.kind?Hg(ki,hl.fieldPath,ki.startAt):wy(ki,hl.fieldPath,ki.startAt);io.push(Fg.value),No&&(No=Fg.inclusive)}return new ml(io,No)}(ue,J),bn=function(ki,Ro){const io=[];let No=!0;for(const hl of k(Ro)){const Fg=0===hl.kind?wy(ki,hl.fieldPath,ki.endAt):Hg(ki,hl.fieldPath,ki.endAt);io.push(Fg.value),No&&(No=Fg.inclusive)}return new ml(io,No)}(ue,J),rr=this.hn(J,ue,Xt),or=this.hn(J,ue,bn),Di=this.ln(J,ue,Pt),ls=this.fn(J.indexId,it,rr,Xt.inclusive,or,bn.inclusive,Di);return Ot.forEach(ls,ki=>c.H(ki,t.limit).next(Ro=>{Ro.forEach(io=>{const No=Yn.fromSegments(io.documentKey);S.has(No)||(S=S.add(No),L.push(No))})}))}).next(()=>L)}return Ot.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Hp(bs.create(e.filters,"and")).map(c=>gd(e.path,e.collectionGroup,e.orderBy,c.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,c,f,y,S,L){const J=(null!=t?t.length:1)*Math.max(c.length,y.length),ue=J/(null!=t?t.length:1),Me=[];for(let it=0;it<J;++it){const Pt=t?this.dn(t[it/ue]):Zg,Xt=this.wn(e,Pt,c[it%ue],f),bn=this._n(e,Pt,y[it%ue],S),rr=L.map(or=>this.wn(e,Pt,or,!0));Me.push(...this.createRange(Xt,bn,rr))}return Me}wn(e,t,c,f){const y=new Wc(e,Yn.empty(),t,c);return f?y:y.Je()}_n(e,t,c,f){const y=new Wc(e,Yn.empty(),t,c);return f?y.Je():y}an(e,t){const c=new B_(t),f=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,f).next(y=>{let S=null;for(const L of y)c.tn(L)&&(!S||L.fields.length>S.fields.length)&&(S=L);return S})}getIndexType(e,t){let c=2;const f=this.cn(t);return Ot.forEach(f,y=>this.an(e,y).next(S=>{S?0!==c&&S.fields.length<function(L){let J=new Ns(Ps.comparator),ue=!1;for(const Me of L.filters)for(const it of Me.getFlattenedFilters())it.field.isKeyField()||("array-contains"===it.op||"array-contains-any"===it.op?ue=!0:J=J.add(it.field));for(const Me of L.orderBy)Me.field.isKeyField()||(J=J.add(Me.field));return J.size+(ue?1:0)}(y)&&(c=1):c=0})).next(()=>null!==t.limit&&f.length>1&&2===c?1:c)}mn(e,t){const c=new Gh;for(const f of k(e)){const y=t.data.field(f.fieldPath);if(null==y)return null;const S=c.He(f.kind);zc.Ve._e(y,S)}return c.Qe()}dn(e){const t=new Gh;return zc.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const c=new Gh;return zc.Ve._e(Or(this.databaseId,t),c.He(function(f){const y=k(f);return 0===y.length?0:y[y.length-1].kind}(e))),c.Qe()}ln(e,t,c){if(null===c)return[];let f=[];f.push(new Gh);let y=0;for(const S of k(e)){const L=c[y++];for(const J of f)if(this.yn(t,S.fieldPath)&&To(L))f=this.pn(f,S,L);else{const ue=J.He(S.kind);zc.Ve._e(L,ue)}}return this.In(f)}hn(e,t,c){return this.ln(e,t,c.position)}In(e){const t=[];for(let c=0;c<e.length;++c)t[c]=e[c].Qe();return t}pn(e,t,c){const f=[...e],y=[];for(const S of c.arrayValue.values||[])for(const L of f){const J=new Gh;J.seed(L.Qe()),zc.Ve._e(S,J.He(t.kind)),y.push(J)}return y}yn(e,t){return!!e.filters.find(c=>c instanceof Hi&&c.field.isEqual(t)&&("in"===c.op||"not-in"===c.op))}getFieldIndexes(e,t){const c=lv(e),f=xd(e);return(t?c.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):c.j()).next(y=>{const S=[];return Ot.forEach(y,L=>f.get([L.indexId,this.uid]).next(J=>{S.push(function(ue,Me){const it=Me?new ae(Me.sequenceNumber,new Tt(zf(Me.readTime),new Yn(ha(Me.documentKey)),Me.largestBatchId)):ae.empty(),Pt=ue.fields.map(([Xt,bn])=>new D(Ps.fromServerFormat(Xt),bn));return new Ia(ue.indexId,ue.collectionGroup,Pt,it)}(L,J))})).next(()=>S)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((c,f)=>{const y=c.indexState.sequenceNumber-f.indexState.sequenceNumber;return 0!==y?y:Ir(c.collectionGroup,f.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,c){const f=lv(e),y=xd(e);return this.Tn(e).next(S=>f.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(L=>Ot.forEach(L,J=>y.put(My(J.indexId,this.user,S,c)))))}updateIndexEntries(e,t){const c=new Map;return Ot.forEach(t,(f,y)=>{const S=c.get(f.collectionGroup);return(S?Ot.resolve(S):this.getFieldIndexes(e,f.collectionGroup)).next(L=>(c.set(f.collectionGroup,L),Ot.forEach(L,J=>this.En(e,f,J).next(ue=>{const Me=this.An(y,J);return ue.isEqual(Me)?Ot.resolve():this.vn(e,y,J,ue,Me)}))))})}Rn(e,t,c,f){return Wh(e).put({indexId:f.indexId,uid:this.uid,arrayValue:f.arrayValue,directionalValue:f.directionalValue,orderedDocumentKey:this.gn(c,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,c,f){return Wh(e).delete([f.indexId,this.uid,f.arrayValue,f.directionalValue,this.gn(c,t.key),t.key.path.toArray()])}En(e,t,c){const f=Wh(e);let y=new Ns(eh);return f.X({index:"documentKeyIndex",range:IDBKeyRange.only([c.indexId,this.uid,this.gn(c,t)])},(S,L)=>{y=y.add(new Wc(c.indexId,t,L.arrayValue,L.directionalValue))}).next(()=>y)}An(e,t){let c=new Ns(eh);const f=this.mn(t,e);if(null==f)return c;const y=ss(t);if(null!=y){const S=e.data.field(y.fieldPath);if(To(S))for(const L of S.arrayValue.values||[])c=c.add(new Wc(t.indexId,e.key,this.dn(L),f))}else c=c.add(new Wc(t.indexId,e.key,Zg,f));return c}vn(e,t,c,f,y){Pn("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const S=[];return function(L,J,ue,Me,it){const Pt=L.getIterator(),Xt=J.getIterator();let bn=au(Pt),rr=au(Xt);for(;bn||rr;){let or=!1,Di=!1;if(bn&&rr){const ls=ue(bn,rr);ls<0?Di=!0:ls>0&&(or=!0)}else null!=bn?Di=!0:or=!0;or?(Me(rr),rr=au(Xt)):Di?(it(bn),bn=au(Pt)):(bn=au(Pt),rr=au(Xt))}}(f,y,eh,L=>{S.push(this.Rn(e,t,c,L))},L=>{S.push(this.Pn(e,t,c,L))}),Ot.waitFor(S)}Tn(e){let t=1;return xd(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(c,f,y)=>{y.done(),t=f.sequenceNumber+1}).next(()=>t)}createRange(e,t,c){c=c.sort((S,L)=>eh(S,L)).filter((S,L,J)=>!L||0!==eh(S,J[L-1]));const f=[];f.push(e);for(const S of c){const L=eh(S,e),J=eh(S,t);if(0===L)f[0]=e.Je();else if(L>0&&J<0)f.push(S),f.push(S.Je());else if(J>0)break}f.push(t);const y=[];for(let S=0;S<f.length;S+=2){if(this.bn(f[S],f[S+1]))return[];y.push(IDBKeyRange.bound([f[S].indexId,this.uid,f[S].arrayValue,f[S].directionalValue,Zg,[]],[f[S+1].indexId,this.uid,f[S+1].arrayValue,f[S+1].directionalValue,Zg,[]]))}return y}bn(e,t){return eh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Ly)}getMinOffset(e,t){return Ot.mapArray(this.cn(t),c=>this.an(e,c).next(f=>f||Xn())).next(Ly)}}function uv(i){return Os(i,"collectionParents")}function Wh(i){return Os(i,"indexEntries")}function lv(i){return Os(i,"indexConfiguration")}function xd(i){return Os(i,"indexState")}function Ly(i){Ln(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let c=1;c<i.length;c++){const f=i[c].indexState.offset;wn(f,e)<0&&(e=f),t<f.largestBatchId&&(t=f.largestBatchId)}return new Tt(e.readTime,e.documentKey,t)}const Yg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fu{constructor(e,t,c){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=c}static withCacheSize(e){return new fu(e,fu.DEFAULT_COLLECTION_PERCENTILE,fu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Qg(i,e,t){const c=i.store("mutations"),f=i.store("documentMutations"),y=[],S=IDBKeyRange.only(t.batchId);let L=0;const J=c.X({range:S},(Me,it,Pt)=>(L++,Pt.delete()));y.push(J.next(()=>{Ln(1===L)}));const ue=[];for(const Me of t.mutations){const it=Nl(e,Me.key.path,t.batchId);y.push(f.delete(it)),ue.push(Me.key)}return Ot.waitFor(y).next(()=>ue)}function qc(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Xn();e=i.noDocument}return JSON.stringify(e).length}fu.DEFAULT_COLLECTION_PERCENTILE=10,fu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fu.DEFAULT=new fu(41943040,fu.DEFAULT_COLLECTION_PERCENTILE,fu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fu.DISABLED=new fu(-1,0,0);class Xg{constructor(e,t,c,f){this.userId=e,this.serializer=t,this.indexManager=c,this.referenceDelegate=f,this.Vn={}}static de(e,t,c,f){Ln(""!==e.uid);const y=e.isAuthenticated()?e.uid:"";return new Xg(y,t,c,f)}checkEmpty(e){let t=!0;const c=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vc(e).X({index:"userMutationsIndex",range:c},(f,y,S)=>{t=!1,S.done()}).next(()=>t)}addMutationBatch(e,t,c,f){const y=Zf(e),S=vc(e);return S.add({}).next(L=>{Ln("number"==typeof L);const J=new Bc(L,t,c,f),ue=function(Pt,Xt,bn){const rr=bn.baseMutations.map(Di=>Tl(Pt.fe,Di)),or=bn.mutations.map(Di=>Tl(Pt.fe,Di));return{userId:Xt,batchId:bn.batchId,localWriteTimeMs:bn.localWriteTime.toMillis(),baseMutations:rr,mutations:or}}(this.serializer,this.userId,J),Me=[];let it=new Ns((Pt,Xt)=>Ir(Pt.canonicalString(),Xt.canonicalString()));for(const Pt of f){const Xt=Nl(this.userId,Pt.key.path,L);it=it.add(Pt.key.path.popLast()),Me.push(S.put(ue)),Me.push(y.put(Xt,Mf))}return it.forEach(Pt=>{Me.push(this.indexManager.addToCollectionParentIndex(e,Pt))}),e.addOnCommittedListener(()=>{this.Vn[L]=J.keys()}),Ot.waitFor(Me).next(()=>J)})}lookupMutationBatch(e,t){return vc(e).get(t).next(c=>c?(Ln(c.userId===this.userId),Wf(this.serializer,c)):null)}Sn(e,t){return this.Vn[t]?Ot.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(c=>{if(c){const f=c.keys();return this.Vn[t]=f,f}return null})}getNextMutationBatchAfterBatchId(e,t){const c=t+1,f=IDBKeyRange.lowerBound([this.userId,c]);let y=null;return vc(e).X({index:"userMutationsIndex",range:f},(S,L,J)=>{L.userId===this.userId&&(Ln(L.batchId>=c),y=Wf(this.serializer,L)),J.done()}).next(()=>y)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let c=-1;return vc(e).X({index:"userMutationsIndex",range:t,reverse:!0},(f,y,S)=>{c=y.batchId,S.done()}).next(()=>c)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vc(e).j("userMutationsIndex",t).next(c=>c.map(f=>Wf(this.serializer,f)))}getAllMutationBatchesAffectingDocumentKey(e,t){const c=Ba(this.userId,t.path),f=IDBKeyRange.lowerBound(c),y=[];return Zf(e).X({range:f},(S,L,J)=>{const[ue,Me,it]=S,Pt=ha(Me);if(ue===this.userId&&t.path.isEqual(Pt))return vc(e).get(it).next(Xt=>{if(!Xt)throw Xn();Ln(Xt.userId===this.userId),y.push(Wf(this.serializer,Xt))});J.done()}).next(()=>y)}getAllMutationBatchesAffectingDocumentKeys(e,t){let c=new Ns(Ir);const f=[];return t.forEach(y=>{const S=Ba(this.userId,y.path),L=IDBKeyRange.lowerBound(S),J=Zf(e).X({range:L},(ue,Me,it)=>{const[Pt,Xt,bn]=ue,rr=ha(Xt);Pt===this.userId&&y.path.isEqual(rr)?c=c.add(bn):it.done()});f.push(J)}),Ot.waitFor(f).next(()=>this.Dn(e,c))}getAllMutationBatchesAffectingQuery(e,t){const c=t.path,f=c.length+1,y=Ba(this.userId,c),S=IDBKeyRange.lowerBound(y);let L=new Ns(Ir);return Zf(e).X({range:S},(J,ue,Me)=>{const[it,Pt,Xt]=J,bn=ha(Pt);it===this.userId&&c.isPrefixOf(bn)?bn.length===f&&(L=L.add(Xt)):Me.done()}).next(()=>this.Dn(e,L))}Dn(e,t){const c=[],f=[];return t.forEach(y=>{f.push(vc(e).get(y).next(S=>{if(null===S)throw Xn();Ln(S.userId===this.userId),c.push(Wf(this.serializer,S))}))}),Ot.waitFor(f).next(()=>c)}removeMutationBatch(e,t){return Qg(e.ht,this.userId,t).next(c=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),Ot.forEach(c,f=>this.referenceDelegate.markPotentiallyOrphaned(e,f))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ot.resolve();const c=IDBKeyRange.lowerBound([this.userId]),f=[];return Zf(e).X({range:c},(y,S,L)=>{if(y[0]===this.userId){const J=ha(y[1]);f.push(J)}else L.done()}).next(()=>{Ln(0===f.length)})})}containsKey(e,t){return Jg(e,this.userId,t)}xn(e){return zp(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Jg(i,e,t){const c=Ba(e,t.path),f=c[1],y=IDBKeyRange.lowerBound(c);let S=!1;return Zf(i).X({range:y,Y:!0},(L,J,ue)=>{const[Me,it,Pt]=L;Me===e&&it===f&&(S=!0),ue.done()}).next(()=>S)}function vc(i){return Os(i,"mutations")}function Zf(i){return Os(i,"documentMutations")}function zp(i){return Os(i,"mutationQueues")}class Kc{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Kc(0)}static Mn(){return new Kc(-1)}}class Dd{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const c=new Kc(t.highestTargetId);return t.highestTargetId=c.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Zn.fromTimestamp(new Ti(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,c){return this.$n(e).next(f=>(f.highestListenSequenceNumber=t,c&&(f.lastRemoteSnapshotVersion=c.toTimestamp()),t>f.highestListenSequenceNumber&&(f.highestListenSequenceNumber=t),this.On(e,f)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(c=>(c.targetCount+=1,this.Bn(t,c),this.On(e,c))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ko(e).delete(t.targetId)).next(()=>this.$n(e)).next(c=>(Ln(c.targetCount>0),c.targetCount-=1,this.On(e,c)))}removeTargets(e,t,c){let f=0;const y=[];return ko(e).X((S,L)=>{const J=$h(L);J.sequenceNumber<=t&&null===c.get(J.targetId)&&(f++,y.push(this.removeTargetData(e,J)))}).next(()=>Ot.waitFor(y)).next(()=>f)}forEachTarget(e,t){return ko(e).X((c,f)=>{const y=$h(f);t(y)})}$n(e){return em(e).get("targetGlobalKey").next(t=>(Ln(null!==t),t))}On(e,t){return em(e).put("targetGlobalKey",t)}Fn(e,t){return ko(e).put(Bp(this.serializer,t))}Bn(e,t){let c=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,c=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,c=!0),c}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const c=$l(t),f=IDBKeyRange.bound([c,Number.NEGATIVE_INFINITY],[c,Number.POSITIVE_INFINITY]);let y=null;return ko(e).X({range:f,index:"queryTargetsIndex"},(S,L,J)=>{const ue=$h(L);md(t,ue.target)&&(y=ue,J.done())}).next(()=>y)}addMatchingKeys(e,t,c){const f=[],y=Ad(e);return t.forEach(S=>{const L=Mo(S.path);f.push(y.put({targetId:c,path:L})),f.push(this.referenceDelegate.addReference(e,c,S))}),Ot.waitFor(f)}removeMatchingKeys(e,t,c){const f=Ad(e);return Ot.forEach(t,y=>{const S=Mo(y.path);return Ot.waitFor([f.delete([c,S]),this.referenceDelegate.removeReference(e,c,y)])})}removeMatchingKeysForTargetId(e,t){const c=Ad(e),f=IDBKeyRange.bound([t],[t+1],!1,!0);return c.delete(f)}getMatchingKeysForTargetId(e,t){const c=IDBKeyRange.bound([t],[t+1],!1,!0),f=Ad(e);let y=vi();return f.X({range:c,Y:!0},(S,L,J)=>{const ue=ha(S[1]),Me=new Yn(ue);y=y.add(Me)}).next(()=>y)}containsKey(e,t){const c=Mo(t.path),f=IDBKeyRange.bound([c],[$u(c)],!1,!0);let y=0;return Ad(e).X({index:"documentTargetsIndex",Y:!0,range:f},([S,L],J,ue)=>{0!==S&&(y++,ue.done())}).next(()=>y>0)}le(e,t){return ko(e).get(t).next(c=>c?$h(c):null)}}function ko(i){return Os(i,"targets")}function em(i){return Os(i,"targetGlobal")}function Ad(i){return Os(i,"targetDocuments")}function Fy([i,e],[t,c]){const f=Ir(i,t);return 0===f?Ir(e,c):f}class cv{constructor(e){this.Ln=e,this.buffer=new Ns(Fy),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const c=this.buffer.last();Fy(t,c)<0&&(this.buffer=this.buffer.delete(c).add(t))}}get maxValue(){return this.buffer.last()[0]}}class th{constructor(e,t,c){this.garbageCollector=e,this.asyncQueue=t,this.localStore=c,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Pn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,re.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(c){Yi(c)?Pn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",c):yield ci(c)}yield t.Qn(3e5)}))}}class jy{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(c=>Math.floor(t/100*c))}nthSequenceNumber(e,t){if(0===t)return Ot.resolve(fn.ct);const c=new cv(t);return this.jn.forEachTarget(e,f=>c.Kn(f.sequenceNumber)).next(()=>this.jn.Wn(e,f=>c.Kn(f))).next(()=>c.maxValue)}removeTargets(e,t,c){return this.jn.removeTargets(e,t,c)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pn("LruGarbageCollector","Garbage collection skipped; disabled"),Ot.resolve(Yg)):this.getCacheSize(e).next(c=>c<this.params.cacheSizeCollectionThreshold?(Pn("LruGarbageCollector",`Garbage collection skipped; Cache size ${c} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yg):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let c,f,y,S,L,J,ue;const Me=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(it=>(it>this.params.maximumSequenceNumbersToCollect?(Pn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${it}`),f=this.params.maximumSequenceNumbersToCollect):f=it,S=Date.now(),this.nthSequenceNumber(e,f))).next(it=>(c=it,L=Date.now(),this.removeTargets(e,c,t))).next(it=>(y=it,J=Date.now(),this.removeOrphanedDocuments(e,c))).next(it=>(ue=Date.now(),rl()<=st.in.DEBUG&&Pn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${S-Me}ms\n\tDetermined least recently used ${f} in `+(L-S)+`ms\n\tRemoved ${y} targets in `+(J-L)+`ms\n\tRemoved ${it} documents in `+(ue-J)+`ms\nTotal Duration: ${ue-Me}ms`),Ot.resolve({didRun:!0,sequenceNumbersCollected:f,targetsRemoved:y,documentsRemoved:it})))}}class V_{constructor(e,t){this.db=e,this.garbageCollector=function Uy(i,e){return new jy(i,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(c=>t.next(f=>c+f))}Jn(e){let t=0;return this.Wn(e,c=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(c,f)=>t(f))}addReference(e,t,c){return Yf(e,c)}removeReference(e,t,c){return Yf(e,c)}removeTargets(e,t,c){return this.db.getTargetCache().removeTargets(e,t,c)}markPotentiallyOrphaned(e,t){return Yf(e,t)}Xn(e,t){return function(c,f){let y=!1;return zp(c).Z(S=>Jg(c,S,f).next(L=>(L&&(y=!0),Ot.resolve(!L)))).next(()=>y)}(e,t)}removeOrphanedDocuments(e,t){const c=this.db.getRemoteDocumentCache().newChangeBuffer(),f=[];let y=0;return this.Yn(e,(S,L)=>{if(L<=t){const J=this.Xn(e,S).next(ue=>{if(!ue)return y++,c.getEntry(e,S).next(()=>(c.removeEntry(S,Zn.min()),Ad(e).delete([0,Mo(S.path)])))});f.push(J)}}).next(()=>Ot.waitFor(f)).next(()=>c.apply(e)).next(()=>y)}removeTarget(e,t){const c=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,c)}updateLimboDocument(e,t){return Yf(e,t)}Yn(e,t){const c=Ad(e);let f,y=fn.ct;return c.X({index:"documentTargetsIndex"},([S,L],{path:J,sequenceNumber:ue})=>{0===S?(y!==fn.ct&&t(new Yn(ha(f)),y),y=ue,f=J):y=fn.ct}).next(()=>{y!==fn.ct&&t(new Yn(ha(f)),y)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Yf(i,e){return Ad(i).put((c=i.currentSequenceNumber,{targetId:0,path:Mo(e.path),sequenceNumber:c}));var c}class dv{constructor(){this.changes=new Ku(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_s.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const c=this.changes.get(t);return void 0!==c?Ot.resolve(c):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class H_{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,c){return qh(e).put(c)}removeEntry(e,t,c){return qh(e).delete(function(f,y){const S=f.path.toArray();return[S.slice(0,S.length-2),S[S.length-2],$c(y),S[S.length-1]]}(t,c))}updateMetadata(e,t){return this.getMetadata(e).next(c=>(c.byteSize+=t,this.Zn(e,c)))}getEntry(e,t){let c=_s.newInvalidDocument(t);return qh(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Wp(t))},(f,y)=>{c=this.ts(t,y)}).next(()=>c)}es(e,t){let c={size:0,document:_s.newInvalidDocument(t)};return qh(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Wp(t))},(f,y)=>{c={document:this.ts(t,y),size:qc(y)}}).next(()=>c)}getEntries(e,t){let c=cu();return this.ns(e,t,(f,y)=>{const S=this.ts(f,y);c=c.insert(f,S)}).next(()=>c)}ss(e,t){let c=cu(),f=new Rs(Yn.comparator);return this.ns(e,t,(y,S)=>{const L=this.ts(y,S);c=c.insert(y,L),f=f.insert(y,qc(S))}).next(()=>({documents:c,rs:f}))}ns(e,t,c){if(t.isEmpty())return Ot.resolve();let f=new Ns(Hy);t.forEach(J=>f=f.add(J));const y=IDBKeyRange.bound(Wp(f.first()),Wp(f.last())),S=f.getIterator();let L=S.getNext();return qh(e).X({index:"documentKeyIndex",range:y},(J,ue,Me)=>{const it=Yn.fromSegments([...ue.prefixPath,ue.collectionGroup,ue.documentId]);for(;L&&Hy(L,it)<0;)c(L,null),L=S.getNext();L&&L.isEqual(it)&&(c(L,ue),L=S.hasNext()?S.getNext():null),L?Me.G(Wp(L)):Me.done()}).next(()=>{for(;L;)c(L,null),L=S.hasNext()?S.getNext():null})}getDocumentsMatchingQuery(e,t,c,f){const y=t.path,S=[y.popLast().toArray(),y.lastSegment(),$c(c.readTime),c.documentKey.path.isEmpty()?"":c.documentKey.path.lastSegment()],L=[y.popLast().toArray(),y.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qh(e).j(IDBKeyRange.bound(S,L,!0)).next(J=>{let ue=cu();for(const Me of J){const it=this.ts(Yn.fromSegments(Me.prefixPath.concat(Me.collectionGroup,Me.documentId)),Me);it.isFoundDocument()&&(yd(t,it)||f.has(it.key))&&(ue=ue.insert(it.key,it))}return ue})}getAllFromCollectionGroup(e,t,c,f){let y=cu();const S=Vy(t,c),L=Vy(t,Tt.max());return qh(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(S,L,!0)},(J,ue,Me)=>{const it=this.ts(Yn.fromSegments(ue.prefixPath.concat(ue.collectionGroup,ue.documentId)),ue);y=y.insert(it.key,it),y.size===f&&Me.done()}).next(()=>y)}newChangeBuffer(e){return new nm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return By(e).get("remoteDocumentGlobalKey").next(t=>(Ln(!!t),t))}Zn(e,t){return By(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const c=function Dy(i,e){let t;if(e.document)t=$f(i.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const c=Yn.fromSegments(e.noDocument.path),f=zf(e.noDocument.readTime);t=_s.newNoDocument(c,f),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Xn();{const c=Yn.fromSegments(e.unknownDocument.path),f=zf(e.unknownDocument.version);t=_s.newUnknownDocument(c,f)}}return e.readTime&&t.setReadTime(function(c){const f=new Ti(c[0],c[1]);return Zn.fromTimestamp(f)}(e.readTime)),t}(this.serializer,t);if(!c.isNoDocument()||!c.version.isEqual(Zn.min()))return c}return _s.newInvalidDocument(e)}}function tm(i){return new H_(i)}class nm extends dv{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Ku(c=>c.toString(),(c,f)=>c.isEqual(f))}applyChanges(e){const t=[];let c=0,f=new Ns((y,S)=>Ir(y.canonicalString(),S.canonicalString()));return this.changes.forEach((y,S)=>{const L=this.us.get(y);if(t.push(this.os.removeEntry(e,y,L.readTime)),S.isValidDocument()){const J=ev(this.os.serializer,S);f=f.add(y.path.popLast());const ue=qc(J);c+=ue-L.size,t.push(this.os.addEntry(e,y,J))}else if(c-=L.size,this.trackRemovals){const J=ev(this.os.serializer,S.convertToNoDocument(Zn.min()));t.push(this.os.addEntry(e,y,J))}}),f.forEach(y=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,y))}),t.push(this.os.updateMetadata(e,c)),Ot.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(c=>(this.us.set(t,{size:c.size,readTime:c.document.readTime}),c.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:c,rs:f})=>(f.forEach((y,S)=>{this.us.set(y,{size:S,readTime:c.get(y).readTime})}),c))}}function By(i){return Os(i,"remoteDocumentGlobal")}function qh(i){return Os(i,"remoteDocumentsV14")}function Wp(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Vy(i,e){const t=e.documentKey.path.toArray();return[i,$c(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Hy(i,e){const t=i.path.toArray(),c=e.path.toArray();let f=0;for(let y=0;y<t.length-2&&y<c.length-2;++y)if(f=Ir(t[y],c[y]),f)return f;return f=Ir(t.length,c.length),f||(f=Ir(t[t.length-2],c[c.length-2]),f||Ir(t[t.length-1],c[c.length-1]))}class $_{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class hv{constructor(e,t,c,f){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=c,this.indexManager=f}getDocument(e,t){let c=null;return this.documentOverlayCache.getOverlay(e,t).next(f=>(c=f,this.remoteDocumentCache.getEntry(e,t))).next(f=>(null!==c&&Td(c.mutation,f,Va.empty(),Ti.now()),f))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(c=>this.getLocalViewOfDocuments(e,c,vi()).next(()=>c))}getLocalViewOfDocuments(e,t,c=vi()){const f=Ou();return this.populateOverlays(e,f,t).next(()=>this.computeViews(e,t,f,c).next(y=>{let S=ga();return y.forEach((L,J)=>{S=S.insert(L,J.overlayedDocument)}),S}))}getOverlayedDocuments(e,t){const c=Ou();return this.populateOverlays(e,c,t).next(()=>this.computeViews(e,t,c,vi()))}populateOverlays(e,t,c){const f=[];return c.forEach(y=>{t.has(y)||f.push(y)}),this.documentOverlayCache.getOverlays(e,f).next(y=>{y.forEach((S,L)=>{t.set(S,L)})})}computeViews(e,t,c,f){let y=cu();const S=$o(),L=$o();return t.forEach((J,ue)=>{const Me=c.get(ue.key);f.has(ue.key)&&(void 0===Me||Me.mutation instanceof Zu)?y=y.insert(ue.key,ue):void 0!==Me?(S.set(ue.key,Me.mutation.getFieldMask()),Td(Me.mutation,ue,Me.mutation.getFieldMask(),Ti.now())):S.set(ue.key,Va.empty())}),this.recalculateAndSaveOverlays(e,y).next(J=>(J.forEach((ue,Me)=>S.set(ue,Me)),t.forEach((ue,Me)=>{var it;return L.set(ue,new $_(Me,null!==(it=S.get(ue))&&void 0!==it?it:null))}),L))}recalculateAndSaveOverlays(e,t){const c=$o();let f=new Rs((S,L)=>S-L),y=vi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(S=>{for(const L of S)L.keys().forEach(J=>{const ue=t.get(J);if(null===ue)return;let Me=c.get(J)||Va.empty();Me=L.applyToLocalView(ue,Me),c.set(J,Me);const it=(f.get(L.batchId)||vi()).add(J);f=f.insert(L.batchId,it)})}).next(()=>{const S=[],L=f.getReverseIterator();for(;L.hasNext();){const J=L.getNext(),ue=J.key,Me=J.value,it=Nh();Me.forEach(Pt=>{if(!y.has(Pt)){const Xt=zg(t.get(Pt),c.get(Pt));null!==Xt&&it.set(Pt,Xt),y=y.add(Pt)}}),S.push(this.documentOverlayCache.saveOverlays(e,ue,it))}return Ot.waitFor(S)}).next(()=>c)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(c=>this.recalculateAndSaveOverlays(e,c))}getDocumentsMatchingQuery(e,t,c){return Yn.isDocumentKey((f=t).path)&&null===f.collectionGroup&&0===f.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ac(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,c):this.getDocumentsMatchingCollectionQuery(e,t,c);var f}getNextDocuments(e,t,c,f){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,c,f).next(y=>{const S=f-y.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,c.largestBatchId,f-y.size):Ot.resolve(Ou());let L=-1,J=y;return S.next(ue=>Ot.forEach(ue,(Me,it)=>(L<it.largestBatchId&&(L=it.largestBatchId),y.get(Me)?Ot.resolve():this.remoteDocumentCache.getEntry(e,Me).next(Pt=>{J=J.insert(Me,Pt)}))).next(()=>this.populateOverlays(e,ue,y)).next(()=>this.computeViews(e,J,ue,vi())).next(Me=>({batchId:L,changes:Wd(Me)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Yn(t)).next(c=>{let f=ga();return c.isFoundDocument()&&(f=f.insert(c.key,c)),f})}getDocumentsMatchingCollectionGroupQuery(e,t,c){const f=t.collectionGroup;let y=ga();return this.indexManager.getCollectionParents(e,f).next(S=>Ot.forEach(S,L=>{const J=(ue=t,Me=L.child(f),new vl(Me,null,ue.explicitOrderBy.slice(),ue.filters.slice(),ue.limit,ue.limitType,ue.startAt,ue.endAt));var ue,Me;return this.getDocumentsMatchingCollectionQuery(e,J,c).next(ue=>{ue.forEach((Me,it)=>{y=y.insert(Me,it)})})}).next(()=>y))}getDocumentsMatchingCollectionQuery(e,t,c){let f;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,c.largestBatchId).next(y=>(f=y,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,c,f))).next(y=>{f.forEach((L,J)=>{const ue=J.getKey();null===y.get(ue)&&(y=y.insert(ue,_s.newInvalidDocument(ue)))});let S=ga();return y.forEach((L,J)=>{const ue=f.get(L);void 0!==ue&&Td(ue.mutation,J,Va.empty(),Ti.now()),yd(t,J)&&(S=S.insert(L,J))}),S})}}class fv{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Ot.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var c;return this.cs.set(t.id,{id:(c=t).id,version:c.version,createTime:Bt(c.createTime)}),Ot.resolve()}getNamedQuery(e,t){return Ot.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(c=t).name,query:Vp(c.bundledQuery),readTime:Bt(c.readTime)}),Ot.resolve();var c}}class El{constructor(){this.overlays=new Rs(Yn.comparator),this.ls=new Map}getOverlay(e,t){return Ot.resolve(this.overlays.get(t))}getOverlays(e,t){const c=Ou();return Ot.forEach(t,f=>this.getOverlay(e,f).next(y=>{null!==y&&c.set(f,y)})).next(()=>c)}saveOverlays(e,t,c){return c.forEach((f,y)=>{this.we(e,t,y)}),Ot.resolve()}removeOverlaysForBatchId(e,t,c){const f=this.ls.get(c);return void 0!==f&&(f.forEach(y=>this.overlays=this.overlays.remove(y)),this.ls.delete(c)),Ot.resolve()}getOverlaysForCollection(e,t,c){const f=Ou(),y=t.length+1,S=new Yn(t.child("")),L=this.overlays.getIteratorFrom(S);for(;L.hasNext();){const J=L.getNext().value,ue=J.getKey();if(!t.isPrefixOf(ue.path))break;ue.path.length===y&&J.largestBatchId>c&&f.set(J.getKey(),J)}return Ot.resolve(f)}getOverlaysForCollectionGroup(e,t,c,f){let y=new Rs((ue,Me)=>ue-Me);const S=this.overlays.getIterator();for(;S.hasNext();){const ue=S.getNext().value;if(ue.getKey().getCollectionGroup()===t&&ue.largestBatchId>c){let Me=y.get(ue.largestBatchId);null===Me&&(Me=Ou(),y=y.insert(ue.largestBatchId,Me)),Me.set(ue.getKey(),ue)}}const L=Ou(),J=y.getIterator();for(;J.hasNext()&&(J.getNext().value.forEach((ue,Me)=>L.set(ue,Me)),!(L.size()>=f)););return Ot.resolve(L)}we(e,t,c){const f=this.overlays.get(c.key);if(null!==f){const S=this.ls.get(f.largestBatchId).delete(c.key);this.ls.set(f.largestBatchId,S)}this.overlays=this.overlays.insert(c.key,new Vf(t,c));let y=this.ls.get(t);void 0===y&&(y=vi(),this.ls.set(t,y)),this.ls.set(t,y.add(c.key))}}class qp{constructor(){this.fs=new Ns(Ma.ds),this.ws=new Ns(Ma._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const c=new Ma(e,t);this.fs=this.fs.add(c),this.ws=this.ws.add(c)}gs(e,t){e.forEach(c=>this.addReference(c,t))}removeReference(e,t){this.ys(new Ma(e,t))}ps(e,t){e.forEach(c=>this.removeReference(c,t))}Is(e){const t=new Yn(new pi([])),c=new Ma(t,e),f=new Ma(t,e+1),y=[];return this.ws.forEachInRange([c,f],S=>{this.ys(S),y.push(S.key)}),y}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Yn(new pi([])),c=new Ma(t,e),f=new Ma(t,e+1);let y=vi();return this.ws.forEachInRange([c,f],S=>{y=y.add(S.key)}),y}containsKey(e){const t=new Ma(e,0),c=this.fs.firstAfterOrEqual(t);return null!==c&&e.isEqual(c.key)}}class Ma{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Yn.comparator(e.key,t.key)||Ir(e.As,t.As)}static _s(e,t){return Ir(e.As,t.As)||Yn.comparator(e.key,t.key)}}class pv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Ns(Ma.ds)}checkEmpty(e){return Ot.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,c,f){const y=this.vs;this.vs++;const S=new Bc(y,t,c,f);this.mutationQueue.push(S);for(const L of f)this.Rs=this.Rs.add(new Ma(L.key,y)),this.indexManager.addToCollectionParentIndex(e,L.key.path.popLast());return Ot.resolve(S)}lookupMutationBatch(e,t){return Ot.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const f=this.bs(t+1),y=f<0?0:f;return Ot.resolve(this.mutationQueue.length>y?this.mutationQueue[y]:null)}getHighestUnacknowledgedBatchId(){return Ot.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Ot.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const c=new Ma(t,0),f=new Ma(t,Number.POSITIVE_INFINITY),y=[];return this.Rs.forEachInRange([c,f],S=>{const L=this.Ps(S.As);y.push(L)}),Ot.resolve(y)}getAllMutationBatchesAffectingDocumentKeys(e,t){let c=new Ns(Ir);return t.forEach(f=>{const y=new Ma(f,0),S=new Ma(f,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([y,S],L=>{c=c.add(L.As)})}),Ot.resolve(this.Vs(c))}getAllMutationBatchesAffectingQuery(e,t){const c=t.path,f=c.length+1;let y=c;Yn.isDocumentKey(y)||(y=y.child(""));const S=new Ma(new Yn(y),0);let L=new Ns(Ir);return this.Rs.forEachWhile(J=>{const ue=J.key.path;return!!c.isPrefixOf(ue)&&(ue.length===f&&(L=L.add(J.As)),!0)},S),Ot.resolve(this.Vs(L))}Vs(e){const t=[];return e.forEach(c=>{const f=this.Ps(c);null!==f&&t.push(f)}),t}removeMutationBatch(e,t){Ln(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let c=this.Rs;return Ot.forEach(t.mutations,f=>{const y=new Ma(f.key,t.batchId);return c=c.delete(y),this.referenceDelegate.markPotentiallyOrphaned(e,f.key)}).next(()=>{this.Rs=c})}Cn(e){}containsKey(e,t){const c=new Ma(t,0),f=this.Rs.firstAfterOrEqual(c);return Ot.resolve(t.isEqual(f&&f.key))}performConsistencyCheck(e){return Ot.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Kh{constructor(e){this.Ds=e,this.docs=new Rs(Yn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const c=t.key,f=this.docs.get(c),y=f?f.size:0,S=this.Ds(t);return this.docs=this.docs.insert(c,{document:t.mutableCopy(),size:S}),this.size+=S-y,this.indexManager.addToCollectionParentIndex(e,c.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const c=this.docs.get(t);return Ot.resolve(c?c.document.mutableCopy():_s.newInvalidDocument(t))}getEntries(e,t){let c=cu();return t.forEach(f=>{const y=this.docs.get(f);c=c.insert(f,y?y.document.mutableCopy():_s.newInvalidDocument(f))}),Ot.resolve(c)}getDocumentsMatchingQuery(e,t,c,f){let y=cu();const S=t.path,L=new Yn(S.child("")),J=this.docs.getIteratorFrom(L);for(;J.hasNext();){const{key:ue,value:{document:Me}}=J.getNext();if(!S.isPrefixOf(ue.path))break;ue.path.length>S.length+1||wn(Le(Me),c)<=0||(f.has(Me.key)||yd(t,Me))&&(y=y.insert(Me.key,Me.mutableCopy()))}return Ot.resolve(y)}getAllFromCollectionGroup(e,t,c,f){Xn()}Cs(e,t){return Ot.forEach(this.docs,c=>t(c))}newChangeBuffer(e){return new rm(this)}getSize(e){return Ot.resolve(this.size)}}class rm extends dv{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((c,f)=>{f.isValidDocument()?t.push(this.os.addEntry(e,f)):this.os.removeEntry(c)}),Ot.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class im{constructor(e){this.persistence=e,this.xs=new Ku(t=>$l(t),md),this.lastRemoteSnapshotVersion=Zn.min(),this.highestTargetId=0,this.Ns=0,this.ks=new qp,this.targetCount=0,this.Ms=Kc.kn()}forEachTarget(e,t){return this.xs.forEach((c,f)=>t(f)),Ot.resolve()}getLastRemoteSnapshotVersion(e){return Ot.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ot.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Ot.resolve(this.highestTargetId)}setTargetsMetadata(e,t,c){return c&&(this.lastRemoteSnapshotVersion=c),t>this.Ns&&(this.Ns=t),Ot.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Kc(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Ot.resolve()}updateTargetData(e,t){return this.Fn(t),Ot.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Ot.resolve()}removeTargets(e,t,c){let f=0;const y=[];return this.xs.forEach((S,L)=>{L.sequenceNumber<=t&&null===c.get(L.targetId)&&(this.xs.delete(S),y.push(this.removeMatchingKeysForTargetId(e,L.targetId)),f++)}),Ot.waitFor(y).next(()=>f)}getTargetCount(e){return Ot.resolve(this.targetCount)}getTargetData(e,t){const c=this.xs.get(t)||null;return Ot.resolve(c)}addMatchingKeys(e,t,c){return this.ks.gs(t,c),Ot.resolve()}removeMatchingKeys(e,t,c){this.ks.ps(t,c);const f=this.persistence.referenceDelegate,y=[];return f&&t.forEach(S=>{y.push(f.markPotentiallyOrphaned(e,S))}),Ot.waitFor(y)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Ot.resolve()}getMatchingKeysForTargetId(e,t){const c=this.ks.Es(t);return Ot.resolve(c)}containsKey(e,t){return Ot.resolve(this.ks.containsKey(t))}}class Zh{constructor(e,t){this.$s={},this.overlays={},this.Os=new fn(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new im(this),this.indexManager=new Ry,this.remoteDocumentCache=new Kh(c=>this.referenceDelegate.Ls(c)),this.serializer=new Xd(t),this.qs=new fv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new El,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let c=this.$s[e.toKey()];return c||(c=new pv(t,this.referenceDelegate),this.$s[e.toKey()]=c),c}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,c){Pn("MemoryPersistence","Starting transaction:",e);const f=new sm(this.Os.next());return this.referenceDelegate.Us(),c(f).next(y=>this.referenceDelegate.Ks(f).next(()=>y)).toPromise().then(y=>(f.raiseOnCommittedEvent(),y))}Gs(e,t){return Ot.or(Object.values(this.$s).map(c=>()=>c.containsKey(e,t)))}}class sm extends hr{constructor(e){super(),this.currentSequenceNumber=e}}class nh{constructor(e){this.persistence=e,this.Qs=new qp,this.js=null}static zs(e){return new nh(e)}get Ws(){if(this.js)return this.js;throw Xn()}addReference(e,t,c){return this.Qs.addReference(c,t),this.Ws.delete(c.toString()),Ot.resolve()}removeReference(e,t,c){return this.Qs.removeReference(c,t),this.Ws.add(c.toString()),Ot.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Ot.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(f=>this.Ws.add(f.toString()));const c=this.persistence.getTargetCache();return c.getMatchingKeysForTargetId(e,t.targetId).next(f=>{f.forEach(y=>this.Ws.add(y.toString()))}).next(()=>c.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ot.forEach(this.Ws,c=>{const f=Yn.fromPath(c);return this.Hs(e,f).next(y=>{y||t.removeEntry(f,Zn.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(c=>{c?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return Ot.or([()=>Ot.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class om{constructor(e){this.serializer=e}O(e,t,c,f){const y=new xa("createOrUpgrade",t);var L;c<1&&f>=1&&(e.createObjectStore("owner"),(L=e).createObjectStore("mutationQueues",{keyPath:"userId"}),L.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Rl,{unique:!0}),L.createObjectStore("documentMutations"),Kp(e),function(L){L.createObjectStore("remoteDocuments")}(e));let S=Ot.resolve();return c<3&&f>=3&&(0!==c&&(function(L){L.deleteObjectStore("targetDocuments"),L.deleteObjectStore("targets"),L.deleteObjectStore("targetGlobal")}(e),Kp(e)),S=S.next(()=>function(L){const J=L.store("targetGlobal"),ue={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Zn.min().toTimestamp(),targetCount:0};return J.put("targetGlobalKey",ue)}(y))),c<4&&f>=4&&(0!==c&&(S=S.next(()=>function(L,J){return J.store("mutations").j().next(ue=>{L.deleteObjectStore("mutations"),L.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Rl,{unique:!0});const Me=J.store("mutations"),it=ue.map(Pt=>Me.put(Pt));return Ot.waitFor(it)})}(e,y))),S=S.next(()=>{!function(L){L.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),c<5&&f>=5&&(S=S.next(()=>this.Ys(y))),c<6&&f>=6&&(S=S.next(()=>(function(L){L.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(y)))),c<7&&f>=7&&(S=S.next(()=>this.Zs(y))),c<8&&f>=8&&(S=S.next(()=>this.ti(e,y))),c<9&&f>=9&&(S=S.next(()=>{!function(L){L.objectStoreNames.contains("remoteDocumentChanges")&&L.deleteObjectStore("remoteDocumentChanges")}(e)})),c<10&&f>=10&&(S=S.next(()=>this.ei(y))),c<11&&f>=11&&(S=S.next(()=>{(function(L){L.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(L){L.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),c<12&&f>=12&&(S=S.next(()=>{!function(L){const J=L.createObjectStore("documentOverlays",{keyPath:jl});J.createIndex("collectionPathOverlayIndex",Pc,{unique:!1}),J.createIndex("collectionGroupOverlayIndex",Ul,{unique:!1})}(e)})),c<13&&f>=13&&(S=S.next(()=>function(L){const J=L.createObjectStore("remoteDocumentsV14",{keyPath:jg});J.createIndex("documentKeyIndex",tc),J.createIndex("collectionGroupIndex",Eh)}(e)).next(()=>this.ni(e,y)).next(()=>e.deleteObjectStore("remoteDocuments"))),c<14&&f>=14&&(S=S.next(()=>this.si(e,y))),c<15&&f>=15&&(S=S.next(()=>function(L){L.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),L.createObjectStore("indexState",{keyPath:Fl}).createIndex("sequenceNumberIndex",nc,{unique:!1}),L.createObjectStore("indexEntries",{keyPath:ad}).createIndex("documentKeyIndex",Sh,{unique:!1})}(e))),S}Xs(e){let t=0;return e.store("remoteDocuments").X((c,f)=>{t+=qc(f)}).next(()=>{const c={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",c)})}Ys(e){const t=e.store("mutationQueues"),c=e.store("mutations");return t.j().next(f=>Ot.forEach(f,y=>{const S=IDBKeyRange.bound([y.userId,-1],[y.userId,y.lastAcknowledgedBatchId]);return c.j("userMutationsIndex",S).next(L=>Ot.forEach(L,J=>{Ln(J.userId===y.userId);const ue=Wf(this.serializer,J);return Qg(e,y.userId,ue).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),c=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(f=>{const y=[];return c.X((S,L)=>{const J=new pi(S),ue=[0,Mo(J)];y.push(t.get(ue).next(Me=>Me?Ot.resolve():t.put({targetId:0,path:Mo(J),sequenceNumber:f.highestListenSequenceNumber})))}).next(()=>Ot.waitFor(y))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:kc});const c=t.store("collectionParents"),f=new Gp,y=S=>{if(f.add(S)){const L=S.lastSegment(),J=S.popLast();return c.put({collectionId:L,parent:Mo(J)})}};return t.store("remoteDocuments").X({Y:!0},(S,L)=>{const J=new pi(S);return y(J.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([S,L,J],ue)=>{const Me=ha(L);return y(Me.popLast())}))}ei(e){const t=e.store("targets");return t.X((c,f)=>{const y=$h(f),S=Bp(this.serializer,y);return t.put(S)})}ni(e,t){const c=t.store("remoteDocuments"),f=[];return c.X((y,S)=>{const L=t.store("remoteDocumentsV14"),J=(ue=S,ue.document?new Yn(pi.fromString(ue.document.name).popFirst(5)):ue.noDocument?Yn.fromSegments(ue.noDocument.path):ue.unknownDocument?Yn.fromSegments(ue.unknownDocument.path):Xn()).path.toArray();var ue;const Me={prefixPath:J.slice(0,J.length-2),collectionGroup:J[J.length-2],documentId:J[J.length-1],readTime:S.readTime||[0,0],unknownDocument:S.unknownDocument,noDocument:S.noDocument,document:S.document,hasCommittedMutations:!!S.hasCommittedMutations};f.push(L.put(Me))}).next(()=>Ot.waitFor(f))}si(e,t){const c=t.store("mutations"),f=tm(this.serializer),y=new Zh(nh.zs,this.serializer.fe);return c.j().next(S=>{const L=new Map;return S.forEach(J=>{var ue;let Me=null!==(ue=L.get(J.userId))&&void 0!==ue?ue:vi();Wf(this.serializer,J).keys().forEach(it=>Me=Me.add(it)),L.set(J.userId,Me)}),Ot.forEach(L,(J,ue)=>{const Me=new Ws(ue),it=qf.de(this.serializer,Me),Pt=y.getIndexManager(Me),Xt=Xg.de(Me,this.serializer,Pt,y.referenceDelegate);return new hv(f,Xt,it,Pt).recalculateAndSaveOverlaysForDocumentKeys(new Au(t,fn.ct),J).next()})})}}function Kp(i){i.createObjectStore("targetDocuments",{keyPath:Mc}).createIndex("documentTargetsIndex",kf,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ll,{unique:!0}),i.createObjectStore("targetGlobal")}const $y="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Zp{constructor(e,t,c,f,y,S,L,J,ue,Me,it=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=c,this.ii=y,this.window=S,this.document=L,this.ri=ue,this.oi=Me,this.ui=it,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=Pt=>Promise.resolve(),!Zp.D())throw new mn(jt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new V_(this,f),this.di=t+"main",this.serializer=new Xd(J),this.wi=new da(this.di,this.ui,new om(this.serializer)),this.Bs=new Dd(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tm(this.serializer),this.qs=new U_,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===Me&&lo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new mn(jt.FAILED_PRECONDITION,$y);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new fn(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var c=(0,re.Z)(function*(f){if(t.started)return e(f)});return function(f){return c.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,re.Z)(function*(c){null===c.newVersion&&(yield e())});return function(c){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,re.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Yp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Yi(e))return Pn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Yh(e).get("owner").next(t=>Ot.resolve(this.Ri(t)))}Pi(e){return Yp(e).delete(this.clientId)}bi(){var e=this;return(0,re.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",c=>{const f=Os(c,"clientMetadata");return f.j().next(y=>{const S=e.Si(y,18e5),L=y.filter(J=>-1===S.indexOf(J));return Ot.forEach(L,J=>f.delete(J.clientId)).next(()=>L)})}).catch(()=>[]);if(e._i)for(const c of t)e._i.removeItem(e.Di(c.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?Ot.resolve(!0):Yh(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new mn(jt.FAILED_PRECONDITION,$y);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yp(e).j().next(c=>void 0===this.Si(c,5e3).find(f=>!(this.clientId===f.clientId||!(!this.networkEnabled&&f.networkEnabled||!this.inForeground&&f.inForeground&&this.networkEnabled===f.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Pn("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,re.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const c=new Au(t,fn.ct);return e.Ai(c).next(()=>e.Pi(c))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(c=>this.Vi(c.updateTimeMs,t)&&!this.Ci(c.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Yp(e).j().next(t=>this.Si(t,18e5).map(c=>c.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Xg.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ny(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return qf.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,c){Pn("IndexedDbPersistence","Starting transaction:",e);const f="readonly"===t?"readonly":"readwrite",y=15===(S=this.ui)?Du:14===S?Bl:13===S?Bd:12===S?wp:11===S?rc:void Xn();var S;let L;return this.wi.runTransaction(e,f,y,J=>(L=new Au(J,this.Os?this.Os.next():fn.ct),"readwrite-primary"===t?this.Ti(L).next(ue=>!!ue||this.Ei(L)).next(ue=>{if(!ue)throw lo(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new mn(jt.FAILED_PRECONDITION,vr);return c(L)}).next(ue=>this.vi(L).next(()=>ue)):this.Oi(L).next(()=>c(L)))).then(J=>(L.raiseOnCommittedEvent(),J))}Oi(e){return Yh(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new mn(jt.FAILED_PRECONDITION,$y)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yh(e).put("owner",t)}static D(){return da.D()}Ai(e){const t=Yh(e);return t.get("owner").next(c=>this.Ri(c)?(Pn("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ot.resolve())}Vi(e,t){const c=Date.now();return!(e<c-t||e>c&&(lo(`Detected an update time that is in the future: ${e} > ${c}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Y.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const c=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Pn("IndexedDbPersistence",`Client '${e}' ${c?"is":"is not"} zombied in LocalStorage`),c}catch(c){return lo("IndexedDbPersistence","Failed to get zombied client id.",c),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){lo("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Yh(i){return Os(i,"owner")}function Yp(i){return Os(i,"clientMetadata")}function gv(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class mv{constructor(e,t,c,f){this.targetId=e,this.fromCache=t,this.Fi=c,this.Bi=f}static Li(e,t){let c=vi(),f=vi();for(const y of t.docChanges)switch(y.type){case 0:c=c.add(y.doc.key);break;case 1:f=f.add(y.doc.key)}return new mv(e,t.fromCache,c,f)}}class am{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,c,f){return this.Ki(e,t).next(y=>y||this.Gi(e,t,f,c)).next(y=>y||this.Qi(e,t))}Ki(e,t){if(vd(t))return Ot.resolve(null);let c=pa(t);return this.indexManager.getIndexType(e,c).next(f=>0===f?null:(null!==t.limit&&1===f&&(t=lu(t,null,"F"),c=pa(t)),this.indexManager.getDocumentsMatchingTarget(e,c).next(y=>{const S=vi(...y);return this.Ui.getDocuments(e,S).next(L=>this.indexManager.getMinOffset(e,c).next(J=>{const ue=this.ji(t,L);return this.zi(t,ue,S,J.readTime)?this.Ki(e,lu(t,null,"F")):this.Wi(e,ue,t,J)}))})))}Gi(e,t,c,f){return vd(t)||f.isEqual(Zn.min())?this.Qi(e,t):this.Ui.getDocuments(e,c).next(y=>{const S=this.ji(t,y);return this.zi(t,S,c,f)?this.Qi(e,t):(rl()<=st.in.DEBUG&&Pn("QueryEngine","Re-using previous result from %s to execute query: %s",f.toString(),qu(t)),this.Wi(e,S,t,Pe(f,-1)))})}ji(e,t){let c=new Ns(Rh(e));return t.forEach((f,y)=>{yd(e,y)&&(c=c.add(y))}),c}zi(e,t,c,f){if(null===e.limit)return!1;if(c.size!==t.size)return!0;const y="F"===e.limitType?t.last():t.first();return!!y&&(y.hasPendingWrites||y.version.compareTo(f)>0)}Qi(e,t){return rl()<=st.in.DEBUG&&Pn("QueryEngine","Using full collection scan to execute query:",qu(t)),this.Ui.getDocumentsMatchingQuery(e,t,Tt.min())}Wi(e,t,c,f){return this.Ui.getDocumentsMatchingQuery(e,c,f).next(y=>(t.forEach(S=>{y=y.insert(S.key,S)}),y))}}class Gy{constructor(e,t,c,f){this.persistence=e,this.Hi=t,this.serializer=f,this.Ji=new Rs(Ir),this.Yi=new Ku(y=>$l(y),md),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(c)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hv(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Qp(i,e,t,c){return new Gy(i,e,t,c)}function vv(i,e){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,re.Z)(function*(i,e){const t=Bn(i);return yield t.persistence.runTransaction("Handle user change","readonly",c=>{let f;return t.mutationQueue.getAllMutationBatches(c).next(y=>(f=y,t.tr(e),t.mutationQueue.getAllMutationBatches(c))).next(y=>{const S=[],L=[];let J=vi();for(const ue of f){S.push(ue.batchId);for(const Me of ue.mutations)J=J.add(Me.key)}for(const ue of y){L.push(ue.batchId);for(const Me of ue.mutations)J=J.add(Me.key)}return t.localDocuments.getDocuments(c,J).next(ue=>({er:ue,removedBatchIds:S,addedBatchIds:L}))})})}),Xf.apply(this,arguments)}function Xp(i){const e=Bn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function Qh(i,e,t){let c=vi(),f=vi();return t.forEach(y=>c=c.add(y)),e.getEntries(i,c).next(y=>{let S=cu();return t.forEach((L,J)=>{const ue=y.get(L);J.isFoundDocument()!==ue.isFoundDocument()&&(f=f.add(L)),J.isNoDocument()&&J.version.isEqual(Zn.min())?(e.removeEntry(L,J.readTime),S=S.insert(L,J)):!ue.isValidDocument()||J.version.compareTo(ue.version)>0||0===J.version.compareTo(ue.version)&&ue.hasPendingWrites?(e.addEntry(J),S=S.insert(L,J)):Pn("LocalStore","Ignoring outdated watch update for ",L,". Current version:",ue.version," Watch version:",J.version)}),{nr:S,sr:f}})}function lm(i,e){const t=Bn(i);return t.persistence.runTransaction("Get next mutation batch","readonly",c=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(c,e)))}function rh(i,e){const t=Bn(i);return t.persistence.runTransaction("Allocate target","readwrite",c=>{let f;return t.Bs.getTargetData(c,e).next(y=>y?(f=y,Ot.resolve(f)):t.Bs.allocateTargetId(c).next(S=>(f=new hu(e,S,"TargetPurposeListen",c.currentSequenceNumber),t.Bs.addTargetData(c,f).next(()=>f))))}).then(c=>{const f=t.Ji.get(c.targetId);return(null===f||c.snapshotVersion.compareTo(f.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(c.targetId,c),t.Yi.set(e,c.targetId)),c})}function Zc(i,e,t){return cm.apply(this,arguments)}function cm(){return cm=(0,re.Z)(function*(i,e,t){const c=Bn(i),f=c.Ji.get(e),y=t?"readwrite":"readwrite-primary";try{t||(yield c.persistence.runTransaction("Release target",y,S=>c.persistence.referenceDelegate.removeTarget(S,f)))}catch(S){if(!Yi(S))throw S;Pn("LocalStore",`Failed to update sequence numbers for target ${e}: ${S}`)}c.Ji=c.Ji.remove(e),c.Yi.delete(f.target)}),cm.apply(this,arguments)}function Jp(i,e,t){const c=Bn(i);let f=Zn.min(),y=vi();return c.persistence.runTransaction("Execute query","readonly",S=>function(L,J,ue){const Me=Bn(L),it=Me.Yi.get(ue);return void 0!==it?Ot.resolve(Me.Ji.get(it)):Me.Bs.getTargetData(J,ue)}(c,S,pa(e)).next(L=>{if(L)return f=L.lastLimboFreeSnapshotVersion,c.Bs.getMatchingKeysForTargetId(S,L.targetId).next(J=>{y=J})}).next(()=>c.Hi.getDocumentsMatchingQuery(S,e,t?f:Zn.min(),t?y:vi())).next(L=>(G_(c,lc(e),L),{documents:L,ir:y})))}function zy(i,e){const t=Bn(i),c=Bn(t.Bs),f=t.Ji.get(e);return f?Promise.resolve(f.target):t.persistence.runTransaction("Get target data","readonly",y=>c.le(y,e).next(S=>S?S.target:null))}function yv(i,e){const t=Bn(i),c=t.Xi.get(e)||Zn.min();return t.persistence.runTransaction("Get new document changes","readonly",f=>t.Zi.getAllFromCollectionGroup(f,e,Pe(c,-1),Number.MAX_SAFE_INTEGER)).then(f=>(G_(t,e,f),f))}function G_(i,e,t){let c=i.Xi.get(e)||Zn.min();t.forEach((f,y)=>{y.readTime.compareTo(c)>0&&(c=y.readTime)}),i.Xi.set(e,c)}function ep(){return ep=(0,re.Z)(function*(i,e,t,c){const f=Bn(i);let y=vi(),S=cu();for(const ue of t){const Me=e.rr(ue.metadata.name);ue.document&&(y=y.add(Me));const it=e.ur(ue);it.setReadTime(e.cr(ue.metadata.readTime)),S=S.insert(Me,it)}const L=f.Zi.newChangeBuffer({trackRemovals:!0}),J=yield rh(f,(ue=c,pa(ol(pi.fromString(`__bundle__/docs/${ue}`)))));var ue;return f.persistence.runTransaction("Apply bundle documents","readwrite",ue=>Qh(ue,L,S).next(Me=>(L.apply(ue),Me)).next(Me=>f.Bs.removeMatchingKeysForTargetId(ue,J.targetId).next(()=>f.Bs.addMatchingKeys(ue,y,J.targetId)).next(()=>f.localDocuments.getLocalViewOfDocuments(ue,Me.nr,Me.sr)).next(()=>Me.nr)))}),ep.apply(this,arguments)}function W_(i,e){return ih.apply(this,arguments)}function ih(){return ih=(0,re.Z)(function*(i,e,t=vi()){const c=yield rh(i,pa(Vp(e.bundledQuery))),f=Bn(i);return f.persistence.runTransaction("Save named query","readwrite",y=>{const S=Bt(e.readTime);if(c.snapshotVersion.compareTo(S)>=0)return f.qs.saveNamedQuery(y,e);const L=c.withResumeToken(Ni.EMPTY_BYTE_STRING,S);return f.Ji=f.Ji.insert(L.targetId,L),f.Bs.updateTargetData(y,L).next(()=>f.Bs.removeMatchingKeysForTargetId(y,c.targetId)).next(()=>f.Bs.addMatchingKeys(y,t,c.targetId)).next(()=>f.qs.saveNamedQuery(y,e))})}),ih.apply(this,arguments)}function tp(i,e){return`firestore_clients_${i}_${e}`}function np(i,e,t){let c=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(c+=`_${e.uid}`),c}function dm(i,e){return`firestore_targets_${i}_${e}`}class hm{constructor(e,t,c,f){this.user=e,this.batchId=t,this.state=c,this.error=f}static ar(e,t,c){const f=JSON.parse(c);let y,S="object"==typeof f&&-1!==["pending","acknowledged","rejected"].indexOf(f.state)&&(void 0===f.error||"object"==typeof f.error);return S&&f.error&&(S="string"==typeof f.error.message&&"string"==typeof f.error.code,S&&(y=new mn(f.error.code,f.error.message))),S?new hm(e,t,f.state,y):(lo("SharedClientState",`Failed to parse mutation state for ID '${t}': ${c}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class eg{constructor(e,t,c){this.targetId=e,this.state=t,this.error=c}static ar(e,t){const c=JSON.parse(t);let f,y="object"==typeof c&&-1!==["not-current","current","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return y&&c.error&&(y="string"==typeof c.error.message&&"string"==typeof c.error.code,y&&(f=new mn(c.error.code,c.error.message))),y?new eg(e,c.state,f):(lo("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const c=JSON.parse(t);let f="object"==typeof c&&c.activeTargetIds instanceof Array,y=_d();for(let S=0;f&&S<c.activeTargetIds.length;++S)f=pl(c.activeTargetIds[S]),y=y.add(c.activeTargetIds[S]);return f?new fm(e,y):(lo("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class pm{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new pm(t.clientId,t.onlineState):(lo("SharedClientState",`Failed to parse online state: ${e}`),null)}}class tg{constructor(){this.activeTargetIds=_d()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ng{constructor(e,t,c,f,y){this.window=e,this.ii=t,this.persistenceKey=c,this.wr=f,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Rs(Ir),this.started=!1,this.yr=[];const S=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=y,this.pr=tp(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new tg),this.Tr=new RegExp(`^firestore_clients_${S}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${S}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${S}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(L){return`firestore_bundle_loaded_v2_${L}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,re.Z)(function*(){const t=yield e.syncEngine.$i();for(const f of t){if(f===e.wr)continue;const y=e.getItem(tp(e.persistenceKey,f));if(y){const S=fm.ar(f,y);S&&(e.gr=e.gr.insert(S.clientId,S))}}e.Pr();const c=e.storage.getItem(e.vr);if(c){const f=e.br(c);f&&e.Vr(f)}for(const f of e.yr)e.mr(f);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((c,f)=>{f.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,c){this.Dr(e,t,c),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const c=this.storage.getItem(dm(this.persistenceKey,e));if(c){const f=eg.ar(e,c);f&&(t=f.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(dm(this.persistenceKey,e))}updateQueryState(e,t,c){this.kr(e,t,c)}handleUserChange(e,t,c){t.forEach(f=>{this.Cr(f)}),this.currentUser=e,c.forEach(f=>{this.addPendingMutation(f)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pn("SharedClientState","READ",e,t),t}setItem(e,t){Pn("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const c=e;if(c.storageArea===this.storage){if(Pn("SharedClientState","EVENT",c.key,c.newValue),c.key===this.pr)return void lo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,re.Z)(function*(){if(t.started){if(null!==c.key)if(t.Tr.test(c.key)){if(null==c.newValue){const f=t.Or(c.key);return t.Fr(f,null)}{const f=t.Br(c.key,c.newValue);if(f)return t.Fr(f.clientId,f)}}else if(t.Er.test(c.key)){if(null!==c.newValue){const f=t.Lr(c.key,c.newValue);if(f)return t.qr(f)}}else if(t.Ar.test(c.key)){if(null!==c.newValue){const f=t.Ur(c.key,c.newValue);if(f)return t.Kr(f)}}else if(c.key===t.vr){if(null!==c.newValue){const f=t.br(c.newValue);if(f)return t.Vr(f)}}else if(c.key===t.Ir){const f=function(y){let S=fn.ct;if(null!=y)try{const L=JSON.parse(y);Ln("number"==typeof L),S=L}catch(L){lo("SharedClientState","Failed to read sequence number from WebStorage",L)}return S}(c.newValue);f!==fn.ct&&t.sequenceNumberHandler(f)}else if(c.key===t.Rr){const f=t.Gr(c.newValue);yield Promise.all(f.map(y=>t.syncEngine.Qr(y)))}}else t.yr.push(c)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,c){const f=new hm(this.currentUser,e,t,c),y=np(this.persistenceKey,this.currentUser,e);this.setItem(y,f.hr())}Cr(e){const t=np(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,c){const f=dm(this.persistenceKey,e),y=new eg(e,t,c);this.setItem(f,y.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const c=this.Or(e);return fm.ar(c,t)}Lr(e,t){const c=this.Er.exec(e),f=Number(c[1]);return hm.ar(new Ws(void 0!==c[2]?c[2]:null),f,t)}Ur(e,t){const c=this.Ar.exec(e),f=Number(c[1]);return eg.ar(f,t)}br(e){return pm.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,re.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Pn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const c=t?this.gr.insert(e,t):this.gr.remove(e),f=this.Sr(this.gr),y=this.Sr(c),S=[],L=[];return y.forEach(J=>{f.has(J)||S.push(J)}),f.forEach(J=>{y.has(J)||L.push(J)}),this.syncEngine.Wr(S,L).then(()=>{this.gr=c})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=_d();return e.forEach((c,f)=>{t=t.unionWith(f.activeTargetIds)}),t}}class Yc{constructor(){this.Hr=new tg,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,c){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,c){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new tg,Promise.resolve()}handleUserChange(e,t,c){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Wy{Yr(e){}shutdown(){}}class qy{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Pn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Pn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Md=null;function sh(){return null===Md?Md=268435456+Math.round(2147483648*Math.random()):Md++,"0x"+Md.toString(16)}const gm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Xh{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const pu="WebChannelConnection";class q_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,c,f,y){const S=sh(),L=this.To(e,t);Pn("RestConnection",`Sending RPC '${e}' ${S}:`,L,c);const J={};return this.Eo(J,f,y),this.Ao(e,L,J,c).then(ue=>(Pn("RestConnection",`Received RPC '${e}' ${S}: `,ue),ue),ue=>{throw ys("RestConnection",`RPC '${e}' ${S} failed with error: `,ue,"url: ",L,"request:",c),ue})}vo(e,t,c,f,y,S){return this.Io(e,t,c,f,y)}Eo(e,t,c){e["X-Goog-Api-Client"]="gl-js/ fire/"+eo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((f,y)=>e[y]=f),c&&c.headers.forEach((f,y)=>e[y]=f)}To(e,t){return`${this.mo}/v1/${t}:${gm[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,c,f){const y=sh();return new Promise((S,L)=>{const J=new Cc;J.setWithCredentials(!0),J.listenOnce(zs.COMPLETE,()=>{try{switch(J.getLastErrorCode()){case _u.NO_ERROR:const Me=J.getResponseJson();Pn(pu,`XHR for RPC '${e}' ${y} received:`,JSON.stringify(Me)),S(Me);break;case _u.TIMEOUT:Pn(pu,`RPC '${e}' ${y} timed out`),L(new mn(jt.DEADLINE_EXCEEDED,"Request time out"));break;case _u.HTTP_ERROR:const it=J.getStatus();if(Pn(pu,`RPC '${e}' ${y} failed with status:`,it,"response text:",J.getResponseText()),it>0){let Pt=J.getResponseJson();Array.isArray(Pt)&&(Pt=Pt[0]);const Xt=Pt?.error;if(Xt&&Xt.status&&Xt.message){const bn=function(rr){const or=rr.toLowerCase().replace(/_/g,"-");return Object.values(jt).indexOf(or)>=0?or:jt.UNKNOWN}(Xt.status);L(new mn(bn,Xt.message))}else L(new mn(jt.UNKNOWN,"Server responded with status "+J.getStatus()))}else L(new mn(jt.UNAVAILABLE,"Connection failed."));break;default:Xn()}}finally{Pn(pu,`RPC '${e}' ${y} completed.`)}});const ue=JSON.stringify(f);Pn(pu,`RPC '${e}' ${y} sending request:`,f),J.send(t,"POST",ue,c,15)})}Ro(e,t,c){const f=sh(),y=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],S=Sa(),L=wc(),J={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},ue=this.longPollingOptions.timeoutSeconds;void 0!==ue&&(J.longPollingTimeout=Math.round(1e3*ue)),this.useFetchStreams&&(J.xmlHttpFactory=new _n({})),this.Eo(J.initMessageHeaders,t,c),J.encodeInitMessageHeaders=!0;const Me=y.join("");Pn(pu,`Creating RPC '${e}' stream ${f}: ${Me}`,J);const it=S.createWebChannel(Me,J);let Pt=!1,Xt=!1;const bn=new Xh({ro:or=>{Xt?Pn(pu,`Not sending because RPC '${e}' stream ${f} is closed:`,or):(Pt||(Pn(pu,`Opening RPC '${e}' stream ${f} transport.`),it.open(),Pt=!0),Pn(pu,`RPC '${e}' stream ${f} sending:`,or),it.send(or))},oo:()=>it.close()}),rr=(or,Di,ls)=>{or.listen(Di,ki=>{try{ls(ki)}catch(Ro){setTimeout(()=>{throw Ro},0)}})};return rr(it,qr.EventType.OPEN,()=>{Xt||Pn(pu,`RPC '${e}' stream ${f} transport opened.`)}),rr(it,qr.EventType.CLOSE,()=>{Xt||(Xt=!0,Pn(pu,`RPC '${e}' stream ${f} transport closed`),bn.wo())}),rr(it,qr.EventType.ERROR,or=>{Xt||(Xt=!0,ys(pu,`RPC '${e}' stream ${f} transport errored:`,or),bn.wo(new mn(jt.UNAVAILABLE,"The operation could not be completed")))}),rr(it,qr.EventType.MESSAGE,or=>{var Di;if(!Xt){const ls=or.data[0];Ln(!!ls);const Ro=ls.error||(null===(Di=ls[0])||void 0===Di?void 0:Di.error);if(Ro){Pn(pu,`RPC '${e}' stream ${f} received error:`,Ro);const io=Ro.status;let No=function(Fg){const A0=Ls[Fg];if(void 0!==A0)return Zd(A0)}(io),hl=Ro.message;void 0===No&&(No=jt.INTERNAL,hl="Unknown error status: "+io+" with message "+Ro.message),Xt=!0,bn.wo(new mn(No,hl)),it.close()}else Pn(pu,`RPC '${e}' stream ${f} received:`,ls),bn._o(ls)}}),rr(L,ec.STAT_EVENT,or=>{or.stat===bu.PROXY?Pn(pu,`RPC '${e}' stream ${f} detected buffering proxy`):or.stat===bu.NOPROXY&&Pn(pu,`RPC '${e}' stream ${f} detected no buffering proxy`)}),setTimeout(()=>{bn.fo()},0),bn}}function _v(){return typeof window<"u"?window:null}function mm(){return typeof document<"u"?document:null}function rp(i){return new K(i,!0)}class bv{constructor(e,t,c=1e3,f=1.5,y=6e4){this.ii=e,this.timerId=t,this.Po=c,this.bo=f,this.Vo=y,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),c=Math.max(0,Date.now()-this.Co),f=Math.max(0,t-c);f>0&&Pn("ExponentialBackoff",`Backing off for ${f} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${c} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,f,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class vm{constructor(e,t,c,f,y,S,L,J){this.ii=e,this.$o=c,this.Oo=f,this.connection=y,this.authCredentialsProvider=S,this.appCheckCredentialsProvider=L,this.listener=J,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new bv(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,re.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,re.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var c=this;return(0,re.Z)(function*(){c.Ho(),c.Jo(),c.qo.cancel(),c.Fo++,4!==e?c.qo.reset():t&&t.code===jt.RESOURCE_EXHAUSTED?(lo(t.toString()),lo("Using maximum backoff delay to prevent overloading the backend."),c.qo.xo()):t&&t.code===jt.UNAUTHENTICATED&&3!==c.state&&(c.authCredentialsProvider.invalidateToken(),c.appCheckCredentialsProvider.invalidateToken()),null!==c.stream&&(c.Yo(),c.stream.close(),c.stream=null),c.state=e,yield c.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([c,f])=>{this.Fo===t&&this.Zo(c,f)},c=>{e(()=>{const f=new mn(jt.UNKNOWN,"Fetching auth token failed: "+c.message);return this.tu(f)})})}Zo(e,t){const c=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{c(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(f=>{c(()=>this.tu(f))}),this.stream.onMessage(f=>{c(()=>this.onMessage(f))})}Go(){var e=this;this.state=5,this.qo.No((0,re.Z)(function*(){e.state=0,e.start()}))}tu(e){return Pn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Pn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Qc extends vm{constructor(e,t,c,f,y,S){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,c,f,S),this.serializer=y}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function jp(i,e){let t;if("targetChange"in e){const c="NO_CHANGE"===(J=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===J?1:"REMOVE"===J?2:"CURRENT"===J?3:"RESET"===J?4:Xn(),f=e.targetChange.targetIds||[],y=function(J,ue){return J.useProto3Json?(Ln(void 0===ue||"string"==typeof ue),Ni.fromBase64String(ue||"")):(Ln(void 0===ue||ue instanceof Uint8Array),Ni.fromUint8Array(ue||new Uint8Array))}(i,e.targetChange.resumeToken),S=e.targetChange.cause,L=S&&function(J){const ue=void 0===J.code?jt.UNKNOWN:Zd(J.code);return new mn(ue,J.message||"")}(S);t=new al(c,f,y,L||null)}else if("documentChange"in e){const c=e.documentChange,f=zi(i,c.document.name),y=Bt(c.document.updateTime),S=c.document.createTime?Bt(c.document.createTime):Zn.min(),L=new Ha({mapValue:{fields:c.document.fields}}),J=_s.newFoundDocument(f,y,S,L);t=new hc(c.targetIds||[],c.removedTargetIds||[],J.key,J)}else if("documentDelete"in e){const c=e.documentDelete,f=zi(i,c.document),y=c.readTime?Bt(c.readTime):Zn.min(),S=_s.newNoDocument(f,y);t=new hc([],c.removedTargetIds||[],S.key,S)}else if("documentRemove"in e){const c=e.documentRemove,f=zi(i,c.document);t=new hc([],c.removedTargetIds||[],f,null)}else{if(!("filter"in e))return Xn();{const c=e.filter,{count:f=0,unchangedNames:y}=c,S=new Bh(f,y);t=new Wl(c.targetId,S)}}var J;return t}(this.serializer,e),c=function(f){if(!("targetChange"in f))return Zn.min();const y=f.targetChange;return y.targetIds&&y.targetIds.length?Zn.min():y.readTime?Bt(y.readTime):Zn.min()}(e);return this.listener.nu(t,c)}su(e){const t={};t.database=$a(this.serializer),t.addTarget=function(f,y){let S;const L=y.target;if(S=Nf(L)?{documents:mc(f,L)}:{query:Gf(f,L)},S.targetId=y.targetId,y.resumeToken.approximateByteSize()>0){S.resumeToken=_t(f,y.resumeToken);const J=le(f,y.expectedCount);null!==J&&(S.expectedCount=J)}else if(y.snapshotVersion.compareTo(Zn.min())>0){S.readTime=Je(f,y.snapshotVersion.toTimestamp());const J=le(f,y.expectedCount);null!==J&&(S.expectedCount=J)}return S}(this.serializer,e);const c=function qg(i,e){const t=function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xn()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);c&&(t.labels=c),this.Wo(t)}iu(e){const t={};t.database=$a(this.serializer),t.removeTarget=e,this.Wo(t)}}class Jh extends vm{constructor(e,t,c,f,y,S){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,c,f,S),this.serializer=y,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Ln(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function gc(i,e){return i&&i.length>0?(Ln(void 0!==e),i.map(t=>function(c,f){let y=Bt(c.updateTime?c.updateTime:f);return y.isEqual(Zn.min())&&(y=Bt(f)),new Rp(y,c.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),c=Bt(e.commitTime);return this.listener.cu(c,t)}return Ln(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=$a(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(c=>Tl(this.serializer,c))};this.Wo(t)}}class kd extends class{}{constructor(e,t,c,f){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=c,this.serializer=f,this.lu=!1}fu(){if(this.lu)throw new mn(jt.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,c){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,y])=>this.connection.Io(e,t,c,f,y)).catch(f=>{throw"FirebaseError"===f.name?(f.code===jt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new mn(jt.UNKNOWN,f.toString())})}vo(e,t,c,f){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([y,S])=>this.connection.vo(e,t,c,y,S,f)).catch(y=>{throw"FirebaseError"===y.name?(y.code===jt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),y):new mn(jt.UNKNOWN,y.toString())})}terminate(){this.lu=!0}}class Zy{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(lo(t),this.mu=!1):Pn("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class K_{constructor(e,t,c,f,y){var S=this;this.localStore=e,this.datastore=t,this.asyncQueue=c,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=y,this.Pu.Yr(L=>{c.enqueueAndForget((0,re.Z)(function*(){var J;nf(S)&&(Pn("RemoteStore","Restarting streams for network reachability change."),yield(J=(0,re.Z)(function*(ue){const Me=Bn(ue);Me.vu.add(4),yield Ga(Me),Me.bu.set("Unknown"),Me.vu.delete(4),yield Qu(Me)}),function(ue){return J.apply(this,arguments)})(S))}))}),this.bu=new Zy(c,f)}}function Qu(i){return ul.apply(this,arguments)}function ul(){return ul=(0,re.Z)(function*(i){if(nf(i))for(const e of i.Ru)yield e(!0)}),ul.apply(this,arguments)}function Ga(i){return ef.apply(this,arguments)}function ef(){return ef=(0,re.Z)(function*(i){for(const e of i.Ru)yield e(!1)}),ef.apply(this,arguments)}function ip(i,e){const t=Bn(i);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),_m(t)?ym(t):sp(t).Ko()&&rg(t,e))}function tf(i,e){const t=Bn(i),c=sp(t);t.Au.delete(e),c.Ko()&&_i(t,e),0===t.Au.size&&(c.Ko()?c.jo():nf(t)&&t.bu.set("Unknown"))}function rg(i,e){if(i.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Zn.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}sp(i).su(e)}function _i(i,e){i.Vu.qt(e),sp(i).iu(e)}function ym(i){i.Vu=new _l({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),le:e=>i.Au.get(e)||null,ue:()=>i.datastore.serializer.databaseId}),sp(i).start(),i.bu.gu()}function _m(i){return nf(i)&&!sp(i).Uo()&&i.Au.size>0}function nf(i){return 0===Bn(i).vu.size}function Yy(i){i.Vu=void 0}function Ev(i){return Sv.apply(this,arguments)}function Sv(){return Sv=(0,re.Z)(function*(i){i.Au.forEach((e,t)=>{rg(i,e)})}),Sv.apply(this,arguments)}function Z_(i,e){return bm.apply(this,arguments)}function bm(){return bm=(0,re.Z)(function*(i,e){Yy(i),_m(i)?(i.bu.Iu(e),ym(i)):i.bu.set("Unknown")}),bm.apply(this,arguments)}function Y_(i,e,t){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,re.Z)(function*(i,e,t){if(i.bu.set("Online"),e instanceof al&&2===e.state&&e.cause)try{yield(c=(0,re.Z)(function*(f,y){const S=y.cause;for(const L of y.targetIds)f.Au.has(L)&&(yield f.remoteSyncer.rejectListen(L,S),f.Au.delete(L),f.Vu.removeTarget(L))}),function(f,y){return c.apply(this,arguments)})(i,e)}catch(c){Pn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),c),yield rf(i,c)}else if(e instanceof hc?i.Vu.Ht(e):e instanceof Wl?i.Vu.ne(e):i.Vu.Xt(e),!t.isEqual(Zn.min()))try{const c=yield Xp(i.localStore);t.compareTo(c)>=0&&(yield function(f,y){const S=f.Vu.ce(y);return S.targetChanges.forEach((L,J)=>{if(L.resumeToken.approximateByteSize()>0){const ue=f.Au.get(J);ue&&f.Au.set(J,ue.withResumeToken(L.resumeToken,y))}}),S.targetMismatches.forEach((L,J)=>{const ue=f.Au.get(L);if(!ue)return;f.Au.set(L,ue.withResumeToken(Ni.EMPTY_BYTE_STRING,ue.snapshotVersion)),_i(f,L);const Me=new hu(ue.target,L,J,ue.sequenceNumber);rg(f,Me)}),f.remoteSyncer.applyRemoteEvent(S)}(i,t))}catch(c){Pn("RemoteStore","Failed to raise snapshot:",c),yield rf(i,c)}var c}),Tm.apply(this,arguments)}function rf(i,e,t){return ig.apply(this,arguments)}function ig(){return ig=(0,re.Z)(function*(i,e,t){if(!Yi(e))throw e;i.vu.add(1),yield Ga(i),i.bu.set("Offline"),t||(t=()=>Xp(i.localStore)),i.asyncQueue.enqueueRetryable((0,re.Z)(function*(){Pn("RemoteStore","Retrying IndexedDB access"),yield t(),i.vu.delete(1),yield Qu(i)}))}),ig.apply(this,arguments)}function Q_(i,e){return e().catch(t=>rf(i,t,e))}function sf(i){return Em.apply(this,arguments)}function Em(){return Em=(0,re.Z)(function*(i){const e=Bn(i),t=Pd(e);let c=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;yc(e);)try{const f=yield lm(e.localStore,c);if(null===f){0===e.Eu.length&&t.jo();break}c=f.batchId,af(e,f)}catch(f){yield rf(e,f)}wv(e)&&Qy(e)}),Em.apply(this,arguments)}function yc(i){return nf(i)&&i.Eu.length<10}function af(i,e){i.Eu.push(e);const t=Pd(i);t.Ko()&&t.ou&&t.uu(e.mutations)}function wv(i){return nf(i)&&!Pd(i).Uo()&&i.Eu.length>0}function Qy(i){Pd(i).start()}function Sm(i){return oh.apply(this,arguments)}function oh(){return oh=(0,re.Z)(function*(i){Pd(i).hu()}),oh.apply(this,arguments)}function Cv(i){return uf.apply(this,arguments)}function uf(){return uf=(0,re.Z)(function*(i){const e=Pd(i);for(const t of i.Eu)e.uu(t.mutations)}),uf.apply(this,arguments)}function Xy(i,e,t){return sg.apply(this,arguments)}function sg(){return sg=(0,re.Z)(function*(i,e,t){const c=i.Eu.shift(),f=Lu.from(c,e,t);yield Q_(i,()=>i.remoteSyncer.applySuccessfulWrite(f)),yield sf(i)}),sg.apply(this,arguments)}function _c(i,e){return og.apply(this,arguments)}function og(){return og=(0,re.Z)(function*(i,e){var t;e&&Pd(i).ou&&(yield(t=(0,re.Z)(function*(c,f){if(wd(y=f.code)&&y!==jt.ABORTED){const S=c.Eu.shift();Pd(c).Qo(),yield Q_(c,()=>c.remoteSyncer.rejectFailedWrite(S.batchId,f)),yield sf(c)}var y}),function(c,f){return t.apply(this,arguments)})(i,e)),wv(i)&&Qy(i)}),og.apply(this,arguments)}function Iv(i,e){return ag.apply(this,arguments)}function ag(){return ag=(0,re.Z)(function*(i,e){const t=Bn(i);t.asyncQueue.verifyOperationInProgress(),Pn("RemoteStore","RemoteStore received new credentials");const c=nf(t);t.vu.add(3),yield Ga(t),c&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Qu(t)}),ag.apply(this,arguments)}function xv(i,e){return Dv.apply(this,arguments)}function Dv(){return Dv=(0,re.Z)(function*(i,e){const t=Bn(i);e?(t.vu.delete(2),yield Qu(t)):e||(t.vu.add(2),yield Ga(t),t.bu.set("Unknown"))}),Dv.apply(this,arguments)}function sp(i){return i.Su||(i.Su=function(e,t,c){const f=Bn(e);return f.fu(),new Qc(t,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,c)}(i.datastore,i.asyncQueue,{uo:Ev.bind(null,i),ao:Z_.bind(null,i),nu:Y_.bind(null,i)}),i.Ru.push(function(){var e=(0,re.Z)(function*(t){t?(i.Su.Qo(),_m(i)?ym(i):i.bu.set("Unknown")):(yield i.Su.stop(),Yy(i))});return function(t){return e.apply(this,arguments)}}())),i.Su}function Pd(i){return i.Du||(i.Du=function(e,t,c){const f=Bn(e);return f.fu(),new Jh(t,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,c)}(i.datastore,i.asyncQueue,{uo:Sm.bind(null,i),ao:_c.bind(null,i),au:Cv.bind(null,i),cu:Xy.bind(null,i)}),i.Ru.push(function(){var e=(0,re.Z)(function*(t){t?(i.Du.Qo(),yield sf(i)):(yield i.Du.stop(),i.Eu.length>0&&(Pn("RemoteStore",`Stopping write stream with ${i.Eu.length} pending writes`),i.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Du}class wm{constructor(e,t,c,f,y){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=c,this.op=f,this.removalCallback=y,this.deferred=new Ao,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(S=>{})}static createAndSchedule(e,t,c,f,y){const S=Date.now()+c,L=new wm(e,t,S,f,y);return L.start(c),L}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new mn(jt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function op(i,e){if(lo("AsyncQueue",`${e}: ${i}`),Yi(i))return new mn(jt.UNAVAILABLE,`${e}: ${i}`);throw i}class ap{constructor(e){this.comparator=e?(t,c)=>e(t,c)||Yn.comparator(t.key,c.key):(t,c)=>Yn.comparator(t.key,c.key),this.keyedMap=ga(),this.sortedSet=new Rs(this.comparator)}static emptySet(e){return new ap(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,c)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ap)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),c=e.sortedSet.getIterator();for(;t.hasNext();){const f=t.getNext().key,y=c.getNext().key;if(!f.isEqual(y))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const c=new ap;return c.comparator=this.comparator,c.keyedMap=e,c.sortedSet=t,c}}class Jy{constructor(){this.Cu=new Rs(Yn.comparator)}track(e){const t=e.doc.key,c=this.Cu.get(t);c?0!==e.type&&3===c.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==c.type?this.Cu=this.Cu.insert(t,{type:c.type,doc:e.doc}):2===e.type&&2===c.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===c.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===c.type?this.Cu=this.Cu.remove(t):1===e.type&&2===c.type?this.Cu=this.Cu.insert(t,{type:1,doc:c.doc}):0===e.type&&1===c.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Xn():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,c)=>{e.push(c)}),e}}class lf{constructor(e,t,c,f,y,S,L,J,ue){this.query=e,this.docs=t,this.oldDocs=c,this.docChanges=f,this.mutatedKeys=y,this.fromCache=S,this.syncStateChanged=L,this.excludesMetadataChanges=J,this.hasCachedResults=ue}static fromInitialDocuments(e,t,c,f,y){const S=[];return t.forEach(L=>{S.push({type:0,doc:L})}),new lf(e,t,ap.emptySet(t),S,c,f,!0,!1,y)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ph(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,c=e.docChanges;if(t.length!==c.length)return!1;for(let f=0;f<t.length;f++)if(t[f].type!==c[f].type||!t[f].doc.isEqual(c[f].doc))return!1;return!0}}class Av{constructor(){this.Nu=void 0,this.listeners=[]}}class X_{constructor(){this.queries=new Ku(e=>Oh(e),Ph),this.onlineState="Unknown",this.ku=new Set}}function Mv(i,e){return Xu.apply(this,arguments)}function Xu(){return Xu=(0,re.Z)(function*(i,e){const t=Bn(i),c=e.query;let f=!1,y=t.queries.get(c);if(y||(f=!0,y=new Av),f)try{y.Nu=yield t.onListen(c)}catch(S){const L=op(S,`Initialization of query '${qu(e.query)}' failed`);return void e.onError(L)}t.queries.set(c,y),y.listeners.push(e),e.Mu(t.onlineState),y.Nu&&e.$u(y.Nu)&&Im(t)}),Xu.apply(this,arguments)}function kv(i,e){return za.apply(this,arguments)}function za(){return za=(0,re.Z)(function*(i,e){const t=Bn(i),c=e.query;let f=!1;const y=t.queries.get(c);if(y){const S=y.listeners.indexOf(e);S>=0&&(y.listeners.splice(S,1),f=0===y.listeners.length)}if(f)return t.queries.delete(c),t.onUnlisten(c)}),za.apply(this,arguments)}function J_(i,e){const t=Bn(i);let c=!1;for(const f of e){const S=t.queries.get(f.query);if(S){for(const L of S.listeners)L.$u(f)&&(c=!0);S.Nu=f}}c&&Im(t)}function Cm(i,e,t){const c=Bn(i),f=c.queries.get(e);if(f)for(const y of f.listeners)y.onError(t);c.queries.delete(e)}function Im(i){i.ku.forEach(e=>{e.next()})}class Pv{constructor(e,t,c){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=c||{}}$u(e){if(!this.options.includeMetadataChanges){const c=[];for(const f of e.docChanges)3!==f.type&&c.push(f);e=new lf(e.query,e.docs,e.oldDocs,c,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=lf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class e0{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class e_{constructor(e){this.serializer=e}rr(e){return zi(this.serializer,e)}ur(e){return e.metadata.exists?$f(this.serializer,e.document,!1):_s.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Bt(e)}}class t_{constructor(e,t,c){this.ju=e,this.localStore=t,this.serializer=c,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ov(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const c=pi.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(c.get(c.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,c=new e_(this.serializer);for(const f of e)if(f.metadata.queries){const y=c.rr(f.metadata.name);for(const S of f.metadata.queries){const L=(t.get(S)||vi()).add(y);t.set(S,L)}}return t}complete(){var e=this;return(0,re.Z)(function*(){const t=yield function z_(i,e,t,c){return ep.apply(this,arguments)}(e.localStore,new e_(e.serializer),e.documents,e.ju.id),c=e.Wu(e.documents);for(const f of e.queries)yield W_(e.localStore,f,c.get(f.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Ov(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class n_{constructor(e){this.key=e}}class xm{constructor(e){this.key=e}}class r_{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=vi(),this.mutatedKeys=vi(),this.tc=Rh(e),this.ec=new ap(this.tc)}get nc(){return this.Yu}sc(e,t){const c=t?t.ic:new Jy,f=t?t.ec:this.ec;let y=t?t.mutatedKeys:this.mutatedKeys,S=f,L=!1;const J="F"===this.query.limitType&&f.size===this.query.limit?f.last():null,ue="L"===this.query.limitType&&f.size===this.query.limit?f.first():null;if(e.inorderTraversal((Me,it)=>{const Pt=f.get(Me),Xt=yd(this.query,it)?it:null,bn=!!Pt&&this.mutatedKeys.has(Pt.key),rr=!!Xt&&(Xt.hasLocalMutations||this.mutatedKeys.has(Xt.key)&&Xt.hasCommittedMutations);let or=!1;Pt&&Xt?Pt.data.isEqual(Xt.data)?bn!==rr&&(c.track({type:3,doc:Xt}),or=!0):this.rc(Pt,Xt)||(c.track({type:2,doc:Xt}),or=!0,(J&&this.tc(Xt,J)>0||ue&&this.tc(Xt,ue)<0)&&(L=!0)):!Pt&&Xt?(c.track({type:0,doc:Xt}),or=!0):Pt&&!Xt&&(c.track({type:1,doc:Pt}),or=!0,(J||ue)&&(L=!0)),or&&(Xt?(S=S.add(Xt),y=rr?y.add(Me):y.delete(Me)):(S=S.delete(Me),y=y.delete(Me)))}),null!==this.query.limit)for(;S.size>this.query.limit;){const Me="F"===this.query.limitType?S.last():S.first();S=S.delete(Me.key),y=y.delete(Me.key),c.track({type:1,doc:Me})}return{ec:S,ic:c,zi:L,mutatedKeys:y}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,c){const f=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const y=e.ic.xu();y.sort((ue,Me)=>function(it,Pt){const Xt=bn=>{switch(bn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xn()}};return Xt(it)-Xt(Pt)}(ue.type,Me.type)||this.tc(ue.doc,Me.doc)),this.oc(c);const S=t?this.uc():[],L=0===this.Zu.size&&this.current?1:0,J=L!==this.Xu;return this.Xu=L,0!==y.length||J?{snapshot:new lf(this.query,e.ec,f,y,e.mutatedKeys,0===L,J,!1,!!c&&c.resumeToken.approximateByteSize()>0),cc:S}:{cc:S}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Jy,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=vi(),this.ec.forEach(c=>{this.ac(c.key)&&(this.Zu=this.Zu.add(c.key))});const t=[];return e.forEach(c=>{this.Zu.has(c)||t.push(new xm(c))}),this.Zu.forEach(c=>{e.has(c)||t.push(new n_(c))}),t}hc(e){this.Yu=e.ir,this.Zu=vi();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return lf.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Rv{constructor(e,t,c){this.query=e,this.targetId=t,this.view=c}}class ug{constructor(e){this.key=e,this.fc=!1}}class t0{constructor(e,t,c,f,y,S){this.localStore=e,this.remoteStore=t,this.eventManager=c,this.sharedClientState=f,this.currentUser=y,this.maxConcurrentLimboResolutions=S,this.dc={},this.wc=new Ku(L=>Oh(L),Ph),this._c=new Map,this.mc=new Set,this.gc=new Rs(Yn.comparator),this.yc=new Map,this.Ic=new qp,this.Tc={},this.Ec=new Map,this.Ac=Kc.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function n0(i,e){return ql.apply(this,arguments)}function ql(){return ql=(0,re.Z)(function*(i,e){const t=qv(i);let c,f;const y=t.wc.get(e);if(y)c=y.targetId,t.sharedClientState.addLocalQueryTarget(c),f=y.view.lc();else{const S=yield rh(t.localStore,pa(e)),L=t.sharedClientState.addLocalQueryTarget(S.targetId);c=S.targetId,f=yield lg(t,e,c,"current"===L,S.resumeToken),t.isPrimaryClient&&ip(t.remoteStore,S)}return f}),ql.apply(this,arguments)}function lg(i,e,t,c,f){return Nv.apply(this,arguments)}function Nv(){return Nv=(0,re.Z)(function*(i,e,t,c,f){i.Rc=(it,Pt,Xt)=>{return(bn=(0,re.Z)(function*(rr,or,Di,ls){let ki=or.view.sc(Di);ki.zi&&(ki=yield Jp(rr.localStore,or.query,!1).then(({documents:No})=>or.view.sc(No,ki)));const Ro=ls&&ls.targetChanges.get(or.targetId),io=or.view.applyChanges(ki,rr.isPrimaryClient,Ro);return u_(rr,or.targetId,io.cc),io.snapshot}),function(rr,or,Di,ls){return bn.apply(this,arguments)})(i,it,Pt,Xt);var bn};const y=yield Jp(i.localStore,e,!0),S=new r_(e,y.ir),L=S.sc(y.documents),J=St.createSynthesizedTargetChangeForCurrentChange(t,c&&"Offline"!==i.onlineState,f),ue=S.applyChanges(L,i.isPrimaryClient,J);u_(i,t,ue.cc);const Me=new Rv(e,t,S);return i.wc.set(e,Me),i._c.has(t)?i._c.get(t).push(e):i._c.set(t,[e]),ue.snapshot}),Nv.apply(this,arguments)}function i_(i,e){return Lv.apply(this,arguments)}function Lv(){return Lv=(0,re.Z)(function*(i,e){const t=Bn(i),c=t.wc.get(e),f=t._c.get(c.targetId);if(f.length>1)return t._c.set(c.targetId,f.filter(y=>!Ph(y,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(c.targetId),t.sharedClientState.isActiveQueryTarget(c.targetId)||(yield Zc(t.localStore,c.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(c.targetId),tf(t.remoteStore,c.targetId),uh(t,c.targetId)}).catch(ci))):(uh(t,c.targetId),yield Zc(t.localStore,c.targetId,!0))}),Lv.apply(this,arguments)}function Dm(){return Dm=(0,re.Z)(function*(i,e,t){const c=Kv(i);try{const f=yield function(y,S){const L=Bn(y),J=Ti.now(),ue=S.reduce((Pt,Xt)=>Pt.add(Xt.key),vi());let Me,it;return L.persistence.runTransaction("Locally write mutations","readwrite",Pt=>{let Xt=cu(),bn=vi();return L.Zi.getEntries(Pt,ue).next(rr=>{Xt=rr,Xt.forEach((or,Di)=>{Di.isValidDocument()||(bn=bn.add(or))})}).next(()=>L.localDocuments.getOverlayedDocuments(Pt,Xt)).next(rr=>{Me=rr;const or=[];for(const Di of S){const ls=Bf(Di,Me.get(Di.key).overlayedDocument);null!=ls&&or.push(new Zu(Di.key,ls,Ch(ls.value.mapValue),no.exists(!0)))}return L.mutationQueue.addMutationBatch(Pt,J,or,S)}).next(rr=>{it=rr;const or=rr.applyToLocalDocumentSet(Me,bn);return L.documentOverlayCache.saveOverlays(Pt,rr.batchId,or)})}).then(()=>({batchId:it.batchId,changes:Wd(Me)}))}(c.localStore,e);c.sharedClientState.addPendingMutation(f.batchId),function(y,S,L){let J=y.Tc[y.currentUser.toKey()];J||(J=new Rs(Ir)),J=J.insert(S,L),y.Tc[y.currentUser.toKey()]=J}(c,f.batchId,t),yield Kl(c,f.changes),yield sf(c.remoteStore)}catch(f){const y=op(f,"Failed to persist write");t.reject(y)}}),Dm.apply(this,arguments)}function up(i,e){return cg.apply(this,arguments)}function cg(){return cg=(0,re.Z)(function*(i,e){const t=Bn(i);try{const c=yield function Jf(i,e){const t=Bn(i),c=e.snapshotVersion;let f=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",y=>{const S=t.Zi.newChangeBuffer({trackRemovals:!0});f=t.Ji;const L=[];e.targetChanges.forEach((Me,it)=>{const Pt=f.get(it);if(!Pt)return;L.push(t.Bs.removeMatchingKeys(y,Me.removedDocuments,it).next(()=>t.Bs.addMatchingKeys(y,Me.addedDocuments,it)));let Xt=Pt.withSequenceNumber(y.currentSequenceNumber);var bn,rr,or;null!==e.targetMismatches.get(it)?Xt=Xt.withResumeToken(Ni.EMPTY_BYTE_STRING,Zn.min()).withLastLimboFreeSnapshotVersion(Zn.min()):Me.resumeToken.approximateByteSize()>0&&(Xt=Xt.withResumeToken(Me.resumeToken,c)),f=f.insert(it,Xt),rr=Xt,or=Me,(0===(bn=Pt).resumeToken.approximateByteSize()||rr.snapshotVersion.toMicroseconds()-bn.snapshotVersion.toMicroseconds()>=3e8||or.addedDocuments.size+or.modifiedDocuments.size+or.removedDocuments.size>0)&&L.push(t.Bs.updateTargetData(y,Xt))});let J=cu(),ue=vi();if(e.documentUpdates.forEach(Me=>{e.resolvedLimboDocuments.has(Me)&&L.push(t.persistence.referenceDelegate.updateLimboDocument(y,Me))}),L.push(Qh(y,S,e.documentUpdates).next(Me=>{J=Me.nr,ue=Me.sr})),!c.isEqual(Zn.min())){const Me=t.Bs.getLastRemoteSnapshotVersion(y).next(it=>t.Bs.setTargetsMetadata(y,y.currentSequenceNumber,c));L.push(Me)}return Ot.waitFor(L).next(()=>S.apply(y)).next(()=>t.localDocuments.getLocalViewOfDocuments(y,J,ue)).next(()=>J)}).then(y=>(t.Ji=f,y))}(t.localStore,e);e.targetChanges.forEach((f,y)=>{const S=t.yc.get(y);S&&(Ln(f.addedDocuments.size+f.modifiedDocuments.size+f.removedDocuments.size<=1),f.addedDocuments.size>0?S.fc=!0:f.modifiedDocuments.size>0?Ln(S.fc):f.removedDocuments.size>0&&(Ln(S.fc),S.fc=!1))}),yield Kl(t,c,e)}catch(c){yield ci(c)}}),cg.apply(this,arguments)}function r0(i,e,t){const c=Bn(i);if(c.isPrimaryClient&&0===t||!c.isPrimaryClient&&1===t){const f=[];c.wc.forEach((y,S)=>{const L=S.view.Mu(e);L.snapshot&&f.push(L.snapshot)}),function(y,S){const L=Bn(y);L.onlineState=S;let J=!1;L.queries.forEach((ue,Me)=>{for(const it of Me.listeners)it.Mu(S)&&(J=!0)}),J&&Im(L)}(c.eventManager,e),f.length&&c.dc.nu(f),c.onlineState=e,c.isPrimaryClient&&c.sharedClientState.setOnlineState(e)}}function o_(i,e,t){return dg.apply(this,arguments)}function dg(){return dg=(0,re.Z)(function*(i,e,t){const c=Bn(i);c.sharedClientState.updateQueryState(e,"rejected",t);const f=c.yc.get(e),y=f&&f.key;if(y){let S=new Rs(Yn.comparator);S=S.insert(y,_s.newNoDocument(y,Zn.min()));const L=vi().add(y),J=new zl(Zn.min(),new Map,new Rs(Ir),S,L);yield up(c,J),c.gc=c.gc.remove(y),c.yc.delete(e),km(c)}else yield Zc(c.localStore,e,!1).then(()=>uh(c,e,t)).catch(ci)}),dg.apply(this,arguments)}function a_(i,e){return Am.apply(this,arguments)}function Am(){return Am=(0,re.Z)(function*(i,e){const t=Bn(i),c=e.batch.batchId;try{const f=yield function um(i,e){const t=Bn(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",c=>{const f=e.batch.keys(),y=t.Zi.newChangeBuffer({trackRemovals:!0});return function(S,L,J,ue){const Me=J.batch,it=Me.keys();let Pt=Ot.resolve();return it.forEach(Xt=>{Pt=Pt.next(()=>ue.getEntry(L,Xt)).next(bn=>{const rr=J.docVersions.get(Xt);Ln(null!==rr),bn.version.compareTo(rr)<0&&(Me.applyToRemoteDocument(bn,J),bn.isValidDocument()&&(bn.setReadTime(J.commitVersion),ue.addEntry(bn)))})}),Pt.next(()=>S.mutationQueue.removeMutationBatch(L,Me))}(t,c,e,y).next(()=>y.apply(c)).next(()=>t.mutationQueue.performConsistencyCheck(c)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(c,f,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,function(S){let L=vi();for(let J=0;J<S.mutationResults.length;++J)S.mutationResults[J].transformResults.length>0&&(L=L.add(S.batch.mutations[J].key));return L}(e))).next(()=>t.localDocuments.getDocuments(c,f))})}(t.localStore,e);Mm(t,c,null),ah(t,c),t.sharedClientState.updateMutationState(c,"acknowledged"),yield Kl(t,f)}catch(f){yield ci(f)}}),Am.apply(this,arguments)}function hg(i,e,t){return bc.apply(this,arguments)}function bc(){return bc=(0,re.Z)(function*(i,e,t){const c=Bn(i);try{const f=yield function(y,S){const L=Bn(y);return L.persistence.runTransaction("Reject batch","readwrite-primary",J=>{let ue;return L.mutationQueue.lookupMutationBatch(J,S).next(Me=>(Ln(null!==Me),ue=Me.keys(),L.mutationQueue.removeMutationBatch(J,Me))).next(()=>L.mutationQueue.performConsistencyCheck(J)).next(()=>L.documentOverlayCache.removeOverlaysForBatchId(J,ue,S)).next(()=>L.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(J,ue)).next(()=>L.localDocuments.getDocuments(J,ue))})}(c.localStore,e);Mm(c,e,t),ah(c,e),c.sharedClientState.updateMutationState(e,"rejected",t),yield Kl(c,f)}catch(f){yield ci(f)}}),bc.apply(this,arguments)}function Fv(){return Fv=(0,re.Z)(function*(i,e){const t=Bn(i);nf(t.remoteStore)||Pn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const c=yield function(y){const S=Bn(y);return S.persistence.runTransaction("Get highest unacknowledged batch id","readonly",L=>S.mutationQueue.getHighestUnacknowledgedBatchId(L))}(t.localStore);if(-1===c)return void e.resolve();const f=t.Ec.get(c)||[];f.push(e),t.Ec.set(c,f)}catch(c){const f=op(c,"Initialization of waitForPendingWrites() operation failed");e.reject(f)}}),Fv.apply(this,arguments)}function ah(i,e){(i.Ec.get(e)||[]).forEach(t=>{t.resolve()}),i.Ec.delete(e)}function Mm(i,e,t){const c=Bn(i);let f=c.Tc[c.currentUser.toKey()];if(f){const y=f.get(e);y&&(t?y.reject(t):y.resolve(),f=f.remove(e)),c.Tc[c.currentUser.toKey()]=f}}function uh(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const c of i._c.get(e))i.wc.delete(c),t&&i.dc.Pc(c,t);i._c.delete(e),i.isPrimaryClient&&i.Ic.Is(e).forEach(c=>{i.Ic.containsKey(c)||jv(i,c)})}function jv(i,e){i.mc.delete(e.path.canonicalString());const t=i.gc.get(e);null!==t&&(tf(i.remoteStore,t),i.gc=i.gc.remove(e),i.yc.delete(t),km(i))}function u_(i,e,t){for(const c of t)c instanceof n_?(i.Ic.addReference(c.key,e),l_(i,c)):c instanceof xm?(Pn("SyncEngine","Document no longer in limbo: "+c.key),i.Ic.removeReference(c.key,e),i.Ic.containsKey(c.key)||jv(i,c.key)):Xn()}function l_(i,e){const t=e.key,c=t.path.canonicalString();i.gc.get(t)||i.mc.has(c)||(Pn("SyncEngine","New document in limbo: "+t),i.mc.add(c),km(i))}function km(i){for(;i.mc.size>0&&i.gc.size<i.maxConcurrentLimboResolutions;){const e=i.mc.values().next().value;i.mc.delete(e);const t=new Yn(pi.fromString(e)),c=i.Ac.next();i.yc.set(c,new ug(t)),i.gc=i.gc.insert(t,c),ip(i.remoteStore,new hu(pa(ol(t.path)),c,"TargetPurposeLimboResolution",fn.ct))}}function Kl(i,e,t){return cf.apply(this,arguments)}function cf(){return cf=(0,re.Z)(function*(i,e,t){const c=Bn(i),f=[],y=[],S=[];var L;c.wc.isEmpty()||(c.wc.forEach((L,J)=>{S.push(c.Rc(J,e,t).then(ue=>{if((ue||t)&&c.isPrimaryClient&&c.sharedClientState.updateQueryState(J.targetId,ue?.fromCache?"not-current":"current"),ue){f.push(ue);const Me=mv.Li(J.targetId,ue);y.push(Me)}}))}),yield Promise.all(S),c.dc.nu(f),yield(L=(0,re.Z)(function*(J,ue){const Me=Bn(J);try{yield Me.persistence.runTransaction("notifyLocalViewChanges","readwrite",it=>Ot.forEach(ue,Pt=>Ot.forEach(Pt.Fi,Xt=>Me.persistence.referenceDelegate.addReference(it,Pt.targetId,Xt)).next(()=>Ot.forEach(Pt.Bi,Xt=>Me.persistence.referenceDelegate.removeReference(it,Pt.targetId,Xt)))))}catch(it){if(!Yi(it))throw it;Pn("LocalStore","Failed to update sequence numbers: "+it)}for(const it of ue){const Pt=it.targetId;if(!it.fromCache){const Xt=Me.Ji.get(Pt),rr=Xt.withLastLimboFreeSnapshotVersion(Xt.snapshotVersion);Me.Ji=Me.Ji.insert(Pt,rr)}}}),function(J,ue){return L.apply(this,arguments)})(c.localStore,y))}),cf.apply(this,arguments)}function Pm(i,e){return c_.apply(this,arguments)}function c_(){return c_=(0,re.Z)(function*(i,e){const t=Bn(i);if(!t.currentUser.isEqual(e)){Pn("SyncEngine","User change. New user:",e.toKey());const c=yield vv(t.localStore,e);t.currentUser=e,(f=t).Ec.forEach(S=>{S.forEach(L=>{L.reject(new mn(jt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),f.Ec.clear(),t.sharedClientState.handleUserChange(e,c.removedBatchIds,c.addedBatchIds),yield Kl(t,c.er)}var f}),c_.apply(this,arguments)}function d_(i,e){const t=Bn(i),c=t.yc.get(e);if(c&&c.fc)return vi().add(c.key);{let f=vi();const y=t._c.get(e);if(!y)return f;for(const S of y){const L=t.wc.get(S);f=f.unionWith(L.view.nc)}return f}}function Xi(i,e){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,re.Z)(function*(i,e){const t=Bn(i),c=yield Jp(t.localStore,e.query,!0),f=e.view.hc(c);return t.isPrimaryClient&&u_(t,e.targetId,f.cc),f}),Uv.apply(this,arguments)}function o0(i,e){return Bv.apply(this,arguments)}function Bv(){return Bv=(0,re.Z)(function*(i,e){const t=Bn(i);return yv(t.localStore,e).then(c=>Kl(t,c))}),Bv.apply(this,arguments)}function Vv(i,e,t,c){return Hv.apply(this,arguments)}function Hv(){return Hv=(0,re.Z)(function*(i,e,t,c){const f=Bn(i),y=yield function(S,L){const J=Bn(S),ue=Bn(J.mutationQueue);return J.persistence.runTransaction("Lookup mutation documents","readonly",Me=>ue.Sn(Me,L).next(it=>it?J.localDocuments.getDocuments(Me,it):Ot.resolve(null)))}(f.localStore,e);var L;null!==y?("pending"===t?yield sf(f.remoteStore):"acknowledged"===t||"rejected"===t?(Mm(f,e,c||null),ah(f,e),L=e,Bn(Bn(f.localStore).mutationQueue).Cn(L)):Xn(),yield Kl(f,y)):Pn("SyncEngine","Cannot apply mutation batch with id: "+e)}),Hv.apply(this,arguments)}function $v(){return $v=(0,re.Z)(function*(i,e){const t=Bn(i);if(qv(t),Kv(t),!0===e&&!0!==t.vc){const c=t.sharedClientState.getAllActiveQueryTargets(),f=yield Gv(t,c.toArray());t.vc=!0,yield xv(t.remoteStore,!0);for(const y of f)ip(t.remoteStore,y)}else if(!1===e&&!1!==t.vc){const c=[];let f=Promise.resolve();t._c.forEach((y,S)=>{t.sharedClientState.isLocalQueryTarget(S)?c.push(S):f=f.then(()=>(uh(t,S),Zc(t.localStore,S,!0))),tf(t.remoteStore,S)}),yield f,yield Gv(t,c),function(y){const S=Bn(y);S.yc.forEach((L,J)=>{tf(S.remoteStore,J)}),S.Ic.Ts(),S.yc=new Map,S.gc=new Rs(Yn.comparator)}(t),t.vc=!1,yield xv(t.remoteStore,!1)}}),$v.apply(this,arguments)}function Gv(i,e,t){return Om.apply(this,arguments)}function Om(){return Om=(0,re.Z)(function*(i,e,t){const c=Bn(i),f=[],y=[];for(const S of e){let L;const J=c._c.get(S);if(J&&0!==J.length){L=yield rh(c.localStore,pa(J[0]));for(const ue of J){const Me=c.wc.get(ue),it=yield Xi(c,Me);it.snapshot&&y.push(it.snapshot)}}else{const ue=yield zy(c.localStore,S);L=yield rh(c.localStore,ue),yield lg(c,h_(ue),S,!1,L.resumeToken)}f.push(L)}return c.dc.nu(y),f}),Om.apply(this,arguments)}function h_(i){return Mh(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function a0(i){const e=Bn(i);return Bn(Bn(e.localStore).persistence).$i()}function lp(i,e,t,c){return zv.apply(this,arguments)}function zv(){return zv=(0,re.Z)(function*(i,e,t,c){const f=Bn(i);if(f.vc)return void Pn("SyncEngine","Ignoring unexpected query state notification.");const y=f._c.get(e);if(y&&y.length>0)switch(t){case"current":case"not-current":{const S=yield yv(f.localStore,lc(y[0])),L=zl.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ni.EMPTY_BYTE_STRING);yield Kl(f,S,L);break}case"rejected":yield Zc(f.localStore,e,!0),uh(f,e,c);break;default:Xn()}}),zv.apply(this,arguments)}function L0(i,e,t){return Wv.apply(this,arguments)}function Wv(){return Wv=(0,re.Z)(function*(i,e,t){const c=qv(i);if(c.vc){for(const f of e){if(c._c.has(f)){Pn("SyncEngine","Adding an already active target "+f);continue}const y=yield zy(c.localStore,f),S=yield rh(c.localStore,y);yield lg(c,h_(y),S.targetId,!1,S.resumeToken),ip(c.remoteStore,S)}for(const f of t)c._c.has(f)&&(yield Zc(c.localStore,f,!1).then(()=>{tf(c.remoteStore,f),uh(c,f)}).catch(ci))}}),Wv.apply(this,arguments)}function qv(i){const e=Bn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=up.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=o_.bind(null,e),e.dc.nu=J_.bind(null,e.eventManager),e.dc.Pc=Cm.bind(null,e.eventManager),e}function Kv(i){const e=Bn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=a_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hg.bind(null,e),e}class pg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,re.Z)(function*(){t.serializer=rp(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Qp(this.persistence,new am,e.initialUser,this.serializer)}createPersistence(e){return new Zh(nh.zs,this.serializer)}createSharedClientState(e){return new Yc}terminate(){var e=this;return(0,re.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class gg extends pg{constructor(e,t,c){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=c,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,c=this;return(0,re.Z)(function*(){yield t().call(c,e),yield c.Vc.initialize(c,e),yield Kv(c.Vc.syncEngine),yield sf(c.Vc.remoteStore),yield c.persistence.Ii(()=>(c.gcScheduler&&!c.gcScheduler.started&&c.gcScheduler.start(),c.indexBackfillerScheduler&&!c.indexBackfillerScheduler.started&&c.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Qp(this.persistence,new am,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new th(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const c=new Gu(t,this.persistence);return new sd(e.asyncQueue,c)}createPersistence(e){const t=gv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),c=void 0!==this.cacheSizeBytes?fu.withCacheSize(this.cacheSizeBytes):fu.DEFAULT;return new Zp(this.synchronizeTabs,t,e.clientId,c,e.asyncQueue,_v(),mm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Yc}}class Zv extends gg{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,c=this;return(0,re.Z)(function*(){yield t().call(c,e);const f=c.Vc.syncEngine;c.sharedClientState instanceof ng&&(c.sharedClientState.syncEngine={jr:Vv.bind(null,f),zr:lp.bind(null,f),Wr:L0.bind(null,f),$i:a0.bind(null,f),Qr:o0.bind(null,f)},yield c.sharedClientState.start()),yield c.persistence.Ii(function(){var y=(0,re.Z)(function*(S){yield function fg(i,e){return $v.apply(this,arguments)}(c.Vc.syncEngine,S),c.gcScheduler&&(S&&!c.gcScheduler.started?c.gcScheduler.start():S||c.gcScheduler.stop()),c.indexBackfillerScheduler&&(S&&!c.indexBackfillerScheduler.started?c.indexBackfillerScheduler.start():S||c.indexBackfillerScheduler.stop())});return function(S){return y.apply(this,arguments)}}())})()}createSharedClientState(e){const t=_v();if(!ng.D(t))throw new mn(jt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const c=gv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ng(t,e.asyncQueue,c,e.clientId,e.initialUser)}}class lh{initialize(e,t){var c=this;return(0,re.Z)(function*(){c.localStore||(c.localStore=e.localStore,c.sharedClientState=e.sharedClientState,c.datastore=c.createDatastore(t),c.remoteStore=c.createRemoteStore(t),c.eventManager=c.createEventManager(t),c.syncEngine=c.createSyncEngine(t,!e.synchronizeTabs),c.sharedClientState.onlineStateHandler=f=>r0(c.syncEngine,f,1),c.remoteStore.remoteSyncer.handleCredentialChange=Pm.bind(null,c.syncEngine),yield xv(c.remoteStore,c.syncEngine.isPrimaryClient))})()}createEventManager(e){return new X_}createDatastore(e){const t=rp(e.databaseInfo.databaseId),c=new q_(e.databaseInfo);return new kd(e.authCredentials,e.appCheckCredentials,c,t)}createRemoteStore(e){return t=this.localStore,c=this.datastore,f=e.asyncQueue,y=L=>r0(this.syncEngine,L,0),S=qy.D()?new qy:new Wy,new K_(t,c,f,y,S);var t,c,f,y,S}createSyncEngine(e,t){return function(c,f,y,S,L,J,ue){const Me=new t0(c,f,y,S,L,J);return ue&&(Me.vc=!0),Me}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,re.Z)(function*(t){const c=Bn(t);Pn("RemoteStore","RemoteStore shutting down."),c.vu.add(5),yield Ga(c),c.Pu.shutdown(),c.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Yv(i,e=10240){let t=0;return{read:()=>(0,re.Z)(function*(){if(t<i.byteLength){const c={value:i.slice(t,t+e),done:!1};return t+=e,c}return{done:!0}})(),cancel:()=>(0,re.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class mg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):lo("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class f_{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Ao,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(c=>{c&&c.Qu()?this.metadata.resolve(c.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(c?.Gu)}`))},c=>this.metadata.reject(c))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,re.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,re.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,re.Z)(function*(){const t=yield e.kc();if(null===t)return null;const c=e.xc.decode(t),f=Number(c);isNaN(f)&&e.Mc(`length string (${c}) is not valid number`);const y=yield e.$c(f);return new e0(JSON.parse(y),t.length+f)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,re.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const c=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),c})()}$c(e){var t=this;return(0,re.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const c=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),c})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,re.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const c=new Uint8Array(e.buffer.length+t.value.length);c.set(e.buffer),c.set(t.value,e.buffer.length),e.buffer=c}return t.done})()}}class g{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,re.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new mn(jt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const c=yield(f=(0,re.Z)(function*(y,S){const L=Bn(y),J=$a(L.serializer)+"/documents",ue={documents:S.map(Xt=>zr(L.serializer,Xt))},Me=yield L.vo("BatchGetDocuments",J,ue,S.length),it=new Map;Me.forEach(Xt=>{const bn=function Fp(i,e){return"found"in e?function(t,c){Ln(!!c.found);const f=zi(t,c.found.name),y=Bt(c.found.updateTime),S=c.found.createTime?Bt(c.found.createTime):Zn.min(),L=new Ha({mapValue:{fields:c.found.fields}});return _s.newFoundDocument(f,y,S,L)}(i,e):"missing"in e?function(t,c){Ln(!!c.missing),Ln(!!c.readTime);const f=zi(t,c.missing),y=Bt(c.readTime);return _s.newNoDocument(f,y)}(i,e):Xn()}(L.serializer,Xt);it.set(bn.key.toString(),bn)});const Pt=[];return S.forEach(Xt=>{const bn=it.get(Xt.toString());Ln(!!bn),Pt.push(bn)}),Pt}),function(y,S){return f.apply(this,arguments)})(t.datastore,e);var f;return c.forEach(f=>t.recordVersion(f)),c})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(c){this.lastWriteError=c}this.writtenDocs.add(e.toString())}delete(e){this.write(new Uc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,re.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var c;e.mutations.forEach(c=>{t.delete(c.key.toString())}),t.forEach((c,f)=>{const y=Yn.fromPath(f);e.mutations.push(new Sd(y,e.precondition(y)))}),yield(c=(0,re.Z)(function*(f,y){const S=Bn(f),L=$a(S.serializer)+"/documents",J={writes:y.map(ue=>Tl(S.serializer,ue))};yield S.Io("Commit",L,J)}),function(f,y){return c.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xn();t=Zn.min()}const c=this.readVersions.get(e.key.toString());if(c){if(!t.isEqual(c))throw new mn(jt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Zn.min())?no.exists(!1):no.updateTime(t):no.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Zn.min()))throw new mn(jt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return no.updateTime(t)}return no.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class u{constructor(e,t,c,f,y){this.asyncQueue=e,this.datastore=t,this.options=c,this.updateFunction=f,this.deferred=y,this.Bc=c.maxAttempts,this.qo=new bv(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,re.Z)(function*(){const t=new g(e.datastore),c=e.qc(t);c&&c.then(f=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(f)}).catch(y=>{e.Uc(y)}))}).catch(f=>{e.Uc(f)})}))}qc(e){try{const t=this.updateFunction(e);return!od(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!wd(t)}return!1}}class a{constructor(e,t,c,f){var y=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=c,this.databaseInfo=f,this.user=Ws.UNAUTHENTICATED,this.clientId=Dc.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(c,function(){var S=(0,re.Z)(function*(L){Pn("FirestoreClient","Received user=",L.uid),yield y.authCredentialListener(L),y.user=L});return function(L){return S.apply(this,arguments)}}()),this.appCheckCredentials.start(c,S=>(Pn("FirestoreClient","Received new app check token=",S),this.appCheckCredentialListener(S,this.user)))}getConfiguration(){var e=this;return(0,re.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new mn(jt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ao;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,re.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(c){const f=op(c,"Failed to shutdown persistence");t.reject(f)}})),t.promise}}function l(i,e){return n.apply(this,arguments)}function n(){return n=(0,re.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Pn("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let c=t.initialUser;i.setCredentialChangeListener(function(){var f=(0,re.Z)(function*(y){c.isEqual(y)||(yield vv(e.localStore,y),c=y)});return function(y){return f.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),n.apply(this,arguments)}function o(i,e){return h.apply(this,arguments)}function h(){return h=(0,re.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield C(i);Pn("FirestoreClient","Initializing OnlineComponentProvider");const c=yield i.getConfiguration();yield e.initialize(t,c),i.setCredentialChangeListener(f=>Iv(e.remoteStore,f)),i.setAppCheckTokenChangeListener((f,y)=>Iv(e.remoteStore,y)),i._onlineComponents=e}),h.apply(this,arguments)}function _(i){return"FirebaseError"===i.name?i.code===jt.FAILED_PRECONDITION||i.code===jt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function C(i){return A.apply(this,arguments)}function A(){return A=(0,re.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Pn("FirestoreClient","Using user provided OfflineComponentProvider");try{yield l(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!_(t))throw t;ys("Error using user provided cache. Falling back to memory cache: "+t),yield l(i,new pg)}}else Pn("FirestoreClient","Using default OfflineComponentProvider"),yield l(i,new pg);return i._offlineComponents}),A.apply(this,arguments)}function j(i){return te.apply(this,arguments)}function te(){return te=(0,re.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Pn("FirestoreClient","Using user provided OnlineComponentProvider"),yield o(i,i._uninitializedComponentsProvider._online)):(Pn("FirestoreClient","Using default OnlineComponentProvider"),yield o(i,new lh))),i._onlineComponents}),te.apply(this,arguments)}function Q(i){return C(i).then(e=>e.persistence)}function Se(i){return C(i).then(e=>e.localStore)}function je(i){return j(i).then(e=>e.remoteStore)}function We(i){return j(i).then(e=>e.syncEngine)}function kt(i){return pn.apply(this,arguments)}function pn(){return pn=(0,re.Z)(function*(i){const e=yield j(i),t=e.eventManager;return t.onListen=n0.bind(null,e.syncEngine),t.onUnlisten=i_.bind(null,e.syncEngine),t}),pn.apply(this,arguments)}function xn(i,e,t={}){const c=new Ao;return i.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return function(f,y,S,L,J){const ue=new mg({next:it=>{y.enqueueAndForget(()=>kv(f,Me));const Pt=it.docs.has(S);!Pt&&it.fromCache?J.reject(new mn(jt.UNAVAILABLE,"Failed to get document because the client is offline.")):Pt&&it.fromCache&&L&&"server"===L.source?J.reject(new mn(jt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):J.resolve(it)},error:it=>J.reject(it)}),Me=new Pv(ol(S.path),ue,{includeMetadataChanges:!0,Ku:!0});return Mv(f,Me)}(yield kt(i),i.asyncQueue,e,t,c)})),c.promise}function sn(i,e,t={}){const c=new Ao;return i.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return function(f,y,S,L,J){const ue=new mg({next:it=>{y.enqueueAndForget(()=>kv(f,Me)),it.fromCache&&"server"===L.source?J.reject(new mn(jt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):J.resolve(it)},error:it=>J.reject(it)}),Me=new Pv(S,ue,{includeMetadataChanges:!0,Ku:!0});return Mv(f,Me)}(yield kt(i),i.asyncQueue,e,t,c)})),c.promise}function Br(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const Ts=new Map;function Es(i,e,t){if(!t)throw new mn(jt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function co(i,e,t,c){if(!0===e&&!0===c)throw new mn(jt.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function ia(i){if(!Yn.isDocumentKey(i))throw new mn(jt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Eo(i){if(Yn.isDocumentKey(i))throw new mn(jt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ka(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Xn()}function br(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new mn(jt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ka(i);throw new mn(jt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function cp(i,e){if(e<=0)throw new mn(jt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class ll{constructor(e){var t,c;if(void 0===e.host){if(void 0!==e.ssl)throw new mn(jt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new mn(jt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}co("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Br(null!==(c=e.experimentalLongPollingOptions)&&void 0!==c?c:{}),function(f){if(void 0!==f.timeoutSeconds){if(isNaN(f.timeoutSeconds))throw new mn(jt.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (must not be NaN)`);if(f.timeoutSeconds<5)throw new mn(jt.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (minimum allowed value is 5)`);if(f.timeoutSeconds>30)throw new mn(jt.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cl{constructor(e,t,c,f){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=c,this._app=f,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ll({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new mn(jt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new mn(jt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ll(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Ic;switch(t.type){case"firstParty":return new Ol(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new mn(jt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ts.get(e);t&&(Pn("ComponentProvider","Removing Datastore"),Ts.delete(e),t.terminate())}(this),Promise.resolve()}}class Ss{constructor(e,t,c){this.converter=t,this._key=c,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ju(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ss(this.firestore,e,this._key)}}class ro{constructor(e,t,c){this.converter=t,this._query=c,this.type="query",this.firestore=e}withConverter(e){return new ro(this.firestore,e,this._query)}}class Ju extends ro{constructor(e,t,c){super(e,t,ol(c)),this._path=c,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ss(this.firestore,null,new Yn(e))}withConverter(e){return new Ju(this.firestore,e,this._path)}}function dp(i,e,...t){if(i=(0,Y.m9)(i),Es("collection","path",e),i instanceof cl){const c=pi.fromString(e,...t);return Eo(c),new Ju(i,null,c)}{if(!(i instanceof Ss||i instanceof Ju))throw new mn(jt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const c=i._path.child(pi.fromString(e,...t));return Eo(c),new Ju(i.firestore,null,c)}}function Rm(i,e,...t){if(i=(0,Y.m9)(i),1===arguments.length&&(e=Dc.A()),Es("doc","path",e),i instanceof cl){const c=pi.fromString(e,...t);return ia(c),new Ss(i,null,new Yn(c))}{if(!(i instanceof Ss||i instanceof Ju))throw new mn(jt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const c=i._path.child(pi.fromString(e,...t));return ia(c),new Ss(i.firestore,i instanceof Ju?i.converter:null,new Yn(c))}}function Qv(i,e){return i=(0,Y.m9)(i),e=(0,Y.m9)(e),(i instanceof Ss||i instanceof Ju)&&(e instanceof Ss||e instanceof Ju)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function p_(i,e){return i=(0,Y.m9)(i),e=(0,Y.m9)(e),i instanceof ro&&e instanceof ro&&i.firestore===e.firestore&&Ph(i._query,e._query)&&i.converter===e.converter}class c0{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new bv(this,"async_queue_retry"),this.Xc=()=>{const t=mm();t&&Pn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=mm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=mm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Ao;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,re.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Yi(t))throw t;Pn("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(c=>{throw this.Wc=c,this.Hc=!1,lo("INTERNAL UNHANDLED ERROR: ",function(y){let S=y.message||"";return y.stack&&(S=y.stack.includes(y.message)?y.stack:y.message+"\n"+y.stack),S}(c)),c}).then(c=>(this.Hc=!1,c))));return this.Gc=t,t}enqueueAfterDelay(e,t,c){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const f=wm.createAndSchedule(this,e,t,c,y=>this.na(y));return this.zc.push(f),f}Zc(){this.Wc&&Xn()}verifyOperationInProgress(){}sa(){var e=this;return(0,re.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,c)=>t.targetTimeMs-c.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function g_(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const c=e;for(const f of["next","error","complete"])if(f in c&&"function"==typeof c[f])return!0;return!1}(i)}class d0{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ao,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,c){this._progressObserver={next:e,error:t,complete:c}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ws extends cl{constructor(e,t,c,f){super(e,t,c,f),this.type="firestore",this._queue=new c0,this._persistenceKey=f?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||df(this),this._firestoreClient.terminate()}}function Yo(i){return i._firestoreClient||df(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function df(i){var e,t,c;const f=i._freezeSettings(),y=(L=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new wh(i._databaseId,L,i._persistenceKey,(ue=f).host,ue.ssl,ue.experimentalForceLongPolling,ue.experimentalAutoDetectLongPolling,Br(ue.experimentalLongPollingOptions),ue.useFetchStreams));var L,ue;i._firestoreClient=new a(i._authCredentials,i._appCheckCredentials,i._queue,y),null!==(t=f.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(c=f.cache)&&void 0!==c&&c._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:f.cache.kind,_offline:f.cache._offlineComponentProvider,_online:f.cache._onlineComponentProvider})}function _g(i,e,t){const c=new Ao;return i.asyncQueue.enqueue((0,re.Z)(function*(){try{yield l(i,t),yield o(i,e),c.resolve()}catch(f){const y=f;if(!_(y))throw y;ys("Error enabling indexeddb cache. Falling back to memory cache: "+y),c.reject(y)}})).then(()=>c.promise)}function bg(i){if(i._initialized||i._terminated)throw new mn(jt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Jc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jc(Ni.fromBase64String(e))}catch(t){throw new mn(jt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jc(Ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Od{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new mn(jt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ps(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ff{constructor(e){this._methodName=e}}class Eg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new mn(jt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new mn(jt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ir(this._lat,e._lat)||Ir(this._long,e._long)}}const f0=/^__.*__$/;class p0{constructor(e,t,c){this.data=e,this.fieldMask=t,this.fieldTransforms=c}toMutation(e,t){return null!==this.fieldMask?new Zu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ed(e,this.data,t,this.fieldTransforms)}}class Sl{constructor(e,t,c){this.data=e,this.fieldMask=t,this.fieldTransforms=c}toMutation(e,t){return new Zu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Lm(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xn()}}class Sg{constructor(e,t,c,f,y,S){this.settings=e,this.databaseId=t,this.serializer=c,this.ignoreUndefinedProperties=f,void 0===y&&this.ua(),this.fieldTransforms=y||[],this.fieldMask=S||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Sg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const c=null===(t=this.path)||void 0===t?void 0:t.child(e),f=this.aa({path:c,la:!1});return f.fa(e),f}da(e){var t;const c=null===(t=this.path)||void 0===t?void 0:t.child(e),f=this.aa({path:c,la:!1});return f.ua(),f}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Pa(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Lm(this.ca)&&f0.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class g0{constructor(e,t,c){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=c||rp(e)}ya(e,t,c,f=!1){return new Sg({ca:e,methodName:t,ga:c,path:Ps.emptyPath(),la:!1,ma:f},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pf(i){const e=i._freezeSettings(),t=rp(i._databaseId);return new g0(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Fm(i,e,t,c,f,y={}){const S=i.ya(y.merge||y.mergeFields?2:0,e,t,f);fp("Data must be an object, but it was:",S,c);const L=wg(c,S);let J,ue;if(y.merge)J=new Va(S.fieldMask),ue=S.fieldTransforms;else if(y.mergeFields){const Me=[];for(const it of y.mergeFields){const Pt=Zl(e,it,t);if(!S.contains(Pt))throw new mn(jt.INVALID_ARGUMENT,`Field '${Pt}' is specified in your field mask but missing from your input data.`);ey(Me,Pt)||Me.push(Pt)}J=new Va(Me),ue=S.fieldTransforms.filter(it=>J.covers(it.field))}else J=null,ue=S.fieldTransforms;return new p0(new Ha(L),J,ue)}class hp extends ff{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hp}}function hh(i,e,t){return new Sg({ca:3,ga:e.settings.ga,methodName:i._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Eu extends ff{_toFieldTransform(e){return new Nu(e.path,new cc)}isEqual(e){return e instanceof Eu}}class m0 extends ff{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=hh(this,e,!0),c=this.pa.map(y=>vf(y,t)),f=new Fc(c);return new Nu(e.path,f)}isEqual(e){return this===e}}class jm extends ff{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=hh(this,e,!0),c=this.pa.map(y=>vf(y,t)),f=new Gl(c);return new Nu(e.path,f)}isEqual(e){return this===e}}class gf extends ff{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Ru(e.serializer,Fh(e.serializer,this.Ia));return new Nu(e.path,t)}isEqual(e){return this===e}}function wl(i,e,t,c){const f=i.ya(1,e,t);fp("Data must be an object, but it was:",f,c);const y=[],S=Ha.empty();ou(c,(J,ue)=>{const Me=yf(e,J,t);ue=(0,Y.m9)(ue);const it=f.da(Me);if(ue instanceof hp)y.push(Me);else{const Pt=vf(ue,it);null!=Pt&&(y.push(Me),S.set(Me,Pt))}});const L=new Va(y);return new Sl(S,L,f.fieldTransforms)}function mf(i,e,t,c,f,y){const S=i.ya(1,e,t),L=[Zl(e,c,t)],J=[f];if(y.length%2!=0)throw new mn(jt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Pt=0;Pt<y.length;Pt+=2)L.push(Zl(e,y[Pt])),J.push(y[Pt+1]);const ue=[],Me=Ha.empty();for(let Pt=L.length-1;Pt>=0;--Pt)if(!ey(ue,L[Pt])){const Xt=L[Pt];let bn=J[Pt];bn=(0,Y.m9)(bn);const rr=S.da(Xt);if(bn instanceof hp)ue.push(Xt);else{const or=vf(bn,rr);null!=or&&(ue.push(Xt),Me.set(Xt,or))}}const it=new Va(ue);return new Sl(Me,it,S.fieldTransforms)}function ho(i,e,t,c=!1){return vf(t,i.ya(c?4:3,e))}function vf(i,e){if(fh(i=(0,Y.m9)(i)))return fp("Unsupported field value:",e,i),wg(i,e);if(i instanceof ff)return function(t,c){if(!Lm(c.ca))throw c._a(`${t._methodName}() can only be used with update() and set()`);if(!c.path)throw c._a(`${t._methodName}() is not currently supported inside arrays`);const f=t._toFieldTransform(c);f&&c.fieldTransforms.push(f)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,c){const f=[];let y=0;for(const S of t){let L=vf(S,c.wa(y));null==L&&(L={nullValue:"NULL_VALUE"}),f.push(L),y++}return{arrayValue:{values:f}}}(i,e)}return function(t,c){if(null===(t=(0,Y.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Fh(c.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const f=Ti.fromDate(t);return{timestampValue:Je(c.serializer,f)}}if(t instanceof Ti){const f=new Ti(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Je(c.serializer,f)}}if(t instanceof Eg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Jc)return{bytesValue:_t(c.serializer,t._byteString)};if(t instanceof Ss){const f=c.databaseId,y=t.firestore._databaseId;if(!y.isEqual(f))throw c._a(`Document reference is for database ${y.projectId}/${y.database} but should be for database ${f.projectId}/${f.database}`);return{referenceValue:Un(t.firestore._databaseId||c.databaseId,t._key.path)}}throw c._a(`Unsupported field value: ${ka(t)}`)}(i,e)}function wg(i,e){const t={};return il(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ou(i,(c,f)=>{const y=vf(f,e.ha(c));null!=y&&(t[c]=y)}),{mapValue:{fields:t}}}function fh(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Ti||i instanceof Eg||i instanceof Jc||i instanceof Ss||i instanceof ff)}function fp(i,e,t){if(!fh(t)||"object"!=typeof(c=t)||null===c||Object.getPrototypeOf(c)!==Object.prototype&&null!==Object.getPrototypeOf(c)){const c=ka(t);throw e._a("an object"===c?i+" a custom object":i+" "+c)}var c}function Zl(i,e,t){if((e=(0,Y.m9)(e))instanceof Od)return e._internalPath;if("string"==typeof e)return yf(i,e);throw Pa("Field path arguments must be of type string or ",i,!1,void 0,t)}const zo=new RegExp("[~\\*/\\[\\]]");function yf(i,e,t){if(e.search(zo)>=0)throw Pa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Od(...e.split("."))._internalPath}catch{throw Pa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Pa(i,e,t,c,f){const y=c&&!c.isEmpty(),S=void 0!==f;let L=`Function ${e}() called with invalid data`;t&&(L+=" (via `toFirestore()`)"),L+=". ";let J="";return(y||S)&&(J+=" (found",y&&(J+=` in field ${c}`),S&&(J+=` in document ${f}`),J+=")"),new mn(jt.INVALID_ARGUMENT,L+i+J)}function ey(i,e){return i.some(t=>t.isEqual(e))}class _f{constructor(e,t,c,f,y){this._firestore=e,this._userDataWriter=t,this._key=c,this._document=f,this._converter=y}get id(){return this._key.path.lastSegment()}get ref(){return new Ss(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ty(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ph("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ty extends _f{data(){return super.data()}}function ph(i,e){return"string"==typeof e?yf(i,e):e instanceof Od?e._internalPath:e._delegate._internalPath}function Um(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new mn(jt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bm{}class bf extends Bm{}function Yl(i,e,...t){let c=[];e instanceof Bm&&c.push(e),c=c.concat(t),function(f){const y=f.filter(L=>L instanceof Tf).length,S=f.filter(L=>L instanceof pp).length;if(y>1||y>0&&S>0)throw new mn(jt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(c);for(const f of c)i=f._apply(i);return i}class pp extends bf{constructor(e,t,c){super(),this._field=e,this._op=t,this._value=c,this.type="where"}static _create(e,t,c){return new pp(e,t,c)}_apply(e){const t=this._parse(e);return Gm(e._query,t),new ro(e.firestore,e.converter,Rc(e._query,t))}_parse(e){const t=pf(e.firestore);return function(f,y,S,L,J,ue,Me){let it;if(J.isKeyField()){if("array-contains"===ue||"array-contains-any"===ue)throw new mn(jt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ue}' queries on documentId().`);if("in"===ue||"not-in"===ue){iy(Me,ue);const Pt=[];for(const Xt of Me)Pt.push(ry(L,f,Xt));it={arrayValue:{values:Pt}}}else it=ry(L,f,Me)}else"in"!==ue&&"not-in"!==ue&&"array-contains-any"!==ue||iy(Me,ue),it=ho(S,"where",Me,"in"===ue||"not-in"===ue);return Hi.create(J,ue,it)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Tf extends Bm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Tf(e,t)}_parse(e){const t=this._queryConstraints.map(c=>c._parse(e)).filter(c=>c.getFilters().length>0);return 1===t.length?t[0]:bs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(c,f){let y=c;const S=f.getFlattenedFilters();for(const L of S)Gm(y,L),y=Rc(y,L)}(e._query,t),new ro(e.firestore,e.converter,Rc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Hm extends bf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Hm(e,t)}_apply(e){const t=function(c,f,y){if(null!==c.startAt)throw new mn(jt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==c.endAt)throw new mn(jt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const S=new cd(f,y);return function(L,J){if(null===Gd(L)){const ue=kh(L);null!==ue&&Tc(0,ue,J.field)}}(c,S),S}(e._query,this._field,this._direction);return new ro(e.firestore,e.converter,function(c,f){const y=c.explicitOrderBy.concat([f]);return new vl(c.path,c.collectionGroup,y,c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(e._query,t))}}class Rd extends bf{constructor(e,t,c){super(),this.type=e,this._limit=t,this._limitType=c}static _create(e,t,c){return new Rd(e,t,c)}_apply(e){return new ro(e.firestore,e.converter,lu(e._query,this._limit,this._limitType))}}class Sf extends bf{constructor(e,t,c){super(),this.type=e,this._docOrFields=t,this._inclusive=c}static _create(e,t,c){return new Sf(e,t,c)}_apply(e){const t=ed(e,this.type,this._docOrFields,this._inclusive);return new ro(e.firestore,e.converter,(f=t,new vl((c=e._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,f,c.endAt)));var c,f}}class Cl extends bf{constructor(e,t,c){super(),this.type=e,this._docOrFields=t,this._inclusive=c}static _create(e,t,c){return new Cl(e,t,c)}_apply(e){const t=ed(e,this.type,this._docOrFields,this._inclusive);return new ro(e.firestore,e.converter,(f=t,new vl((c=e._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,f)));var c,f}}function ed(i,e,t,c){if(t[0]=(0,Y.m9)(t[0]),t[0]instanceof _f)return function(f,y,S,L,J){if(!L)throw new mn(jt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${S}().`);const ue=[];for(const Me of uc(f))if(Me.field.isKeyField())ue.push(Or(y,L.key));else{const it=L.data.field(Me.field);if(ku(it))throw new mn(jt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Me.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===it){const Pt=Me.field.canonicalString();throw new mn(jt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Pt}' (used as the orderBy) does not exist.`)}ue.push(it)}return new ml(ue,J)}(i._query,i.firestore._databaseId,e,t[0]._document,c);{const f=pf(i.firestore);return function(y,S,L,J,ue,Me){const it=y.explicitOrderBy;if(ue.length>it.length)throw new mn(jt.INVALID_ARGUMENT,`Too many arguments provided to ${J}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Pt=[];for(let Xt=0;Xt<ue.length;Xt++){const bn=ue[Xt];if(it[Xt].field.isKeyField()){if("string"!=typeof bn)throw new mn(jt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${J}(), but got a ${typeof bn}`);if(!ac(y)&&-1!==bn.indexOf("/"))throw new mn(jt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${J}() must be a plain document ID, but '${bn}' contains a slash.`);const rr=y.path.child(pi.fromString(bn));if(!Yn.isDocumentKey(rr))throw new mn(jt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${J}() must result in a valid document path, but '${rr}' is not because it contains an odd number of segments.`);const or=new Yn(rr);Pt.push(Or(S,or))}else{const rr=ho(L,J,bn);Pt.push(rr)}}return new ml(Pt,Me)}(i._query,i.firestore._databaseId,f,e,t,c)}}function ry(i,e,t){if("string"==typeof(t=(0,Y.m9)(t))){if(""===t)throw new mn(jt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ac(e)&&-1!==t.indexOf("/"))throw new mn(jt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const c=e.path.child(pi.fromString(t));if(!Yn.isDocumentKey(c))throw new mn(jt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${c}' is not because it has an odd number of segments (${c.length}).`);return Or(i,new Yn(c))}if(t instanceof Ss)return Or(i,t._key);throw new mn(jt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ka(t)}.`)}function iy(i,e){if(!Array.isArray(i)||0===i.length)throw new mn(jt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Gm(i,e){if(e.isInequality()){const c=kh(i),f=e.field;if(null!==c&&!c.isEqual(f))throw new mn(jt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${c.toString()}' and '${f.toString()}'`);const y=Gd(i);null!==y&&Tc(0,f,y)}const t=function(c,f){for(const y of c)for(const S of y.getFlattenedFilters())if(f.indexOf(S.op)>=0)return S.op;return null}(i.filters,function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new mn(jt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Tc(i,e,t){if(!t.isEqual(e))throw new mn(jt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class zm{convertValue(e,t="none"){switch(ze(e)){case 0:return null;case 1:return e.booleanValue;case 2:return to(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const c={};return ou(e,(f,y)=>{c[f]=this.convertValue(y,t)}),c}convertGeoPoint(e){return new Eg(to(e.latitude),to(e.longitude))}convertArray(e,t){return(e.values||[]).map(c=>this.convertValue(c,t))}convertServerTimestamp(e,t){switch(t){case"previous":const c=fa(e);return null==c?null:this.convertValue(c,t);case"estimate":return this.convertTimestamp(Pu(e));default:return null}}convertTimestamp(e){const t=ri(e);return new Ti(t.seconds,t.nanos)}convertDocumentKey(e,t){const c=pi.fromString(e);Ln(du(c));const f=new O(c.get(1),c.get(3)),y=new Yn(c.popFirst(5));return f.isEqual(t)||lo(`Document ${y} contains a document reference within a different database (${f.projectId}/${f.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),y}}function mp(i,e,t){let c;return c=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,c}class j0 extends zm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ss(this.firestore,null,t)}}class Po{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class td extends _f{constructor(e,t,c,f,y,S){super(e,t,c,f,S),this._firestore=e,this._firestoreImpl=e,this.metadata=y}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const c=this._document.data.field(ph("DocumentSnapshot.get",e));if(null!==c)return this._userDataWriter.convertValue(c,t.serverTimestamps)}}}class xg extends td{data(e={}){return super.data(e)}}class mh{constructor(e,t,c,f){this._firestore=e,this._userDataWriter=t,this._snapshot=f,this.metadata=new Po(f.hasPendingWrites,f.fromCache),this.query=c}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(c=>{e.call(t,new xg(this._firestore,this._userDataWriter,c.key,c,new Po(this._snapshot.mutatedKeys.has(c.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new mn(jt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(c,f){if(c._snapshot.oldDocs.isEmpty()){let y=0;return c._snapshot.docChanges.map(S=>({type:"added",doc:new xg(c._firestore,c._userDataWriter,S.doc.key,S.doc,new Po(c._snapshot.mutatedKeys.has(S.doc.key),c._snapshot.fromCache),c.query.converter),oldIndex:-1,newIndex:y++}))}{let y=c._snapshot.oldDocs;return c._snapshot.docChanges.filter(S=>f||3!==S.type).map(S=>{const L=new xg(c._firestore,c._userDataWriter,S.doc.key,S.doc,new Po(c._snapshot.mutatedKeys.has(S.doc.key),c._snapshot.fromCache),c.query.converter);let J=-1,ue=-1;return 0!==S.type&&(J=y.indexOf(S.doc.key),y=y.delete(S.doc.key)),1!==S.type&&(y=y.add(S.doc),ue=y.indexOf(S.doc.key)),{type:T_(S.type),doc:L,oldIndex:J,newIndex:ue}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function T_(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xn()}}function Dg(i,e){return i instanceof td&&e instanceof td?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof mh&&e instanceof mh&&i._firestore===e._firestore&&p_(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Nd extends zm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ss(this.firestore,null,t)}}function oy(i,e,t){i=br(i,Ss);const c=br(i.firestore,ws),f=mp(i.converter,e,t);return _p(c,[Fm(pf(c),"setDoc",i._key,f,null!==i.converter,t).toMutation(i._key,no.none())])}function T0(i,e,t,...c){i=br(i,Ss);const f=br(i.firestore,ws),y=pf(f);let S;return S="string"==typeof(e=(0,Y.m9)(e))||e instanceof Od?mf(y,"updateDoc",i._key,e,t,c):wl(y,"updateDoc",i._key,e),_p(f,[S.toMutation(i._key,no.exists(!0))])}function dl(i,...e){var t,c,f;i=(0,Y.m9)(i);let y={includeMetadataChanges:!1},S=0;"object"!=typeof e[S]||g_(e[S])||(y=e[S],S++);const L={includeMetadataChanges:y.includeMetadataChanges};if(g_(e[S])){const it=e[S];e[S]=null===(t=it.next)||void 0===t?void 0:t.bind(it),e[S+1]=null===(c=it.error)||void 0===c?void 0:c.bind(it),e[S+2]=null===(f=it.complete)||void 0===f?void 0:f.bind(it)}let J,ue,Me;if(i instanceof Ss)ue=br(i.firestore,ws),Me=ol(i._key.path),J={next:it=>{e[S]&&e[S](Il(ue,i,it))},error:e[S+1],complete:e[S+2]};else{const it=br(i,ro);ue=br(it.firestore,ws),Me=it._query;const Pt=new Nd(ue);J={next:Xt=>{e[S]&&e[S](new mh(ue,Pt,it,Xt))},error:e[S+1],complete:e[S+2]},Um(i._query)}return function(it,Pt,Xt,bn){const rr=new mg(bn),or=new Pv(Pt,rr,Xt);return it.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return Mv(yield kt(it),or)})),()=>{rr.Dc(),it.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return kv(yield kt(it),or)}))}}(Yo(ue),Me,L,J)}function _p(i,e){return function(t,c){const f=new Ao;return t.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return function s_(i,e,t){return Dm.apply(this,arguments)}(yield We(t),c,f)})),f.promise}(Yo(i),e)}function Il(i,e,t){const c=t.docs.get(e._key),f=new Nd(i);return new td(i,f,e._key,c,new Po(t.hasPendingWrites,t.fromCache),e.converter)}const ay={maxAttempts:5};class uy{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=pf(e)}set(e,t,c){this._verifyNotCommitted();const f=Ql(e,this._firestore),y=mp(f.converter,t,c),S=Fm(this._dataReader,"WriteBatch.set",f._key,y,null!==f.converter,c);return this._mutations.push(S.toMutation(f._key,no.none())),this}update(e,t,c,...f){this._verifyNotCommitted();const y=Ql(e,this._firestore);let S;return S="string"==typeof(t=(0,Y.m9)(t))||t instanceof Od?mf(this._dataReader,"WriteBatch.update",y._key,t,c,f):wl(this._dataReader,"WriteBatch.update",y._key,t),this._mutations.push(S.toMutation(y._key,no.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ql(e,this._firestore);return this._mutations=this._mutations.concat(new Uc(t._key,no.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new mn(jt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ql(i,e){if((i=(0,Y.m9)(i)).firestore!==e)throw new mn(jt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class w0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=pf(e)}get(e){const t=Ql(e,this._firestore),c=new j0(this._firestore);return this._transaction.lookup([t._key]).then(f=>{if(!f||1!==f.length)return Xn();const y=f[0];if(y.isFoundDocument())return new _f(this._firestore,c,y.key,y,t.converter);if(y.isNoDocument())return new _f(this._firestore,c,t._key,null,t.converter);throw Xn()})}set(e,t,c){const f=Ql(e,this._firestore),y=mp(f.converter,t,c),S=Fm(this._dataReader,"Transaction.set",f._key,y,null!==f.converter,c);return this._transaction.set(f._key,S),this}update(e,t,c,...f){const y=Ql(e,this._firestore);let S;return S="string"==typeof(t=(0,Y.m9)(t))||t instanceof Od?mf(this._dataReader,"Transaction.update",y._key,t,c,f):wl(this._dataReader,"Transaction.update",y._key,t),this._transaction.update(y._key,S),this}delete(e){const t=Ql(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ql(e,this._firestore),c=new Nd(this._firestore);return super.get(e).then(f=>new td(this._firestore,c,t._key,f._document,new Po(!1,!1),t.converter))}}function Zm(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new mn("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function fy(){if(typeof Uint8Array>"u")throw new mn("unimplemented","Uint8Arrays are not available in this environment.")}function py(){if(!function Mu(){return typeof atob<"u"}())throw new mn("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){eo=Ct.SDK_VERSION,(0,Ct._registerComponent)(new bt.wA("firestore",(t,{instanceIdentifier:c,options:f})=>{const y=t.getProvider("app").getImmediate(),S=new ws(new fl(t.getProvider("auth-internal")),new rd(t.getProvider("app-check-internal")),function(L,J){if(!Object.prototype.hasOwnProperty.apply(L.options,["projectId"]))throw new mn(jt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new O(L.options.projectId,J)}(y,c),y);return f=Object.assign({useFetchStreams:e},f),S._setSettings(f),S},"PUBLIC").setMultipleInstances(!0)),(0,Ct.registerVersion)(nd,"3.12.0",i),(0,Ct.registerVersion)(nd,"3.12.0","esm2017")}();class Tp{constructor(e){this._delegate=e}static fromBase64String(e){return py(),new Tp(Jc.fromBase64String(e))}static fromUint8Array(e){return fy(),new Tp(Jc.fromUint8Array(e))}toBase64(){return py(),this._delegate.toBase64()}toUint8Array(){return fy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ep(i){return function kg(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const c of e)if(c in t&&"function"==typeof t[c])return!0;return!1}(i,["next","error","complete"])}class C0{enableIndexedDbPersistence(e,t){return function m_(i,e){bg(i=br(i,ws));const t=Yo(i);if(t._uninitializedComponentsProvider)throw new mn(jt.FAILED_PRECONDITION,"SDK cache is already specified.");ys("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const c=i._freezeSettings(),f=new lh;return _g(t,f,new gg(f,c.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function hf(i){bg(i=br(i,ws));const e=Yo(i);if(e._uninitializedComponentsProvider)throw new mn(jt.FAILED_PRECONDITION,"SDK cache is already specified.");ys("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings(),c=new lh;return _g(e,c,new Zv(c,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Xv(i){if(i._initialized&&!i._terminated)throw new mn(jt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ao;return i._queue.enqueueAndForgetEvenWhileRestricted((0,re.Z)(function*(){try{yield(t=(0,re.Z)(function*(c){if(!da.D())return Promise.resolve();const f=c+"main";yield da.delete(f)}),function(c){return t.apply(this,arguments)})(gv(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class gy{constructor(e,t,c){this._delegate=t,this._persistenceProvider=c,this.INTERNAL={delete:()=>this.terminate()},e instanceof O||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ys("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,c={}){!function Xc(i,e,t,c={}){var f;const y=(i=br(i,cl))._getSettings();if("firestore.googleapis.com"!==y.host&&y.host!==e&&ys("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},y),{host:`${e}:${t}`,ssl:!1})),c.mockUserToken){let S,L;if("string"==typeof c.mockUserToken)S=c.mockUserToken,L=Ws.MOCK_USER;else{S=(0,Y.Sg)(c.mockUserToken,null===(f=i._app)||void 0===f?void 0:f.options.projectId);const J=c.mockUserToken.sub||c.mockUserToken.user_id;if(!J)throw new mn(jt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");L=new Ws(J)}i._authCredentials=new xc(new Pl(S,L))}}(this._delegate,e,t,c)}enableNetwork(){return function Jv(i){return function jn(i){return i.asyncQueue.enqueue((0,re.Z)(function*(){const e=yield Q(i),t=yield je(i);return e.setNetworkEnabled(!0),function(c){const f=Bn(c);return f.vu.delete(0),Qu(f)}(t)}))}(Yo(i=br(i,ws)))}(this._delegate)}disableNetwork(){return function v_(i){return function Zt(i){return i.asyncQueue.enqueue((0,re.Z)(function*(){const e=yield Q(i),t=yield je(i);return e.setNetworkEnabled(!1),(c=(0,re.Z)(function*(f){const y=Bn(f);y.vu.add(0),yield Ga(y),y.bu.set("Offline")}),function(f){return c.apply(this,arguments)})(t);var c}))}(Yo(i=br(i,ws)))}(this._delegate)}enablePersistence(e){let t=!1,c=!1;return e&&(t=!!e.synchronizeTabs,c=!!e.experimentalForceOwningTab,co("synchronizeTabs",t,"experimentalForceOwningTab",c)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,c)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ch(i){return function(e){const t=new Ao;return e.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return function s0(i,e){return Fv.apply(this,arguments)}(yield We(e),t)})),t.promise}(Yo(i=br(i,ws)))}(this._delegate)}onSnapshotsInSync(e){return function Cf(i,e){return function Dn(i,e){const t=new mg(e);return i.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return c=yield kt(i),f=t,Bn(c).ku.add(f),void f.next();var c,f})),()=>{t.Dc(),i.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return c=yield kt(i),f=t,void Bn(c).ku.delete(f);var c,f}))}}(Yo(i=br(i,ws)),g_(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new mn("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Fd(this,dp(this._delegate,e))}catch(t){throw ju(t,"collection()","Firestore.collection()")}}doc(e){try{return new Dl(this,Rm(this._delegate,e))}catch(t){throw ju(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new el(this,function vg(i,e){if(i=br(i,cl),Es("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new mn(jt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ro(i,null,(t=e,new vl(pi.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ju(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function ly(i,e,t){i=br(i,ws);const c=Object.assign(Object.assign({},ay),t);return function(f){if(f.maxAttempts<1)throw new mn(jt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(c),function(f,y,S){const L=new Ao;return f.asyncQueue.enqueueAndForget((0,re.Z)(function*(){const J=yield function $e(i){return j(i).then(e=>e.datastore)}(f);new u(f.asyncQueue,J,S,y,L).run()})),L.promise}(Yo(i),f=>e(new w0(i,f)),c)}(this._delegate,t=>e(new my(this,t)))}batch(){return Yo(this._delegate),new vy(new uy(this._delegate,e=>_p(this._delegate,e)))}loadBundle(e){return function y_(i,e){const t=Yo(i=br(i,ws)),c=new d0;return function hn(i,e,t,c){const f=function(y,S){let L;return L="string"==typeof y?ra().encode(y):y,J=function(J,ue){if(J instanceof Uint8Array)return Yv(J,void 0);if(J instanceof ArrayBuffer)return Yv(new Uint8Array(J),void 0);if(J instanceof ReadableStream)return J.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(L),new f_(J,S);var J}(t,rp(e));i.asyncQueue.enqueueAndForget((0,re.Z)(function*(){!function u0(i,e,t){const c=Bn(i);var f;(f=(0,re.Z)(function*(y,S,L){try{const J=yield S.getMetadata();if(yield function(Pt,Xt){const bn=Bn(Pt),rr=Bt(Xt.createTime);return bn.persistence.runTransaction("hasNewerBundle","readonly",or=>bn.qs.getBundleMetadata(or,Xt.id)).then(or=>!!or&&or.createTime.compareTo(rr)>=0)}(y.localStore,J))return yield S.close(),L._completeWith({taskState:"Success",documentsLoaded:(Pt=J).totalDocuments,bytesLoaded:Pt.totalBytes,totalDocuments:Pt.totalDocuments,totalBytes:Pt.totalBytes}),Promise.resolve(new Set);L._updateProgress(Ov(J));const ue=new t_(J,y.localStore,S.serializer);let Me=yield S.bc();for(;Me;){const Pt=yield ue.zu(Me);Pt&&L._updateProgress(Pt),Me=yield S.bc()}const it=yield ue.complete();return yield Kl(y,it.Ju,void 0),yield function(Pt,Xt){const bn=Bn(Pt);return bn.persistence.runTransaction("Save bundle","readwrite",rr=>bn.qs.saveBundleMetadata(rr,Xt))}(y.localStore,J),L._completeWith(it.progress),Promise.resolve(it.Hu)}catch(J){return ys("SyncEngine",`Loading bundle failed with ${J}`),L._failWith(J),Promise.resolve(new Set)}var Pt}),function(y,S,L){return f.apply(this,arguments)})(c,e,t).then(f=>{c.sharedClientState.notifyBundleLoaded(f)})}(yield We(i),f,c)}))}(t,i._databaseId,e,c),c}(this._delegate,e)}namedQuery(e){return function gs(i,e){return function Cr(i,e){return i.asyncQueue.enqueue((0,re.Z)(function*(){return function(t,c){const f=Bn(t);return f.persistence.runTransaction("Get named query","readonly",y=>f.qs.getNamedQuery(y,c))}(yield Se(i),e)}))}(Yo(i=br(i,ws)),e).then(t=>t?new ro(i,null,t.query):null)}(this._delegate,e).then(t=>t?new el(this,t):null)}}class Pg extends zm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tp(new Jc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Dl.forKey(t,this.firestore,null)}}class my{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Pg(e)}get(e){const t=yh(e);return this._delegate.get(t).then(c=>new Ng(this._firestore,new td(this._firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,t.converter)))}set(e,t,c){const f=yh(e);return c?(Zm("Transaction.set",c),this._delegate.set(f,t,c)):this._delegate.set(f,t),this}update(e,t,c,...f){const y=yh(e);return 2===arguments.length?this._delegate.update(y,t):this._delegate.update(y,t,c,...f),this}delete(e){const t=yh(e);return this._delegate.delete(t),this}}class vy{constructor(e){this._delegate=e}set(e,t,c){const f=yh(e);return c?(Zm("WriteBatch.set",c),this._delegate.set(f,t,c)):this._delegate.set(f,t),this}update(e,t,c,...f){const y=yh(e);return 2===arguments.length?this._delegate.update(y,t):this._delegate.update(y,t,c,...f),this}delete(e){const t=yh(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ld{constructor(e,t,c){this._firestore=e,this._userDataWriter=t,this._delegate=c}fromFirestore(e,t){const c=new xg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Lg(this._firestore,c),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const c=Ld.INSTANCES;let f=c.get(e);f||(f=new WeakMap,c.set(e,f));let y=f.get(t);return y||(y=new Ld(e,new Pg(e),t),f.set(t,y)),y}}Ld.INSTANCES=new WeakMap;class Dl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Pg(e)}static forPath(e,t,c){if(e.length%2!=0)throw new mn("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Dl(t,new Ss(t._delegate,c,new Yn(e)))}static forKey(e,t,c){return new Dl(t,new Ss(t._delegate,c,e))}get id(){return this._delegate.id}get parent(){return new Fd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Fd(this.firestore,dp(this._delegate,e))}catch(t){throw ju(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Y.m9)(e))instanceof Ss&&Qv(this._delegate,e)}set(e,t){t=Zm("DocumentReference.set",t);try{return t?oy(this._delegate,e,t):oy(this._delegate,e)}catch(c){throw ju(c,"setDoc()","DocumentReference.set()")}}update(e,t,...c){try{return 1===arguments.length?T0(this._delegate,e):T0(this._delegate,e,t,...c)}catch(f){throw ju(f,"updateDoc()","DocumentReference.update()")}}delete(){return function yp(i){return _p(br(i.firestore,ws),[new Uc(i._key,no.none())])}(this._delegate)}onSnapshot(...e){const t=Og(e),c=Rg(e,f=>new Ng(this.firestore,new td(this.firestore._delegate,this._userDataWriter,f._key,f._document,f.metadata,this._delegate.converter)));return dl(this._delegate,t,c)}get(e){let t;return t="cache"===e?.source?function vp(i){i=br(i,Ss);const e=br(i.firestore,ws),t=Yo(e),c=new Nd(e);return function rn(i,e){const t=new Ao;return i.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return(c=(0,re.Z)(function*(f,y,S){try{const L=yield function(J,ue){const Me=Bn(J);return Me.persistence.runTransaction("read document","readonly",it=>Me.localDocuments.getDocument(it,ue))}(f,y);L.isFoundDocument()?S.resolve(L):L.isNoDocument()?S.resolve(null):S.reject(new mn(jt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(L){const J=op(L,`Failed to get document '${y} from cache`);S.reject(J)}}),function(f,y,S){return c.apply(this,arguments)})(yield Se(i),e,t);var c})),t.promise}(t,i._key).then(f=>new td(e,c,i._key,f,new Po(null!==f&&f.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function sy(i){i=br(i,Ss);const e=br(i.firestore,ws);return xn(Yo(e),i._key,{source:"server"}).then(t=>Il(e,i,t))}(this._delegate):function Ag(i){i=br(i,Ss);const e=br(i.firestore,ws);return xn(Yo(e),i._key).then(t=>Il(e,i,t))}(this._delegate),t.then(c=>new Ng(this.firestore,new td(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)))}withConverter(e){return new Dl(this.firestore,this._delegate.withConverter(e?Ld.getInstance(this.firestore,e):null))}}function ju(i,e,t){return i.message=i.message.replace(e,t),i}function Og(i){for(const e of i)if("object"==typeof e&&!Ep(e))return e;return{}}function Rg(i,e){var t,c;let f;return f=Ep(i[0])?i[0]:Ep(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:y=>{f.next&&f.next(e(y))},error:null===(t=f.error)||void 0===t?void 0:t.bind(f),complete:null===(c=f.complete)||void 0===c?void 0:c.bind(f)}}class Ng{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Dl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Dg(this._delegate,e._delegate)}}class Lg extends Ng{data(e){const t=this._delegate.data(e);return function wa(i,e){i||Xn()}(void 0!==t),t}}class el{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Pg(e)}where(e,t,c){try{return new el(this.firestore,Yl(this._delegate,function Cg(i,e,t){const c=e,f=ph("where",i);return pp._create(f,c,t)}(e,t,c)))}catch(f){throw ju(f,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new el(this.firestore,Yl(this._delegate,function gp(i,e="asc"){const t=e,c=ph("orderBy",i);return Hm._create(c,t)}(e,t)))}catch(c){throw ju(c,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new el(this.firestore,Yl(this._delegate,function Ig(i){return cp("limit",i),Rd._create("limit",i,"F")}(e)))}catch(t){throw ju(t,"limit()","Query.limit()")}}limitToLast(e){try{return new el(this.firestore,Yl(this._delegate,function Ef(i){return cp("limitToLast",i),Rd._create("limitToLast",i,"L")}(e)))}catch(t){throw ju(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new el(this.firestore,Yl(this._delegate,function ny(...i){return Sf._create("startAt",i,!0)}(...e)))}catch(t){throw ju(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new el(this.firestore,Yl(this._delegate,function $m(...i){return Sf._create("startAfter",i,!1)}(...e)))}catch(t){throw ju(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new el(this.firestore,Yl(this._delegate,function __(...i){return Cl._create("endBefore",i,!1)}(...e)))}catch(t){throw ju(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new el(this.firestore,Yl(this._delegate,function wf(...i){return Cl._create("endAt",i,!0)}(...e)))}catch(t){throw ju(t,"endAt()","Query.endAt()")}}isEqual(e){return p_(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Wm(i){i=br(i,ro);const e=br(i.firestore,ws),t=Yo(e),c=new Nd(e);return function ln(i,e){const t=new Ao;return i.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return(c=(0,re.Z)(function*(f,y,S){try{const L=yield Jp(f,y,!0),J=new r_(y,L.ir),ue=J.sc(L.documents),Me=J.applyChanges(ue,!1);S.resolve(Me.snapshot)}catch(L){const J=op(L,`Failed to execute query '${y} against cache`);S.reject(J)}}),function(f,y,S){return c.apply(this,arguments)})(yield Se(i),e,t);var c})),t.promise}(t,i._query).then(f=>new mh(e,c,i,f))}(this._delegate):"server"===e?.source?function b0(i){i=br(i,ro);const e=br(i.firestore,ws),t=Yo(e),c=new Nd(e);return sn(t,i._query,{source:"server"}).then(f=>new mh(e,c,i,f))}(this._delegate):function _0(i){i=br(i,ro);const e=br(i.firestore,ws),t=Yo(e),c=new Nd(e);return Um(i._query),sn(t,i._query).then(f=>new mh(e,c,i,f))}(this._delegate),t.then(c=>new yy(this.firestore,new mh(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)))}onSnapshot(...e){const t=Og(e),c=Rg(e,f=>new yy(this.firestore,new mh(this.firestore._delegate,this._userDataWriter,this._delegate,f._snapshot)));return dl(this._delegate,t,c)}withConverter(e){return new el(this.firestore,this._delegate.withConverter(e?Ld.getInstance(this.firestore,e):null))}}class I0{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Lg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yy{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new el(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Lg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new I0(this._firestore,t))}forEach(e,t){this._delegate.forEach(c=>{e.call(t,new Lg(this._firestore,c))})}isEqual(e){return Dg(this._delegate,e._delegate)}}class Fd extends el{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Dl(this.firestore,e):null}doc(e){try{return new Dl(this.firestore,void 0===e?Rm(this._delegate):Rm(this._delegate,e))}catch(t){throw ju(t,"doc()","CollectionReference.doc()")}}add(e){return function vh(i,e){const t=br(i.firestore,ws),c=Rm(i),f=mp(i.converter,e);return _p(t,[Fm(pf(i.firestore),"addDoc",c._key,f,null!==i.converter,{}).toMutation(c._key,no.exists(!1))]).then(()=>c)}(this._delegate,e).then(t=>new Dl(this.firestore,t))}isEqual(e){return Qv(this._delegate,e._delegate)}withConverter(e){return new Fd(this.firestore,this._delegate.withConverter(e?Ld.getInstance(this.firestore,e):null))}}function yh(i){return br(i,Ss)}class Ym{constructor(...e){this._delegate=new Od(...e)}static documentId(){return new Ym(Ps.keyField().canonicalString())}isEqual(e){return(e=(0,Y.m9)(e))instanceof Od&&this._delegate._internalPath.isEqual(e._internalPath)}}class Al{constructor(e){this._delegate=e}static serverTimestamp(){const e=function cy(){return new Eu("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Al(e)}static delete(){const e=function I_(){return new hp("deleteField")}();return e._methodName="FieldValue.delete",new Al(e)}static arrayUnion(...e){const t=function x_(...i){return new m0("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Al(t)}static arrayRemove(...e){const t=function Mg(...i){return new jm("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Al(t)}static increment(e){const t=function If(i){return new gf("increment",i)}(e);return t._methodName="FieldValue.increment",new Al(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Bs={Firestore:gy,GeoPoint:Eg,Timestamp:Ti,Blob:Tp,Transaction:my,WriteBatch:vy,DocumentReference:Dl,DocumentSnapshot:Ng,Query:el,QueryDocumentSnapshot:Lg,QuerySnapshot:yy,CollectionReference:Fd,FieldPath:Ym,FieldValue:Al,setLogLevel:function k_(i){!function ru(i){nu.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Uu(i){(function _h(i,e){i.INTERNAL.registerComponent(new bt.wA("firestore-compat",t=>{const c=t.getProvider("app-compat").getImmediate(),f=t.getProvider("firestore").getImmediate();return e(c,f)},"PUBLIC").setServiceProps(Object.assign({},Bs)))})(i,(e,t)=>new gy(e,t,new C0)),i.registerVersion("@firebase/firestore-compat","0.3.9")}(ge.Z);var gu=X(4941),P_=X(6217),_y=X(9260);function bh(i,e){return function O_(i,e=N.z){return new fe.y(t=>{let c;return null!=e?e.schedule(()=>{c=i.onSnapshot({includeMetadataChanges:!0},t)}):c=i.onSnapshot({includeMetadataChanges:!0},t),()=>{c?.()}})}(i,e)}function by(i,e){return bh(i,e).pipe((0,Fe.U)(t=>({payload:t,type:"query"})))}function jd(i,e){return by(i,e).pipe((0,He.O)(void 0),Ue(),(0,Fe.U)(([t,c])=>{const f=c.payload.docChanges(),y=f.map(S=>({type:S.type,payload:S}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(c.payload.metadata)&&c.payload.docs.forEach((S,L)=>{const J=f.find(Me=>Me.doc.ref.isEqual(S.ref)),ue=t?.payload.docs.find(Me=>Me.ref.isEqual(S.ref));J&&JSON.stringify(J.doc.metadata)===JSON.stringify(S.metadata)||!J&&ue&&JSON.stringify(ue.metadata)===JSON.stringify(S.metadata)||y.push({type:"modified",payload:{oldIndex:L,newIndex:L,type:"modified",doc:S}})}),y}))}function D0(i,e,t){return jd(i,t).pipe((0,rt.R)((c,f)=>function Ty(i,e,t){return e.forEach(c=>{t.indexOf(c.type)>-1&&(i=function we(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Ey(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Ey(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Ey(i,e.oldIndex,1)}return i}(i,c))}),i}(c,f.map(y=>y.payload),e),[]),function ce(i,e){return t=>t.lift(new wt(i,e))}(),(0,Fe.U)(c=>c.map(f=>({type:f.type,payload:f}))))}function Ey(i,e,t,...c){const f=i.slice();return f.splice(e,t,...c),f}function M(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class U{constructor(e,t,c){this.ref=e,this.query=t,this.afs=c}stateChanges(e){let t=jd(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Fe.U)(c=>c.filter(f=>e.indexOf(f.type)>-1)))),t.pipe((0,He.O)(void 0),Ue(),(0,Ke.h)(([c,f])=>f.length>0||!c),(0,Fe.U)(([c,f])=>f),xe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,rt.R)((t,c)=>[...t,...c],[]))}snapshotChanges(e){const t=M(e);return D0(this.query,t,this.afs.schedulers.outsideAngular).pipe(xe.iC)}valueChanges(e={}){return by(this.query,this.afs.schedulers.outsideAngular).pipe((0,Fe.U)(t=>t.payload.docs.map(c=>e.idField?Object.assign(Object.assign({},c.data()),{[e.idField]:c.id}):c.data())),xe.iC)}get(e){return(0,Be.D)(this.query.get(e)).pipe(xe.iC)}add(e){return this.ref.add(e)}doc(e){return new R(this.ref.doc(e),this.afs)}}class R{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const c=this.ref.collection(e),{ref:f,query:y}=pt(c,t);return new U(f,y,this.afs)}snapshotChanges(){return function x0(i,e){return bh(i,e).pipe((0,He.O)(void 0),Ue(),(0,Fe.U)(([t,c])=>c.exists?t?.exists?{payload:c,type:"modified"}:{payload:c,type:"added"}:{payload:c,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(xe.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Fe.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Be.D)(this.ref.get(e)).pipe(xe.iC)}}class ${constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?jd(this.query,this.afs.schedulers.outsideAngular).pipe((0,Fe.U)(t=>t.filter(c=>e.indexOf(c.type)>-1)),(0,Ke.h)(t=>t.length>0),xe.iC):jd(this.query,this.afs.schedulers.outsideAngular).pipe(xe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,rt.R)((t,c)=>[...t,...c],[]))}snapshotChanges(e){const t=M(e);return D0(this.query,t,this.afs.schedulers.outsideAngular).pipe(xe.iC)}valueChanges(e={}){return by(this.query,this.afs.schedulers.outsideAngular).pipe((0,Fe.U)(c=>c.payload.docs.map(f=>e.idField?Object.assign({[e.idField]:f.id},f.data()):f.data())),xe.iC)}get(e){return(0,Be.D)(this.query.get(e)).pipe(xe.iC)}}const ie=new E.OlP("angularfire2.enableFirestorePersistence"),de=new E.OlP("angularfire2.firestore.persistenceSettings"),Ve=new E.OlP("angularfire2.firestore.settings"),nt=new E.OlP("angularfire2.firestore.use-emulator");function pt(i,e=(t=>t)){return{query:e(i),ref:i}}let at=(()=>{class i{constructor(t,c,f,y,S,L,J,ue,Me,it,Pt,Xt,bn,rr,or,Di,ls){this.schedulers=J;const ki=(0,Ze.on)(t,L,c),Ro=Me;it&&(0,gu.nw)(ki,L,Pt,bn,rr,or,Xt,Di),[this.firestore,this.persistenceEnabled$]=(0,Ze.cc)(`${ki.name}.firestore`,"AngularFirestore",ki.name,()=>{const io=L.runOutsideAngular(()=>ki.firestore());if(y&&io.settings(y),Ro&&io.useEmulator(...Ro),f&&!(0,lt.PM)(S)){const No=()=>{try{return(0,Be.D)(io.enablePersistence(ue||void 0).then(()=>!0,()=>!1))}catch(hl){return typeof console<"u"&&console.warn(hl),(0,_e.of)(!1)}};return[io,L.runOutsideAngular(No)]}return[io,(0,_e.of)(!1)]},[y,Ro,f])}collection(t,c){let f;f="string"==typeof t?this.firestore.collection(t):t;const{ref:y,query:S}=pt(f,c),L=this.schedulers.ngZone.run(()=>y);return new U(L,S,this)}collectionGroup(t,c){const f=c||(S=>S),y=this.firestore.collectionGroup(t);return new $(f(y),this)}doc(t){let c;c="string"==typeof t?this.firestore.doc(t):t;const f=this.schedulers.ngZone.run(()=>c);return new R(f,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(E.LFG(Ze.Dh),E.LFG(Ze.xv,8),E.LFG(ie,8),E.LFG(Ve,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(xe.HU),E.LFG(de,8),E.LFG(nt,8),E.LFG(gu.zQ,8),E.LFG(gu.Qv,8),E.LFG(gu.L6,8),E.LFG(gu._Q,8),E.LFG(gu.rT,8),E.LFG(gu.lh,8),E.LFG(gu.f7,8),E.LFG(P_.nm,8))},i.\u0275prov=E.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),mt=(()=>{class i{constructor(){_y.Z.registerVersion("angularfire",xe.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:ie,useValue:!0},{provide:de,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=E.oAB({type:i}),i.\u0275inj=E.cJS({providers:[at]}),i})()},3884:(en,ut,X)=>{"use strict";X.d(ut,{Q1:()=>ke,TE:()=>fs});var E=X(6498),N=X(1086),fe=X(5254),Be=X(3489),_e=X(353);class He{constructor(ee,Ne){this.dueTime=ee,this.scheduler=Ne}call(ee,Ne){return Ne.subscribe(new Re(ee,this.dueTime,this.scheduler))}}class Re extends Be.L{constructor(ee,Ne,et){super(ee),this.dueTime=Ne,this.scheduler=et,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(ee){this.clearDebounce(),this.lastValue=ee,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Ue,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:ee}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(ee)}}clearDebounce(){const ee=this.debouncedSubscription;null!==ee&&(this.remove(ee),ee.unsubscribe(),this.debouncedSubscription=null)}}function Ue(oe){oe.debouncedNext()}var ye=X(4850),Ae=X(7545),Fe=X(8405),rt=X(6547),ce=X(2011),wt=X(3942),Ye=X(5861),Ke=X(6881),Ze=X(2090),lt=X(4859);const q="firebasestorage.googleapis.com",ge="storageBucket";class st extends Ze.ZR{constructor(ee,Ne,et=0){super(Te(ee),`Firebase Storage: ${Ne} (${Te(ee)})`),this.status_=et,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,st.prototype)}get status(){return this.status_}set status(ee){this.status_=ee}_codeEquals(ee){return Te(ee)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(ee){this.customData.serverResponse=ee,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Y=(()=>((Y=Y||{}).UNKNOWN="unknown",Y.OBJECT_NOT_FOUND="object-not-found",Y.BUCKET_NOT_FOUND="bucket-not-found",Y.PROJECT_NOT_FOUND="project-not-found",Y.QUOTA_EXCEEDED="quota-exceeded",Y.UNAUTHENTICATED="unauthenticated",Y.UNAUTHORIZED="unauthorized",Y.UNAUTHORIZED_APP="unauthorized-app",Y.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",Y.INVALID_CHECKSUM="invalid-checksum",Y.CANCELED="canceled",Y.INVALID_EVENT_NAME="invalid-event-name",Y.INVALID_URL="invalid-url",Y.INVALID_DEFAULT_BUCKET="invalid-default-bucket",Y.NO_DEFAULT_BUCKET="no-default-bucket",Y.CANNOT_SLICE_BLOB="cannot-slice-blob",Y.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",Y.NO_DOWNLOAD_URL="no-download-url",Y.INVALID_ARGUMENT="invalid-argument",Y.INVALID_ARGUMENT_COUNT="invalid-argument-count",Y.APP_DELETED="app-deleted",Y.INVALID_ROOT_OPERATION="invalid-root-operation",Y.INVALID_FORMAT="invalid-format",Y.INTERNAL_ERROR="internal-error",Y.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Y))();function Te(oe){return"storage/"+oe}function Xe(){return new st(Y.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Yt(){return new st(Y.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vn(){return new st(Y.CANCELED,"User canceled the upload/download.")}function qt(){return new st(Y.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Nn(oe){return new st(Y.INVALID_ARGUMENT,oe)}function Cn(){return new st(Y.APP_DELETED,"The Firebase app was deleted.")}function pr(oe){return new st(Y.INVALID_ROOT_OPERATION,"The operation '"+oe+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function xr(oe,ee){return new st(Y.INVALID_FORMAT,"String does not match format '"+oe+"': "+ee)}function kr(oe){throw new st(Y.INTERNAL_ERROR,"Internal error: "+oe)}class On{constructor(ee,Ne){this.bucket=ee,this.path_=Ne}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const ee=encodeURIComponent;return"/b/"+ee(this.bucket)+"/o/"+ee(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(ee,Ne){let et;try{et=On.makeFromUrl(ee,Ne)}catch{return new On(ee,"")}if(""===et.path)return et;throw function Ut(oe){return new st(Y.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+oe+"'.")}(ee)}static makeFromUrl(ee,Ne){let et=null;const dt="([A-Za-z0-9.\\-_]+)",tr=new RegExp("^gs://"+dt+"(/(.*))?$","i");function Pr(Ki){Ki.path_=decodeURIComponent(Ki.path)}const Ui=Ne.replace(/[.]/g,"\\."),rs=[{regex:tr,indices:{bucket:1,path:3},postModify:function Nt(Ki){"/"===Ki.path.charAt(Ki.path.length-1)&&(Ki.path_=Ki.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Ui}/v[A-Za-z0-9_]+/b/${dt}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Pr},{regex:new RegExp(`^https?://${Ne===q?"(?:storage.googleapis.com|storage.cloud.google.com)":Ne}/${dt}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Pr}];for(let Ki=0;Ki<rs.length;Ki++){const uo=rs[Ki],la=uo.regex.exec(ee);if(la){let Vi=la[uo.indices.path];Vi||(Vi=""),et=new On(la[uo.indices.bucket],Vi),uo.postModify(et);break}}if(null==et)throw function an(oe){return new st(Y.INVALID_URL,"Invalid URL '"+oe+"'.")}(ee);return et}}class Ai{constructor(ee){this.promise_=Promise.reject(ee)}getPromise(){return this.promise_}cancel(ee=!1){}}function oi(oe){return"string"==typeof oe||oe instanceof String}function _r(oe){return Ht()&&oe instanceof Blob}function Ht(){return typeof Blob<"u"&&!(0,Ze.UG)()}function sr(oe,ee,Ne,et){if(et<ee)throw Nn(`Invalid value for '${oe}'. Expected ${ee} or greater.`);if(et>Ne)throw Nn(`Invalid value for '${oe}'. Expected ${Ne} or less.`)}function Hn(oe,ee,Ne){let et=ee;return null==Ne&&(et=`https://${ee}`),`${Ne}://${et}/v0${oe}`}function tn(oe){const ee=encodeURIComponent;let Ne="?";for(const et in oe)oe.hasOwnProperty(et)&&(Ne=Ne+(ee(et)+"=")+ee(oe[et])+"&");return Ne=Ne.slice(0,-1),Ne}var Rn=(()=>((Rn=Rn||{})[Rn.NO_ERROR=0]="NO_ERROR",Rn[Rn.NETWORK_ERROR=1]="NETWORK_ERROR",Rn[Rn.ABORT=2]="ABORT",Rn))();function Ei(oe,ee){const Ne=oe>=500&&oe<600,dt=-1!==[408,429].indexOf(oe),Nt=-1!==ee.indexOf(oe);return Ne||dt||Nt}class ai{constructor(ee,Ne,et,dt,Nt,Qt,tr,dr,Pr,Mr,Ui,Gr=!0){this.url_=ee,this.method_=Ne,this.headers_=et,this.body_=dt,this.successCodes_=Nt,this.additionalRetryCodes_=Qt,this.callback_=tr,this.errorCallback_=dr,this.timeout_=Pr,this.progressCallback_=Mr,this.connectionFactory_=Ui,this.retry=Gr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((ui,ns)=>{this.resolve_=ui,this.reject_=ns,this.start_()})}start_(){const Ne=(et,dt)=>{const Nt=this.resolve_,Qt=this.reject_,tr=dt.connection;if(dt.wasSuccessCode)try{const dr=this.callback_(tr,tr.getResponse());!function Rr(oe){return void 0!==oe}(dr)?Nt():Nt(dr)}catch(dr){Qt(dr)}else if(null!==tr){const dr=Xe();dr.serverResponse=tr.getErrorText(),Qt(this.errorCallback_?this.errorCallback_(tr,dr):dr)}else Qt(dt.canceled?this.appDelete_?Cn():vn():Yt())};this.canceled_?Ne(0,new Oi(!1,null,!0)):this.backoffId_=function In(oe,ee,Ne){let et=1,dt=null,Nt=null,Qt=!1,tr=0;function dr(){return 2===tr}let Pr=!1;function Mr(...Jr){Pr||(Pr=!0,ee.apply(null,Jr))}function Ui(Jr){dt=setTimeout(()=>{dt=null,oe(ui,dr())},Jr)}function Gr(){Nt&&clearTimeout(Nt)}function ui(Jr,...Ms){if(Pr)return void Gr();if(Jr)return Gr(),void Mr.call(null,Jr,...Ms);if(dr()||Qt)return Gr(),void Mr.call(null,Jr,...Ms);let rs;et<64&&(et*=2),1===tr?(tr=2,rs=0):rs=1e3*(et+Math.random()),Ui(rs)}let ns=!1;function qi(Jr){ns||(ns=!0,Gr(),!Pr&&(null!==dt?(Jr||(tr=2),clearTimeout(dt),Ui(0)):Jr||(tr=1)))}return Ui(0),Nt=setTimeout(()=>{Qt=!0,qi(!0)},Ne),qi}((et,dt)=>{if(dt)return void et(!1,new Oi(!1,null,!0));const Nt=this.connectionFactory_();this.pendingConnection_=Nt;const Qt=tr=>{null!==this.progressCallback_&&this.progressCallback_(tr.loaded,tr.lengthComputable?tr.total:-1)};null!==this.progressCallback_&&Nt.addUploadProgressListener(Qt),Nt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Nt.removeUploadProgressListener(Qt),this.pendingConnection_=null;const tr=Nt.getErrorCode()===Rn.NO_ERROR,dr=Nt.getStatus();if(!tr||Ei(dr,this.additionalRetryCodes_)&&this.retry){const Mr=Nt.getErrorCode()===Rn.ABORT;return void et(!1,new Oi(!1,null,Mr))}const Pr=-1!==this.successCodes_.indexOf(dr);et(!0,new Oi(Pr,Nt))})},Ne,this.timeout_)}getPromise(){return this.promise_}cancel(ee){this.canceled_=!0,this.appDelete_=ee||!1,null!==this.backoffId_&&function Tr(oe){oe(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Oi{constructor(ee,Ne,et){this.wasSuccessCode=ee,this.connection=Ne,this.canceled=!!et}}function Vr(...oe){const ee=function Tn(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==ee){const Ne=new ee;for(let et=0;et<oe.length;et++)Ne.append(oe[et]);return Ne.getBlob()}if(Ht())return new Blob(oe);throw new st(Y.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Hr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Mn{constructor(ee,Ne){this.data=ee,this.contentType=Ne||null}}function $i(oe,ee){switch(oe){case Hr.RAW:return new Mn(Zi(ee));case Hr.BASE64:case Hr.BASE64URL:return new Mn(ni(oe,ee));case Hr.DATA_URL:return new Mn(function Zr(oe){const ee=new ds(oe);return ee.base64?ni(Hr.BASE64,ee.rest):function Ar(oe){let ee;try{ee=decodeURIComponent(oe)}catch{throw xr(Hr.DATA_URL,"Malformed data URL.")}return Zi(ee)}(ee.rest)}(ee),function Vs(oe){return new ds(oe).contentType}(ee))}throw Xe()}function Zi(oe){const ee=[];for(let Ne=0;Ne<oe.length;Ne++){let et=oe.charCodeAt(Ne);et<=127?ee.push(et):et<=2047?ee.push(192|et>>6,128|63&et):55296==(64512&et)?Ne<oe.length-1&&56320==(64512&oe.charCodeAt(Ne+1))?(et=65536|(1023&et)<<10|1023&oe.charCodeAt(++Ne),ee.push(240|et>>18,128|et>>12&63,128|et>>6&63,128|63&et)):ee.push(239,191,189):56320==(64512&et)?ee.push(239,191,189):ee.push(224|et>>12,128|et>>6&63,128|63&et)}return new Uint8Array(ee)}function ni(oe,ee){switch(oe){case Hr.BASE64:{const dt=-1!==ee.indexOf("-"),Nt=-1!==ee.indexOf("_");if(dt||Nt)throw xr(oe,"Invalid character '"+(dt?"-":"_")+"' found: is it base64url encoded?");break}case Hr.BASE64URL:{const dt=-1!==ee.indexOf("+"),Nt=-1!==ee.indexOf("/");if(dt||Nt)throw xr(oe,"Invalid character '"+(dt?"+":"/")+"' found: is it base64 encoded?");ee=ee.replace(/-/g,"+").replace(/_/g,"/");break}}let Ne;try{Ne=function Si(oe){if(typeof atob>"u")throw function Jt(oe){return new st(Y.UNSUPPORTED_ENVIRONMENT,`${oe} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(oe)}(ee)}catch(dt){throw dt.message.includes("polyfill")?dt:xr(oe,"Invalid character found")}const et=new Uint8Array(Ne.length);for(let dt=0;dt<Ne.length;dt++)et[dt]=Ne.charCodeAt(dt);return et}class ds{constructor(ee){this.base64=!1,this.contentType=null;const Ne=ee.match(/^data:([^,]+)?,/);if(null===Ne)throw xr(Hr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const et=Ne[1]||null;null!=et&&(this.base64=function tt(oe,ee){return oe.length>=ee.length&&oe.substring(oe.length-ee.length)===ee}(et,";base64"),this.contentType=this.base64?et.substring(0,et.length-7):et),this.rest=ee.substring(ee.indexOf(",")+1)}}class ve{constructor(ee,Ne){let et=0,dt="";_r(ee)?(this.data_=ee,et=ee.size,dt=ee.type):ee instanceof ArrayBuffer?(Ne?this.data_=new Uint8Array(ee):(this.data_=new Uint8Array(ee.byteLength),this.data_.set(new Uint8Array(ee))),et=this.data_.length):ee instanceof Uint8Array&&(Ne?this.data_=ee:(this.data_=new Uint8Array(ee.length),this.data_.set(ee)),et=ee.length),this.size_=et,this.type_=dt}size(){return this.size_}type(){return this.type_}slice(ee,Ne){if(_r(this.data_)){const dt=function Li(oe,ee,Ne){return oe.webkitSlice?oe.webkitSlice(ee,Ne):oe.mozSlice?oe.mozSlice(ee,Ne):oe.slice?oe.slice(ee,Ne):null}(this.data_,ee,Ne);return null===dt?null:new ve(dt)}{const et=new Uint8Array(this.data_.buffer,ee,Ne-ee);return new ve(et,!0)}}static getBlob(...ee){if(Ht()){const Ne=ee.map(et=>et instanceof ve?et.data_:et);return new ve(Vr.apply(null,Ne))}{const Ne=ee.map(Qt=>oi(Qt)?$i(Hr.RAW,Qt).data:Qt.data_);let et=0;Ne.forEach(Qt=>{et+=Qt.byteLength});const dt=new Uint8Array(et);let Nt=0;return Ne.forEach(Qt=>{for(let tr=0;tr<Qt.length;tr++)dt[Nt++]=Qt[tr]}),new ve(dt,!0)}}uploadData(){return this.data_}}function Ce(oe){let ee;try{ee=JSON.parse(oe)}catch{return null}return function Pi(oe){return"object"==typeof oe&&!Array.isArray(oe)}(ee)?ee:null}function gt(oe){const ee=oe.lastIndexOf("/",oe.length-2);return-1===ee?oe:oe.slice(ee+1)}function nn(oe,ee){return ee}class gn{constructor(ee,Ne,et,dt){this.server=ee,this.local=Ne||ee,this.writable=!!et,this.xform=dt||nn}}let me=null;function qe(){if(me)return me;const oe=[];oe.push(new gn("bucket")),oe.push(new gn("generation")),oe.push(new gn("metageneration")),oe.push(new gn("name","fullPath",!0));const Ne=new gn("name");Ne.xform=function ee(Nt,Qt){return function Ee(oe){return!oi(oe)||oe.length<2?oe:gt(oe)}(Qt)},oe.push(Ne);const dt=new gn("size");return dt.xform=function et(Nt,Qt){return void 0!==Qt?Number(Qt):Qt},oe.push(dt),oe.push(new gn("timeCreated")),oe.push(new gn("updated")),oe.push(new gn("md5Hash",null,!0)),oe.push(new gn("cacheControl",null,!0)),oe.push(new gn("contentDisposition",null,!0)),oe.push(new gn("contentEncoding",null,!0)),oe.push(new gn("contentLanguage",null,!0)),oe.push(new gn("contentType",null,!0)),oe.push(new gn("metadata","customMetadata",!0)),me=oe,me}function ar(oe,ee,Ne){const et=Ce(ee);return null===et?null:function Gt(oe,ee,Ne){const et={type:"file"},dt=Ne.length;for(let Nt=0;Nt<dt;Nt++){const Qt=Ne[Nt];et[Qt.local]=Qt.xform(et,ee[Qt.server])}return function ct(oe,ee){Object.defineProperty(oe,"ref",{get:function Ne(){const Nt=new On(oe.bucket,oe.fullPath);return ee._makeStorageReference(Nt)}})}(et,oe),et}(oe,et,Ne)}function ii(oe,ee){const Ne={},et=ee.length;for(let dt=0;dt<et;dt++){const Nt=ee[dt];Nt.writable&&(Ne[Nt.server]=oe[Nt.local])}return JSON.stringify(Ne)}const Dt="prefixes",yt="items";class Qn{constructor(ee,Ne,et,dt){this.url=ee,this.method=Ne,this.handler=et,this.timeout=dt,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function cr(oe){if(!oe)throw Xe()}function yr(oe,ee){return function Ne(et,dt){const Nt=ar(oe,dt,ee);return cr(null!==Nt),Nt}}function Yr(oe){return function ee(Ne,et){let dt;return dt=401===Ne.getStatus()?Ne.getErrorText().includes("Firebase App Check token is invalid")?function Wt(){return new st(Y.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function xt(){return new st(Y.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===Ne.getStatus()?function Rt(oe){return new st(Y.QUOTA_EXCEEDED,"Quota for bucket '"+oe+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(oe.bucket):403===Ne.getStatus()?function Sn(oe){return new st(Y.UNAUTHORIZED,"User does not have permission to access '"+oe+"'.")}(oe.path):et,dt.status=Ne.getStatus(),dt.serverResponse=et.serverResponse,dt}}function Ji(oe){const ee=Yr(oe);return function Ne(et,dt){let Nt=ee(et,dt);return 404===et.getStatus()&&(Nt=function ot(oe){return new st(Y.OBJECT_NOT_FOUND,"Object '"+oe+"' does not exist.")}(oe.path)),Nt.serverResponse=dt.serverResponse,Nt}}function Fi(oe,ee,Ne){const dt=Hn(ee.fullServerUrl(),oe.host,oe._protocol),Qt=oe.maxOperationRetryTime,tr=new Qn(dt,"GET",yr(oe,Ne),Qt);return tr.errorHandler=Ji(ee),tr}function po(oe,ee,Ne,et,dt){const Nt={};Nt.prefix=ee.isRoot?"":ee.path+"/",Ne&&Ne.length>0&&(Nt.delimiter=Ne),et&&(Nt.pageToken=et),dt&&(Nt.maxResults=dt);const tr=Hn(ee.bucketOnlyServerUrl(),oe.host,oe._protocol),Pr=oe.maxOperationRetryTime,Mr=new Qn(tr,"GET",function Fr(oe,ee){return function Ne(et,dt){const Nt=function er(oe,ee,Ne){const et=Ce(Ne);return null===et?null:function Kt(oe,ee,Ne){const et={prefixes:[],items:[],nextPageToken:Ne.nextPageToken};if(Ne[Dt])for(const dt of Ne[Dt]){const Nt=dt.replace(/\/$/,""),Qt=oe._makeStorageReference(new On(ee,Nt));et.prefixes.push(Qt)}if(Ne[yt])for(const dt of Ne[yt]){const Nt=oe._makeStorageReference(new On(ee,dt.name));et.items.push(Nt)}return et}(oe,ee,et)}(oe,ee,dt);return cr(null!==Nt),Nt}}(oe,ee.bucket),Pr);return Mr.urlParams=Nt,Mr.errorHandler=Yr(ee),Mr}function Lo(oe,ee,Ne){const et=Object.assign({},Ne);return et.fullPath=oe.path,et.size=ee.size(),et.contentType||(et.contentType=function Hs(oe,ee){return oe&&oe.contentType||ee&&ee.type()||"application/octet-stream"}(null,ee)),et}class so{constructor(ee,Ne,et,dt){this.current=ee,this.total=Ne,this.finalized=!!et,this.metadata=dt||null}}function $s(oe,ee){let Ne=null;try{Ne=oe.getResponseHeader("X-Goog-Upload-Status")}catch{cr(!1)}return cr(!!Ne&&-1!==(ee||["active"]).indexOf(Ne)),Ne}const _a={STATE_CHANGED:"state_changed"},es={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function oa(oe){switch(oe){case"running":case"pausing":case"canceling":return es.RUNNING;case"paused":return es.PAUSED;case"success":return es.SUCCESS;case"canceled":return es.CANCELED;default:return es.ERROR}}class Wa{constructor(ee,Ne,et){if(function ir(oe){return"function"==typeof oe}(ee)||null!=Ne||null!=et)this.next=ee,this.error=Ne??void 0,this.complete=et??void 0;else{const Nt=ee;this.next=Nt.next,this.error=Nt.error,this.complete=Nt.complete}}}function Gs(oe){return(...ee)=>{Promise.resolve().then(()=>oe(...ee))}}let mu=null;class ba{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Rn.NO_ERROR,this.sendPromise_=new Promise(ee=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Rn.ABORT,ee()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Rn.NETWORK_ERROR,ee()}),this.xhr_.addEventListener("load",()=>{ee()})})}send(ee,Ne,et,dt){if(this.sent_)throw kr("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(Ne,ee,!0),void 0!==dt)for(const Nt in dt)dt.hasOwnProperty(Nt)&&this.xhr_.setRequestHeader(Nt,dt[Nt].toString());return void 0!==et?this.xhr_.send(et):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw kr("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw kr("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw kr("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw kr("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(ee){return this.xhr_.getResponseHeader(ee)}addUploadProgressListener(ee){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",ee)}removeUploadProgressListener(ee){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",ee)}}class Is extends ba{initXhr(){this.xhr_.responseType="text"}}function wr(){return mu?mu():new Is}class vt{constructor(ee,Ne,et=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=ee,this._blob=Ne,this._metadata=et,this._mappings=qe(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=dt=>{if(this._request=void 0,this._chunkMultiplier=1,dt._codeEquals(Y.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const Nt=this.isExponentialBackoffExpired();if(Ei(dt.status,[])){if(!Nt)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();dt=Yt()}this._error=dt,this._transition("error")}},this._metadataErrorHandler=dt=>{this._request=void 0,dt._codeEquals(Y.CANCELED)?this.completeTransitions_():(this._error=dt,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((dt,Nt)=>{this._resolve=dt,this._reject=Nt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const ee=this._transferred;return Ne=>this._updateProgress(ee+Ne)}_shouldDoResumable(ee){return ee.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(ee){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([Ne,et])=>{switch(this._state){case"running":ee(Ne,et);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((ee,Ne)=>{const et=function sa(oe,ee,Ne,et,dt){const Nt=ee.bucketOnlyServerUrl(),Qt=Lo(ee,et,dt),tr={name:Qt.fullPath},dr=Hn(Nt,oe.host,oe._protocol),Mr={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${et.size()}`,"X-Goog-Upload-Header-Content-Type":Qt.contentType,"Content-Type":"application/json; charset=utf-8"},Ui=ii(Qt,Ne),ns=new Qn(dr,"POST",function ui(qi){let Jr;$s(qi);try{Jr=qi.getResponseHeader("X-Goog-Upload-URL")}catch{cr(!1)}return cr(oi(Jr)),Jr},oe.maxUploadRetryTime);return ns.urlParams=tr,ns.headers=Mr,ns.body=Ui,ns.errorHandler=Yr(ee),ns}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),dt=this._ref.storage._makeRequest(et,wr,ee,Ne);this._request=dt,dt.getPromise().then(Nt=>{this._request=void 0,this._uploadUrl=Nt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const ee=this._uploadUrl;this._resolveToken((Ne,et)=>{const dt=function mo(oe,ee,Ne,et){const dr=new Qn(Ne,"POST",function Nt(Pr){const Mr=$s(Pr,["active","final"]);let Ui=null;try{Ui=Pr.getResponseHeader("X-Goog-Upload-Size-Received")}catch{cr(!1)}Ui||cr(!1);const Gr=Number(Ui);return cr(!isNaN(Gr)),new so(Gr,et.size(),"final"===Mr)},oe.maxUploadRetryTime);return dr.headers={"X-Goog-Upload-Command":"query"},dr.errorHandler=Yr(ee),dr}(this._ref.storage,this._ref._location,ee,this._blob),Nt=this._ref.storage._makeRequest(dt,wr,Ne,et);this._request=Nt,Nt.getPromise().then(Qt=>{this._request=void 0,this._updateProgress(Qt.current),this._needToFetchStatus=!1,Qt.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const ee=262144*this._chunkMultiplier,Ne=new so(this._transferred,this._blob.size()),et=this._uploadUrl;this._resolveToken((dt,Nt)=>{let Qt;try{Qt=function ya(oe,ee,Ne,et,dt,Nt,Qt,tr){const dr=new so(0,0);if(Qt?(dr.current=Qt.current,dr.total=Qt.total):(dr.current=0,dr.total=et.size()),et.size()!==dr.total)throw function En(){return new st(Y.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const Pr=dr.total-dr.current;let Mr=Pr;dt>0&&(Mr=Math.min(Mr,dt));const Ui=dr.current;let ui="";ui=0===Mr?"finalize":Pr===Mr?"upload, finalize":"upload";const ns={"X-Goog-Upload-Command":ui,"X-Goog-Upload-Offset":`${dr.current}`},qi=et.slice(Ui,Ui+Mr);if(null===qi)throw qt();const rs=new Qn(Ne,"POST",function Jr(Ki,uo){const la=$s(Ki,["active","final"]),Vo=dr.current+Mr,Vi=et.size();let Ua;return Ua="final"===la?yr(ee,Nt)(Ki,uo):null,new so(Vo,Vi,"final"===la,Ua)},ee.maxUploadRetryTime);return rs.headers=ns,rs.body=qi.uploadData(),rs.progressCallback=tr||null,rs.errorHandler=Yr(oe),rs}(this._ref._location,this._ref.storage,et,this._blob,ee,this._mappings,Ne,this._makeProgressCallback())}catch(dr){return this._error=dr,void this._transition("error")}const tr=this._ref.storage._makeRequest(Qt,wr,dt,Nt,!1);this._request=tr,tr.getPromise().then(dr=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(dr.current),dr.finalized?(this._metadata=dr.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((ee,Ne)=>{const et=Fi(this._ref.storage,this._ref._location,this._mappings),dt=this._ref.storage._makeRequest(et,wr,ee,Ne);this._request=dt,dt.getPromise().then(Nt=>{this._request=void 0,this._metadata=Nt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((ee,Ne)=>{const et=function Ra(oe,ee,Ne,et,dt){const Nt=ee.bucketOnlyServerUrl(),Qt={"X-Goog-Upload-Protocol":"multipart"},dr=function tr(){let rs="";for(let Ki=0;Ki<2;Ki++)rs+=Math.random().toString().slice(2);return rs}();Qt["Content-Type"]="multipart/related; boundary="+dr;const Pr=Lo(ee,et,dt),Mr=ii(Pr,Ne),ui=ve.getBlob("--"+dr+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Mr+"\r\n--"+dr+"\r\nContent-Type: "+Pr.contentType+"\r\n\r\n",et,"\r\n--"+dr+"--");if(null===ui)throw qt();const ns={name:Pr.fullPath},qi=Hn(Nt,oe.host,oe._protocol),Ms=oe.maxUploadRetryTime,bo=new Qn(qi,"POST",yr(oe,Ne),Ms);return bo.urlParams=ns,bo.headers=Qt,bo.body=ui.uploadData(),bo.errorHandler=Yr(ee),bo}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),dt=this._ref.storage._makeRequest(et,wr,ee,Ne);this._request=dt,dt.getPromise().then(Nt=>{this._request=void 0,this._metadata=Nt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(ee){const Ne=this._transferred;this._transferred=ee,this._transferred!==Ne&&this._notifyObservers()}_transition(ee){if(this._state!==ee)switch(ee){case"canceling":case"pausing":this._state=ee,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const Ne="paused"===this._state;this._state=ee,Ne&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=ee,this._notifyObservers();break;case"canceled":this._error=vn(),this._state=ee,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const ee=oa(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:ee,metadata:this._metadata,task:this,ref:this._ref}}on(ee,Ne,et,dt){const Nt=new Wa(Ne||void 0,et||void 0,dt||void 0);return this._addObserver(Nt),()=>{this._removeObserver(Nt)}}then(ee,Ne){return this._promise.then(ee,Ne)}catch(ee){return this.then(null,ee)}_addObserver(ee){this._observers.push(ee),this._notifyObserver(ee)}_removeObserver(ee){const Ne=this._observers.indexOf(ee);-1!==Ne&&this._observers.splice(Ne,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(Ne=>{this._notifyObserver(Ne)})}_finishPromise(){if(void 0!==this._resolve){let ee=!0;switch(oa(this._state)){case es.SUCCESS:Gs(this._resolve.bind(null,this.snapshot))();break;case es.CANCELED:case es.ERROR:Gs(this._reject.bind(null,this._error))();break;default:ee=!1}ee&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(ee){switch(oa(this._state)){case es.RUNNING:case es.PAUSED:ee.next&&Gs(ee.next.bind(ee,this.snapshot))();break;case es.SUCCESS:ee.complete&&Gs(ee.complete.bind(ee))();break;default:ee.error&&Gs(ee.error.bind(ee,this._error))()}}resume(){const ee="paused"===this._state||"pausing"===this._state;return ee&&this._transition("running"),ee}pause(){const ee="running"===this._state;return ee&&this._transition("pausing"),ee}cancel(){const ee="running"===this._state||"pausing"===this._state;return ee&&this._transition("canceling"),ee}}class ft{constructor(ee,Ne){this._service=ee,this._location=Ne instanceof On?Ne:On.makeFromUrl(Ne,ee.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(ee,Ne){return new ft(ee,Ne)}get root(){const ee=new On(this._location.bucket,"");return this._newRef(this._service,ee)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return gt(this._location.path)}get storage(){return this._service}get parent(){const ee=function be(oe){if(0===oe.length)return null;const ee=oe.lastIndexOf("/");return-1===ee?"":oe.slice(0,ee)}(this._location.path);if(null===ee)return null;const Ne=new On(this._location.bucket,ee);return new ft(this._service,Ne)}_throwIfRoot(ee){if(""===this._location.path)throw pr(ee)}}function fr(oe,ee,Ne){return Er.apply(this,arguments)}function Er(){return(Er=(0,Ye.Z)(function*(oe,ee,Ne){const dt=yield $r(oe,{pageToken:Ne});ee.prefixes.push(...dt.prefixes),ee.items.push(...dt.items),null!=dt.nextPageToken&&(yield fr(oe,ee,dt.nextPageToken))})).apply(this,arguments)}function $r(oe,ee){null!=ee&&"number"==typeof ee.maxResults&&sr("options.maxResults",1,1e3,ee.maxResults);const Ne=ee||{},et=po(oe.storage,oe._location,"/",Ne.pageToken,Ne.maxResults);return oe.storage.makeRequestWithTokens(et,wr)}function Ri(oe){oe._throwIfRoot("getDownloadURL");const ee=function Fs(oe,ee,Ne){const dt=Hn(ee.fullServerUrl(),oe.host,oe._protocol),Qt=oe.maxOperationRetryTime,tr=new Qn(dt,"GET",function si(oe,ee){return function Ne(et,dt){const Nt=ar(oe,dt,ee);return cr(null!==Nt),function Nr(oe,ee,Ne,et){const dt=Ce(ee);if(null===dt||!oi(dt.downloadTokens))return null;const Nt=dt.downloadTokens;if(0===Nt.length)return null;const Qt=encodeURIComponent;return Nt.split(",").map(Pr=>{const Ui=oe.fullPath;return Hn("/b/"+Qt(oe.bucket)+"/o/"+Qt(Ui),Ne,et)+tn({alt:"media",token:Pr})})[0]}(Nt,dt,oe.host,oe._protocol)}}(oe,Ne),Qt);return tr.errorHandler=Ji(ee),tr}(oe.storage,oe._location,qe());return oe.storage.makeRequestWithTokens(ee,wr).then(Ne=>{if(null===Ne)throw function on(){return new st(Y.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return Ne})}function Bi(oe,ee){const Ne=function Oe(oe,ee){const Ne=ee.split("/").filter(et=>et.length>0).join("/");return 0===oe.length?Ne:oe+"/"+Ne}(oe._location.path,ee),et=new On(oe._location.bucket,Ne);return new ft(oe.storage,et)}function Qo(oe,ee){if(oe instanceof vo){const Ne=oe;if(null==Ne._bucket)throw function Vt(){return new st(Y.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ge+"' property when initializing the app?")}();const et=new ft(Ne,Ne._bucket);return null!=ee?Qo(et,ee):et}return void 0!==ee?Bi(oe,ee):oe}function oo(oe,ee){if(ee&&function Dr(oe){return/^[A-Za-z]+:\/\//.test(oe)}(ee)){if(oe instanceof vo)return function wo(oe,ee){return new ft(oe,ee)}(oe,ee);throw Nn("To use ref(service, url), the first argument must be a Storage instance.")}return Qo(oe,ee)}function ji(oe,ee){const Ne=ee?.[ge];return null==Ne?null:On.makeFromBucketSpec(Ne,oe)}class vo{constructor(ee,Ne,et,dt,Nt){this.app=ee,this._authProvider=Ne,this._appCheckProvider=et,this._url=dt,this._firebaseVersion=Nt,this._bucket=null,this._host=q,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=dt?On.makeFromBucketSpec(dt,this._host):ji(this._host,this.app.options)}get host(){return this._host}set host(ee){this._host=ee,this._bucket=null!=this._url?On.makeFromBucketSpec(this._url,ee):ji(ee,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(ee){sr("time",0,Number.POSITIVE_INFINITY,ee),this._maxUploadRetryTime=ee}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(ee){sr("time",0,Number.POSITIVE_INFINITY,ee),this._maxOperationRetryTime=ee}_getAuthToken(){var ee=this;return(0,Ye.Z)(function*(){if(ee._overrideAuthToken)return ee._overrideAuthToken;const Ne=ee._authProvider.getImmediate({optional:!0});if(Ne){const et=yield Ne.getToken();if(null!==et)return et.accessToken}return null})()}_getAppCheckToken(){var ee=this;return(0,Ye.Z)(function*(){const Ne=ee._appCheckProvider.getImmediate({optional:!0});return Ne?(yield Ne.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(ee=>ee.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(ee){return new ft(this,ee)}_makeRequest(ee,Ne,et,dt,Nt=!0){if(this._deleted)return new Ai(Cn());{const Qt=function ms(oe,ee,Ne,et,dt,Nt,Qt=!0){const tr=tn(oe.urlParams),dr=oe.url+tr,Pr=Object.assign({},oe.headers);return function fo(oe,ee){ee&&(oe["X-Firebase-GMPID"]=ee)}(Pr,ee),function cs(oe,ee){null!==ee&&ee.length>0&&(oe.Authorization="Firebase "+ee)}(Pr,Ne),function Sr(oe,ee){oe["X-Firebase-Storage-Version"]="webjs/"+(ee??"AppManager")}(Pr,Nt),function Kr(oe,ee){null!==ee&&(oe["X-Firebase-AppCheck"]=ee)}(Pr,et),new ai(dr,oe.method,Pr,oe.body,oe.successCodes,oe.additionalRetryCodes,oe.handler,oe.errorHandler,oe.timeout,oe.progressCallback,dt,Qt)}(ee,this._appId,et,dt,Ne,this._firebaseVersion,Nt);return this._requests.add(Qt),Qt.getPromise().then(()=>this._requests.delete(Qt),()=>this._requests.delete(Qt)),Qt}}makeRequestWithTokens(ee,Ne){var et=this;return(0,Ye.Z)(function*(){const[dt,Nt]=yield Promise.all([et._getAuthToken(),et._getAppCheckToken()]);return et._makeRequest(ee,Ne,dt,Nt).getPromise()})()}}const hs="@firebase/storage";function Ii(oe,ee){return oo(oe=(0,Ze.m9)(oe),ee)}function Ko(oe,{instanceIdentifier:ee}){const Ne=oe.getProvider("app").getImmediate(),et=oe.getProvider("auth-internal"),dt=oe.getProvider("app-check-internal");return new vo(Ne,et,dt,ee,Ke.SDK_VERSION)}!function Ys(){(0,Ke._registerComponent)(new lt.wA("storage",Ko,"PUBLIC").setMultipleInstances(!0)),(0,Ke.registerVersion)(hs,"0.11.2",""),(0,Ke.registerVersion)(hs,"0.11.2","esm2017")}();class Qs{constructor(ee,Ne,et){this._delegate=ee,this.task=Ne,this.ref=et}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Xs{constructor(ee,Ne){this._delegate=ee,this._ref=Ne,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Qs(this._delegate.snapshot,this,this._ref)}then(ee,Ne){return this._delegate.then(et=>{if(ee)return ee(new Qs(et,this,this._ref))},Ne)}on(ee,Ne,et,dt){let Nt;return Ne&&(Nt="function"==typeof Ne?Qt=>Ne(new Qs(Qt,this,this._ref)):{next:Ne.next?Qt=>Ne.next(new Qs(Qt,this,this._ref)):void 0,complete:Ne.complete||void 0,error:Ne.error||void 0}),this._delegate.on(ee,Nt,et||void 0,dt||void 0)}}class Xr{constructor(ee,Ne){this._delegate=ee,this._service=Ne}get prefixes(){return this._delegate.prefixes.map(ee=>new Mi(ee,this._service))}get items(){return this._delegate.items.map(ee=>new Mi(ee,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Mi{constructor(ee,Ne){this._delegate=ee,this.storage=Ne}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(ee){const Ne=function Bo(oe,ee){return Bi(oe,ee)}(this._delegate,ee);return new Mi(Ne,this.storage)}get root(){return new Mi(this._delegate.root,this.storage)}get parent(){const ee=this._delegate.parent;return null==ee?null:new Mi(ee,this.storage)}put(ee,Ne){return this._throwIfRoot("put"),new Xs(function Na(oe,ee,Ne){return function Gn(oe,ee,Ne){return oe._throwIfRoot("uploadBytesResumable"),new vt(oe,new ve(ee),Ne)}(oe=(0,Ze.m9)(oe),ee,Ne)}(this._delegate,ee,Ne),this)}putString(ee,Ne=Hr.RAW,et){this._throwIfRoot("putString");const dt=$i(Ne,ee),Nt=Object.assign({},et);return null==Nt.contentType&&null!=dt.contentType&&(Nt.contentType=dt.contentType),new Xs(new vt(this._delegate,new ve(dt.data,!0),Nt),this)}listAll(){return function La(oe){return function $n(oe){const ee={prefixes:[],items:[]};return fr(oe,ee).then(()=>ee)}(oe=(0,Ze.m9)(oe))}(this._delegate).then(ee=>new Xr(ee,this.storage))}list(ee){return function ao(oe,ee){return $r(oe=(0,Ze.m9)(oe),ee)}(this._delegate,ee||void 0).then(Ne=>new Xr(Ne,this.storage))}getMetadata(){return function Wr(oe){return function Ci(oe){oe._throwIfRoot("getMetadata");const ee=Fi(oe.storage,oe._location,qe());return oe.storage.makeRequestWithTokens(ee,wr)}(oe=(0,Ze.m9)(oe))}(this._delegate)}updateMetadata(ee){return function ua(oe,ee){return function Wo(oe,ee){oe._throwIfRoot("updateMetadata");const Ne=function Zs(oe,ee,Ne,et){const Nt=Hn(ee.fullServerUrl(),oe.host,oe._protocol),tr=ii(Ne,et),Pr=oe.maxOperationRetryTime,Mr=new Qn(Nt,"PATCH",yr(oe,et),Pr);return Mr.headers={"Content-Type":"application/json; charset=utf-8"},Mr.body=tr,Mr.errorHandler=Ji(ee),Mr}(oe.storage,oe._location,ee,qe());return oe.storage.makeRequestWithTokens(Ne,wr)}(oe=(0,Ze.m9)(oe),ee)}(this._delegate,ee)}getDownloadURL(){return function vs(oe){return Ri(oe=(0,Ze.m9)(oe))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Uo(oe){return function js(oe){oe._throwIfRoot("deleteObject");const ee=function Oa(oe,ee){const et=Hn(ee.fullServerUrl(),oe.host,oe._protocol),tr=new Qn(et,"DELETE",function Qt(dr,Pr){},oe.maxOperationRetryTime);return tr.successCodes=[200,204],tr.errorHandler=Ji(ee),tr}(oe.storage,oe._location);return oe.storage.makeRequestWithTokens(ee,wr)}(oe=(0,Ze.m9)(oe))}(this._delegate)}_throwIfRoot(ee){if(""===this._delegate._location.path)throw pr(ee)}}class Fa{constructor(ee,Ne){this.app=ee,this._delegate=Ne}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(ee){if(ja(ee))throw Nn("ref() expected a child path but got a URL, use refFromURL instead.");return new Mi(Ii(this._delegate,ee),this)}refFromURL(ee){if(!ja(ee))throw Nn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{On.makeFromUrl(ee,this._delegate.host)}catch{throw Nn("refFromUrl() expected a valid full URL but got an invalid one.")}return new Mi(Ii(this._delegate,ee),this)}setMaxUploadRetryTime(ee){this._delegate.maxUploadRetryTime=ee}setMaxOperationRetryTime(ee){this._delegate.maxOperationRetryTime=ee}useEmulator(ee,Ne,et={}){!function Ta(oe,ee,Ne,et={}){!function Xo(oe,ee,Ne,et={}){oe.host=`${ee}:${Ne}`,oe._protocol="http";const{mockUserToken:dt}=et;dt&&(oe._overrideAuthToken="string"==typeof dt?dt:(0,Ze.Sg)(dt,oe.app.options.projectId))}(oe,ee,Ne,et)}(this._delegate,ee,Ne,et)}}function ja(oe){return/^[A-Za-z]+:\/\//.test(oe)}function bi(oe,{instanceIdentifier:ee}){const Ne=oe.getProvider("app-compat").getImmediate(),et=oe.getProvider("storage").getImmediate({identifier:ee});return new Fa(Ne,et)}!function qa(oe){const ee={TaskState:es,TaskEvent:_a,StringFormat:Hr,Storage:Fa,Reference:Mi};oe.INTERNAL.registerComponent(new lt.wA("storage-compat",bi,"PUBLIC").setServiceProps(ee).setMultipleInstances(!0)),oe.registerVersion("@firebase/storage-compat","0.3.2")}(wt.Z);var tl=X(6217),_o=X(9260);function Za(oe){const ee=function Ka(oe){return new E.y(ee=>{const Ne=Qt=>ee.next(Qt);Ne(oe.snapshot);const Nt=oe.on("state_changed",Ne);return oe.then(Qt=>{Ne(Qt),ee.complete()},Qt=>{Ne(oe.snapshot),(Qt=>{ee.error(Qt)})(Qt)}),function(){Nt()}}).pipe(function xe(oe,ee=_e.P){return Ne=>Ne.lift(new He(oe,ee))}(0))}(oe);return{task:oe,then:oe.then.bind(oe),catch:oe.catch.bind(oe),pause:oe.pause.bind(oe),cancel:oe.cancel.bind(oe),resume:oe.resume.bind(oe),snapshotChanges:()=>ee,percentageChanges:()=>ee.pipe((0,ye.U)(Ne=>Ne.bytesTransferred/Ne.totalBytes*100))}}function ta(oe){return{getDownloadURL:()=>(0,N.of)(void 0).pipe(Fe.fc,(0,Ae.w)(()=>oe.getDownloadURL()),Fe.iC),getMetadata:()=>(0,N.of)(void 0).pipe(Fe.fc,(0,Ae.w)(()=>oe.getMetadata()),Fe.iC),delete:()=>(0,fe.D)(oe.delete()),child:ee=>ta(oe.child(ee)),updateMetadata:ee=>(0,fe.D)(oe.updateMetadata(ee)),put:(ee,Ne)=>Za(oe.put(ee,Ne)),putString:(ee,Ne,et)=>Za(oe.putString(ee,Ne,et)),list:ee=>(0,fe.D)(oe.list(ee)),listAll:()=>(0,fe.D)(oe.listAll())}}const ts=new rt.OlP("angularfire2.storageBucket"),ne=new rt.OlP("angularfire2.storage.maxUploadRetryTime"),Z=new rt.OlP("angularfire2.storage.maxOperationRetryTime"),W=new rt.OlP("angularfire2.storage.use-emulator");let ke=(()=>{class oe{constructor(Ne,et,dt,Nt,Qt,tr,dr,Pr,Mr,Ui){const Gr=(0,ce.on)(Ne,Qt,et);this.storage=(0,ce.cc)(`${Gr.name}.storage.${dt}`,"AngularFireStorage",Gr.name,()=>{const ui=Qt.runOutsideAngular(()=>Gr.storage(dt||void 0)),ns=Mr;return ns&&ui.useEmulator(...ns),dr&&ui.setMaxUploadRetryTime(dr),Pr&&ui.setMaxOperationRetryTime(Pr),ui},[dr,Pr])}ref(Ne){return ta(this.storage.ref(Ne))}refFromURL(Ne){return ta(this.storage.refFromURL(Ne))}upload(Ne,et,dt){return ta(this.storage.ref(Ne)).put(et,dt)}}return oe.\u0275fac=function(Ne){return new(Ne||oe)(rt.LFG(ce.Dh),rt.LFG(ce.xv,8),rt.LFG(ts,8),rt.LFG(rt.Lbi),rt.LFG(rt.R0b),rt.LFG(Fe.HU),rt.LFG(ne,8),rt.LFG(Z,8),rt.LFG(W,8),rt.LFG(tl.nm,8))},oe.\u0275prov=rt.Yz7({token:oe,factory:oe.\u0275fac,providedIn:"any"}),oe})(),qn=(()=>{class oe{}return oe.\u0275fac=function(Ne){return new(Ne||oe)},oe.\u0275mod=rt.oAB({type:oe}),oe.\u0275inj=rt.cJS({}),oe})(),fs=(()=>{class oe{constructor(){_o.Z.registerVersion("angularfire",Fe.q4.full,"gcs-compat")}}return oe.\u0275fac=function(Ne){return new(Ne||oe)},oe.\u0275mod=rt.oAB({type:oe}),oe.\u0275inj=rt.cJS({providers:[ke],imports:[qn]}),oe})()},2011:(en,ut,X)=>{"use strict";X.d(ut,{Dh:()=>Re,GT:()=>xe,cc:()=>ce,hO:()=>rt,on:()=>ye,pX:()=>_e,xv:()=>Ue});var E=X(6547),N=X(9260),fe=X(8405);en=X.hmd(en);const Be=["ngOnDestroy"],_e=(Ze,lt,q,ge={})=>new Proxy(Ze,{get:(re,Ct)=>q.runOutsideAngular(()=>{var bt;if(Ze[Ct])return!(null===(bt=ge?.spy)||void 0===bt)&&bt.get&&ge.spy.get(Ct,Ze[Ct]),Ze[Ct];if(Be.indexOf(Ct)>-1)return()=>{};const st=lt.toPromise().then(Y=>{const Te=Y&&Y[Ct];return"function"==typeof Te?Te.bind(Y):Te&&Te.then?Te.then(Xe=>q.run(()=>Xe)):q.run(()=>Te)});return new Proxy(()=>{},{get:(Y,Te)=>st[Te],apply:(Y,Te,Xe)=>st.then(ot=>{var Rt;const xt=ot&&ot(...Xe);return!(null===(Rt=ge?.spy)||void 0===Rt)&&Rt.apply&&ge.spy.apply(Ct,Xe,xt),xt})})})}),xe=(Ze,lt)=>{lt.forEach(q=>{Object.getOwnPropertyNames(q.prototype||q).forEach(ge=>{Object.defineProperty(Ze.prototype,ge,Object.getOwnPropertyDescriptor(q.prototype||q,ge))})})};class He{constructor(lt){return lt}}const Re=new E.OlP("angularfire2.app.options"),Ue=new E.OlP("angularfire2.app.name");function ye(Ze,lt,q){const re="object"==typeof q&&q||{};re.name=re.name||"string"==typeof q&&q||"[DEFAULT]";const bt=N.Z.apps.filter(st=>st&&st.name===re.name)[0]||lt.runOutsideAngular(()=>N.Z.initializeApp(Ze,re));try{JSON.stringify(Ze)!==JSON.stringify(bt.options)&&Ae("error",`${bt.name} Firebase App already initialized with different options${en.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new He(bt)}const Ae=(Ze,...lt)=>{(0,E.X6Q)()&&typeof console<"u"&&console[Ze](...lt)},Fe={provide:He,useFactory:ye,deps:[Re,E.R0b,[new E.FiY,Ue]]};let rt=(()=>{class Ze{constructor(q){N.Z.registerVersion("angularfire",fe.q4.full,"core"),N.Z.registerVersion("angularfire",fe.q4.full,"app-compat"),N.Z.registerVersion("angular",E.q4F.full,q.toString())}static initializeApp(q,ge){return{ngModule:Ze,providers:[{provide:Re,useValue:q},{provide:Ue,useValue:ge}]}}}return Ze.\u0275fac=function(q){return new(q||Ze)(E.LFG(E.Lbi))},Ze.\u0275mod=E.oAB({type:Ze}),Ze.\u0275inj=E.cJS({providers:[Fe]}),Ze})();function ce(Ze,lt,q,ge,re){const[,Ct,bt]=globalThis.\u0275AngularfireInstanceCache.find(st=>st[0]===Ze)||[];if(Ct)return function wt(Ze,lt){try{return Ze.toString()===lt.toString()}catch{return Ze===lt}}(re,bt)||(Ke("error",`${lt} was already initialized on the ${q} Firebase App with different settings.${Ye?" You may need to reload as Firebase is not HMR aware.":""}`),Ke("warn",{is:re,was:bt})),Ct;{const st=ge();return globalThis.\u0275AngularfireInstanceCache.push([Ze,st,re]),st}}const Ye=!!en.hot,Ke=(Ze,...lt)=>{(0,E.X6Q)()&&typeof console<"u"&&console[Ze](...lt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8405:(en,ut,X)=>{"use strict";X.d(ut,{q4:()=>Bd,iC:()=>ku,fc:()=>to,HU:()=>Mu,vb:()=>Pf,JM:()=>Ns});var E=X(6547),N=X(259),fe=X(5861),Be=X(6881),_e=X(2090),xe=X(4859),He=X(1877);const Re=(O,G)=>G.some(pe=>O instanceof pe);let Ue,ye;const rt=new WeakMap,ce=new WeakMap,wt=new WeakMap,Ye=new WeakMap,Ke=new WeakMap;let q={get(O,G,pe){if(O instanceof IDBTransaction){if("done"===G)return ce.get(O);if("objectStoreNames"===G)return O.objectStoreNames||wt.get(O);if("store"===G)return pe.objectStoreNames[1]?void 0:pe.objectStore(pe.objectStoreNames[0])}return bt(O[G])},set:(O,G,pe)=>(O[G]=pe,!0),has:(O,G)=>O instanceof IDBTransaction&&("done"===G||"store"===G)||G in O};function Ct(O){return"function"==typeof O?function re(O){return O!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Fe(){return ye||(ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(O)?function(...G){return O.apply(st(this),G),bt(rt.get(this))}:function(...G){return bt(O.apply(st(this),G))}:function(G,...pe){const ze=O.call(st(this),G,...pe);return wt.set(ze,G.sort?G.sort():[G]),bt(ze)}}(O):(O instanceof IDBTransaction&&function lt(O){if(ce.has(O))return;const G=new Promise((pe,ze)=>{const ht=()=>{O.removeEventListener("complete",It),O.removeEventListener("error",Ft),O.removeEventListener("abort",Ft)},It=()=>{pe(),ht()},Ft=()=>{ze(O.error||new DOMException("AbortError","AbortError")),ht()};O.addEventListener("complete",It),O.addEventListener("error",Ft),O.addEventListener("abort",Ft)});ce.set(O,G)}(O),Re(O,function Ae(){return Ue||(Ue=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(O,q):O)}function bt(O){if(O instanceof IDBRequest)return function Ze(O){const G=new Promise((pe,ze)=>{const ht=()=>{O.removeEventListener("success",It),O.removeEventListener("error",Ft)},It=()=>{pe(bt(O.result)),ht()},Ft=()=>{ze(O.error),ht()};O.addEventListener("success",It),O.addEventListener("error",Ft)});return G.then(pe=>{pe instanceof IDBCursor&&rt.set(pe,O)}).catch(()=>{}),Ke.set(G,O),G}(O);if(Ye.has(O))return Ye.get(O);const G=Ct(O);return G!==O&&(Ye.set(O,G),Ke.set(G,O)),G}const st=O=>Ke.get(O),Xe=["get","getKey","getAll","getAllKeys","count"],ot=["put","add","delete","clear"],Rt=new Map;function xt(O,G){if(!(O instanceof IDBDatabase)||G in O||"string"!=typeof G)return;if(Rt.get(G))return Rt.get(G);const pe=G.replace(/FromIndex$/,""),ze=G!==pe,ht=ot.includes(pe);if(!(pe in(ze?IDBIndex:IDBObjectStore).prototype)||!ht&&!Xe.includes(pe))return;const It=function(){var Ft=(0,fe.Z)(function*(Kn,...Fn){const gr=this.transaction(Kn,ht?"readwrite":"readonly");let Ur=gr.store;return ze&&(Ur=Ur.index(Fn.shift())),(yield Promise.all([Ur[pe](...Fn),ht&&gr.done]))[0]});return function(Fn){return Ft.apply(this,arguments)}}();return Rt.set(G,It),It}!function ge(O){q=O(q)}(O=>({...O,get:(G,pe,ze)=>xt(G,pe)||O.get(G,pe,ze),has:(G,pe)=>!!xt(G,pe)||O.has(G,pe)}));const Wt="@firebase/installations",Sn="0.6.4",Yt=1e4,vn=`w:${Sn}`,an="FIS_v2",Ut="https://firebaseinstallations.googleapis.com/v1",Vt=36e5,Jt=new _e.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Nn(O){return O instanceof _e.ZR&&O.code.includes("request-failed")}function Cn({projectId:O}){return`${Ut}/projects/${O}/installations`}function pr(O){return{token:O.token,requestStatus:2,expiresIn:Rr(O.expiresIn),creationTime:Date.now()}}function xr(O,G){return kr.apply(this,arguments)}function kr(){return(kr=(0,fe.Z)(function*(O,G){const ze=(yield G.json()).error;return Jt.create("request-failed",{requestName:O,serverCode:ze.code,serverMessage:ze.message,serverStatus:ze.status})})).apply(this,arguments)}function On({apiKey:O}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O})}function In(O){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,fe.Z)(function*(O){const G=yield O();return G.status>=500&&G.status<600?O():G})).apply(this,arguments)}function Rr(O){return Number(O.replace("s","000"))}function oi(){return(oi=(0,fe.Z)(function*({appConfig:O,heartbeatServiceProvider:G},{fid:pe}){const ze=Cn(O),ht=On(O),It=G.getImmediate({optional:!0});if(It){const gr=yield It.getHeartbeatsHeader();gr&&ht.append("x-firebase-client",gr)}const Kn={method:"POST",headers:ht,body:JSON.stringify({fid:pe,authVersion:an,appId:O.appId,sdkVersion:vn})},Fn=yield In(()=>fetch(ze,Kn));if(Fn.ok){const gr=yield Fn.json();return{fid:gr.fid||pe,registrationStatus:2,refreshToken:gr.refreshToken,authToken:pr(gr.authToken)}}throw yield xr("Create Installation",Fn)})).apply(this,arguments)}function _r(O){return new Promise(G=>{setTimeout(G,O)})}const sr=/^[cdef][\w-]{21}$/,Hn="";function tn(){try{const O=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(O),O[0]=112+O[0]%16;const pe=function Rn(O){return function Ht(O){return btoa(String.fromCharCode(...O)).replace(/\+/g,"-").replace(/\//g,"_")}(O).substr(0,22)}(O);return sr.test(pe)?pe:Hn}catch{return Hn}}function Ei(O){return`${O.appName}!${O.appId}`}const ai=new Map;function Oi(O,G){const pe=Ei(O);fo(pe,G),function Kr(O,G){const pe=function Tn(){return!ms&&"BroadcastChannel"in self&&(ms=new BroadcastChannel("[Firebase] FID Change"),ms.onmessage=O=>{fo(O.data.key,O.data.fid)}),ms}();pe&&pe.postMessage({key:O,fid:G}),function Vr(){0===ai.size&&ms&&(ms.close(),ms=null)}()}(pe,G)}function fo(O,G){const pe=ai.get(O);if(pe)for(const ze of pe)ze(G)}let ms=null;const Li="firebase-installations-database",Si=1,Hr="firebase-installations-store";let Mn=null;function $i(){return Mn||(Mn=function Y(O,G,{blocked:pe,upgrade:ze,blocking:ht,terminated:It}={}){const Ft=indexedDB.open(O,G),Kn=bt(Ft);return ze&&Ft.addEventListener("upgradeneeded",Fn=>{ze(bt(Ft.result),Fn.oldVersion,Fn.newVersion,bt(Ft.transaction))}),pe&&Ft.addEventListener("blocked",()=>pe()),Kn.then(Fn=>{It&&Fn.addEventListener("close",()=>It()),ht&&Fn.addEventListener("versionchange",()=>ht())}).catch(()=>{}),Kn}(Li,Si,{upgrade:(O,G)=>{0===G&&O.createObjectStore(Hr)}})),Mn}function Zi(O,G){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,fe.Z)(function*(O,G){const pe=Ei(O),ht=(yield $i()).transaction(Hr,"readwrite"),It=ht.objectStore(Hr),Ft=yield It.get(pe);return yield It.put(G,pe),yield ht.done,(!Ft||Ft.fid!==G.fid)&&Oi(O,G.fid),G})).apply(this,arguments)}function ni(O){return ds.apply(this,arguments)}function ds(){return(ds=(0,fe.Z)(function*(O){const G=Ei(O),ze=(yield $i()).transaction(Hr,"readwrite");yield ze.objectStore(Hr).delete(G),yield ze.done})).apply(this,arguments)}function Zr(O,G){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,fe.Z)(function*(O,G){const pe=Ei(O),ht=(yield $i()).transaction(Hr,"readwrite"),It=ht.objectStore(Hr),Ft=yield It.get(pe),Kn=G(Ft);return void 0===Kn?yield It.delete(pe):yield It.put(Kn,pe),yield ht.done,Kn&&(!Ft||Ft.fid!==Kn.fid)&&Oi(O,Kn.fid),Kn})).apply(this,arguments)}function tt(O){return ve.apply(this,arguments)}function ve(){return ve=(0,fe.Z)(function*(O){let G;const pe=yield Zr(O.appConfig,ze=>{const ht=function Ce(O){return Ee(O||{fid:tn(),registrationStatus:0})}(ze),It=function be(O,G){if(0===G.registrationStatus){if(!navigator.onLine)return{installationEntry:G,registrationPromise:Promise.reject(Jt.create("app-offline"))};const pe={fid:G.fid,registrationStatus:1,registrationTime:Date.now()},ze=function Oe(O,G){return gt.apply(this,arguments)}(O,pe);return{installationEntry:pe,registrationPromise:ze}}return 1===G.registrationStatus?{installationEntry:G,registrationPromise:nn(O)}:{installationEntry:G}}(O,ht);return G=It.registrationPromise,It.installationEntry});return pe.fid===Hn?{installationEntry:yield G}:{installationEntry:pe,registrationPromise:G}}),ve.apply(this,arguments)}function gt(){return gt=(0,fe.Z)(function*(O,G){try{const pe=yield function Pi(O,G){return oi.apply(this,arguments)}(O,G);return Zi(O.appConfig,pe)}catch(pe){throw Nn(pe)&&409===pe.customData.serverCode?yield ni(O.appConfig):yield Zi(O.appConfig,{fid:G.fid,registrationStatus:0}),pe}}),gt.apply(this,arguments)}function nn(O){return gn.apply(this,arguments)}function gn(){return(gn=(0,fe.Z)(function*(O){let G=yield me(O.appConfig);for(;1===G.registrationStatus;)yield _r(100),G=yield me(O.appConfig);if(0===G.registrationStatus){const{installationEntry:pe,registrationPromise:ze}=yield tt(O);return ze||pe}return G})).apply(this,arguments)}function me(O){return Zr(O,G=>{if(!G)throw Jt.create("installation-not-found");return Ee(G)})}function Ee(O){return function qe(O){return 1===O.registrationStatus&&O.registrationTime+Yt<Date.now()}(O)?{fid:O.fid,registrationStatus:0}:O}function Gt(){return(Gt=(0,fe.Z)(function*({appConfig:O,heartbeatServiceProvider:G},pe){const ze=function ar(O,{fid:G}){return`${Cn(O)}/${G}/authTokens:generate`}(O,pe),ht=function Ai(O,{refreshToken:G}){const pe=On(O);return pe.append("Authorization",function ir(O){return`${an} ${O}`}(G)),pe}(O,pe),It=G.getImmediate({optional:!0});if(It){const gr=yield It.getHeartbeatsHeader();gr&&ht.append("x-firebase-client",gr)}const Kn={method:"POST",headers:ht,body:JSON.stringify({installation:{sdkVersion:vn,appId:O.appId}})},Fn=yield In(()=>fetch(ze,Kn));if(Fn.ok)return pr(yield Fn.json());throw yield xr("Generate Auth Token",Fn)})).apply(this,arguments)}function Nr(O){return ii.apply(this,arguments)}function ii(){return ii=(0,fe.Z)(function*(O,G=!1){let pe;const ze=yield Zr(O.appConfig,It=>{if(!cr(It))throw Jt.create("not-registered");const Ft=It.authToken;if(!G&&function yr(O){return 2===O.requestStatus&&!function Fr(O){const G=Date.now();return G<O.creationTime||O.creationTime+O.expiresIn<G+Vt}(O)}(Ft))return It;if(1===Ft.requestStatus)return pe=function Dt(O,G){return yt.apply(this,arguments)}(O,G),It;{if(!navigator.onLine)throw Jt.create("app-offline");const Kn=function si(O){const G={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},O),{authToken:G})}(It);return pe=function er(O,G){return Qn.apply(this,arguments)}(O,Kn),Kn}});return pe?yield pe:ze.authToken}),ii.apply(this,arguments)}function yt(){return(yt=(0,fe.Z)(function*(O,G){let pe=yield Kt(O.appConfig);for(;1===pe.authToken.requestStatus;)yield _r(100),pe=yield Kt(O.appConfig);const ze=pe.authToken;return 0===ze.requestStatus?Nr(O,G):ze})).apply(this,arguments)}function Kt(O){return Zr(O,G=>{if(!cr(G))throw Jt.create("not-registered");return function Yr(O){return 1===O.requestStatus&&O.requestTime+Yt<Date.now()}(G.authToken)?Object.assign(Object.assign({},G),{authToken:{requestStatus:0}}):G})}function Qn(){return Qn=(0,fe.Z)(function*(O,G){try{const pe=yield function ct(O,G){return Gt.apply(this,arguments)}(O,G),ze=Object.assign(Object.assign({},G),{authToken:pe});return yield Zi(O.appConfig,ze),pe}catch(pe){if(!Nn(pe)||401!==pe.customData.serverCode&&404!==pe.customData.serverCode){const ze=Object.assign(Object.assign({},G),{authToken:{requestStatus:0}});yield Zi(O.appConfig,ze)}else yield ni(O.appConfig);throw pe}}),Qn.apply(this,arguments)}function cr(O){return void 0!==O&&2===O.registrationStatus}function Fi(){return(Fi=(0,fe.Z)(function*(O){const G=O,{installationEntry:pe,registrationPromise:ze}=yield tt(G);return ze?ze.catch(console.error):Nr(G).catch(console.error),pe.fid})).apply(this,arguments)}function go(){return go=(0,fe.Z)(function*(O,G=!1){const pe=O;return yield function Fs(O){return Zs.apply(this,arguments)}(pe),(yield Nr(pe,G)).token}),go.apply(this,arguments)}function Zs(){return(Zs=(0,fe.Z)(function*(O){const{registrationPromise:G}=yield tt(O);G&&(yield G)})).apply(this,arguments)}function Wi(O){return Jt.create("missing-app-config-values",{valueName:O})}const ya="installations",es=O=>{const G=O.getProvider("app").getImmediate(),pe=function mo(O){if(!O||!O.options)throw Wi("App Configuration");if(!O.name)throw Wi("App Name");const G=["projectId","apiKey","appId"];for(const pe of G)if(!O.options[pe])throw Wi(pe);return{appName:O.name,projectId:O.options.projectId,apiKey:O.options.apiKey,appId:O.options.appId}}(G);return{app:G,appConfig:pe,heartbeatServiceProvider:(0,Be._getProvider)(G,"heartbeat"),_delete:()=>Promise.resolve()}},oa=O=>{const G=O.getProvider("app").getImmediate(),pe=(0,Be._getProvider)(G,ya).getImmediate();return{getId:()=>function Ji(O){return Fi.apply(this,arguments)}(pe),getToken:ht=>function po(O){return go.apply(this,arguments)}(pe,ht)}};(function Wa(){(0,Be._registerComponent)(new xe.wA(ya,es,"PUBLIC")),(0,Be._registerComponent)(new xe.wA("installations-internal",oa,"PRIVATE"))})(),(0,Be.registerVersion)(Wt,Sn),(0,Be.registerVersion)(Wt,Sn,"esm2017");const Gs="@firebase/remote-config",gi=new _e.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Dr{constructor(G,pe,ze,ht){this.client=G,this.storage=pe,this.storageCache=ze,this.logger=ht}isCachedDataFresh(G,pe){if(!pe)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ze=Date.now()-pe,ht=ze<=G;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ze}. Cache max age millis (minimumFetchIntervalMillis setting): ${G}. Is cache hit: ${ht}.`),ht}fetch(G){var pe=this;return(0,fe.Z)(function*(){const[ze,ht]=yield Promise.all([pe.storage.getLastSuccessfulFetchTimestampMillis(),pe.storage.getLastSuccessfulFetchResponse()]);if(ht&&pe.isCachedDataFresh(G.cacheMaxAgeMillis,ze))return ht;G.eTag=ht&&ht.eTag;const It=yield pe.client.fetch(G),Ft=[pe.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===It.status&&Ft.push(pe.storage.setLastSuccessfulFetchResponse(It)),yield Promise.all(Ft),It})()}}function wo(O=navigator){return O.languages&&O.languages[0]||O.language}class Qo{constructor(G,pe,ze,ht,It,Ft){this.firebaseInstallations=G,this.sdkVersion=pe,this.namespace=ze,this.projectId=ht,this.apiKey=It,this.appId=Ft}fetch(G){var pe=this;return(0,fe.Z)(function*(){const[ze,ht]=yield Promise.all([pe.firebaseInstallations.getId(),pe.firebaseInstallations.getToken()]),Ft=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${pe.projectId}/namespaces/${pe.namespace}:fetch?key=${pe.apiKey}`,Kn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":G.eTag||"*"},Fn={sdk_version:pe.sdkVersion,app_instance_id:ze,app_instance_id_token:ht,app_id:pe.appId,language_code:wo()},gr={method:"POST",headers:Kn,body:JSON.stringify(Fn)},Ur=fetch(Ft,gr),Or=new Promise((Zo,uu)=>{G.signal.addEventListener(()=>{const ld=new Error("The operation was aborted.");ld.name="AbortError",uu(ld)})});let Ho;try{yield Promise.race([Ur,Or]),Ho=yield Ur}catch(Zo){let uu="fetch-client-network";throw"AbortError"===Zo?.name&&(uu="fetch-timeout"),gi.create(uu,{originalErrorMessage:Zo?.message})}let To=Ho.status;const gl=Ho.headers.get("ETag")||void 0;let ud,Hl;if(200===Ho.status){let Zo;try{Zo=yield Ho.json()}catch(uu){throw gi.create("fetch-client-parse",{originalErrorMessage:uu?.message})}ud=Zo.entries,Hl=Zo.state}if("INSTANCE_STATE_UNSPECIFIED"===Hl?To=500:"NO_CHANGE"===Hl?To=304:("NO_TEMPLATE"===Hl||"EMPTY_CONFIG"===Hl)&&(ud={}),304!==To&&200!==To)throw gi.create("fetch-status",{httpStatus:To});return{status:To,eTag:gl,config:ud}})()}}class Xo{constructor(G,pe){this.client=G,this.storage=pe}fetch(G){var pe=this;return(0,fe.Z)(function*(){const ze=(yield pe.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return pe.attemptFetch(G,ze)})()}attemptFetch(G,{throttleEndTimeMillis:pe,backoffCount:ze}){var ht=this;return(0,fe.Z)(function*(){yield function oo(O,G){return new Promise((pe,ze)=>{const ht=Math.max(G-Date.now(),0),It=setTimeout(pe,ht);O.addEventListener(()=>{clearTimeout(It),ze(gi.create("fetch-throttle",{throttleEndTimeMillis:G}))})})}(G.signal,pe);try{const It=yield ht.client.fetch(G);return yield ht.storage.deleteThrottleMetadata(),It}catch(It){if(!function ji(O){if(!(O instanceof _e.ZR&&O.customData))return!1;const G=Number(O.customData.httpStatus);return 429===G||500===G||503===G||504===G}(It))throw It;const Ft={throttleEndTimeMillis:Date.now()+(0,_e.$s)(ze),backoffCount:ze+1};return yield ht.storage.setThrottleMetadata(Ft),ht.attemptFetch(G,Ft)}})()}}class Fo{constructor(G,pe,ze,ht,It){this.app=G,this._client=pe,this._storageCache=ze,this._storage=ht,this._logger=It,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function jo(O,G){const pe=O.target.error||void 0;return gi.create(G,{originalErrorMessage:pe&&pe?.message})}const Ds="app_namespace_store";class Wr{constructor(G,pe,ze,ht=function Na(){return new Promise((O,G)=>{try{const pe=indexedDB.open("firebase_remote_config",1);pe.onerror=ze=>{G(jo(ze,"storage-open"))},pe.onsuccess=ze=>{O(ze.target.result)},pe.onupgradeneeded=ze=>{0===ze.oldVersion&&ze.target.result.createObjectStore(Ds,{keyPath:"compositeKey"})}}catch(pe){G(gi.create("storage-open",{originalErrorMessage:pe?.message}))}})}()){this.appId=G,this.appName=pe,this.namespace=ze,this.openDbPromise=ht}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(G){return this.set("last_fetch_status",G)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(G){return this.set("last_successful_fetch_timestamp_millis",G)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(G){return this.set("last_successful_fetch_response",G)}getActiveConfig(){return this.get("active_config")}setActiveConfig(G){return this.set("active_config",G)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(G){return this.set("active_config_etag",G)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(G){return this.set("throttle_metadata",G)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(G){var pe=this;return(0,fe.Z)(function*(){const ze=yield pe.openDbPromise;return new Promise((ht,It)=>{const Kn=ze.transaction([Ds],"readonly").objectStore(Ds),Fn=pe.createCompositeKey(G);try{const gr=Kn.get(Fn);gr.onerror=Ur=>{It(jo(Ur,"storage-get"))},gr.onsuccess=Ur=>{const Or=Ur.target.result;ht(Or?Or.value:void 0)}}catch(gr){It(gi.create("storage-get",{originalErrorMessage:gr?.message}))}})})()}set(G,pe){var ze=this;return(0,fe.Z)(function*(){const ht=yield ze.openDbPromise;return new Promise((It,Ft)=>{const Fn=ht.transaction([Ds],"readwrite").objectStore(Ds),gr=ze.createCompositeKey(G);try{const Ur=Fn.put({compositeKey:gr,value:pe});Ur.onerror=Or=>{Ft(jo(Or,"storage-set"))},Ur.onsuccess=()=>{It()}}catch(Ur){Ft(gi.create("storage-set",{originalErrorMessage:Ur?.message}))}})})()}delete(G){var pe=this;return(0,fe.Z)(function*(){const ze=yield pe.openDbPromise;return new Promise((ht,It)=>{const Kn=ze.transaction([Ds],"readwrite").objectStore(Ds),Fn=pe.createCompositeKey(G);try{const gr=Kn.delete(Fn);gr.onerror=Ur=>{It(jo(Ur,"storage-delete"))},gr.onsuccess=()=>{ht()}}catch(gr){It(gi.create("storage-delete",{originalErrorMessage:gr?.message}))}})})()}createCompositeKey(G){return[this.appId,this.appName,this.namespace,G].join()}}class ua{constructor(G){this.storage=G}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var G=this;return(0,fe.Z)(function*(){const pe=G.storage.getLastFetchStatus(),ze=G.storage.getLastSuccessfulFetchTimestampMillis(),ht=G.storage.getActiveConfig(),It=yield pe;It&&(G.lastFetchStatus=It);const Ft=yield ze;Ft&&(G.lastSuccessfulFetchTimestampMillis=Ft);const Kn=yield ht;Kn&&(G.activeConfig=Kn)})()}setLastFetchStatus(G){return this.lastFetchStatus=G,this.storage.setLastFetchStatus(G)}setLastSuccessfulFetchTimestampMillis(G){return this.lastSuccessfulFetchTimestampMillis=G,this.storage.setLastSuccessfulFetchTimestampMillis(G)}setActiveConfig(G){return this.activeConfig=G,this.storage.setActiveConfig(G)}}function Uo(){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,fe.Z)(function*(){if(!(0,_e.hl)())return!1;try{return yield(0,_e.eu)()}catch{return!1}})).apply(this,arguments)}!function ao(){(0,Be._registerComponent)(new xe.wA("remote-config",function O(G,{instanceIdentifier:pe}){const ze=G.getProvider("app").getImmediate(),ht=G.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw gi.create("registration-window");if(!(0,_e.hl)())throw gi.create("indexed-db-unavailable");const{projectId:It,apiKey:Ft,appId:Kn}=ze.options;if(!It)throw gi.create("registration-project-id");if(!Ft)throw gi.create("registration-api-key");if(!Kn)throw gi.create("registration-app-id");const Fn=new Wr(Kn,ze.name,pe=pe||"firebase"),gr=new ua(Fn),Ur=new He.Yd(Gs);Ur.logLevel=He.in.ERROR;const Or=new Qo(ht,Be.SDK_VERSION,pe,It,Ft,Kn),Ho=new Xo(Or,Fn),To=new Dr(Ho,Fn,gr,Ur),gl=new Fo(ze,To,gr,Fn,Ur);return function cn(O){const G=(0,_e.m9)(O);G._initializePromise||(G._initializePromise=G._storageCache.loadFromStorage().then(()=>{G._isInitializationComplete=!0}))}(gl),gl},"PUBLIC").setMultipleInstances(!0)),(0,Be.registerVersion)(Gs,"0.4.4"),(0,Be.registerVersion)(Gs,"0.4.4","esm2017")}();const Bo=(O,G)=>G.some(pe=>O instanceof pe);let As,Ta;const Ko=new WeakMap,Ys=new WeakMap,Qs=new WeakMap,Xs=new WeakMap,Xr=new WeakMap;let ja={get(O,G,pe){if(O instanceof IDBTransaction){if("done"===G)return Ys.get(O);if("objectStoreNames"===G)return O.objectStoreNames||Qs.get(O);if("store"===G)return pe.objectStoreNames[1]?void 0:pe.objectStore(pe.objectStoreNames[0])}return bi(O[G])},set:(O,G,pe)=>(O[G]=pe,!0),has:(O,G)=>O instanceof IDBTransaction&&("done"===G||"store"===G)||G in O};function Ml(O){return"function"==typeof O?function wu(O){return O!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function yo(){return Ta||(Ta=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(O)?function(...G){return O.apply(qa(this),G),bi(Ko.get(this))}:function(...G){return bi(O.apply(qa(this),G))}:function(G,...pe){const ze=O.call(qa(this),G,...pe);return Qs.set(ze,G.sort?G.sort():[G]),bi(ze)}}(O):(O instanceof IDBTransaction&&function Fa(O){if(Ys.has(O))return;const G=new Promise((pe,ze)=>{const ht=()=>{O.removeEventListener("complete",It),O.removeEventListener("error",Ft),O.removeEventListener("abort",Ft)},It=()=>{pe(),ht()},Ft=()=>{ze(O.error||new DOMException("AbortError","AbortError")),ht()};O.addEventListener("complete",It),O.addEventListener("error",Ft),O.addEventListener("abort",Ft)});Ys.set(O,G)}(O),Bo(O,function ea(){return As||(As=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(O,ja):O)}function bi(O){if(O instanceof IDBRequest)return function Mi(O){const G=new Promise((pe,ze)=>{const ht=()=>{O.removeEventListener("success",It),O.removeEventListener("error",Ft)},It=()=>{pe(bi(O.result)),ht()},Ft=()=>{ze(O.error),ht()};O.addEventListener("success",It),O.addEventListener("error",Ft)});return G.then(pe=>{pe instanceof IDBCursor&&Ko.set(pe,O)}).catch(()=>{}),Xr.set(G,O),G}(O);if(Xs.has(O))return Xs.get(O);const G=Ml(O);return G!==O&&(Xs.set(O,G),Xr.set(G,O)),G}const qa=O=>Xr.get(O);function tl(O,G,{blocked:pe,upgrade:ze,blocking:ht,terminated:It}={}){const Ft=indexedDB.open(O,G),Kn=bi(Ft);return ze&&Ft.addEventListener("upgradeneeded",Fn=>{ze(bi(Ft.result),Fn.oldVersion,Fn.newVersion,bi(Ft.transaction))}),pe&&Ft.addEventListener("blocked",()=>pe()),Kn.then(Fn=>{It&&Fn.addEventListener("close",()=>It()),ht&&Fn.addEventListener("versionchange",()=>ht())}).catch(()=>{}),Kn}function _o(O,{blocked:G}={}){const pe=indexedDB.deleteDatabase(O);return G&&pe.addEventListener("blocked",()=>G()),bi(pe).then(()=>{})}const Ka=["get","getKey","getAll","getAllKeys","count"],Za=["put","add","delete","clear"],ta=new Map;function ts(O,G){if(!(O instanceof IDBDatabase)||G in O||"string"!=typeof G)return;if(ta.get(G))return ta.get(G);const pe=G.replace(/FromIndex$/,""),ze=G!==pe,ht=Za.includes(pe);if(!(pe in(ze?IDBIndex:IDBObjectStore).prototype)||!ht&&!Ka.includes(pe))return;const It=function(){var Ft=(0,fe.Z)(function*(Kn,...Fn){const gr=this.transaction(Kn,ht?"readwrite":"readonly");let Ur=gr.store;return ze&&(Ur=Ur.index(Fn.shift())),(yield Promise.all([Ur[pe](...Fn),ht&&gr.done]))[0]});return function(Fn){return Ft.apply(this,arguments)}}();return ta.set(G,It),It}!function Su(O){ja=O(ja)}(O=>({...O,get:(G,pe,ze)=>ts(G,pe)||O.get(G,pe,ze),has:(G,pe)=>!!ts(G,pe)||O.has(G,pe)}));const ne="/firebase-messaging-sw.js",Z="/firebase-cloud-messaging-push-scope",W="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ke="https://fcmregistrations.googleapis.com/v1",$t="google.c.a.c_id",qn="google.c.a.c_l",fs="google.c.a.ts";var Ne=(()=>((Ne=Ne||{}).PUSH_RECEIVED="push-received",Ne.NOTIFICATION_CLICKED="notification-clicked",Ne))();function et(O){const G=new Uint8Array(O);return btoa(String.fromCharCode(...G)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function dt(O){const pe=(O+"=".repeat((4-O.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ze=atob(pe),ht=new Uint8Array(ze.length);for(let It=0;It<ze.length;++It)ht[It]=ze.charCodeAt(It);return ht}const Nt="fcm_token_details_db",Qt=5,tr="fcm_token_object_Store";function Pr(){return Pr=(0,fe.Z)(function*(O){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(It=>It.name).includes(Nt))return null;let G=null;return(yield tl(Nt,Qt,{upgrade:(ze=(0,fe.Z)(function*(ht,It,Ft,Kn){var Fn;if(It<2||!ht.objectStoreNames.contains(tr))return;const gr=Kn.objectStore(tr),Ur=yield gr.index("fcmSenderId").get(O);if(yield gr.clear(),Ur)if(2===It){const Or=Ur;if(!Or.auth||!Or.p256dh||!Or.endpoint)return;G={token:Or.fcmToken,createTime:null!==(Fn=Or.createTime)&&void 0!==Fn?Fn:Date.now(),subscriptionOptions:{auth:Or.auth,p256dh:Or.p256dh,endpoint:Or.endpoint,swScope:Or.swScope,vapidKey:"string"==typeof Or.vapidKey?Or.vapidKey:et(Or.vapidKey)}}}else if(3===It){const Or=Ur;G={token:Or.fcmToken,createTime:Or.createTime,subscriptionOptions:{auth:et(Or.auth),p256dh:et(Or.p256dh),endpoint:Or.endpoint,swScope:Or.swScope,vapidKey:et(Or.vapidKey)}}}else if(4===It){const Or=Ur;G={token:Or.fcmToken,createTime:Or.createTime,subscriptionOptions:{auth:et(Or.auth),p256dh:et(Or.p256dh),endpoint:Or.endpoint,swScope:Or.swScope,vapidKey:et(Or.vapidKey)}}}}),function(It,Ft,Kn,Fn){return ze.apply(this,arguments)})})).close(),yield _o(Nt),yield _o("fcm_vapid_details_db"),yield _o("undefined"),function Mr(O){if(!O||!O.subscriptionOptions)return!1;const{subscriptionOptions:G}=O;return"number"==typeof O.createTime&&O.createTime>0&&"string"==typeof O.token&&O.token.length>0&&"string"==typeof G.auth&&G.auth.length>0&&"string"==typeof G.p256dh&&G.p256dh.length>0&&"string"==typeof G.endpoint&&G.endpoint.length>0&&"string"==typeof G.swScope&&G.swScope.length>0&&"string"==typeof G.vapidKey&&G.vapidKey.length>0}(G)?G:null;var ze}),Pr.apply(this,arguments)}const Ui="firebase-messaging-database",Gr=1,ui="firebase-messaging-store";let ns=null;function qi(){return ns||(ns=tl(Ui,Gr,{upgrade:(O,G)=>{0===G&&O.createObjectStore(ui)}})),ns}function Jr(O){return Ms.apply(this,arguments)}function Ms(){return Ms=(0,fe.Z)(function*(O){const G=la(O),ze=yield(yield qi()).transaction(ui).objectStore(ui).get(G);if(ze)return ze;{const ht=yield function dr(O){return Pr.apply(this,arguments)}(O.appConfig.senderId);if(ht)return yield bo(O,ht),ht}}),Ms.apply(this,arguments)}function bo(O,G){return rs.apply(this,arguments)}function rs(){return(rs=(0,fe.Z)(function*(O,G){const pe=la(O),ht=(yield qi()).transaction(ui,"readwrite");return yield ht.objectStore(ui).put(G,pe),yield ht.done,G})).apply(this,arguments)}function uo(){return(uo=(0,fe.Z)(function*(O){const G=la(O),ze=(yield qi()).transaction(ui,"readwrite");yield ze.objectStore(ui).delete(G),yield ze.done})).apply(this,arguments)}function la({appConfig:O}){return O.appId}const Vi=new _e.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ua(O,G){return Co.apply(this,arguments)}function Co(){return(Co=(0,fe.Z)(function*(O,G){const pe=yield Ya(O),ze=yu(G),ht={method:"POST",headers:pe,body:JSON.stringify(ze)};let It;try{It=yield(yield fetch(Cu(O.appConfig),ht)).json()}catch(Ft){throw Vi.create("token-subscribe-failed",{errorInfo:Ft?.toString()})}if(It.error)throw Vi.create("token-subscribe-failed",{errorInfo:It.error.message});if(!It.token)throw Vi.create("token-subscribe-no-token");return It.token})).apply(this,arguments)}function vu(){return(vu=(0,fe.Z)(function*(O,G){const pe=yield Ya(O),ze=yu(G.subscriptionOptions),ht={method:"PATCH",headers:pe,body:JSON.stringify(ze)};let It;try{It=yield(yield fetch(`${Cu(O.appConfig)}/${G.token}`,ht)).json()}catch(Ft){throw Vi.create("token-update-failed",{errorInfo:Ft?.toString()})}if(It.error)throw Vi.create("token-update-failed",{errorInfo:It.error.message});if(!It.token)throw Vi.create("token-update-no-token");return It.token})).apply(this,arguments)}function ei(O,G){return kl.apply(this,arguments)}function kl(){return(kl=(0,fe.Z)(function*(O,G){const ze={method:"DELETE",headers:yield Ya(O)};try{const It=yield(yield fetch(`${Cu(O.appConfig)}/${G}`,ze)).json();if(It.error)throw Vi.create("token-unsubscribe-failed",{errorInfo:It.error.message})}catch(ht){throw Vi.create("token-unsubscribe-failed",{errorInfo:ht?.toString()})}})).apply(this,arguments)}function Cu({projectId:O}){return`${ke}/projects/${O}/registrations`}function Ya(O){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,fe.Z)(function*({appConfig:O,installations:G}){const pe=yield G.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O.apiKey,"x-goog-firebase-installations-auth":`FIS ${pe}`})})).apply(this,arguments)}function yu({p256dh:O,auth:G,endpoint:pe,vapidKey:ze}){const ht={web:{endpoint:pe,auth:G,p256dh:O}};return ze!==W&&(ht.web.applicationPubKey=ze),ht}const as=6048e5;function Io(){return Io=(0,fe.Z)(function*(O){const G=yield function Ja(O,G){return eu.apply(this,arguments)}(O.swRegistration,O.vapidKey),pe={vapidKey:O.vapidKey,swScope:O.swRegistration.scope,endpoint:G.endpoint,auth:et(G.getKey("auth")),p256dh:et(G.getKey("p256dh"))},ze=yield Jr(O.firebaseDependencies);if(ze){if(function B(O,G){return G.vapidKey===O.vapidKey&&G.endpoint===O.endpoint&&G.auth===O.auth&&G.p256dh===O.p256dh}(ze.subscriptionOptions,pe))return Date.now()>=ze.createTime+as?function Xa(O,G){return Bu.apply(this,arguments)}(O,{token:ze.token,createTime:Date.now(),subscriptionOptions:pe}):ze.token;try{yield ei(O.firebaseDependencies,ze.token)}catch(ht){console.warn(ht)}return Vu(O.firebaseDependencies,pe)}return Vu(O.firebaseDependencies,pe)}),Io.apply(this,arguments)}function ks(){return ks=(0,fe.Z)(function*(O){const G=yield Jr(O.firebaseDependencies);G&&(yield ei(O.firebaseDependencies,G.token),yield function Ki(O){return uo.apply(this,arguments)}(O.firebaseDependencies));const pe=yield O.swRegistration.pushManager.getSubscription();return!pe||pe.unsubscribe()}),ks.apply(this,arguments)}function Bu(){return Bu=(0,fe.Z)(function*(O,G){try{const pe=yield function Jl(O,G){return vu.apply(this,arguments)}(O.firebaseDependencies,G),ze=Object.assign(Object.assign({},G),{token:pe,createTime:Date.now()});return yield bo(O.firebaseDependencies,ze),pe}catch(pe){throw yield function Iu(O){return ks.apply(this,arguments)}(O),pe}}),Bu.apply(this,arguments)}function Vu(O,G){return li.apply(this,arguments)}function li(){return(li=(0,fe.Z)(function*(O,G){const ze={token:yield Ua(O,G),createTime:Date.now(),subscriptionOptions:G};return yield bo(O,ze),ze.token})).apply(this,arguments)}function eu(){return(eu=(0,fe.Z)(function*(O,G){return(yield O.pushManager.getSubscription())||O.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:dt(G)})})).apply(this,arguments)}function he(O){const G={from:O.from,collapseKey:O.collapse_key,messageId:O.fcmMessageId};return function z(O,G){if(!G.notification)return;O.notification={};const pe=G.notification.title;pe&&(O.notification.title=pe);const ze=G.notification.body;ze&&(O.notification.body=ze);const ht=G.notification.image;ht&&(O.notification.image=ht);const It=G.notification.icon;It&&(O.notification.icon=It)}(G,O),function Ie(O,G){G.data&&(O.data=G.data)}(G,O),function Ge(O,G){var pe,ze,ht,It,Ft;if(!(G.fcmOptions||null!==(pe=G.notification)&&void 0!==pe&&pe.click_action))return;O.fcmOptions={};const Kn=null!==(ht=null===(ze=G.fcmOptions)||void 0===ze?void 0:ze.link)&&void 0!==ht?ht:null===(It=G.notification)||void 0===It?void 0:It.click_action;Kn&&(O.fcmOptions.link=Kn);const Fn=null===(Ft=G.fcmOptions)||void 0===Ft?void 0:Ft.analytics_label;Fn&&(O.fcmOptions.analyticsLabel=Fn)}(G,O),G}function zt(O,G){const pe=[];for(let ze=0;ze<O.length;ze++)pe.push(O.charAt(ze)),ze<G.length&&pe.push(G.charAt(ze));return pe.join("")}function ti(O){return Vi.create("missing-app-config-values",{valueName:O})}zt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),zt("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class mi{constructor(G,pe,ze){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ht=function ur(O){if(!O||!O.options)throw ti("App Configuration Object");if(!O.name)throw ti("App Name");const G=["projectId","apiKey","appId","messagingSenderId"],{options:pe}=O;for(const ze of G)if(!pe[ze])throw ti(ze);return{appName:O.name,projectId:pe.projectId,apiKey:pe.apiKey,appId:pe.appId,senderId:pe.messagingSenderId}}(G);this.firebaseDependencies={app:G,appConfig:ht,installations:pe,analyticsProvider:ze}}_delete(){return Promise.resolve()}}function mr(){return(mr=(0,fe.Z)(function*(O){try{O.swRegistration=yield navigator.serviceWorker.register(ne,{scope:Z}),O.swRegistration.update().catch(()=>{})}catch(G){throw Vi.create("failed-service-worker-registration",{browserErrorMessage:G?.message})}})).apply(this,arguments)}function fi(){return(fi=(0,fe.Z)(function*(O,G){if(!G&&!O.swRegistration&&(yield function hi(O){return mr.apply(this,arguments)}(O)),G||!O.swRegistration){if(!(G instanceof ServiceWorkerRegistration))throw Vi.create("invalid-sw-registration");O.swRegistration=G}})).apply(this,arguments)}function Jn(){return(Jn=(0,fe.Z)(function*(O,G){G?O.vapidKey=G:O.vapidKey||(O.vapidKey=W)})).apply(this,arguments)}function Do(){return Do=(0,fe.Z)(function*(O,G){if(!navigator)throw Vi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Vi.create("permission-blocked");return yield function Gi(O,G){return Jn.apply(this,arguments)}(O,G?.vapidKey),yield function us(O,G){return fi.apply(this,arguments)}(O,G?.serviceWorkerRegistration),function Ea(O){return Io.apply(this,arguments)}(O)}),Do.apply(this,arguments)}function is(){return(is=(0,fe.Z)(function*(O,G,pe){const ze=function tu(O){switch(O){case Ne.NOTIFICATION_CLICKED:return"notification_open";case Ne.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(G);(yield O.firebaseDependencies.analyticsProvider.get()).logEvent(ze,{message_id:pe[$t],message_name:pe[qn],message_time:pe[fs],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Sa(){return Sa=(0,fe.Z)(function*(O,G){const pe=G.data;if(!pe.isFirebaseMessaging)return;O.onMessageHandler&&pe.messageType===Ne.PUSH_RECEIVED&&("function"==typeof O.onMessageHandler?O.onMessageHandler(he(pe)):O.onMessageHandler.next(he(pe)));const ze=pe.data;(function Lt(O){return"object"==typeof O&&!!O&&$t in O})(ze)&&"1"===ze["google.c.a.e"]&&(yield function Js(O,G,pe){return is.apply(this,arguments)}(O,pe.messageType,ze))}),Sa.apply(this,arguments)}const wc="@firebase/messaging",zs=O=>{const G=new mi(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),O.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",pe=>function jr(O,G){return Sa.apply(this,arguments)}(G,pe)),G},ec=O=>{const G=O.getProvider("messaging").getImmediate();return{getToken:ze=>function xo(O,G){return Do.apply(this,arguments)}(G,ze)}};function _n(){return qr.apply(this,arguments)}function qr(){return(qr=(0,fe.Z)(function*(){try{yield(0,_e.eu)()}catch{return!1}return typeof window<"u"&&(0,_e.hl)()&&(0,_e.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function bu(){(0,Be._registerComponent)(new xe.wA("messaging",zs,"PUBLIC")),(0,Be._registerComponent)(new xe.wA("messaging-internal",ec,"PRIVATE")),(0,Be.registerVersion)(wc,"0.12.4"),(0,Be.registerVersion)(wc,"0.12.4","esm2017")}();const ru="analytics",Pn="firebase_id",lo="origin",ys=6e4,xu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xn="https://www.googletagmanager.com/gtag/js",Ln=new He.Yd("@firebase/analytics"),Bn=new _e.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function jt(O){if(!O.startsWith(Xn)){const G=Bn.create("invalid-gtag-resource",{gtagURL:O});return Ln.warn(G.message),""}return O}function mn(O){return Promise.all(O.map(G=>G.catch(pe=>pe)))}function fl(){return(fl=(0,fe.Z)(function*(O,G,pe,ze,ht,It){const Ft=ze[ht];try{if(Ft)yield G[Ft];else{const Fn=(yield mn(pe)).find(gr=>gr.measurementId===ht);Fn&&(yield G[Fn.appId])}}catch(Kn){Ln.error(Kn)}O("config",ht,It)})).apply(this,arguments)}function Ol(){return(Ol=(0,fe.Z)(function*(O,G,pe,ze,ht){try{let It=[];if(ht&&ht.send_to){let Ft=ht.send_to;Array.isArray(Ft)||(Ft=[Ft]);const Kn=yield mn(pe);for(const Fn of Ft){const gr=Kn.find(Or=>Or.measurementId===Fn),Ur=gr&&G[gr.appId];if(!Ur){It=[];break}It.push(Ur)}}0===It.length&&(It=Object.values(G)),yield Promise.all(It),O("event",ze,ht||{})}catch(It){Ln.error(It)}})).apply(this,arguments)}const id=30,Hu=new class Ir{constructor(G={},pe=1e3){this.throttleMetadata=G,this.intervalMillis=pe}getThrottleMetadata(G){return this.throttleMetadata[G]}setThrottleMetadata(G,pe){this.throttleMetadata[G]=pe}deleteThrottleMetadata(G){delete this.throttleMetadata[G]}};function $u(O){return new Headers({Accept:"application/json","x-goog-api-key":O})}function Zn(){return(Zn=(0,fe.Z)(function*(O){var G;const{appId:pe,apiKey:ze}=O,ht={method:"GET",headers:$u(ze)},It=xu.replace("{app-id}",pe),Ft=yield fetch(It,ht);if(200!==Ft.status&&304!==Ft.status){let Kn="";try{const Fn=yield Ft.json();null!==(G=Fn.error)&&void 0!==G&&G.message&&(Kn=Fn.error.message)}catch{}throw Bn.create("config-fetch-failed",{httpStatus:Ft.status,responseMessage:Kn})}return Ft.json()})).apply(this,arguments)}function pi(){return(pi=(0,fe.Z)(function*(O,G=Hu,pe){const{appId:ze,apiKey:ht,measurementId:It}=O.options;if(!ze)throw Bn.create("no-app-id");if(!ht){if(It)return{measurementId:It,appId:ze};throw Bn.create("no-api-key")}const Ft=G.getThrottleMetadata(ze)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Kn=new ss;return setTimeout((0,fe.Z)(function*(){Kn.abort()}),void 0!==pe?pe:ys),qs({appId:ze,apiKey:ht,measurementId:It},Ft,Kn,G)})).apply(this,arguments)}function qs(O,G,pe){return Ps.apply(this,arguments)}function Ps(){return Ps=(0,fe.Z)(function*(O,{throttleEndTimeMillis:G,backoffCount:pe},ze,ht=Hu){var It;const{appId:Ft,measurementId:Kn}=O;try{yield function Yn(O,G){return new Promise((pe,ze)=>{const ht=Math.max(G-Date.now(),0),It=setTimeout(pe,ht);O.addEventListener(()=>{clearTimeout(It),ze(Bn.create("fetch-throttle",{throttleEndTimeMillis:G}))})})}(ze,G)}catch(Fn){if(Kn)return Ln.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Kn} provided in the "measurementId" field in the local Firebase config. [${Fn?.message}]`),{appId:Ft,measurementId:Kn};throw Fn}try{const Fn=yield function Ti(O){return Zn.apply(this,arguments)}(O);return ht.deleteThrottleMetadata(Ft),Fn}catch(Fn){const gr=Fn;if(!function Ia(O){if(!(O instanceof _e.ZR&&O.customData))return!1;const G=Number(O.customData.httpStatus);return 429===G||500===G||503===G||504===G}(gr)){if(ht.deleteThrottleMetadata(Ft),Kn)return Ln.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Kn} provided in the "measurementId" field in the local Firebase config. [${gr?.message}]`),{appId:Ft,measurementId:Kn};throw Fn}const Ur=503===Number(null===(It=gr?.customData)||void 0===It?void 0:It.httpStatus)?(0,_e.$s)(pe,ht.intervalMillis,id):(0,_e.$s)(pe,ht.intervalMillis),Or={throttleEndTimeMillis:Date.now()+Ur,backoffCount:pe+1};return ht.setThrottleMetadata(Ft,Or),Ln.debug(`Calling attemptFetch again in ${Ur} millis`),qs(O,Or,ze,ht)}}),Ps.apply(this,arguments)}class ss{constructor(){this.listeners=[]}addEventListener(G){this.listeners.push(G)}abort(){this.listeners.forEach(G=>G())}}let k,Ot;function D(){return(D=(0,fe.Z)(function*(O,G,pe,ze,ht){if(ht&&ht.global)O("event",pe,ze);else{const It=yield G;O("event",pe,Object.assign(Object.assign({},ze),{send_to:It}))}})).apply(this,arguments)}function iu(){return(iu=(0,fe.Z)(function*(){if(!(0,_e.hl)())return Ln.warn(Bn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,_e.eu)()}catch(O){return Ln.warn(Bn.create("indexeddb-unavailable",{errorInfo:O?.toString()}).message),!1}return!0})).apply(this,arguments)}function Af(){return Af=(0,fe.Z)(function*(O,G,pe,ze,ht,It,Ft){var Kn;const Fn=function Qr(O){return pi.apply(this,arguments)}(O);Fn.then(To=>{pe[To.measurementId]=To.appId,O.options.measurementId&&To.measurementId!==O.options.measurementId&&Ln.warn(`The measurement ID in the local Firebase config (${O.options.measurementId}) does not match the measurement ID fetched from the server (${To.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(To=>Ln.error(To)),G.push(Fn);const gr=function Ac(){return iu.apply(this,arguments)}().then(To=>{if(To)return ze.getId()}),[Ur,Or]=yield Promise.all([Fn,gr]);(function ca(O){const G=window.document.getElementsByTagName("script");for(const pe of Object.values(G))if(pe.src&&pe.src.includes(Xn)&&pe.src.includes(O))return pe;return null})(It)||function Pl(O,G){const pe=function Ao(O,G){let pe;return window.trustedTypes&&(pe=window.trustedTypes.createPolicy(O,G)),pe}("firebase-js-sdk-policy",{createScriptURL:jt}),ze=document.createElement("script"),ht=`${Xn}?l=${O}&id=${G}`;ze.src=pe?pe?.createScriptURL(ht):ht,ze.async=!0,document.head.appendChild(ze)}(It,Ur.measurementId),Ot&&(ht("consent","default",Ot),function xa(O){Ot=O}(void 0)),ht("js",new Date);const Ho=null!==(Kn=Ft?.config)&&void 0!==Kn?Kn:{};return Ho[lo]="firebase",Ho.update=!0,null!=Or&&(Ho[Pn]=Or),ht("config",Ur.measurementId,Ho),k&&(ht("set",k),function da(O){k=O}(void 0)),Ur.measurementId}),Af.apply(this,arguments)}class Qi{constructor(G){this.app=G}_delete(){return delete su[this.app.options.appId],Promise.resolve()}}let su={},Ud=[];const sd={};let od,Da,Gu="dataLayer",pl=!1;function Aa(O,G,pe){!function zu(){const O=[];if((0,_e.ru)()&&O.push("This is a browser extension environment."),(0,_e.zI)()||O.push("Cookies are not available."),O.length>0){const G=O.map((ze,ht)=>`(${ht+1}) ${ze}`).join(" "),pe=Bn.create("invalid-analytics-context",{errorInfo:G});Ln.warn(pe.message)}}();const ze=O.options.appId;if(!ze)throw Bn.create("no-app-id");if(!O.options.apiKey){if(!O.options.measurementId)throw Bn.create("no-api-key");Ln.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${O.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=su[ze])throw Bn.create("already-exists",{id:ze});if(!pl){!function Ic(O){let G=[];Array.isArray(window[O])?G=window[O]:window[O]=G}(Gu);const{wrappedGtag:It,gtagCore:Ft}=function rd(O,G,pe,ze,ht){let It=function(...Ft){window[ze].push(arguments)};return window[ht]&&"function"==typeof window[ht]&&(It=window[ht]),window[ht]=function Ca(O,G,pe,ze){function It(){return It=(0,fe.Z)(function*(Ft,...Kn){try{if("event"===Ft){const[Fn,gr]=Kn;yield function Th(O,G,pe,ze,ht){return Ol.apply(this,arguments)}(O,G,pe,Fn,gr)}else if("config"===Ft){const[Fn,gr]=Kn;yield function xc(O,G,pe,ze,ht,It){return fl.apply(this,arguments)}(O,G,pe,ze,Fn,gr)}else if("consent"===Ft){const[Fn]=Kn;O("consent","update",Fn)}else if("get"===Ft){const[Fn,gr,Ur]=Kn;O("get",Fn,gr,Ur)}else if("set"===Ft){const[Fn]=Kn;O("set",Fn)}else O(Ft,...Kn)}catch(Fn){Ln.error(Fn)}}),It.apply(this,arguments)}return function ht(Ft){return It.apply(this,arguments)}}(It,O,G,pe),{gtagCore:It,wrappedGtag:window[ht]}}(su,Ud,sd,Gu,"gtag");Da=It,od=Ft,pl=!0}return su[ze]=function Yi(O,G,pe,ze,ht,It,Ft){return Af.apply(this,arguments)}(O,Ud,sd,G,od,Gu,pe),new Qi(O)}function Ba(){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,fe.Z)(function*(){if((0,_e.ru)()||!(0,_e.zI)()||!(0,_e.hl)())return!1;try{return yield(0,_e.eu)()}catch{return!1}})).apply(this,arguments)}const nc="@firebase/analytics";!function Sh(){(0,Be._registerComponent)(new xe.wA(ru,(G,{options:pe})=>Aa(G.getProvider("app").getImmediate(),G.getProvider("installations-internal").getImmediate(),pe),"PUBLIC")),(0,Be._registerComponent)(new xe.wA("analytics-internal",function O(G){try{const pe=G.getProvider(ru).getImmediate();return{logEvent:(ze,ht,It)=>function kc(O,G,pe,ze){O=(0,_e.m9)(O),function F(O,G,pe,ze,ht){return D.apply(this,arguments)}(Da,su[O.app.options.appId],G,pe,ze).catch(ht=>Ln.error(ht))}(pe,ze,ht,It)}}catch(pe){throw Bn.create("interop-component-reg-failed",{reason:pe})}},"PRIVATE")),(0,Be.registerVersion)(nc,"0.10.0"),(0,Be.registerVersion)(nc,"0.10.0","esm2017")}();var jl=X(341),Pc=X(353),Ul=X(2868),rc=X(7770),wp=X(8915);const Bd=new E.GfV("7.5.0"),Bl="__angularfire_symbol__analyticsIsSupportedValue",Du="__angularfire_symbol__analyticsIsSupported",Au="__angularfire_symbol__remoteConfigIsSupportedValue",Os="__angularfire_symbol__remoteConfigIsSupported",Vl="__angularfire_symbol__messagingIsSupportedValue",ou="__angularfire_symbol__messagingIsSupported";function Ns(O,G,pe){if(G){if(1===G.length)return G[0];const It=G.filter(Ft=>Ft.app===pe);if(1===It.length)return It[0]}return pe.container.getProvider(O).getImmediate({optional:!0})}globalThis[Du]||(globalThis[Du]=Ba().then(O=>globalThis[Bl]=O).catch(()=>globalThis[Bl]=!1)),globalThis[ou]||(globalThis[ou]=_n().then(O=>globalThis[Vl]=O).catch(()=>globalThis[Vl]=!1)),globalThis[Os]||(globalThis[Os]=Uo().then(O=>globalThis[Au]=O).catch(()=>globalThis[Au]=!1));const Pf=(O,G)=>{const pe=G?[G]:(0,N.C6)(),ze=[];return pe.forEach(ht=>{ht.container.getProvider(O).instances.forEach(Ft=>{ze.includes(Ft)||ze.push(Ft)})}),ze};function au(){}class Va{constructor(G,pe=jl.N){this.zone=G,this.delegate=pe}now(){return this.delegate.now()}schedule(G,pe,ze){const ht=this.zone;return this.delegate.schedule(function(Ft){ht.runGuarded(()=>{G.apply(this,[Ft])})},pe,ze)}}class Cp{constructor(G){this.zone=G,this.task=null}call(G,pe){const ze=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",au,{},au,au)),pe.pipe((0,Ul.b)({next:ze,complete:ze,error:ze})).subscribe(G).add(ze)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Mu=(()=>{class O{constructor(pe){this.ngZone=pe,this.outsideAngular=pe.runOutsideAngular(()=>new Va(Zone.current)),this.insideAngular=pe.run(()=>new Va(Zone.current,Pc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return O.\u0275fac=function(pe){return new(pe||O)(E.LFG(E.R0b))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();function Ni(){const O=globalThis.\u0275AngularFireScheduler;if(!O)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return O}function to(O){return O.pipe((0,rc.QV)(Ni().outsideAngular))}function ku(O){return Ni(),function fa(O){return function(pe){return(pe=pe.lift(new Cp(O.ngZone))).pipe((0,wp.R)(O.outsideAngular),(0,rc.QV)(O.insideAngular))}}(Ni())(O)}},2090:(en,ut,X)=>{"use strict";X.d(ut,{$s:()=>ni,BH:()=>Ct,G6:()=>vn,L:()=>Ue,LL:()=>on,Pz:()=>re,Sg:()=>bt,UG:()=>Te,US:()=>xe,ZB:()=>Fe,ZR:()=>En,aH:()=>ge,b$:()=>Rt,eu:()=>Ut,hl:()=>an,jU:()=>Xe,m9:()=>Vs,ne:()=>Ei,pd:()=>tn,r3:()=>Tr,ru:()=>ot,tV:()=>ye,uI:()=>Y,vZ:()=>oi,w1:()=>Wt,xO:()=>sr,xb:()=>ir,z$:()=>st,zI:()=>Vt,zd:()=>Hn});const Be=function(tt){const ve=[];let Ce=0;for(let be=0;be<tt.length;be++){let Oe=tt.charCodeAt(be);Oe<128?ve[Ce++]=Oe:Oe<2048?(ve[Ce++]=Oe>>6|192,ve[Ce++]=63&Oe|128):55296==(64512&Oe)&&be+1<tt.length&&56320==(64512&tt.charCodeAt(be+1))?(Oe=65536+((1023&Oe)<<10)+(1023&tt.charCodeAt(++be)),ve[Ce++]=Oe>>18|240,ve[Ce++]=Oe>>12&63|128,ve[Ce++]=Oe>>6&63|128,ve[Ce++]=63&Oe|128):(ve[Ce++]=Oe>>12|224,ve[Ce++]=Oe>>6&63|128,ve[Ce++]=63&Oe|128)}return ve},xe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(tt,ve){if(!Array.isArray(tt))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ce=ve?this.byteToCharMapWebSafe_:this.byteToCharMap_,be=[];for(let Oe=0;Oe<tt.length;Oe+=3){const gt=tt[Oe],nn=Oe+1<tt.length,gn=nn?tt[Oe+1]:0,me=Oe+2<tt.length,Ee=me?tt[Oe+2]:0;let Gt=(15&gn)<<2|Ee>>6,ar=63&Ee;me||(ar=64,nn||(Gt=64)),be.push(Ce[gt>>2],Ce[(3&gt)<<4|gn>>4],Ce[Gt],Ce[ar])}return be.join("")},encodeString(tt,ve){return this.HAS_NATIVE_SUPPORT&&!ve?btoa(tt):this.encodeByteArray(Be(tt),ve)},decodeString(tt,ve){return this.HAS_NATIVE_SUPPORT&&!ve?atob(tt):function(tt){const ve=[];let Ce=0,be=0;for(;Ce<tt.length;){const Oe=tt[Ce++];if(Oe<128)ve[be++]=String.fromCharCode(Oe);else if(Oe>191&&Oe<224){const gt=tt[Ce++];ve[be++]=String.fromCharCode((31&Oe)<<6|63&gt)}else if(Oe>239&&Oe<365){const me=((7&Oe)<<18|(63&tt[Ce++])<<12|(63&tt[Ce++])<<6|63&tt[Ce++])-65536;ve[be++]=String.fromCharCode(55296+(me>>10)),ve[be++]=String.fromCharCode(56320+(1023&me))}else{const gt=tt[Ce++],nn=tt[Ce++];ve[be++]=String.fromCharCode((15&Oe)<<12|(63&gt)<<6|63&nn)}}return ve.join("")}(this.decodeStringToByteArray(tt,ve))},decodeStringToByteArray(tt,ve){this.init_();const Ce=ve?this.charToByteMapWebSafe_:this.charToByteMap_,be=[];for(let Oe=0;Oe<tt.length;){const gt=Ce[tt.charAt(Oe++)],gn=Oe<tt.length?Ce[tt.charAt(Oe)]:0;++Oe;const Ee=Oe<tt.length?Ce[tt.charAt(Oe)]:64;++Oe;const ct=Oe<tt.length?Ce[tt.charAt(Oe)]:64;if(++Oe,null==gt||null==gn||null==Ee||null==ct)throw new He;be.push(gt<<2|gn>>4),64!==Ee&&(be.push(gn<<4&240|Ee>>2),64!==ct&&be.push(Ee<<6&192|ct))}return be},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let tt=0;tt<this.ENCODED_VALS.length;tt++)this.byteToCharMap_[tt]=this.ENCODED_VALS.charAt(tt),this.charToByteMap_[this.byteToCharMap_[tt]]=tt,this.byteToCharMapWebSafe_[tt]=this.ENCODED_VALS_WEBSAFE.charAt(tt),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[tt]]=tt,tt>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(tt)]=tt,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(tt)]=tt)}}};class He extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ue=function(tt){return function(tt){const ve=Be(tt);return xe.encodeByteArray(ve,!0)}(tt).replace(/\./g,"")},ye=function(tt){try{return xe.decodeString(tt,!0)}catch(ve){console.error("base64Decode failed: ",ve)}return null};function Fe(tt,ve){if(!(ve instanceof Object))return ve;switch(ve.constructor){case Date:return new Date(ve.getTime());case Object:void 0===tt&&(tt={});break;case Array:tt=[];break;default:return ve}for(const Ce in ve)!ve.hasOwnProperty(Ce)||!rt(Ce)||(tt[Ce]=Fe(tt[Ce],ve[Ce]));return tt}function rt(tt){return"__proto__"!==tt}const Ze=()=>{try{return function ce(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const tt=process.env.__FIREBASE_DEFAULTS__;return tt?JSON.parse(tt):void 0})()||(()=>{if(typeof document>"u")return;let tt;try{tt=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ve=tt&&ye(tt[1]);return ve&&JSON.parse(ve)})()}catch(tt){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${tt}`)}},ge=()=>{var tt;return null===(tt=Ze())||void 0===tt?void 0:tt.config},re=tt=>{var ve;return null===(ve=Ze())||void 0===ve?void 0:ve[`_${tt}`]};class Ct{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ve,Ce)=>{this.resolve=ve,this.reject=Ce})}wrapCallback(ve){return(Ce,be)=>{Ce?this.reject(Ce):this.resolve(be),"function"==typeof ve&&(this.promise.catch(()=>{}),1===ve.length?ve(Ce):ve(Ce,be))}}}function bt(tt,ve){if(tt.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const be=ve||"demo-project",Oe=tt.iat||0,gt=tt.sub||tt.user_id;if(!gt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const nn=Object.assign({iss:`https://securetoken.google.com/${be}`,aud:be,iat:Oe,exp:Oe+3600,auth_time:Oe,sub:gt,user_id:gt,firebase:{sign_in_provider:"custom",identities:{}}},tt);return[Ue(JSON.stringify({alg:"none",type:"JWT"})),Ue(JSON.stringify(nn)),""].join(".")}function st(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Y(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(st())}function Te(){var tt;const ve=null===(tt=Ze())||void 0===tt?void 0:tt.forceEnvironment;if("node"===ve)return!0;if("browser"===ve)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Xe(){return"object"==typeof self&&self.self===self}function ot(){const tt="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof tt&&void 0!==tt.id}function Rt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Wt(){const tt=st();return tt.indexOf("MSIE ")>=0||tt.indexOf("Trident/")>=0}function vn(){return!Te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function an(){try{return"object"==typeof indexedDB}catch{return!1}}function Ut(){return new Promise((tt,ve)=>{try{let Ce=!0;const be="validate-browser-context-for-indexeddb-analytics-module",Oe=self.indexedDB.open(be);Oe.onsuccess=()=>{Oe.result.close(),Ce||self.indexedDB.deleteDatabase(be),tt(!0)},Oe.onupgradeneeded=()=>{Ce=!1},Oe.onerror=()=>{var gt;ve((null===(gt=Oe.error)||void 0===gt?void 0:gt.message)||"")}}catch(Ce){ve(Ce)}})}function Vt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class En extends Error{constructor(ve,Ce,be){super(Ce),this.code=ve,this.customData=be,this.name="FirebaseError",Object.setPrototypeOf(this,En.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,on.prototype.create)}}class on{constructor(ve,Ce,be){this.service=ve,this.serviceName=Ce,this.errors=be}create(ve,...Ce){const be=Ce[0]||{},Oe=`${this.service}/${ve}`,gt=this.errors[ve],nn=gt?function Jt(tt,ve){return tt.replace(Nn,(Ce,be)=>{const Oe=ve[be];return null!=Oe?String(Oe):`<${be}?>`})}(gt,be):"Error";return new En(Oe,`${this.serviceName}: ${nn} (${Oe}).`,be)}}const Nn=/\{\$([^}]+)}/g;function Tr(tt,ve){return Object.prototype.hasOwnProperty.call(tt,ve)}function ir(tt){for(const ve in tt)if(Object.prototype.hasOwnProperty.call(tt,ve))return!1;return!0}function oi(tt,ve){if(tt===ve)return!0;const Ce=Object.keys(tt),be=Object.keys(ve);for(const Oe of Ce){if(!be.includes(Oe))return!1;const gt=tt[Oe],nn=ve[Oe];if(_r(gt)&&_r(nn)){if(!oi(gt,nn))return!1}else if(gt!==nn)return!1}for(const Oe of be)if(!Ce.includes(Oe))return!1;return!0}function _r(tt){return null!==tt&&"object"==typeof tt}function sr(tt){const ve=[];for(const[Ce,be]of Object.entries(tt))Array.isArray(be)?be.forEach(Oe=>{ve.push(encodeURIComponent(Ce)+"="+encodeURIComponent(Oe))}):ve.push(encodeURIComponent(Ce)+"="+encodeURIComponent(be));return ve.length?"&"+ve.join("&"):""}function Hn(tt){const ve={};return tt.replace(/^\?/,"").split("&").forEach(be=>{if(be){const[Oe,gt]=be.split("=");ve[decodeURIComponent(Oe)]=decodeURIComponent(gt)}}),ve}function tn(tt){const ve=tt.indexOf("?");if(!ve)return"";const Ce=tt.indexOf("#",ve);return tt.substring(ve,Ce>0?Ce:void 0)}function Ei(tt,ve){const Ce=new ai(tt,ve);return Ce.subscribe.bind(Ce)}class ai{constructor(ve,Ce){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ce,this.task.then(()=>{ve(this)}).catch(be=>{this.error(be)})}next(ve){this.forEachObserver(Ce=>{Ce.next(ve)})}error(ve){this.forEachObserver(Ce=>{Ce.error(ve)}),this.close(ve)}complete(){this.forEachObserver(ve=>{ve.complete()}),this.close()}subscribe(ve,Ce,be){let Oe;if(void 0===ve&&void 0===Ce&&void 0===be)throw new Error("Missing Observer.");Oe=function cs(tt,ve){if("object"!=typeof tt||null===tt)return!1;for(const Ce of ve)if(Ce in tt&&"function"==typeof tt[Ce])return!0;return!1}(ve,["next","error","complete"])?ve:{next:ve,error:Ce,complete:be},void 0===Oe.next&&(Oe.next=Sr),void 0===Oe.error&&(Oe.error=Sr),void 0===Oe.complete&&(Oe.complete=Sr);const gt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Oe.error(this.finalError):Oe.complete()}catch{}}),this.observers.push(Oe),gt}unsubscribeOne(ve){void 0===this.observers||void 0===this.observers[ve]||(delete this.observers[ve],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ve){if(!this.finalized)for(let Ce=0;Ce<this.observers.length;Ce++)this.sendOne(Ce,ve)}sendOne(ve,Ce){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ve])try{Ce(this.observers[ve])}catch(be){typeof console<"u"&&console.error&&console.error(be)}})}close(ve){this.finalized||(this.finalized=!0,void 0!==ve&&(this.finalError=ve),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Sr(){}const Mn=1e3,$i=2,Zi=144e5,Ar=.5;function ni(tt,ve=Mn,Ce=$i){const be=ve*Math.pow(Ce,tt),Oe=Math.round(Ar*be*(Math.random()-.5)*2);return Math.min(Zi,be+Oe)}function Vs(tt){return tt&&tt._delegate?tt._delegate:tt}},4411:(en,ut,X)=>{"use strict";X.d(ut,{Y:()=>Ae});var E=X(5861),N=X(7545),fe=X(4850),Be=X(3426),_e=X(1086),xe=X(6547),He=X(1),Re=X(4941),Ue=X(3884),ye=X(9120);let Ae=(()=>{class Fe{constructor(ce,wt,Ye,Ke){this.db=ce,this.auth=wt,this.storage=Ye,this.router=Ke,this.pageClips=[],this.pendingReq=!1,this.clipsCollection=ce.collection("clips")}createClip(ce){return this.clipsCollection.add(ce)}getUserClips(ce){return(0,Be.aj)([this.auth.user,ce]).pipe((0,N.w)(wt=>{const[Ye,Ke]=wt;return Ye?this.clipsCollection.ref.where("uid","==",Ye.uid).orderBy("timestamp","1"===Ke?"desc":"asc").get():(0,_e.of)([])}),(0,fe.U)(wt=>wt.docs))}updateClip(ce,wt){return this.clipsCollection.doc(ce).update({title:wt})}deleteClip(ce){var wt=this;return(0,E.Z)(function*(){const Ye=wt.storage.ref(`clips/${ce.fileName}`),Ke=wt.storage.ref(`screenshots/${ce.screenshotFileName}`);yield Ye.delete(),yield Ke.delete(),yield wt.clipsCollection.doc(ce.docID).delete()})()}getClips(){var ce=this;return(0,E.Z)(function*(){if(ce.pendingReq)return;ce.pendingReq=!0;let wt=ce.clipsCollection.ref.orderBy("timestamp","desc").limit(15);const{length:Ye}=ce.pageClips;if(Ye){const Ze=ce.pageClips[Ye-1].docID,lt=yield ce.clipsCollection.doc(Ze).get().toPromise();wt=wt.startAfter(lt)}(yield wt.get()).forEach(Ze=>{ce.pageClips.push(Object.assign({docID:Ze.id},Ze.data()))}),ce.pendingReq=!1})()}resolve(ce,wt){return this.clipsCollection.doc(ce.params.id).get().pipe((0,fe.U)(Ye=>Ye.data()||(this.router.navigate(["/"]),null)))}}return Fe.\u0275fac=function(ce){return new(ce||Fe)(xe.LFG(He.ST),xe.LFG(Re.zQ),xe.LFG(Ue.Q1),xe.LFG(ye.F0))},Fe.\u0275prov=xe.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})()},1609:(en,ut,X)=>{"use strict";X.d(ut,{Z:()=>N});var E=X(6547);let N=(()=>{class fe{constructor(){this.modals=[]}register(_e){this.modals.push({id:_e,visible:!1})}unregister(_e){this.modals=this.modals.filter(xe=>xe.id!==_e)}isModalOpen(_e){var xe;return!(null===(xe=this.modals.find(He=>He.id===_e))||void 0===xe||!xe.visible)}toggleModal(_e){const xe=this.modals.find(He=>He.id===_e);xe&&(xe.visible=!xe.visible)}}return fe.\u0275fac=function(_e){return new(_e||fe)},fe.\u0275prov=E.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe})()},8549:(en,ut,X)=>{"use strict";X.d(ut,{w:()=>Be});var E=X(6547),N=X(4755);const fe=["*"];let Be=(()=>{class _e{get bgColor(){return`bg-${this.color}-400`}constructor(){this.color="blue"}ngOnInit(){}}return _e.\u0275fac=function(He){return new(He||_e)},_e.\u0275cmp=E.Xpm({type:_e,selectors:[["app-alert"]],inputs:{color:"color"},ngContentSelectors:fe,decls:2,vars:1,consts:[[1,"text-white","text-center","font-bold","p-4","mb-4","rounded-md",3,"ngClass"]],template:function(He,Re){1&He&&(E.F$t(),E.TgZ(0,"div",0),E.Hsn(1),E.qZA()),2&He&&E.Q6J("ngClass",Re.bgColor)},dependencies:[N.mk]}),_e})()},235:(en,ut,X)=>{"use strict";X.d(ut,{a:()=>ce});var E=X(2142),N=X(6547),fe=X(4755),Be=X(1094);function _e(wt,Ye){1&wt&&(N.TgZ(0,"p",3),N._uU(1," Passwords must be at least 8 characters long, have 1 uppercase letter, 1 lowercase letter, and 1 number. "),N.qZA())}function xe(wt,Ye){1&wt&&(N.TgZ(0,"p",3),N._uU(1," Field is required "),N.qZA())}function He(wt,Ye){if(1&wt&&(N.TgZ(0,"p",3),N._uU(1),N.qZA()),2&wt){const Ke=N.oxw(2);N.xp6(1),N.AsE(" The value you inputted is ",null==Ke.control.errors?null:Ke.control.errors.minlength.actualLength," characters long. It must be at least ",null==Ke.control.errors?null:Ke.control.errors.minlength.requiredLength," characters long. ")}}function Re(wt,Ye){1&wt&&(N.TgZ(0,"p",3),N._uU(1," You must enter a valid email. "),N.qZA())}function Ue(wt,Ye){1&wt&&(N.TgZ(0,"p",3),N._uU(1," Value too low. "),N.qZA())}function ye(wt,Ye){1&wt&&(N.TgZ(0,"p",3),N._uU(1," Value too high. "),N.qZA())}function Ae(wt,Ye){1&wt&&(N.TgZ(0,"p",3),N._uU(1," Passwords do not match. "),N.qZA())}function Fe(wt,Ye){1&wt&&(N.TgZ(0,"p",3),N._uU(1," Email taken. Please try another email. "),N.qZA())}function rt(wt,Ye){if(1&wt&&(N.ynx(0),N.YNc(1,_e,2,0,"p",2),N.YNc(2,xe,2,0,"p",2),N.YNc(3,He,2,2,"p",2),N.YNc(4,Re,2,0,"p",2),N.YNc(5,Ue,2,0,"p",2),N.YNc(6,ye,2,0,"p",2),N.YNc(7,Ae,2,0,"p",2),N.YNc(8,Fe,2,0,"p",2),N.BQk()),2&wt){const Ke=N.oxw();N.xp6(1),N.Q6J("ngIf",null==Ke.control.errors?null:Ke.control.errors.pattern),N.xp6(1),N.Q6J("ngIf",null==Ke.control.errors?null:Ke.control.errors.required),N.xp6(1),N.Q6J("ngIf",null==Ke.control.errors?null:Ke.control.errors.minlength),N.xp6(1),N.Q6J("ngIf",null==Ke.control.errors?null:Ke.control.errors.email),N.xp6(1),N.Q6J("ngIf",null==Ke.control.errors?null:Ke.control.errors.min),N.xp6(1),N.Q6J("ngIf",null==Ke.control.errors?null:Ke.control.errors.max),N.xp6(1),N.Q6J("ngIf",null==Ke.control.errors?null:Ke.control.errors.noMatch),N.xp6(1),N.Q6J("ngIf",null==Ke.control.errors?null:Ke.control.errors.emailTaken)}}let ce=(()=>{class wt{constructor(){this.control=new E.NI,this.type="text",this.placeholder="",this.format=""}ngOnInit(){}}return wt.\u0275fac=function(Ke){return new(Ke||wt)},wt.\u0275cmp=N.Xpm({type:wt,selectors:[["app-input"]],inputs:{control:"control",type:"type",placeholder:"placeholder",format:"format"},decls:2,vars:6,consts:[[1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"formControl","type","placeholder","mask","dropSpecialCharacters"],[4,"ngIf"],["class","text-red-400",4,"ngIf"],[1,"text-red-400"]],template:function(Ke,Ze){1&Ke&&(N._UZ(0,"input",0),N.YNc(1,rt,9,8,"ng-container",1)),2&Ke&&(N.Q6J("formControl",Ze.control)("type",Ze.type)("placeholder",Ze.placeholder)("mask",Ze.format)("dropSpecialCharacters",!1),N.xp6(1),N.Q6J("ngIf",Ze.control.touched&&Ze.control.dirty))},dependencies:[fe.O5,E.Fj,E.JJ,E.oH,Be.Z6]}),wt})()},3446:(en,ut,X)=>{"use strict";X.d(ut,{z:()=>He});var E=X(6547),N=X(1609),fe=X(4755);const Be=[[["","heading",""]],"*"],_e=function(Re){return{hidden:Re}},xe=["[heading]","*"];let He=(()=>{class Re{constructor(ye,Ae){this.modal=ye,this.el=Ae,this.modalID=""}ngOnInit(){document.body.appendChild(this.el.nativeElement)}ngOnDestroy(){document.body.removeChild(this.el.nativeElement)}closeModal(){this.modal.toggleModal(this.modalID)}}return Re.\u0275fac=function(ye){return new(ye||Re)(E.Y36(N.Z),E.Y36(E.SBq))},Re.\u0275cmp=E.Xpm({type:Re,selectors:[["app-modal"]],inputs:{modalID:"modalID"},ngContentSelectors:xe,decls:13,vars:3,consts:[["id","modal",1,"fixed","z-50","inset-0","overflow-y-auto",3,"ngClass"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity",3,"click"],[1,"absolute","inset-0","bg-gray-800","opacity-75"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-secondary","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"py-4","text-left","px-6"],[1,"flex","justify-between","items-center","pb-4"],[1,"modal-close","cursor-pointer","z-50",3,"click"]],template:function(ye,Ae){1&ye&&(E.F$t(Be),E.TgZ(0,"div",0)(1,"div",1)(2,"div",2),E.NdJ("click",function(){return Ae.closeModal()}),E._UZ(3,"div",3),E.qZA(),E.TgZ(4,"span",4),E._uU(5,"\u200b"),E.qZA(),E.TgZ(6,"div",5)(7,"div",6)(8,"div",7),E.Hsn(9),E.TgZ(10,"div",8),E.NdJ("click",function(){return Ae.closeModal()}),E._uU(11," \u2715 "),E.qZA()(),E.Hsn(12,1),E.qZA()()()()),2&ye&&E.Q6J("ngClass",E.VKq(1,_e,!Ae.modal.isModalOpen(Ae.modalID)))},dependencies:[fe.mk]}),Re})()},4466:(en,ut,X)=>{"use strict";X.d(ut,{m:()=>_e});var E=X(4755),N=X(2142),fe=X(1094),Be=X(6547);let _e=(()=>{class xe{}return xe.\u0275fac=function(Re){return new(Re||xe)},xe.\u0275mod=Be.oAB({type:xe}),xe.\u0275inj=Be.cJS({providers:[(0,fe.np)()],imports:[E.ez,N.UX]}),xe})()},2493:(en,ut,X)=>{"use strict";var E=X(6550),N=X(6547),fe=X(5861),Be=X(9120),_e=X(4755),xe=X(4411);let He=(()=>{class g{constructor(a){this.datePipe=a}transform(a){if(!a)return"";const l=a.toDate();return this.datePipe.transform(l,"mediumDate")}}return g.\u0275fac=function(a){return new(a||g)(N.Y36(_e.uU,16))},g.\u0275pipe=N.Yjl({name:"fbTimestamp",type:g,pure:!0}),g})();const Re=function(g){return["/","clip",g]};function Ue(g,u){if(1&g&&(N.TgZ(0,"a",2),N._UZ(1,"img",3),N.TgZ(2,"div",4)(3,"div",5)(4,"div",6),N.O4$(),N.TgZ(5,"svg",7),N._UZ(6,"path",8),N.qZA()()()(),N.kcU(),N.TgZ(7,"div",9)(8,"h2",10),N._uU(9),N.qZA(),N.TgZ(10,"p",11),N._uU(11),N.TgZ(12,"span",12),N._uU(13),N.ALo(14,"fbTimestamp"),N.qZA()()()()),2&g){const a=u.$implicit;N.Q6J("routerLink",N.VKq(7,Re,a.docID)),N.xp6(1),N.Q6J("src",a.screenshotURL,N.LSH),N.xp6(8),N.hij(" ",a.title," "),N.xp6(2),N.hij(" ",a.displayName," \xb7 "),N.xp6(2),N.hij(" ",N.lcZ(14,5,a.timestamp)," ")}}let ye=(()=>{class g{constructor(a){this.clipService=a,this.scrollable=!0,this.handleScroll=()=>{const{scrollTop:l,offsetHeight:n}=document.documentElement,{innerHeight:o}=window;Math.round(l)+o===n&&this.clipService.getClips()},this.clipService.getClips()}ngOnInit(){this.scrollable&&window.addEventListener("scroll",this.handleScroll)}ngOnDestroy(){this.scrollable&&window.removeEventListener("scroll",this.handleScroll),this.clipService.pageClips=[]}}return g.\u0275fac=function(a){return new(a||g)(N.Y36(xe.Y))},g.\u0275cmp=N.Xpm({type:g,selectors:[["app-clips-list"]],inputs:{scrollable:"scrollable"},features:[N._Bn([_e.uU])],decls:2,vars:1,consts:[[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary transform hover:-translate-y-2 hover:shadow-2xl transition duration-300",3,"routerLink",4,"ngFor","ngForOf"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300",3,"routerLink"],["crossorigin","",1,"card-img-top","rounded-tl-2xl","w-full",3,"src"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"]],template:function(a,l){1&a&&(N.TgZ(0,"div",0),N.YNc(1,Ue,15,9,"a",1),N.qZA()),2&a&&(N.xp6(1),N.Q6J("ngForOf",l.clipService.pageClips))},dependencies:[_e.sg,Be.rH,He]}),g})(),Ae=(()=>{class g{constructor(){}ngOnInit(){}}return g.\u0275fac=function(a){return new(a||g)},g.\u0275cmp=N.Xpm({type:g,selectors:[["app-home"]],decls:20,vars:0,consts:[[1,"relative","overflow-hidden","mb-2"],["autoplay","","muted","","loop","",1,"w-full","h-full","object-cover","absolute","z-0"],["src","assets/video/hero.webm","type","video/webm"],[1,"bg-gradient","absolute","w-full","h-full","z-40","opacity-60"],[1,"w-full","h-full","absolute","z-40"],[1,"cube"],[1,"container","mx-auto","relative","z-50"],[1,"text-center","px-20","py-60","w-full","md:w-8/12","mx-auto"],[1,"text-7xl","font-bold","uppercase","mb-2"],[1,"container","mx-auto"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"]],template:function(a,l){1&a&&(N.TgZ(0,"section",0)(1,"video",1),N._UZ(2,"source",2),N.qZA(),N._UZ(3,"div",3),N.TgZ(4,"div",4),N._UZ(5,"div",5)(6,"div",5)(7,"div",5)(8,"div",5)(9,"div",5),N.qZA(),N.TgZ(10,"div",6)(11,"div",7)(12,"h1",8),N._uU(13,"Clip it and ship it!"),N.qZA(),N.TgZ(14,"p"),N._uU(15," The #1 app to watch, clip, and share your awesome gaming moments with your friends and the world! With our world-class tools, we make it incredibly easy to share your videos. Get started today! "),N.qZA()()()(),N.TgZ(16,"section",9)(17,"h1",10),N._uU(18,"Latest"),N.qZA(),N._UZ(19,"app-clips-list"),N.qZA())},dependencies:[ye]}),g})(),Fe=(()=>{class g{constructor(){}ngOnInit(){}}return g.\u0275fac=function(a){return new(a||g)},g.\u0275cmp=N.Xpm({type:g,selectors:[["app-about"]],decls:2,vars:0,consts:[[1,"container","mx-auto","mt-4"]],template:function(a,l){1&a&&(N.TgZ(0,"p",0),N._uU(1," This is a basic about page to demonstrate basic routing capabilities.\n"),N.qZA())}}),g})();var rt=X(9226),ce=X.n(rt),wt=X(1421),Ye=X.n(wt);function Ke(){return Ke=Object.assign?Object.assign.bind():function(g){for(var u=1;u<arguments.length;u++){var a=arguments[u];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(g[l]=a[l])}return g},Ke.apply(this,arguments)}var Ze=X(1234),lt=X.n(Ze);function q(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function ge(g,u){return(ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,n){return l.__proto__=n,l})(g,u)}function re(g,u){g.prototype=Object.create(u.prototype),g.prototype.constructor=g,ge(g,u)}var Ct=X(8099),bt=X.n(Ct),st=X(745),Y=X.n(st),Te=X(3629),Xe=X.n(Te);function Rt(g,u,a){return(Rt=function ot(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(n,o,h){var _=[null];_.push.apply(_,o);var A=new(Function.bind.apply(n,_));return h&&ge(A,h.prototype),A}).apply(null,arguments)}var Wt=X(3871),Sn=X.n(Wt);const an=function(u,a){if(/^[a-z]+:/i.test(a))return a;/^data:/.test(u)&&(u=ce().location&&ce().location.href||"");var l="function"==typeof ce().URL,n=/^\/\//.test(u),o=!ce().location&&!/\/\//i.test(u);if(l?u=new(ce().URL)(u,ce().location||"http://example.com"):/\/\//i.test(u)||(u=Sn().buildAbsoluteURL(ce().location&&ce().location.href||"",u)),l){var h=new URL(a,u);return o?h.href.slice(18):n?h.href.slice(h.protocol.length):h.href}return Sn().buildAbsoluteURL(u,a)};var Ut=function(){function g(){this.listeners={}}var u=g.prototype;return u.on=function(l,n){this.listeners[l]||(this.listeners[l]=[]),this.listeners[l].push(n)},u.off=function(l,n){if(!this.listeners[l])return!1;var o=this.listeners[l].indexOf(n);return this.listeners[l]=this.listeners[l].slice(0),this.listeners[l].splice(o,1),o>-1},u.trigger=function(l){var n=this.listeners[l];if(n)if(2===arguments.length)for(var o=n.length,h=0;h<o;++h)n[h].call(this,arguments[1]);else for(var _=Array.prototype.slice.call(arguments,1),C=n.length,A=0;A<C;++A)n[A].apply(this,_)},u.dispose=function(){this.listeners={}},u.pipe=function(l){this.on("data",function(n){l.push(n)})},g}();function qt(g){for(var u=function(u){return ce().atob?ce().atob(u):Buffer.from(u,"base64").toString("binary")}(g),a=new Uint8Array(u.length),l=0;l<u.length;l++)a[l]=u.charCodeAt(l);return a}var g,Qs,En=function(g){function u(){var l;return(l=g.call(this)||this).buffer="",l}return re(u,g),u.prototype.push=function(n){var o;for(this.buffer+=n,o=this.buffer.indexOf("\n");o>-1;o=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,o)),this.buffer=this.buffer.substring(o+1)},u}(Ut),on=String.fromCharCode(9),Jt=function(u){var a=/([0-9.]*)?@?([0-9.]*)?/.exec(u||""),l={};return a[1]&&(l.length=parseInt(a[1],10)),a[2]&&(l.offset=parseInt(a[2],10)),l},Cn=function(u){for(var o,a=u.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),l={},n=a.length;n--;)""!==a[n]&&((o=/([^=]*)=(.*)/.exec(a[n]).slice(1))[0]=o[0].replace(/^\s+|\s+$/g,""),o[1]=o[1].replace(/^\s+|\s+$/g,""),o[1]=o[1].replace(/^['"](.*)['"]$/g,"$1"),l[o[0]]=o[1]);return l},pr=function(g){function u(){var l;return(l=g.call(this)||this).customParsers=[],l.tagMappers=[],l}re(u,g);var a=u.prototype;return a.push=function(n){var h,_,o=this;if(0!==(n=n.trim()).length){if("#"!==n[0])return void this.trigger("data",{type:"uri",uri:n});this.tagMappers.reduce(function(A,j){var te=j(n);return te===n?A:A.concat([te])},[n]).forEach(function(A){for(var j=0;j<o.customParsers.length;j++)if(o.customParsers[j].call(o,A))return;if(0===A.indexOf("#EXT"))if(A=A.replace("\r",""),h=/^#EXTM3U/.exec(A))o.trigger("data",{type:"tag",tagType:"m3u"});else{if(h=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(A))return _={type:"tag",tagType:"inf"},h[1]&&(_.duration=parseFloat(h[1])),h[2]&&(_.title=h[2]),void o.trigger("data",_);if(h=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(A))return _={type:"tag",tagType:"targetduration"},h[1]&&(_.duration=parseInt(h[1],10)),void o.trigger("data",_);if(h=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(A))return _={type:"tag",tagType:"version"},h[1]&&(_.version=parseInt(h[1],10)),void o.trigger("data",_);if(h=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(A))return _={type:"tag",tagType:"media-sequence"},h[1]&&(_.number=parseInt(h[1],10)),void o.trigger("data",_);if(h=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(A))return _={type:"tag",tagType:"discontinuity-sequence"},h[1]&&(_.number=parseInt(h[1],10)),void o.trigger("data",_);if(h=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(A))return _={type:"tag",tagType:"playlist-type"},h[1]&&(_.playlistType=h[1]),void o.trigger("data",_);if(h=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(A))return _=Ke(Jt(h[1]),{type:"tag",tagType:"byterange"}),void o.trigger("data",_);if(h=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(A))return _={type:"tag",tagType:"allow-cache"},h[1]&&(_.allowed=!/NO/.test(h[1])),void o.trigger("data",_);if(h=/^#EXT-X-MAP:?(.*)$/.exec(A)){if(_={type:"tag",tagType:"map"},h[1]){var te=Cn(h[1]);te.URI&&(_.uri=te.URI),te.BYTERANGE&&(_.byterange=Jt(te.BYTERANGE))}o.trigger("data",_)}else if(h=/^#EXT-X-STREAM-INF:?(.*)$/.exec(A)){if(_={type:"tag",tagType:"stream-inf"},h[1]){if(_.attributes=Cn(h[1]),_.attributes.RESOLUTION){var Q=_.attributes.RESOLUTION.split("x"),Se={};Q[0]&&(Se.width=parseInt(Q[0],10)),Q[1]&&(Se.height=parseInt(Q[1],10)),_.attributes.RESOLUTION=Se}_.attributes.BANDWIDTH&&(_.attributes.BANDWIDTH=parseInt(_.attributes.BANDWIDTH,10)),_.attributes["FRAME-RATE"]&&(_.attributes["FRAME-RATE"]=parseFloat(_.attributes["FRAME-RATE"])),_.attributes["PROGRAM-ID"]&&(_.attributes["PROGRAM-ID"]=parseInt(_.attributes["PROGRAM-ID"],10))}o.trigger("data",_)}else{if(h=/^#EXT-X-MEDIA:?(.*)$/.exec(A))return _={type:"tag",tagType:"media"},h[1]&&(_.attributes=Cn(h[1])),void o.trigger("data",_);if(h=/^#EXT-X-ENDLIST/.exec(A))o.trigger("data",{type:"tag",tagType:"endlist"});else{if(!(h=/^#EXT-X-DISCONTINUITY/.exec(A)))return(h=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(A))?(_={type:"tag",tagType:"program-date-time"},h[1]&&(_.dateTimeString=h[1],_.dateTimeObject=new Date(h[1])),void o.trigger("data",_)):(h=/^#EXT-X-KEY:?(.*)$/.exec(A))?(_={type:"tag",tagType:"key"},h[1]&&(_.attributes=Cn(h[1]),_.attributes.IV&&("0x"===_.attributes.IV.substring(0,2).toLowerCase()&&(_.attributes.IV=_.attributes.IV.substring(2)),_.attributes.IV=_.attributes.IV.match(/.{8}/g),_.attributes.IV[0]=parseInt(_.attributes.IV[0],16),_.attributes.IV[1]=parseInt(_.attributes.IV[1],16),_.attributes.IV[2]=parseInt(_.attributes.IV[2],16),_.attributes.IV[3]=parseInt(_.attributes.IV[3],16),_.attributes.IV=new Uint32Array(_.attributes.IV))),void o.trigger("data",_)):(h=/^#EXT-X-START:?(.*)$/.exec(A))?(_={type:"tag",tagType:"start"},h[1]&&(_.attributes=Cn(h[1]),_.attributes["TIME-OFFSET"]=parseFloat(_.attributes["TIME-OFFSET"]),_.attributes.PRECISE=/YES/.test(_.attributes.PRECISE)),void o.trigger("data",_)):(h=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(A))?((_={type:"tag",tagType:"cue-out-cont"}).data=h[1]?h[1]:"",void o.trigger("data",_)):(h=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(A))?((_={type:"tag",tagType:"cue-out"}).data=h[1]?h[1]:"",void o.trigger("data",_)):(h=/^#EXT-X-CUE-IN:?(.*)?$/.exec(A))?((_={type:"tag",tagType:"cue-in"}).data=h[1]?h[1]:"",void o.trigger("data",_)):(h=/^#EXT-X-SKIP:(.*)$/.exec(A))&&h[1]?((_={type:"tag",tagType:"skip"}).attributes=Cn(h[1]),_.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(_.attributes["SKIPPED-SEGMENTS"]=parseInt(_.attributes["SKIPPED-SEGMENTS"],10)),_.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(_.attributes["RECENTLY-REMOVED-DATERANGES"]=_.attributes["RECENTLY-REMOVED-DATERANGES"].split(on)),void o.trigger("data",_)):(h=/^#EXT-X-PART:(.*)$/.exec(A))&&h[1]?((_={type:"tag",tagType:"part"}).attributes=Cn(h[1]),["DURATION"].forEach(function(je){_.attributes.hasOwnProperty(je)&&(_.attributes[je]=parseFloat(_.attributes[je]))}),["INDEPENDENT","GAP"].forEach(function(je){_.attributes.hasOwnProperty(je)&&(_.attributes[je]=/YES/.test(_.attributes[je]))}),_.attributes.hasOwnProperty("BYTERANGE")&&(_.attributes.byterange=Jt(_.attributes.BYTERANGE)),void o.trigger("data",_)):(h=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(A))&&h[1]?((_={type:"tag",tagType:"server-control"}).attributes=Cn(h[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(je){_.attributes.hasOwnProperty(je)&&(_.attributes[je]=parseFloat(_.attributes[je]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(je){_.attributes.hasOwnProperty(je)&&(_.attributes[je]=/YES/.test(_.attributes[je]))}),void o.trigger("data",_)):(h=/^#EXT-X-PART-INF:(.*)$/.exec(A))&&h[1]?((_={type:"tag",tagType:"part-inf"}).attributes=Cn(h[1]),["PART-TARGET"].forEach(function(je){_.attributes.hasOwnProperty(je)&&(_.attributes[je]=parseFloat(_.attributes[je]))}),void o.trigger("data",_)):(h=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(A))&&h[1]?((_={type:"tag",tagType:"preload-hint"}).attributes=Cn(h[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(je){if(_.attributes.hasOwnProperty(je)){_.attributes[je]=parseInt(_.attributes[je],10);var We="BYTERANGE-LENGTH"===je?"length":"offset";_.attributes.byterange=_.attributes.byterange||{},_.attributes.byterange[We]=_.attributes[je],delete _.attributes[je]}}),void o.trigger("data",_)):(h=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(A))&&h[1]?((_={type:"tag",tagType:"rendition-report"}).attributes=Cn(h[1]),["LAST-MSN","LAST-PART"].forEach(function(je){_.attributes.hasOwnProperty(je)&&(_.attributes[je]=parseInt(_.attributes[je],10))}),void o.trigger("data",_)):void o.trigger("data",{type:"tag",data:A.slice(4)});o.trigger("data",{type:"tag",tagType:"discontinuity"})}}}else o.trigger("data",{type:"comment",text:A.slice(1)})})}},a.addParser=function(n){var o=this,h=n.expression,_=n.customType,C=n.dataParser,A=n.segment;"function"!=typeof C&&(C=function(te){return te}),this.customParsers.push(function(j){if(h.exec(j))return o.trigger("data",{type:"custom",data:C(j),customType:_,segment:A}),!0})},a.addTagMapper=function(n){var o=n.expression,h=n.map;this.tagMappers.push(function(A){return o.test(A)?h(A):A})},u}(Ut),kr=function(u){var a={};return Object.keys(u).forEach(function(l){a[function(u){return u.toLowerCase().replace(/-(\w)/g,function(a){return a[1].toUpperCase()})}(l)]=u[l]}),a},On=function(u){var a=u.serverControl,l=u.targetDuration,n=u.partTargetDuration;if(a){var o="#EXT-X-SERVER-CONTROL",h="holdBack",_="partHoldBack",C=l&&3*l,A=n&&2*n;l&&!a.hasOwnProperty(h)&&(a[h]=C,this.trigger("info",{message:o+" defaulting HOLD-BACK to targetDuration * 3 ("+C+")."})),C&&a[h]<C&&(this.trigger("warn",{message:o+" clamping HOLD-BACK ("+a[h]+") to targetDuration * 3 ("+C+")"}),a[h]=C),n&&!a.hasOwnProperty(_)&&(a[_]=3*n,this.trigger("info",{message:o+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+a[_]+")."})),n&&a[_]<A&&(this.trigger("warn",{message:o+" clamping PART-HOLD-BACK ("+a[_]+") to partTargetDuration * 2 ("+A+")."}),a[_]=A)}},Ai=function(g){function u(){var l;(l=g.call(this)||this).lineStream=new En,l.parseStream=new pr,l.lineStream.pipe(l.parseStream);var _,C,n=q(l),o=[],h={},A=!1,j=function(){},te={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},Se=0;l.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var je=0,We=0;return l.on("end",function(){h.uri||!h.parts&&!h.preloadHints||(!h.map&&_&&(h.map=_),!h.key&&C&&(h.key=C),!h.timeline&&"number"==typeof Se&&(h.timeline=Se),l.manifest.preloadSegment=h)}),l.parseStream.on("data",function($e){var kt,pn;({tag:function(){({version:function(){$e.version&&(this.manifest.version=$e.version)},"allow-cache":function(){this.manifest.allowCache=$e.allowed,"allowed"in $e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var rn={};"length"in $e&&(h.byterange=rn,rn.length=$e.length,"offset"in $e||($e.offset=je)),"offset"in $e&&(h.byterange=rn,rn.offset=$e.offset),je=rn.offset+rn.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),$e.duration>0&&(h.duration=$e.duration),0===$e.duration&&(h.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){if($e.attributes)if("NONE"!==$e.attributes.METHOD)if($e.attributes.URI){if("com.apple.streamingkeydelivery"===$e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:$e.attributes});if("com.microsoft.playready"===$e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:$e.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===$e.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf($e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===$e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==$e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):$e.attributes.KEYID&&"0x"===$e.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:$e.attributes.KEYFORMAT,keyId:$e.attributes.KEYID.substring(2)},pssh:qt($e.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));$e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),C={method:$e.attributes.METHOD||"AES-128",uri:$e.attributes.URI},typeof $e.attributes.IV<"u"&&(C.iv=$e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else C=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite($e.number)?this.manifest.mediaSequence=$e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+$e.number})},"discontinuity-sequence":function(){isFinite($e.number)?(this.manifest.discontinuitySequence=$e.number,Se=$e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+$e.number})},"playlist-type":function(){/VOD|EVENT/.test($e.playlistType)?this.manifest.playlistType=$e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+$e.playlist})},map:function(){_={},$e.uri&&(_.uri=$e.uri),$e.byterange&&(_.byterange=$e.byterange),C&&(_.key=C)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||te,$e.attributes?(h.attributes||(h.attributes={}),Ke(h.attributes,$e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||te,$e.attributes&&$e.attributes.TYPE&&$e.attributes["GROUP-ID"]&&$e.attributes.NAME){var rn=this.manifest.mediaGroups[$e.attributes.TYPE];rn[$e.attributes["GROUP-ID"]]=rn[$e.attributes["GROUP-ID"]]||{},kt=rn[$e.attributes["GROUP-ID"]],(pn={default:/yes/i.test($e.attributes.DEFAULT)}).autoselect=!!pn.default||/yes/i.test($e.attributes.AUTOSELECT),$e.attributes.LANGUAGE&&(pn.language=$e.attributes.LANGUAGE),$e.attributes.URI&&(pn.uri=$e.attributes.URI),$e.attributes["INSTREAM-ID"]&&(pn.instreamId=$e.attributes["INSTREAM-ID"]),$e.attributes.CHARACTERISTICS&&(pn.characteristics=$e.attributes.CHARACTERISTICS),$e.attributes.FORCED&&(pn.forced=/yes/i.test($e.attributes.FORCED)),kt[$e.attributes.NAME]=pn}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){Se+=1,h.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=$e.dateTimeString,this.manifest.dateTimeObject=$e.dateTimeObject),h.dateTimeString=$e.dateTimeString,h.dateTimeObject=$e.dateTimeObject},targetduration:function(){!isFinite($e.duration)||$e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+$e.duration}):(this.manifest.targetDuration=$e.duration,On.call(this,this.manifest))},start:function(){$e.attributes&&!isNaN($e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:$e.attributes["TIME-OFFSET"],precise:$e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){h.cueOut=$e.data},"cue-out-cont":function(){h.cueOutCont=$e.data},"cue-in":function(){h.cueIn=$e.data},skip:function(){this.manifest.skip=kr($e.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",$e.attributes,["SKIPPED-SEGMENTS"])},part:function(){var rn=this;A=!0;var xn=this.manifest.segments.length,ln=kr($e.attributes);h.parts=h.parts||[],h.parts.push(ln),ln.byterange&&(ln.byterange.hasOwnProperty("offset")||(ln.byterange.offset=We),We=ln.byterange.offset+ln.byterange.length),this.warnOnMissingAttributes_("#EXT-X-PART #"+(h.parts.length-1)+" for segment #"+xn,$e.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(Dn,hn){Dn.hasOwnProperty("lastPart")||rn.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+hn+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var rn=this.manifest.serverControl=kr($e.attributes);rn.hasOwnProperty("canBlockReload")||(rn.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),On.call(this,this.manifest),rn.canSkipDateranges&&!rn.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var rn=this.manifest.segments.length,xn=kr($e.attributes),ln=xn.type&&"PART"===xn.type;h.preloadHints=h.preloadHints||[],h.preloadHints.push(xn),xn.byterange&&(xn.byterange.hasOwnProperty("offset")||(xn.byterange.offset=ln?We:0,ln&&(We=xn.byterange.offset+xn.byterange.length)));var sn=h.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+sn+" for segment #"+rn,$e.attributes,["TYPE","URI"]),xn.type)for(var Dn=0;Dn<h.preloadHints.length-1;Dn++){var hn=h.preloadHints[Dn];hn.type&&hn.type===xn.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+sn+" for segment #"+rn+" has the same TYPE "+xn.type+" as preload hint #"+Dn})}},"rendition-report":function(){var rn=kr($e.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(rn);var xn=this.manifest.renditionReports.length-1,ln=["LAST-MSN","URI"];A&&ln.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+xn,$e.attributes,ln)},"part-inf":function(){this.manifest.partInf=kr($e.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",$e.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),On.call(this,this.manifest)}}[$e.tagType]||j).call(n)},uri:function(){h.uri=$e.uri,o.push(h),this.manifest.targetDuration&&!("duration"in h)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),h.duration=this.manifest.targetDuration),C&&(h.key=C),h.timeline=Se,_&&(h.map=_),We=0,h={}},comment:function(){},custom:function(){$e.segment?(h.custom=h.custom||{},h.custom[$e.customType]=$e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[$e.customType]=$e.data)}})[$e.type].call(n)}),l}re(u,g);var a=u.prototype;return a.warnOnMissingAttributes_=function(n,o,h){var _=[];h.forEach(function(C){o.hasOwnProperty(C)||_.push(C)}),_.length&&this.trigger("warn",{message:n+" lacks required attribute(s): "+_.join(", ")})},a.push=function(n){this.lineStream.push(n)},a.end=function(){this.lineStream.push("\n"),this.trigger("end")},a.addParser=function(n){this.parseStream.addParser(n)},a.addTagMapper=function(n){this.parseStream.addTagMapper(n)},u}(Ut),In={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},Tr=["video","audio","text"],Rr=["Video","Audio","Text"],ir=function(u){return u&&u.replace(/avc1\.(\d+)\.(\d+)/i,function(a,l,n){return"avc1."+("00"+Number(l).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})},_r=function(u){void 0===u&&(u="");var a=u.split(","),l=[];return a.forEach(function(n){var o;n=n.trim(),Tr.forEach(function(h){var _=In[h].exec(n.toLowerCase());if(_&&!(_.length<=1)){o=h;var C=n.substring(0,_[1].length),A=n.replace(C,"");l.push({type:C,details:A,mediaType:h})}}),o||l.push({type:n,details:"",mediaType:"unknown"})}),l},Hn=function(u){return void 0===u&&(u=""),In.audio.test(u.trim().toLowerCase())},Rn=function(u){if(u&&"string"==typeof u){var a=u.toLowerCase().split(",").map(function(o){return ir(o.trim())}),l="video";1===a.length&&Hn(a[0])?l="audio":1===a.length&&function(u){return void 0===u&&(u=""),In.text.test(u.trim().toLowerCase())}(a[0])&&(l="application");var n="mp4";return a.every(function(o){return In.mp4.test(o)})?n="mp4":a.every(function(o){return In.webm.test(o)})?n="webm":a.every(function(o){return In.ogg.test(o)})&&(n="ogg"),l+"/"+n+';codecs="'+u+'"'}},Ei=function(u){return void 0===u&&(u=""),ce().MediaSource&&ce().MediaSource.isTypeSupported&&ce().MediaSource.isTypeSupported(Rn(u))||!1},ai=function(u){return void 0===u&&(u=""),u.toLowerCase().split(",").every(function(a){a=a.trim();for(var l=0;l<Rr.length;l++)if(In["muxer"+Rr[l]].test(a))return!0;return!1})},Oi="mp4a.40.2",Sr=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,fo=/^application\/dash\+xml/i,Kr=function(u){return Sr.test(u)?"hls":fo.test(u)?"dash":"application/vnd.videojs.vhs+json"===u?"vhs-json":null},Si=function(u){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(u):u&&u.buffer instanceof ArrayBuffer},Mn=function(u){return u instanceof Uint8Array?u:(!Array.isArray(u)&&!function(u){return Si(u)}(u)&&!(u instanceof ArrayBuffer)&&(u="number"!=typeof u||"number"==typeof u&&u!=u?0:[u]),new Uint8Array(u&&u.buffer||u,u&&u.byteOffset||0,u&&u.byteLength||0))},Ar=ce().BigInt||Number,ni=[Ar("0x1"),Ar("0x100"),Ar("0x10000"),Ar("0x1000000"),Ar("0x100000000"),Ar("0x10000000000"),Ar("0x1000000000000"),Ar("0x100000000000000"),Ar("0x10000000000000000")],tt=(g=new Uint16Array([65484]),new Uint8Array(g.buffer,g.byteOffset,g.byteLength),function(u,a){var l=void 0===a?{}:a,n=l.signed,o=void 0!==n&&n,h=l.le,_=void 0!==h&&h;u=Mn(u);var C=_?"reduce":"reduceRight",j=(u[C]?u[C]:Array.prototype[C]).call(u,function(Q,Se,je){var We=_?je:Math.abs(je+1-u.length);return Q+Ar(Se)*ni[We]},Ar(0));if(o){var te=ni[u.length]/Ar(2)-Ar(1);(j=Ar(j))>te&&(j-=te,j-=te,j-=Ar(2))}return Number(j)}),be=function(u,a){if("string"!=typeof u&&u&&"function"==typeof u.toString&&(u=u.toString()),"string"!=typeof u)return new Uint8Array;a||(u=unescape(encodeURIComponent(u)));for(var l=new Uint8Array(u.length),n=0;n<u.length;n++)l[n]=u.charCodeAt(n);return l},gt=function(u,a,l){var n=void 0===l?{}:l,o=n.offset,h=void 0===o?0:o,_=n.mask,C=void 0===_?[]:_;return u=Mn(u),(a=Mn(a)).length&&u.length-h>=a.length&&(a.every?a.every:Array.prototype.every).call(a,function(j,te){return j===(C[te]?C[te]&u[h+te]:u[h+te])})},Ee=X(978),ct=function(u){return!!u&&"object"==typeof u},Gt=function g(){for(var u=arguments.length,a=new Array(u),l=0;l<u;l++)a[l]=arguments[l];return a.reduce(function(n,o){return"object"!=typeof o||Object.keys(o).forEach(function(h){n[h]=Array.isArray(n[h])&&Array.isArray(o[h])?n[h].concat(o[h]):ct(n[h])&&ct(o[h])?g(n[h],o[h]):o[h]}),n},{})},ar=function(u){return Object.keys(u).map(function(a){return u[a]})},ii=function(u){return u.reduce(function(a,l){return a.concat(l)},[])},Dt=function(u){if(!u.length)return[];for(var a=[],l=0;l<u.length;l++)a.push(u[l]);return a},Kt=function(u,a){for(var l=0;l<u.length;l++)if(a(u[l]))return l;return-1},cr=function(u){var a=u.baseUrl,n=u.source,o=void 0===n?"":n,h=u.range,_=void 0===h?"":h,C=u.indexRange,A=void 0===C?"":C,j={uri:o,resolvedUri:an((void 0===a?"":a)||"",o)};if(_||A){var We,Q=(_||A).split("-"),Se=ce().BigInt?ce().BigInt(Q[0]):parseInt(Q[0],10),je=ce().BigInt?ce().BigInt(Q[1]):parseInt(Q[1],10);Se<Number.MAX_SAFE_INTEGER&&"bigint"==typeof Se&&(Se=Number(Se)),je<Number.MAX_SAFE_INTEGER&&"bigint"==typeof je&&(je=Number(je)),"bigint"==typeof(We="bigint"==typeof je||"bigint"==typeof Se?ce().BigInt(je)-ce().BigInt(Se)+ce().BigInt(1):je-Se+1)&&We<Number.MAX_SAFE_INTEGER&&(We=Number(We)),j.byterange={length:We,offset:Se}}return j},Fr=function(u){return u&&"number"!=typeof u&&(u=parseInt(u,10)),isNaN(u)?null:u},si={static:function(u){var a=u.duration,l=u.timescale,n=void 0===l?1:l,o=u.sourceDuration,h=u.periodDuration,_=Fr(u.endNumber),C=a/n;return"number"==typeof _?{start:0,end:_}:"number"==typeof h?{start:0,end:h/C}:{start:0,end:o/C}},dynamic:function(u){var a=u.NOW,l=u.clientOffset,n=u.availabilityStartTime,o=u.timescale,h=void 0===o?1:o,_=u.duration,C=u.periodStart,A=void 0===C?0:C,j=u.minimumUpdatePeriod,te=void 0===j?0:j,Q=u.timeShiftBufferDepth,Se=void 0===Q?1/0:Q,je=Fr(u.endNumber),We=(a+l)/1e3,$e=n+A,jn=Math.ceil((We+te-$e)*h/_),Zt=Math.floor((We-$e-Se)*h/_),rn=Math.floor((We-$e)*h/_);return{start:Math.max(0,Zt),end:"number"==typeof je?je:Math.min(jn,rn)}}},Ji=function(u){var a=u.type,l=u.duration,n=u.timescale,o=void 0===n?1:n,h=u.periodDuration,_=u.sourceDuration,C=si[a](u),te=function(u,a){for(var l=[],n=u;n<a;n++)l.push(n);return l}(C.start,C.end).map(function(u){return function(a){var l=u.duration,n=u.timescale,_=u.startNumber;return{number:(void 0===_?1:_)+a,duration:l/(void 0===n?1:n),timeline:u.periodStart,time:a*l}}}(u));if("static"===a){var Q=te.length-1;te[Q].duration=("number"==typeof h?h:_)-l/o*Q}return te},Fi=function(u){var a=u.baseUrl,l=u.initialization,n=void 0===l?{}:l,o=u.sourceDuration,h=u.indexRange,_=void 0===h?"":h,C=u.periodStart,A=u.presentationTime,j=u.number,te=void 0===j?0:j,Q=u.duration;if(!a)throw new Error("NO_BASE_URL");var Se=cr({baseUrl:a,source:n.sourceURL,range:n.range}),je=cr({baseUrl:a,source:a,indexRange:_});if(je.map=Se,Q){var We=Ji(u);We.length&&(je.duration=We[0].duration,je.timeline=We[0].timeline)}else o&&(je.duration=o,je.timeline=C);return je.presentationTime=A||C,je.number=te,[je]},po=function(u,a,l){var $e,n=u.sidx.map?u.sidx.map:null,o=u.sidx.duration,h=u.timeline||0,_=u.sidx.byterange,C=_.offset+_.length,A=a.timescale,j=a.references.filter(function(Dn){return 1!==Dn.referenceType}),te=[],Q=u.endList?"static":"dynamic",Se=u.sidx.timeline,je=Se,We=u.mediaSequence||0;$e="bigint"==typeof a.firstOffset?ce().BigInt(C)+a.firstOffset:C+a.firstOffset;for(var kt=0;kt<j.length;kt++){var rn,pn=a.references[kt],jn=pn.referencedSize,Zt=pn.subsegmentDuration;rn="bigint"==typeof $e?$e+ce().BigInt(jn)-ce().BigInt(1):$e+jn-1;var sn=Fi({baseUrl:l,timescale:A,timeline:h,periodStart:Se,presentationTime:je,number:We,duration:Zt,sourceDuration:o,indexRange:$e+"-"+rn,type:Q})[0];n&&(sn.map=n),te.push(sn),$e+="bigint"==typeof $e?ce().BigInt(jn):jn,je+=Zt/A,We++}return u.segments=te,u},go=["AUDIO","SUBTITLES"],Zs=function(u){return function(u,a){return ar(u.reduce(function(l,n){return n.forEach(function(o){l[function(a){return a.timeline}(o)]=o}),l},{}))}(u).sort(function(a,l){return a.timeline>l.timeline?1:-1})},Hs=function(u){var a=[];return function(u,a,l){a.forEach(function(n){for(var o in u.mediaGroups[n])for(var h in u.mediaGroups[n][o])l(u.mediaGroups[n][o][h])})}(u,go,function(l,n,o,h){a=a.concat(l.playlists||[])}),a},Lo=function(u){var a=u.playlist;a.mediaSequence=u.mediaSequence,a.segments.forEach(function(n,o){n.number=a.mediaSequence+o})},$s=function(u){return u&&u.uri+"-"+function(u){var a;return a="bigint"==typeof u.offset||"bigint"==typeof u.length?ce().BigInt(u.offset)+ce().BigInt(u.length)-ce().BigInt(1):u.offset+u.length-1,u.offset+"-"+a}(u.byterange)},sa=function(u){return ar(u.reduce(function(l,n){var h,o=n.attributes.id+(n.attributes.lang||"");l[o]?(n.segments&&(n.segments[0]&&(n.segments[0].discontinuity=!0),(h=l[o].segments).push.apply(h,n.segments)),n.attributes.contentProtection&&(l[o].attributes.contentProtection=n.attributes.contentProtection)):(l[o]=n,l[o].attributes.timelineStarts=[]);return l[o].attributes.timelineStarts.push({start:n.attributes.periodStart,timeline:n.attributes.periodStart}),l},{})).map(function(l){return l.discontinuityStarts=function(u,a){return u.reduce(function(l,n,o){return n.discontinuity&&l.push(o),l},[])}(l.segments||[]),l})},mo=function(u,a){var l=$s(u.sidx),n=l&&a[l]&&a[l].sidx;return n&&po(u,n,u.sidx.resolvedUri),u},Wi=function(u,a){if(void 0===a&&(a={}),!Object.keys(a).length)return u;for(var l in u)u[l]=mo(u[l],a);return u},Gs=function(u){var a,l=u.attributes,n=u.segments,o=u.sidx,h=u.discontinuityStarts,_={attributes:(a={NAME:l.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:l.width,height:l.height},CODECS:l.codecs,BANDWIDTH:l.bandwidth},a["PROGRAM-ID"]=1,a),uri:"",endList:"static"===l.type,timeline:l.periodStart,resolvedUri:"",targetDuration:l.duration,discontinuityStarts:h,timelineStarts:l.timelineStarts,segments:n};return l.frameRate&&(_.attributes["FRAME-RATE"]=l.frameRate),l.contentProtection&&(_.contentProtection=l.contentProtection),o&&(_.sidx=o),_},mu=function(u){var a=u.attributes;return"video/mp4"===a.mimeType||"video/webm"===a.mimeType||"video"===a.contentType},ba=function(u){var a=u.attributes;return"audio/mp4"===a.mimeType||"audio/webm"===a.mimeType||"audio"===a.contentType},Is=function(u){var a=u.attributes;return"text/vtt"===a.mimeType||"text"===a.contentType},gi=function(u){return u?Object.keys(u).reduce(function(a,l){return a.concat(u[l].playlists)},[]):[]},wi=function(u){var a,l=u.dashPlaylists,n=u.locations,o=u.sidxMapping,h=void 0===o?{}:o,_=u.previousManifest;if(!l.length)return{};var C=l[0].attributes,A=C.sourceDuration,j=C.type,te=C.suggestedPresentationDelay,Q=C.minimumUpdatePeriod,Se=sa(l.filter(mu)).map(Gs),je=sa(l.filter(ba)),We=sa(l.filter(Is)),$e=l.map(function(ln){return ln.attributes.captionServices}).filter(Boolean),kt={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(a={AUDIO:{},VIDEO:{}},a["CLOSED-CAPTIONS"]={},a.SUBTITLES={},a),uri:"",duration:A,playlists:Wi(Se,h)};Q>=0&&(kt.minimumUpdatePeriod=1e3*Q),n&&(kt.locations=n),"dynamic"===j&&(kt.suggestedPresentationDelay=te);var jn=je.length?function(u,a,l){void 0===a&&(a={}),void 0===l&&(l=!1);var n,o=u.reduce(function(_,C){var A=C.attributes.role&&C.attributes.role.value||"",j=C.attributes.lang||"",te=C.attributes.label||"main";j&&!C.attributes.label&&(te=C.attributes.lang+(A?" ("+A+")":"")),_[te]||(_[te]={language:j,autoselect:!0,default:"main"===A,playlists:[],uri:""});var Se=mo(function(u,a){var l,n=u.attributes,o=u.segments,h=u.sidx,_=u.mediaSequence,C=u.discontinuitySequence,A=u.discontinuityStarts,j={attributes:(l={NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs},l["PROGRAM-ID"]=1,l),uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuitySequence:C,discontinuityStarts:A,timelineStarts:n.timelineStarts,mediaSequence:_,segments:o};return n.contentProtection&&(j.contentProtection=n.contentProtection),h&&(j.sidx=h),a&&(j.attributes.AUDIO="audio",j.attributes.SUBTITLES="subs"),j}(C,l),a);return _[te].playlists.push(Se),typeof n>"u"&&"main"===A&&((n=C).default=!0),_},{});return n||(o[Object.keys(o)[0]].default=!0),o}(je,h,0===kt.playlists.length):null,Zt=We.length?function(u,a){return void 0===a&&(a={}),u.reduce(function(l,n){var o=n.attributes.lang||"text";return l[o]||(l[o]={language:o,default:!1,autoselect:!1,playlists:[],uri:""}),l[o].playlists.push(mo(function(u){var a,l=u.attributes,n=u.segments,o=u.mediaSequence,h=u.discontinuityStarts,_=u.discontinuitySequence;typeof n>"u"&&(n=[{uri:l.baseUrl,timeline:l.periodStart,resolvedUri:l.baseUrl||"",duration:l.sourceDuration,number:0}],l.duration=l.sourceDuration);var C=((a={NAME:l.id,BANDWIDTH:l.bandwidth})["PROGRAM-ID"]=1,a);return l.codecs&&(C.CODECS=l.codecs),{attributes:C,uri:"",endList:"static"===l.type,timeline:l.periodStart,resolvedUri:l.baseUrl||"",targetDuration:l.duration,timelineStarts:l.timelineStarts,discontinuityStarts:h,discontinuitySequence:_,mediaSequence:o,segments:n}}(n),a)),l},{})}(We,h):null,rn=Se.concat(gi(jn),gi(Zt)),xn=rn.map(function(ln){return ln.timelineStarts});return kt.timelineStarts=Zs(xn),function(u,a){u.forEach(function(l){l.mediaSequence=0,l.discontinuitySequence=Kt(a,function(n){return n.timeline===l.timeline}),l.segments&&l.segments.forEach(function(n,o){n.number=o})})}(rn,kt.timelineStarts),jn&&(kt.mediaGroups.AUDIO.audio=jn),Zt&&(kt.mediaGroups.SUBTITLES.subs=Zt),$e.length&&(kt.mediaGroups["CLOSED-CAPTIONS"].cc=function(u){return u.reduce(function(a,l){return l&&l.forEach(function(n){var h=n.language;a[h]={autoselect:!1,default:!1,instreamId:n.channel,language:h},n.hasOwnProperty("aspectRatio")&&(a[h].aspectRatio=n.aspectRatio),n.hasOwnProperty("easyReader")&&(a[h].easyReader=n.easyReader),n.hasOwnProperty("3D")&&(a[h]["3D"]=n["3D"])}),a},{})}($e)),_?function(u){var a=u.oldManifest,l=u.newManifest,n=a.playlists.concat(Hs(a)),o=l.playlists.concat(Hs(l));return l.timelineStarts=Zs([a.timelineStarts,l.timelineStarts]),function(u){var a=u.oldPlaylists,n=u.timelineStarts;u.newPlaylists.forEach(function(o){o.discontinuitySequence=Kt(n,function(j){return j.timeline===o.timeline});var h=function(u,a){for(var l=0;l<u.length;l++)if(u[l].attributes.NAME===a)return u[l];return null}(a,o.attributes.NAME);if(h&&!o.sidx){var _=o.segments[0],C=Kt(h.segments,function(j){return Math.abs(j.presentationTime-_.presentationTime)<.016666666666666666});if(-1===C)return Lo({playlist:o,mediaSequence:h.mediaSequence+h.segments.length}),o.segments[0].discontinuity=!0,o.discontinuityStarts.unshift(0),void((!h.segments.length&&o.timeline>h.timeline||h.segments.length&&o.timeline>h.segments[h.segments.length-1].timeline)&&o.discontinuitySequence--);h.segments[C].discontinuity&&!_.discontinuity&&(_.discontinuity=!0,o.discontinuityStarts.unshift(0),o.discontinuitySequence--),Lo({playlist:o,mediaSequence:h.segments[C].number})}})}({oldPlaylists:n,newPlaylists:o,timelineStarts:l.timelineStarts}),l}({oldManifest:_,newManifest:kt}):kt},aa=function(u,a,l){var _=u.timescale,A=u.periodStart,te=u.minimumUpdatePeriod;return Math.ceil((((u.NOW+u.clientOffset)/1e3+(void 0===te?0:te)-(u.availabilityStartTime+(void 0===A?0:A)))*(void 0===_?1:_)-a)/l)},xs=function(u,a){for(var l=u.type,n=u.minimumUpdatePeriod,o=void 0===n?0:n,h=u.media,_=void 0===h?"":h,C=u.sourceDuration,A=u.timescale,j=void 0===A?1:A,te=u.startNumber,Q=void 0===te?1:te,Se=u.periodStart,je=[],We=-1,$e=0;$e<a.length;$e++){var kt=a[$e],pn=kt.d,jn=kt.r||0,Zt=kt.t||0;We<0&&(We=Zt),Zt&&Zt>We&&(We=Zt);var rn=void 0;if(jn<0){var xn=$e+1;rn=xn===a.length?"dynamic"===l&&o>0&&_.indexOf("$Number$")>0?aa(u,We,pn):(C*j-We)/pn:(a[xn].t-We)/pn}else rn=jn+1;for(var ln=Q+je.length+rn,sn=Q+je.length;sn<ln;)je.push({number:sn,duration:pn/j,time:We,timeline:Se}),We+=pn,sn++}return je},vt=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,At=function(u,a){return u.replace(vt,function(u){return function(a,l,n,o){if("$$"===a)return"$";if(typeof u[l]>"u")return a;var h=""+u[l];return"RepresentationID"===l||(o=n?parseInt(o,10):1,h.length>=o)?h:""+new Array(o-h.length+1).join("0")+h}}(a))},kn=function(u,a){var l={RepresentationID:u.id,Bandwidth:u.bandwidth||0},n=u.initialization,o=void 0===n?{sourceURL:"",range:""}:n,h=cr({baseUrl:u.baseUrl,source:At(o.sourceURL,l),range:o.range}),_=function(u,a){return u.duration||a?u.duration?Ji(u):xs(u,a):[{number:u.startNumber||1,duration:u.sourceDuration,time:0,timeline:u.periodStart}]}(u,a);return _.map(function(C){l.Number=C.number,l.Time=C.time;var A=At(u.media||"",l),Q=u.periodStart+(C.time-(u.presentationTimeOffset||0))/(u.timescale||1);return{uri:A,timeline:C.timeline,duration:C.duration,resolvedUri:an(u.baseUrl||"",A),map:h,number:C.number,presentationTime:Q}})},cn=function(u,a){var l=u.duration,n=u.segmentUrls,o=void 0===n?[]:n,h=u.periodStart;if(!l&&!a||l&&a)throw new Error("SEGMENT_TIME_UNSPECIFIED");var C,_=o.map(function(j){return function(u,a){var l=u.baseUrl,n=u.initialization,o=void 0===n?{}:n,h=cr({baseUrl:l,source:o.sourceURL,range:o.range}),_=cr({baseUrl:l,source:a.media,range:a.mediaRange});return _.map=h,_}(u,j)});return l&&(C=Ji(u)),a&&(C=xs(u,a)),C.map(function(j,te){if(_[te]){var Q=_[te],Se=u.timescale||1,je=u.presentationTimeOffset||0;return Q.timeline=j.timeline,Q.duration=j.duration,Q.number=j.number,Q.presentationTime=h+(j.time-je)/Se,Q}}).filter(function(j){return j})},$n=function(u){var n,o,a=u.attributes,l=u.segmentInfo;l.template?(o=kn,n=Gt(a,l.template)):l.base?(o=Fi,n=Gt(a,l.base)):l.list&&(o=cn,n=Gt(a,l.list));var h={attributes:a};if(!o)return h;var _=o(n,l.segmentTimeline);if(n.duration){var j=n.timescale;n.duration=n.duration/(void 0===j?1:j)}else n.duration=_.length?_.reduce(function(Q,Se){return Math.max(Q,Math.ceil(Se.duration))},0):0;return h.attributes=n,h.segments=_,l.base&&n.indexRange&&(h.sidx=_[0],h.segments=[]),h},Er=function(u,a){return Dt(u.childNodes).filter(function(l){return l.tagName===a})},$r=function(u){return u.textContent.trim()},Wo=function(u){var C=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(u);if(!C)return 0;var A=C.slice(1),te=A[1],Q=A[2],Se=A[3],je=A[4],We=A[5];return 31536e3*parseFloat(A[0]||0)+2592e3*parseFloat(te||0)+86400*parseFloat(Q||0)+3600*parseFloat(Se||0)+60*parseFloat(je||0)+parseFloat(We||0)},js={mediaPresentationDuration:function(u){return Wo(u)},availabilityStartTime:function(u){return function(u){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(u)&&(u+="Z"),Date.parse(u)}(u)/1e3},minimumUpdatePeriod:function(u){return Wo(u)},suggestedPresentationDelay:function(u){return Wo(u)},type:function(u){return u},timeShiftBufferDepth:function(u){return Wo(u)},start:function(u){return Wo(u)},width:function(u){return parseInt(u,10)},height:function(u){return parseInt(u,10)},bandwidth:function(u){return parseInt(u,10)},frameRate:function(u){return function(u){return parseFloat(u.split("/").reduce(function(a,l){return a/l}))}(u)},startNumber:function(u){return parseInt(u,10)},timescale:function(u){return parseInt(u,10)},presentationTimeOffset:function(u){return parseInt(u,10)},duration:function(u){var a=parseInt(u,10);return isNaN(a)?Wo(u):a},d:function(u){return parseInt(u,10)},t:function(u){return parseInt(u,10)},r:function(u){return parseInt(u,10)},DEFAULT:function(u){return u}},Bi=function(u){return u&&u.attributes?Dt(u.attributes).reduce(function(a,l){return a[l.name]=(js[l.name]||js.DEFAULT)(l.value),a},{}):{}},Dr={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},wo=function(u,a){return a.length?ii(u.map(function(l){return a.map(function(n){return an(l,$r(n))})})):u},Qo=function(u){var a=Er(u,"SegmentTemplate")[0],l=Er(u,"SegmentList")[0],n=l&&Er(l,"SegmentURL").map(function(Q){return Gt({tag:"SegmentURL"},Bi(Q))}),o=Er(u,"SegmentBase")[0],h=l||a,_=h&&Er(h,"SegmentTimeline")[0],C=l||o||a,A=C&&Er(C,"Initialization")[0],j=a&&Bi(a);j&&A?j.initialization=A&&Bi(A):j&&j.initialization&&(j.initialization={sourceURL:j.initialization});var te={template:j,segmentTimeline:_&&Er(_,"S").map(function(Q){return Bi(Q)}),list:l&&Gt(Bi(l),{segmentUrls:n,initialization:Bi(A)}),base:o&&Gt(Bi(o),{initialization:Bi(A)})};return Object.keys(te).forEach(function(Q){te[Q]||delete te[Q]}),te},hs=function(u,a){return function(l,n){var o=wo(a,Er(l.node,"BaseURL")),h=Gt(u,{periodStart:l.attributes.start});"number"==typeof l.attributes.duration&&(h.periodDuration=l.attributes.duration);var _=Er(l.node,"AdaptationSet"),C=Qo(l.node);return ii(_.map(function(u,a,l){return function(n){var o=Bi(n),h=wo(a,Er(n,"BaseURL")),_=Er(n,"Role")[0],C={role:Bi(_)},A=Gt(u,o,C),j=Er(n,"Accessibility")[0],te=function(u){return"urn:scte:dash:cc:cea-608:2015"===u.schemeIdUri?("string"!=typeof u.value?[]:u.value.split(";")).map(function(n){var o,h;if(h=n,/^CC\d=/.test(n)){var _=n.split("=");o=_[0],h=_[1]}else/^CC\d$/.test(n)&&(o=n);return{channel:o,language:h}}):"urn:scte:dash:cc:cea-708:2015"===u.schemeIdUri?("string"!=typeof u.value?[]:u.value.split(";")).map(function(n){var o={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(n)){var h=n.split("="),C=h[1],A=void 0===C?"":C;o.channel=h[0],o.language=n,A.split(",").forEach(function(j){var te=j.split(":"),Q=te[0],Se=te[1];"lang"===Q?o.language=Se:"er"===Q?o.easyReader=Number(Se):"war"===Q?o.aspectRatio=Number(Se):"3D"===Q&&(o["3D"]=Number(Se))})}else o.language=n;return o.channel&&(o.channel="SERVICE"+o.channel),o}):void 0}(Bi(j));te&&(A=Gt(A,{captionServices:te}));var Q=Er(n,"Label")[0];if(Q&&Q.childNodes.length){var Se=Q.childNodes[0].nodeValue.trim();A=Gt(A,{label:Se})}var je=function(u){return u.reduce(function(a,l){var n=Bi(l);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());var o=Dr[n.schemeIdUri];if(o){a[o]={attributes:n};var h=Er(l,"cenc:pssh")[0];if(h){var _=$r(h);a[o].pssh=_&&qt(_)}}return a},{})}(Er(n,"ContentProtection"));Object.keys(je).length&&(A=Gt(A,{contentProtection:je}));var We=Qo(n),$e=Er(n,"Representation"),kt=Gt(l,We);return ii($e.map(function(u,a,l){return function(n){var o=Er(n,"BaseURL"),h=wo(a,o),_=Gt(u,Bi(n)),C=Qo(n);return h.map(function(A){return{segmentInfo:Gt(l,C),attributes:Gt(_,{baseUrl:A})}})}}(A,h,kt)))}}(h,o,C)))}},Ds=function(u){if(""===u)throw new Error("DASH_EMPTY_MANIFEST");var l,n,a=new Ee.DOMParser;try{n=(l=a.parseFromString(u,"application/xml"))&&"MPD"===l.documentElement.tagName?l.documentElement:null}catch{}if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return n},ua=X(7459),ao=X.n(ua),La=Mn([73,68,51]),Uo=function g(u,a){return void 0===a&&(a=0),(u=Mn(u)).length-a<10||!gt(u,La,{offset:a})?a:(a+=function(u,a){void 0===a&&(a=0);var n=(u=Mn(u))[a+6]<<21|u[a+7]<<14|u[a+8]<<7|u[a+9];return(16&u[a+5])>>4?n+20:n+10}(u,a),g(u,a))},Ko=(new Uint8Array([79,112,117,115,72,101,97,100]),function(u){return"string"==typeof u?be(u):u}),Xs=function(u){u=Mn(u);for(var a=[],l=0;u.length>l;){var n=u[l],o=0,h=0,_=u[++h];for(h++;128&_;)o=(127&_)<<7,_=u[h],h++;o+=127&_;for(var C=0;C<Qs.length;C++){var A=Qs[C];if(n===A.id){a.push((0,A.parser)(u.subarray(h,h+o)));break}}l+=o+h}return a};Qs=[{id:3,parser:function(u){var a={tag:3,id:u[0]<<8|u[1],flags:u[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&a.flags&&(a.dependsOnEsId=u[a.size]<<8|u[a.size+1],a.size+=2),64&a.flags){var l=u[a.size];a.url=function(u){if(!u)return"";u=Array.prototype.slice.call(u);var a=String.fromCharCode.apply(null,Mn(u));try{return decodeURIComponent(escape(a))}catch{}return a}(u.subarray(a.size+1,a.size+1+l)),a.size+=l}return 32&a.flags&&(a.ocrEsId=u[a.size]<<8|u[a.size+1],a.size+=2),a.descriptors=Xs(u.subarray(a.size))||[],a}},{id:4,parser:function(u){return{tag:4,oti:u[0],streamType:u[1],bufferSize:u[2]<<16|u[3]<<8|u[4],maxBitrate:u[5]<<24|u[6]<<16|u[7]<<8|u[8],avgBitrate:u[9]<<24|u[10]<<16|u[11]<<8|u[12],descriptors:Xs(u.subarray(13))}}},{id:5,parser:function(u){return{tag:5,bytes:u}}},{id:6,parser:function(u){return{tag:6,bytes:u}}}];var Xr=function g(u,a,l){void 0===l&&(l=!1),a=function(u){return Array.isArray(u)?u.map(function(a){return Ko(a)}):[Ko(u)]}(a),u=Mn(u);var n=[];if(!a.length)return n;for(var o=0;o<u.length;){var h=(u[o]<<24|u[o+1]<<16|u[o+2]<<8|u[o+3])>>>0,_=u.subarray(o+4,o+8);if(0===h)break;var C=o+h;if(C>u.length){if(l)break;C=u.length}var A=u.subarray(o+8,C);gt(_,a[0])&&(1===a.length?n.push(A):n.push.apply(n,g(A,a.slice(1),l))),o=C}return n},bi={EBML:Mn([26,69,223,163]),DocType:Mn([66,130]),Segment:Mn([24,83,128,103]),SegmentInfo:Mn([21,73,169,102]),Tracks:Mn([22,84,174,107]),Track:Mn([174]),TrackNumber:Mn([215]),DefaultDuration:Mn([35,227,131]),TrackEntry:Mn([174]),TrackType:Mn([131]),FlagDefault:Mn([136]),CodecID:Mn([134]),CodecPrivate:Mn([99,162]),VideoTrack:Mn([224]),AudioTrack:Mn([225]),Cluster:Mn([31,67,182,117]),Timestamp:Mn([231]),TimestampScale:Mn([42,215,177]),BlockGroup:Mn([160]),BlockDuration:Mn([155]),Block:Mn([161]),SimpleBlock:Mn([163])},qa=[128,64,32,16,8,4,2,1],_o=function(u,a,l,n){void 0===l&&(l=!0),void 0===n&&(n=!1);var o=function(u){for(var a=1,l=0;l<qa.length&&!(u&qa[l]);l++)a++;return a}(u[a]),h=u.subarray(a,a+o);return l&&((h=Array.prototype.slice.call(u,a,a+o))[0]^=qa[o-1]),{length:o,value:tt(h,{signed:n}),bytes:h}},Ka=function g(u){return"string"==typeof u?u.match(/.{1,2}/g).map(function(a){return g(a)}):"number"==typeof u?function(u,a){var n=(void 0===a?{}:a).le,o=void 0!==n&&n;("bigint"!=typeof u&&"number"!=typeof u||"number"==typeof u&&u!=u)&&(u=0);for(var h=function(u){return Math.ceil(function(u){return u.toString(2).length}(u)/8)}(u=Ar(u)),_=new Uint8Array(new ArrayBuffer(h)),C=0;C<h;C++){var A=o?C:Math.abs(C+1-_.length);_[A]=Number(u/ni[C]&Ar(255)),u<0&&(_[A]=Math.abs(~_[A]),_[A]-=0===C?1:2)}return _}(u):u},ta=function g(u,a,l){if(l>=a.length)return a.length;var n=_o(a,l,!1);if(gt(u.bytes,n.bytes))return l;var o=_o(a,l+n.length);return g(u,a,l+o.length+o.value+n.length)},ts=function g(u,a){a=function(u){return Array.isArray(u)?u.map(function(a){return Ka(a)}):[Ka(u)]}(a),u=Mn(u);var l=[];if(!a.length)return l;for(var n=0;n<u.length;){var o=_o(u,n,!1),h=_o(u,n+o.length),_=n+o.length+h.length;127===h.value&&(h.value=ta(o,u,_),h.value!==u.length&&(h.value-=_));var A=u.subarray(_,_+h.value>u.length?u.length:_+h.value);gt(a[0],o.bytes)&&(1===a.length?l.push(A):l=l.concat(g(A,a.slice(1)))),n+=o.length+h.length+A.length}return l},$t=Mn([0,0,0,1]),qn=Mn([0,0,1]),fs=Mn([0,0,3]),oe=function(u){for(var a=[],l=1;l<u.length-2;)gt(u.subarray(l,l+3),fs)&&(a.push(l+2),l++),l++;if(0===a.length)return u;var n=u.length-a.length,o=new Uint8Array(n),h=0;for(l=0;l<n;h++,l++)h===a[0]&&(h++,a.shift()),o[l]=u[h];return o},ee=function(u,a,l,n){void 0===n&&(n=1/0),u=Mn(u),l=[].concat(l);for(var h,o=0,_=0;o<u.length&&(_<n||h);){var C=void 0;if(gt(u.subarray(o),$t)?C=4:gt(u.subarray(o),qn)&&(C=3),C){if(_++,h)return oe(u.subarray(h,o));var A=void 0;"h264"===a?A=31&u[o+C]:"h265"===a&&(A=u[o+C]>>1&63),-1!==l.indexOf(A)&&(h=o+C),o+=C+("h264"===a?1:2)}else o++}return u.subarray(0,0)},dt={webm:Mn([119,101,98,109]),matroska:Mn([109,97,116,114,111,115,107,97]),flac:Mn([102,76,97,67]),ogg:Mn([79,103,103,83]),ac3:Mn([11,119]),riff:Mn([82,73,70,70]),avi:Mn([65,86,73]),wav:Mn([87,65,86,69]),"3gp":Mn([102,116,121,112,51,103]),mp4:Mn([102,116,121,112]),fmp4:Mn([115,116,121,112]),mov:Mn([102,116,121,112,113,116]),moov:Mn([109,111,111,118]),moof:Mn([109,111,111,102])},Nt={aac:function(u){var a=Uo(u);return gt(u,[255,16],{offset:a,mask:[255,22]})},mp3:function(u){var a=Uo(u);return gt(u,[255,2],{offset:a,mask:[255,6]})},webm:function(u){var a=ts(u,[bi.EBML,bi.DocType])[0];return gt(a,dt.webm)},mkv:function(u){var a=ts(u,[bi.EBML,bi.DocType])[0];return gt(a,dt.matroska)},mp4:function(u){return!Nt["3gp"](u)&&!Nt.mov(u)&&(!!(gt(u,dt.mp4,{offset:4})||gt(u,dt.fmp4,{offset:4})||gt(u,dt.moof,{offset:4})||gt(u,dt.moov,{offset:4}))||void 0)},mov:function(u){return gt(u,dt.mov,{offset:4})},"3gp":function(u){return gt(u,dt["3gp"],{offset:4})},ac3:function(u){var a=Uo(u);return gt(u,dt.ac3,{offset:a})},ts:function(u){if(u.length<189&&u.length>=1)return 71===u[0];for(var a=0;a+188<u.length&&a<188;){if(71===u[a]&&71===u[a+188])return!0;a+=1}return!1},flac:function(u){var a=Uo(u);return gt(u,dt.flac,{offset:a})},ogg:function(u){return gt(u,dt.ogg)},avi:function(u){return gt(u,dt.riff)&&gt(u,dt.avi,{offset:8})},wav:function(u){return gt(u,dt.riff)&&gt(u,dt.wav,{offset:8})},h264:function(u){return function(u,a,l){return ee(u,"h264",7,3)}(u).length},h265:function(u){return function(u,a,l){return ee(u,"h265",[32,33],3)}(u).length}},Qt=Object.keys(Nt).filter(function(g){return"ts"!==g&&"h264"!==g&&"h265"!==g}).concat(["ts","h264","h265"]);Qt.forEach(function(g){var u=Nt[g];Nt[g]=function(a){return u(Mn(a))}});var tr=Nt,dr=function(u){u=Mn(u);for(var a=0;a<Qt.length;a++){var l=Qt[a];if(tr[l](u))return l}return""},Mr=X(6277);function Ui(g){return(Ui=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)})(g)}function ui(g){var u="function"==typeof Map?new Map:void 0;return ui=function(l){if(null===l||!function Gr(g){return-1!==Function.toString.call(g).indexOf("[native code]")}(l))return l;if("function"!=typeof l)throw new TypeError("Super expression must either be null or a function");if(typeof u<"u"){if(u.has(l))return u.get(l);u.set(l,n)}function n(){return Rt(l,arguments,Ui(this).constructor)}return n.prototype=Object.create(l.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ge(n,l)},ui(g)}for(var Vo,qi={},Jr=function(u,a){return qi[u]=qi[u]||[],a&&(qi[u]=qi[u].concat(a)),qi[u]},bo=function(u,a){var l=Jr(u).indexOf(a);return!(l<=-1||(qi[u]=qi[u].slice(),qi[u].splice(l,1),0))},Ki={prefixed:!0},uo=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],la=uo[0],Vi=0;Vi<uo.length;Vi++)if(uo[Vi][1]in Ye()){Vo=uo[Vi];break}if(Vo){for(var Ua=0;Ua<Vo.length;Ua++)Ki[la[Ua]]=Vo[Ua];Ki.prefixed=Vo[0]!==la[0]}var Co=[],ei=function vu(g){var a,u="info",l=function(){for(var o=arguments.length,h=new Array(o),_=0;_<o;_++)h[_]=arguments[_];a("log",u,h)};return a=function(u,a){return function(l,n,o){var h=a.levels[n],_=new RegExp("^("+h+")$");if("log"!==l&&o.unshift(l.toUpperCase()+":"),o.unshift(u+":"),Co){Co.push([].concat(o));var C=Co.length-1e3;Co.splice(0,C>0?C:0)}if(ce().console){var A=ce().console[l];!A&&"debug"===l&&(A=ce().console.info||ce().console.log),A&&h&&_.test(l)&&A[Array.isArray(o)?"apply":"call"](ce().console,o)}}}(g,l),l.createLogger=function(n){return vu(g+": "+n)},l.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:u},l.level=function(n){if("string"==typeof n){if(!l.levels.hasOwnProperty(n))throw new Error('"'+n+'" in not a valid log level');u=n}return u},(l.history=function(){return Co?[].concat(Co):[]}).filter=function(n){return(Co||[]).filter(function(o){return new RegExp(".*"+n+".*").test(o[0])})},l.history.clear=function(){Co&&(Co.length=0)},l.history.disable=function(){null!==Co&&(Co.length=0,Co=null)},l.history.enable=function(){null===Co&&(Co=[])},l.error=function(){for(var n=arguments.length,o=new Array(n),h=0;h<n;h++)o[h]=arguments[h];return a("error",u,o)},l.warn=function(){for(var n=arguments.length,o=new Array(n),h=0;h<n;h++)o[h]=arguments[h];return a("warn",u,o)},l.debug=function(){for(var n=arguments.length,o=new Array(n),h=0;h<n;h++)o[h]=arguments[h];return a("debug",u,o)},l}("VIDEOJS"),kl=ei.createLogger,Cu=Object.prototype.toString,Ya=function(u){return Ea(u)?Object.keys(u):[]};function Qa(g,u){Ya(g).forEach(function(a){return u(g[a],a)})}function as(g){for(var u=arguments.length,a=new Array(u>1?u-1:0),l=1;l<u;l++)a[l-1]=arguments[l];return Object.assign?Ke.apply(void 0,[g].concat(a)):(a.forEach(function(n){n&&Qa(n,function(o,h){g[h]=o})}),g)}function Ea(g){return!!g&&"object"==typeof g}function Io(g){return Ea(g)&&"[object Object]"===Cu.call(g)&&g.constructor===Object}function Iu(g,u){if(!g||!u)return"";if("function"==typeof ce().getComputedStyle){var a;try{a=ce().getComputedStyle(g)}catch{return""}return a?a.getPropertyValue(u)||a[u]:""}return""}var ks=ce().navigator&&ce().navigator.userAgent||"",Xa=/AppleWebKit\/([\d.]+)/i.exec(ks),Bu=Xa?parseFloat(Xa.pop()):null,Vu=/iPod/i.test(ks),li=function(){var g=ks.match(/OS (\d+)_/i);return g&&g[1]?g[1]:null}(),Ja=/Android/i.test(ks),eu=function(){var g=ks.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!g)return null;var u=g[1]&&parseFloat(g[1]),a=g[2]&&parseFloat(g[2]);return u&&a?parseFloat(g[1]+"."+g[2]):u||null}(),B=Ja&&eu<5&&Bu<537,he=/Firefox/i.test(ks),z=/Edg/i.test(ks),Ie=!z&&(/Chrome/i.test(ks)||/CriOS/i.test(ks)),Ge=function(){var g=ks.match(/(Chrome|CriOS)\/(\d+)/);return g&&g[2]?parseFloat(g[2]):null}(),Lt=function(){var g=/MSIE\s(\d+)\.\d/.exec(ks),u=g&&parseFloat(g[1]);return!u&&/Trident\/7.0/i.test(ks)&&/rv:11.0/.test(ks)&&(u=11),u}(),zt=/Safari/i.test(ks)&&!Ie&&!Ja&&!z,ur=/Windows/i.test(ks),ti=!(!Do()||!("ontouchstart"in ce()||ce().navigator.maxTouchPoints||ce().DocumentTouch&&ce().document instanceof ce().DocumentTouch)),mi=/iPad/i.test(ks)||zt&&ti&&!/iPhone/i.test(ks),hi=/iPhone/i.test(ks)&&!mi,mr=hi||mi||Vu,us=(zt||mr)&&!Ie,fi=Object.freeze({__proto__:null,IS_IPOD:Vu,IOS_VERSION:li,IS_ANDROID:Ja,ANDROID_VERSION:eu,IS_NATIVE_ANDROID:B,IS_FIREFOX:he,IS_EDGE:z,IS_CHROME:Ie,CHROME_VERSION:Ge,IE_VERSION:Lt,IS_SAFARI:zt,IS_WINDOWS:ur,TOUCH_ENABLED:ti,IS_IPAD:mi,IS_IPHONE:hi,IS_IOS:mr,IS_ANY_SAFARI:us});function Gi(g){return"string"==typeof g&&!!g.trim()}function Jn(g){if(g.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function Do(){return Ye()===ce().document}function Js(g){return Ea(g)&&1===g.nodeType}function is(){try{return ce().parent!==ce().self}catch{return!0}}function tu(g){return function(u,a){if(!Gi(u))return Ye()[g](null);Gi(a)&&(a=Ye().querySelector(a));var l=Js(a)?a:Ye();return l[g]&&l[g](u)}}function jr(g,u,a,l){void 0===g&&(g="div"),void 0===u&&(u={}),void 0===a&&(a={});var n=Ye().createElement(g);return Object.getOwnPropertyNames(u).forEach(function(o){var h=u[o];-1!==o.indexOf("aria-")||"role"===o||"type"===o?(ei.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+o+" to "+h+"."),n.setAttribute(o,h)):"textContent"===o?Sa(n,h):(n[o]!==h||"tabIndex"===o)&&(n[o]=h)}),Object.getOwnPropertyNames(a).forEach(function(o){n.setAttribute(o,a[o])}),l&&ys(n,l),n}function Sa(g,u){return typeof g.textContent>"u"?g.innerText=u:g.textContent=u,g}function wc(g,u){u.firstChild?u.insertBefore(g,u.firstChild):u.appendChild(g)}function _u(g,u){return Jn(u),g.classList?g.classList.contains(u):function xo(g){return new RegExp("(^|\\s)"+g+"($|\\s)")}(u).test(g.className)}function zs(g,u){return g.classList?g.classList.add(u):_u(g,u)||(g.className=(g.className+" "+u).trim()),g}function ec(g,u){return g?(g.classList?g.classList.remove(u):(Jn(u),g.className=g.className.split(/\s+/).filter(function(a){return a!==u}).join(" ")),g):(ei.warn("removeClass was called with an element that doesn't exist"),null)}function bu(g,u,a){var l=_u(g,u);if("function"==typeof a&&(a=a(g,u)),"boolean"!=typeof a&&(a=!l),a!==l)return a?zs(g,u):ec(g,u),g}function _n(g,u){Object.getOwnPropertyNames(u).forEach(function(a){var l=u[a];null===l||typeof l>"u"||!1===l?g.removeAttribute(a):g.setAttribute(a,!0===l?"":l)})}function qr(g){var u={};if(g&&g.attributes&&g.attributes.length>0)for(var l=g.attributes,n=l.length-1;n>=0;n--){var o=l[n].name,h=l[n].value;("boolean"==typeof g[o]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+o+","))&&(h=null!==h),u[o]=h}return u}function Cc(g,u){return g.getAttribute(u)}function nl(g,u,a){g.setAttribute(u,a)}function Us(g,u){g.removeAttribute(u)}function nd(){Ye().body.focus(),Ye().onselectstart=function(){return!1}}function Ws(){Ye().onselectstart=function(){return!0}}function eo(g){if(g&&g.getBoundingClientRect&&g.parentNode){var u=g.getBoundingClientRect(),a={};return["bottom","height","left","right","top","width"].forEach(function(l){void 0!==u[l]&&(a[l]=u[l])}),a.height||(a.height=parseFloat(Iu(g,"height"))),a.width||(a.width=parseFloat(Iu(g,"width"))),a}}function nu(g){if(!g||g&&!g.offsetParent)return{left:0,top:0,width:0,height:0};for(var u=g.offsetWidth,a=g.offsetHeight,l=0,n=0;g.offsetParent&&g!==Ye()[Ki.fullscreenElement];)l+=g.offsetLeft,n+=g.offsetTop,g=g.offsetParent;return{left:l,top:n,width:u,height:a}}function rl(g,u){var a={x:0,y:0};if(mr)for(var l=g;l&&"html"!==l.nodeName.toLowerCase();){var n=Iu(l,"transform");if(/^matrix/.test(n)){var o=n.slice(7,-1).split(/,\s/).map(Number);a.x+=o[4],a.y+=o[5]}else if(/^matrix3d/.test(n)){var h=n.slice(9,-1).split(/,\s/).map(Number);a.x+=h[12],a.y+=h[13]}l=l.parentNode}var _={},C=nu(u.target),A=nu(g),j=A.width,Q=u.offsetY-(A.top-C.top),Se=u.offsetX-(A.left-C.left);return u.changedTouches&&(Se=u.changedTouches[0].pageX-A.left,Q=u.changedTouches[0].pageY+A.top,mr&&(Se-=a.x,Q-=a.y)),_.y=1-Math.max(0,Math.min(1,Q/A.height)),_.x=Math.max(0,Math.min(1,Se/j)),_}function ru(g){return Ea(g)&&3===g.nodeType}function Pn(g){for(;g.firstChild;)g.removeChild(g.firstChild);return g}function lo(g){return"function"==typeof g&&(g=g()),(Array.isArray(g)?g:[g]).map(function(u){return"function"==typeof u&&(u=u()),Js(u)||ru(u)?u:"string"==typeof u&&/\S/.test(u)?Ye().createTextNode(u):void 0}).filter(function(u){return u})}function ys(g,u){return lo(u).forEach(function(a){return g.appendChild(a)}),g}function xu(g,u){return ys(Pn(g),u)}function Xn(g){return void 0===g.button&&void 0===g.buttons||0===g.button&&void 0===g.buttons||"mouseup"===g.type&&0===g.button&&0===g.buttons||!(0!==g.button||1!==g.buttons)}var mn,Ln=tu("querySelector"),wa=tu("querySelectorAll"),Bn=Object.freeze({__proto__:null,isReal:Do,isEl:Js,isInFrame:is,createEl:jr,textContent:Sa,prependTo:wc,hasClass:_u,addClass:zs,removeClass:ec,toggleClass:bu,setAttributes:_n,getAttributes:qr,getAttribute:Cc,setAttribute:nl,removeAttribute:Us,blockTextSelection:nd,unblockTextSelection:Ws,getBoundingClientRect:eo,findPosition:nu,getPointerPosition:rl,isTextNode:ru,emptyEl:Pn,normalizeContent:lo,appendContent:ys,insertContent:xu,isSingleLeftClick:Xn,$:Ln,$$:wa}),jt=!1,Ao=function(){if(!1!==mn.options.autoSetup){var u=Array.prototype.slice.call(Ye().getElementsByTagName("video")),a=Array.prototype.slice.call(Ye().getElementsByTagName("audio")),l=Array.prototype.slice.call(Ye().getElementsByTagName("video-js")),n=u.concat(a,l);if(n&&n.length>0)for(var o=0,h=n.length;o<h;o++){var _=n[o];if(!_||!_.getAttribute){Pl(1);break}void 0===_.player&&null!==_.getAttribute("data-setup")&&mn(_)}else jt||Pl(1)}};function Pl(g,u){Do()&&(u&&(mn=u),ce().setTimeout(Ao,g))}function Ic(){jt=!0,ce().removeEventListener("load",Ic)}Do()&&("complete"===Ye().readyState?Ic():ce().addEventListener("load",Ic));var rd,xc=function(u){var a=Ye().createElement("style");return a.className=u,a},fl=function(u,a){u.styleSheet?u.styleSheet.cssText=a:u.textContent=a},Ol=3;function Ca(){return Ol++}ce().WeakMap||(rd=function(){function g(){this.vdata="vdata"+Math.floor(ce().performance&&ce().performance.now()||Date.now()),this.data={}}var u=g.prototype;return u.set=function(l,n){var o=l[this.vdata]||Ca();return l[this.vdata]||(l[this.vdata]=o),this.data[o]=n,this},u.get=function(l){var n=l[this.vdata];if(n)return this.data[n];ei("We have no data for this element",l)},u.has=function(l){return l[this.vdata]in this.data},u.delete=function(l){var n=l[this.vdata];n&&(delete this.data[n],delete l[this.vdata])},g}());var ca=ce().WeakMap?new WeakMap:new rd;function id(g,u){if(ca.has(g)){var a=ca.get(g);0===a.handlers[u].length&&(delete a.handlers[u],g.removeEventListener?g.removeEventListener(u,a.dispatcher,!1):g.detachEvent&&g.detachEvent("on"+u,a.dispatcher)),Object.getOwnPropertyNames(a.handlers).length<=0&&(delete a.handlers,delete a.dispatcher,delete a.disabled),0===Object.getOwnPropertyNames(a).length&&ca.delete(g)}}function Dc(g,u,a,l){a.forEach(function(n){g(u,n,l)})}function Ir(g){if(g.fixed_)return g;function u(){return!0}function a(){return!1}if(!g||!g.isPropagationStopped||!g.isImmediatePropagationStopped){var l=g||ce().event;for(var n in g={},l)"layerX"!==n&&"layerY"!==n&&"keyLocation"!==n&&"webkitMovementX"!==n&&"webkitMovementY"!==n&&"path"!==n&&("returnValue"===n&&l.preventDefault||(g[n]=l[n]));if(g.target||(g.target=g.srcElement||Ye()),g.relatedTarget||(g.relatedTarget=g.fromElement===g.target?g.toElement:g.fromElement),g.preventDefault=function(){l.preventDefault&&l.preventDefault(),g.returnValue=!1,l.returnValue=!1,g.defaultPrevented=!0},g.defaultPrevented=!1,g.stopPropagation=function(){l.stopPropagation&&l.stopPropagation(),g.cancelBubble=!0,l.cancelBubble=!0,g.isPropagationStopped=u},g.isPropagationStopped=a,g.stopImmediatePropagation=function(){l.stopImmediatePropagation&&l.stopImmediatePropagation(),g.isImmediatePropagationStopped=u,g.stopPropagation()},g.isImmediatePropagationStopped=a,null!=g.clientX){var o=Ye().documentElement,h=Ye().body;g.pageX=g.clientX+(o&&o.scrollLeft||h&&h.scrollLeft||0)-(o&&o.clientLeft||h&&h.clientLeft||0),g.pageY=g.clientY+(o&&o.scrollTop||h&&h.scrollTop||0)-(o&&o.clientTop||h&&h.clientTop||0)}g.which=g.charCode||g.keyCode,null!=g.button&&(g.button=1&g.button?0:4&g.button?1:2&g.button?2:0)}return g.fixed_=!0,g}var Hu,$u=function(){if("boolean"!=typeof Hu){Hu=!1;try{var u=Object.defineProperty({},"passive",{get:function(){Hu=!0}});ce().addEventListener("test",null,u),ce().removeEventListener("test",null,u)}catch{}}return Hu},Ti=["touchstart","touchmove"];function Zn(g,u,a){if(Array.isArray(u))return Dc(Zn,g,u,a);ca.has(g)||ca.set(g,{});var l=ca.get(g);if(l.handlers||(l.handlers={}),l.handlers[u]||(l.handlers[u]=[]),a.guid||(a.guid=Ca()),l.handlers[u].push(a),l.dispatcher||(l.disabled=!1,l.dispatcher=function(o,h){if(!l.disabled){o=Ir(o);var _=l.handlers[o.type];if(_)for(var C=_.slice(0),A=0,j=C.length;A<j&&!o.isImmediatePropagationStopped();A++)try{C[A].call(g,o,h)}catch(te){ei.error(te)}}}),1===l.handlers[u].length)if(g.addEventListener){var n=!1;$u()&&Ti.indexOf(u)>-1&&(n={passive:!0}),g.addEventListener(u,l.dispatcher,n)}else g.attachEvent&&g.attachEvent("on"+u,l.dispatcher)}function Qr(g,u,a){if(ca.has(g)){var l=ca.get(g);if(l.handlers){if(Array.isArray(u))return Dc(Qr,g,u,a);var n=function(A,j){l.handlers[j]=[],id(A,j)};if(void 0===u){for(var o in l.handlers)Object.prototype.hasOwnProperty.call(l.handlers||{},o)&&n(g,o);return}var h=l.handlers[u];if(h){if(!a)return void n(g,u);if(a.guid)for(var _=0;_<h.length;_++)h[_].guid===a.guid&&h.splice(_--,1);id(g,u)}}}}function pi(g,u,a){var l=ca.has(g)?ca.get(g):{},n=g.parentNode||g.ownerDocument;if("string"==typeof u?u={type:u,target:g}:u.target||(u.target=g),u=Ir(u),l.dispatcher&&l.dispatcher.call(g,u,a),n&&!u.isPropagationStopped()&&!0===u.bubbles)pi.call(null,n,u,a);else if(!n&&!u.defaultPrevented&&u.target&&u.target[u.type]){ca.has(u.target)||ca.set(u.target,{});var o=ca.get(u.target);u.target[u.type]&&(o.disabled=!0,"function"==typeof u.target[u.type]&&u.target[u.type](),o.disabled=!1)}return!u.defaultPrevented}function qs(g,u,a){if(Array.isArray(u))return Dc(qs,g,u,a);var l=function n(){Qr(g,u,n),a.apply(this,arguments)};l.guid=a.guid=a.guid||Ca(),Zn(g,u,l)}function Ps(g,u,a){var l=function n(){Qr(g,u,n),a.apply(this,arguments)};l.guid=a.guid=a.guid||Ca(),Zn(g,u,l)}var H,Yn=Object.freeze({__proto__:null,fixEvent:Ir,on:Zn,off:Qr,trigger:pi,one:qs,any:Ps}),ss=function(u,a,l){a.guid||(a.guid=Ca());var n=a.bind(u);return n.guid=l?l+"_"+a.guid:a.guid,n},k=function(u,a){var l=ce().performance.now();return function(){var h=ce().performance.now();h-l>=a&&(u.apply(void 0,arguments),l=h)}},D=function(){};D.prototype.allowedEvents_={},D.prototype.on=function(g,u){var a=this.addEventListener;this.addEventListener=function(){},Zn(this,g,u),this.addEventListener=a},D.prototype.addEventListener=D.prototype.on,D.prototype.off=function(g,u){Qr(this,g,u)},D.prototype.removeEventListener=D.prototype.off,D.prototype.one=function(g,u){var a=this.addEventListener;this.addEventListener=function(){},qs(this,g,u),this.addEventListener=a},D.prototype.any=function(g,u){var a=this.addEventListener;this.addEventListener=function(){},Ps(this,g,u),this.addEventListener=a},D.prototype.trigger=function(g){var u=g.type||g;"string"==typeof g&&(g={type:u}),g=Ir(g),this.allowedEvents_[u]&&this["on"+u]&&this["on"+u](g),pi(this,g)},D.prototype.dispatchEvent=D.prototype.trigger,D.prototype.queueTrigger=function(g){var u=this;H||(H=new Map);var a=g.type||g,l=H.get(this);l||H.set(this,l=new Map);var n=l.get(a);l.delete(a),ce().clearTimeout(n);var o=ce().setTimeout(function(){l.delete(a),0===l.size&&(l=null,H.delete(u)),u.trigger(g)},0);l.set(a,o)};var ae=function(u){return"function"==typeof u.name?u.name():"string"==typeof u.name?u.name:u.name_?u.name_:u.constructor&&u.constructor.name?u.constructor.name:typeof u},Pe=function(u){return u instanceof D||!!u.eventBusEl_&&["on","one","off","trigger"].every(function(a){return"function"==typeof u[a]})},Tt=function(u){return"string"==typeof u&&/\S/.test(u)||Array.isArray(u)&&!!u.length},wn=function(u,a,l){if(!u||!u.nodeName&&!Pe(u))throw new Error("Invalid target for "+ae(a)+"#"+l+"; must be a DOM node or evented object.")},vr=function(u,a,l){if(!Tt(u))throw new Error("Invalid event type for "+ae(a)+"#"+l+"; must be a non-empty string or array.")},hr=function(u,a,l){if("function"!=typeof u)throw new Error("Invalid listener for "+ae(a)+"#"+l+"; must be a function.")},ci=function(u,a,l){var o,h,_,n=a.length<3||a[0]===u||a[0]===u.eventBusEl_;return n?(o=u.eventBusEl_,a.length>=3&&a.shift(),h=a[0],_=a[1]):(o=a[0],h=a[1],_=a[2]),wn(o,u,l),vr(h,u,l),hr(_,u,l),{isTargetingSelf:n,target:o,type:h,listener:_=ss(u,_)}},Ks=function(u,a,l,n){wn(u,u,a),u.nodeName?Yn[a](u,l,n):u[a](l,n)},Ot={on:function(){for(var u=this,a=arguments.length,l=new Array(a),n=0;n<a;n++)l[n]=arguments[n];var o=ci(this,l,"on"),h=o.isTargetingSelf,_=o.target,C=o.type,A=o.listener;if(Ks(_,"on",C,A),!h){var j=function(){return u.off(_,C,A)};j.guid=A.guid;var te=function(){return u.off("dispose",j)};te.guid=A.guid,Ks(this,"on","dispose",j),Ks(_,"on","dispose",te)}},one:function(){for(var u=this,a=arguments.length,l=new Array(a),n=0;n<a;n++)l[n]=arguments[n];var o=ci(this,l,"one"),_=o.target,C=o.type,A=o.listener;if(o.isTargetingSelf)Ks(_,"one",C,A);else{var j=function te(){u.off(_,C,te);for(var Q=arguments.length,Se=new Array(Q),je=0;je<Q;je++)Se[je]=arguments[je];A.apply(null,Se)};j.guid=A.guid,Ks(_,"one",C,j)}},any:function(){for(var u=this,a=arguments.length,l=new Array(a),n=0;n<a;n++)l[n]=arguments[n];var o=ci(this,l,"any"),_=o.target,C=o.type,A=o.listener;if(o.isTargetingSelf)Ks(_,"any",C,A);else{var j=function te(){u.off(_,C,te);for(var Q=arguments.length,Se=new Array(Q),je=0;je<Q;je++)Se[je]=arguments[je];A.apply(null,Se)};j.guid=A.guid,Ks(_,"any",C,j)}},off:function(u,a,l){if(!u||Tt(u))Qr(this.eventBusEl_,u,a);else{var n=u,o=a;wn(n,this,"off"),vr(o,this,"off"),hr(l,this,"off"),l=ss(this,l),this.off("dispose",l),n.nodeName?(Qr(n,o,l),Qr(n,"dispose",l)):Pe(n)&&(n.off(o,l),n.off("dispose",l))}},trigger:function(u,a){if(wn(this.eventBusEl_,this,"trigger"),!Tt(u&&"string"!=typeof u?u.type:u)){var n="Invalid event type for "+ae(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!u)throw new Error(n);(this.log||ei).error(n)}return pi(this.eventBusEl_,u,a)}};function xa(g,u){void 0===u&&(u={});var l=u.eventBusKey;if(l){if(!g[l].nodeName)throw new Error('The eventBusKey "'+l+'" does not refer to an element.');g.eventBusEl_=g[l]}else g.eventBusEl_=jr("span",{className:"vjs-event-bus"});return as(g,Ot),g.eventedCallbacks&&g.eventedCallbacks.forEach(function(n){n()}),g.on("dispose",function(){g.off(),[g,g.el_,g.eventBusEl_].forEach(function(n){n&&ca.has(n)&&ca.delete(n)}),ce().setTimeout(function(){g.eventBusEl_=null},0)}),g}var da={state:{},setState:function(u){var l,a=this;return"function"==typeof u&&(u=u()),Qa(u,function(n,o){a.state[o]!==n&&((l=l||{})[o]={from:a.state[o],to:n}),a.state[o]=n}),l&&Pe(this)&&this.trigger({changes:l,type:"statechanged"}),l}};function Ac(g,u){return as(g,da),g.state=as({},g.state,u),"function"==typeof g.handleStateChanged&&Pe(g)&&g.on("statechanged",g.handleStateChanged),g}var iu=function(u){return"string"!=typeof u?u:u.replace(/./,function(a){return a.toLowerCase()})},Yi=function(u){return"string"!=typeof u?u:u.replace(/./,function(a){return a.toUpperCase()})};function Qi(){for(var g={},u=arguments.length,a=new Array(u),l=0;l<u;l++)a[l]=arguments[l];return a.forEach(function(n){n&&Qa(n,function(o,h){Io(o)?(Io(g[h])||(g[h]={}),g[h]=Qi(g[h],o)):g[h]=o})}),g}var su=function(){function g(){this.map_={}}var u=g.prototype;return u.has=function(l){return l in this.map_},u.delete=function(l){var n=this.has(l);return delete this.map_[l],n},u.set=function(l,n){return this.map_[l]=n,this},u.forEach=function(l,n){for(var o in this.map_)l.call(n,this.map_[o],o,this)},g}(),Ud=ce().Map?ce().Map:su,sd=function(){function g(){this.set_={}}var u=g.prototype;return u.has=function(l){return l in this.set_},u.delete=function(l){var n=this.has(l);return delete this.set_[l],n},u.add=function(l){return this.set_[l]=1,this},u.forEach=function(l,n){for(var o in this.set_)l.call(n,o,o,this)},g}(),Gu=ce().Set?ce().Set:sd,fn=function(){function g(a,l,n){var o=this;if(this.player_=!a&&this.play?a=this:a,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Qi({},this.options_),l=this.options_=Qi(this.options_,l),this.id_=l.id||l.el&&l.el.id,!this.id_){var h=a&&a.id&&a.id()||"no_player";this.id_=h+"_component_"+Ca()}this.name_=l.name||null,l.el?this.el_=l.el:!1!==l.createEl&&(this.el_=this.createEl()),l.className&&this.el_&&l.className.split(" ").forEach(function(_){return o.addClass(_)}),!1!==l.evented&&(xa(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Ac(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Gu,this.setIntervalIds_=new Gu,this.rafIds_=new Gu,this.namedRafs_=new Ud,this.clearingTimersOnDispose_=!1,!1!==l.initChildren&&this.initChildren(),this.ready(n),!1!==l.reportTouchActivity&&this.enableTouchActivity()}var u=g.prototype;return u.dispose=function(l){if(void 0===l&&(l={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var n=this.children_.length-1;n>=0;n--)this.children_[n].dispose&&this.children_[n].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(l.restoreEl?this.el_.parentNode.replaceChild(l.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},u.isDisposed=function(){return!!this.isDisposed_},u.player=function(){return this.player_},u.options=function(l){return l?(this.options_=Qi(this.options_,l),this.options_):this.options_},u.el=function(){return this.el_},u.createEl=function(l,n,o){return jr(l,n,o)},u.localize=function(l,n,o){void 0===o&&(o=l);var h=this.player_.language&&this.player_.language(),_=this.player_.languages&&this.player_.languages(),C=_&&_[h],A=h&&h.split("-")[0],j=_&&_[A],te=o;return C&&C[l]?te=C[l]:j&&j[l]&&(te=j[l]),n&&(te=te.replace(/\{(\d+)\}/g,function(Q,Se){var je=n[Se-1],We=je;return typeof je>"u"&&(We=Q),We})),te},u.handleLanguagechange=function(){},u.contentEl=function(){return this.contentEl_||this.el_},u.id=function(){return this.id_},u.name=function(){return this.name_},u.children=function(){return this.children_},u.getChildById=function(l){return this.childIndex_[l]},u.getChild=function(l){if(l)return this.childNameIndex_[l]},u.getDescendant=function(){for(var l=arguments.length,n=new Array(l),o=0;o<l;o++)n[o]=arguments[o];n=n.reduce(function(C,A){return C.concat(A)},[]);for(var h=this,_=0;_<n.length;_++)if(!(h=h.getChild(n[_]))||!h.getChild)return;return h},u.addChild=function(l,n,o){var h,_;if(void 0===n&&(n={}),void 0===o&&(o=this.children_.length),"string"==typeof l){_=Yi(l);var C=n.componentClass||_;n.name=_;var A=g.getComponent(C);if(!A)throw new Error("Component "+C+" does not exist");if("function"!=typeof A)return null;h=new A(this.player_||this,n)}else h=l;if(h.parentComponent_&&h.parentComponent_.removeChild(h),this.children_.splice(o,0,h),h.parentComponent_=this,"function"==typeof h.id&&(this.childIndex_[h.id()]=h),(_=_||h.name&&Yi(h.name()))&&(this.childNameIndex_[_]=h,this.childNameIndex_[iu(_)]=h),"function"==typeof h.el&&h.el()){var j=null;this.children_[o+1]&&(this.children_[o+1].el_?j=this.children_[o+1].el_:Js(this.children_[o+1])&&(j=this.children_[o+1])),this.contentEl().insertBefore(h.el(),j)}return h},u.removeChild=function(l){if("string"==typeof l&&(l=this.getChild(l)),l&&this.children_){for(var n=!1,o=this.children_.length-1;o>=0;o--)if(this.children_[o]===l){n=!0,this.children_.splice(o,1);break}if(n){l.parentComponent_=null,this.childIndex_[l.id()]=null,this.childNameIndex_[Yi(l.name())]=null,this.childNameIndex_[iu(l.name())]=null;var h=l.el();h&&h.parentNode===this.contentEl()&&this.contentEl().removeChild(l.el())}}},u.initChildren=function(){var l=this,n=this.options_.children;if(n){var _,o=this.options_,C=g.getComponent("Tech");(_=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(this.options_).filter(function(A){return!_.some(function(j){return"string"==typeof j?A===j:A===j.name})})).map(function(A){var j,te;return"string"==typeof A?te=n[j=A]||l.options_[j]||{}:(j=A.name,te=A),{name:j,opts:te}}).filter(function(A){var j=g.getComponent(A.opts.componentClass||Yi(A.name));return j&&!C.isTech(j)}).forEach(function(j){var te=j.name,Q=j.opts;if(void 0!==o[te]&&(Q=o[te]),!1!==Q){!0===Q&&(Q={}),Q.playerOptions=l.options_.playerOptions;var Se=l.addChild(te,Q);Se&&(l[te]=Se)}})}},u.buildCSSClass=function(){return""},u.ready=function(l,n){if(void 0===n&&(n=!1),l){if(!this.isReady_)return this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(l);n?l.call(this):this.setTimeout(l,1)}},u.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var l=this.readyQueue_;this.readyQueue_=[],l&&l.length>0&&l.forEach(function(n){n.call(this)},this),this.trigger("ready")},1)},u.$=function(l,n){return Ln(l,n||this.contentEl())},u.$$=function(l,n){return wa(l,n||this.contentEl())},u.hasClass=function(l){return _u(this.el_,l)},u.addClass=function(l){zs(this.el_,l)},u.removeClass=function(l){ec(this.el_,l)},u.toggleClass=function(l,n){bu(this.el_,l,n)},u.show=function(){this.removeClass("vjs-hidden")},u.hide=function(){this.addClass("vjs-hidden")},u.lockShowing=function(){this.addClass("vjs-lock-showing")},u.unlockShowing=function(){this.removeClass("vjs-lock-showing")},u.getAttribute=function(l){return Cc(this.el_,l)},u.setAttribute=function(l,n){nl(this.el_,l,n)},u.removeAttribute=function(l){Us(this.el_,l)},u.width=function(l,n){return this.dimension("width",l,n)},u.height=function(l,n){return this.dimension("height",l,n)},u.dimensions=function(l,n){this.width(l,!0),this.height(n)},u.dimension=function(l,n,o){if(void 0!==n)return(null===n||n!=n)&&(n=0),this.el_.style[l]=-1!==(""+n).indexOf("%")||-1!==(""+n).indexOf("px")?n:"auto"===n?"":n+"px",void(o||this.trigger("componentresize"));if(!this.el_)return 0;var h=this.el_.style[l],_=h.indexOf("px");return parseInt(-1!==_?h.slice(0,_):this.el_["offset"+Yi(l)],10)},u.currentDimension=function(l){var n=0;if("width"!==l&&"height"!==l)throw new Error("currentDimension only accepts width or height value");if(n=Iu(this.el_,l),0===(n=parseFloat(n))||isNaN(n)){var o="offset"+Yi(l);n=this.el_[o]}return n},u.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},u.currentWidth=function(){return this.currentDimension("width")},u.currentHeight=function(){return this.currentDimension("height")},u.focus=function(){this.el_.focus()},u.blur=function(){this.el_.blur()},u.handleKeyDown=function(l){this.player_&&(lt().isEventKey(l,"Tab")||l.stopPropagation(),this.player_.handleKeyDown(l))},u.handleKeyPress=function(l){this.handleKeyDown(l)},u.emitTapEvents=function(){var _,l=0,n=null;this.on("touchstart",function(A){1===A.touches.length&&(n={pageX:A.touches[0].pageX,pageY:A.touches[0].pageY},l=ce().performance.now(),_=!0)}),this.on("touchmove",function(A){if(A.touches.length>1)_=!1;else if(n){var j=A.touches[0].pageX-n.pageX,te=A.touches[0].pageY-n.pageY;Math.sqrt(j*j+te*te)>10&&(_=!1)}});var C=function(){_=!1};this.on("touchleave",C),this.on("touchcancel",C),this.on("touchend",function(A){n=null,!0===_&&ce().performance.now()-l<200&&(A.preventDefault(),this.trigger("tap"))})},u.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var n,l=ss(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){l(),this.clearInterval(n),n=this.setInterval(l,250)});var o=function(_){l(),this.clearInterval(n)};this.on("touchmove",l),this.on("touchend",o),this.on("touchcancel",o)}},u.setTimeout=function(l,n){var h,o=this;return l=ss(this,l),this.clearTimersOnDispose_(),h=ce().setTimeout(function(){o.setTimeoutIds_.has(h)&&o.setTimeoutIds_.delete(h),l()},n),this.setTimeoutIds_.add(h),h},u.clearTimeout=function(l){return this.setTimeoutIds_.has(l)&&(this.setTimeoutIds_.delete(l),ce().clearTimeout(l)),l},u.setInterval=function(l,n){l=ss(this,l),this.clearTimersOnDispose_();var o=ce().setInterval(l,n);return this.setIntervalIds_.add(o),o},u.clearInterval=function(l){return this.setIntervalIds_.has(l)&&(this.setIntervalIds_.delete(l),ce().clearInterval(l)),l},u.requestAnimationFrame=function(l){var o,n=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),l=ss(this,l),o=ce().requestAnimationFrame(function(){n.rafIds_.has(o)&&n.rafIds_.delete(o),l()}),this.rafIds_.add(o),o):this.setTimeout(l,1e3/60)},u.requestNamedAnimationFrame=function(l,n){var o=this;if(!this.namedRafs_.has(l)){this.clearTimersOnDispose_(),n=ss(this,n);var h=this.requestAnimationFrame(function(){n(),o.namedRafs_.has(l)&&o.namedRafs_.delete(l)});return this.namedRafs_.set(l,h),l}},u.cancelNamedAnimationFrame=function(l){this.namedRafs_.has(l)&&(this.cancelAnimationFrame(this.namedRafs_.get(l)),this.namedRafs_.delete(l))},u.cancelAnimationFrame=function(l){return this.supportsRaf_?(this.rafIds_.has(l)&&(this.rafIds_.delete(l),ce().cancelAnimationFrame(l)),l):this.clearTimeout(l)},u.clearTimersOnDispose_=function(){var l=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(n){var h=n[1];l[n[0]].forEach(function(_,C){return l[h](C)})}),l.clearingTimersOnDispose_=!1}))},g.registerComponent=function(l,n){if("string"!=typeof l||!l)throw new Error('Illegal component name, "'+l+'"; must be a non-empty string.');var o=g.getComponent("Tech"),h=o&&o.isTech(n),_=g===n||g.prototype.isPrototypeOf(n.prototype);if(h||!_)throw new Error('Illegal component, "'+l+'"; '+(h?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");l=Yi(l),g.components_||(g.components_={});var A=g.getComponent("Player");if("Player"===l&&A&&A.players){var j=A.players,te=Object.keys(j);if(j&&te.length>0&&te.map(function(Q){return j[Q]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return g.components_[l]=n,g.components_[iu(l)]=n,n},g.getComponent=function(l){if(l&&g.components_)return g.components_[l]},g}();function Da(g,u,a,l){return function od(g,u,a){if("number"!=typeof u||u<0||u>a)throw new Error("Failed to execute '"+g+"' on 'TimeRanges': The index provided ("+u+") is non-numeric or out of bounds (0-"+a+").")}(g,l,a.length-1),a[l][u]}function pl(g){var u;return u=void 0===g||0===g.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:g.length,start:Da.bind(null,"start",0,g),end:Da.bind(null,"end",1,g)},ce().Symbol&&ce().Symbol.iterator&&(u[ce().Symbol.iterator]=function(){return(g||[]).values()}),u}function Mo(g,u){return Array.isArray(g)?pl(g):void 0===g||void 0===u?pl():pl([[g,u]])}function zu(g,u){var l,n,a=0;if(!u)return 0;(!g||!g.length)&&(g=Mo(0,0));for(var o=0;o<g.length;o++)l=g.start(o),(n=g.end(o))>u&&(n=u),a+=n-l;return a/u}function Aa(g){if(g instanceof Aa)return g;"number"==typeof g?this.code=g:"string"==typeof g?this.message=g:Ea(g)&&("number"==typeof g.code&&(this.code=g.code),as(this,g)),this.message||(this.message=Aa.defaultMessages[this.code]||"")}fn.prototype.supportsRaf_="function"==typeof ce().requestAnimationFrame&&"function"==typeof ce().cancelAnimationFrame,fn.registerComponent("Component",fn),Aa.prototype.code=0,Aa.prototype.message="",Aa.prototype.status=null,Aa.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Aa.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var ha=0;ha<Aa.errorTypes.length;ha++)Aa[Aa.errorTypes[ha]]=ha,Aa.prototype[Aa.errorTypes[ha]]=ha;function Rl(g){return null!=g&&"function"==typeof g.then}function Ba(g){Rl(g)&&g.then(null,function(u){})}var Nl=function(u){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(l,n,o){return u[n]&&(l[n]=u[n]),l},{cues:u.cues&&Array.prototype.map.call(u.cues,function(l){return{startTime:l.startTime,endTime:l.endTime,text:l.text,id:l.id}})})},Eh="vjs-modal-dialog",Ll=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).handleKeyDown_=function(h){return o.handleKeyDown(h)},o.close_=function(h){return o.close(h)},o.opened_=o.hasBeenOpened_=o.hasBeenFilled_=!1,o.closeable(!o.options_.uncloseable),o.content(o.options_.content),o.contentEl_=jr("div",{className:Eh+"-content"},{role:"document"}),o.descEl_=jr("p",{className:Eh+"-description vjs-control-text",id:o.el().getAttribute("aria-describedby")}),Sa(o.descEl_,o.description()),o.el_.appendChild(o.descEl_),o.el_.appendChild(o.contentEl_),o}re(u,g);var a=u.prototype;return a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},a.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,g.prototype.dispose.call(this)},a.buildCSSClass=function(){return Eh+" vjs-hidden "+g.prototype.buildCSSClass.call(this)},a.label=function(){return this.localize(this.options_.label||"Modal Window")},a.description=function(){var n=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(n+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),n},a.open=function(){if(!this.opened_){var n=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!n.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&n.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=n.controls(),n.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},a.opened=function(n){return"boolean"==typeof n&&this[n?"open":"close"](),this.opened_},a.close=function(){if(this.opened_){var n=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&n.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&n.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},a.closeable=function(n){if("boolean"==typeof n){var o=this.closeable_=!!n,h=this.getChild("closeButton");if(o&&!h){var _=this.contentEl_;this.contentEl_=this.el_,h=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=_,this.on(h,"close",this.close_)}!o&&h&&(this.off(h,"close",this.close_),this.removeChild(h),h.dispose())}return this.closeable_},a.fill=function(){this.fillWith(this.content())},a.fillWith=function(n){var o=this.contentEl(),h=o.parentNode,_=o.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,h.removeChild(o),this.empty(),xu(o,n),this.trigger("modalfill"),_?h.insertBefore(o,_):h.appendChild(o);var C=this.getChild("closeButton");C&&h.appendChild(C.el_)},a.empty=function(){this.trigger("beforemodalempty"),Pn(this.contentEl()),this.trigger("modalempty")},a.content=function(n){return typeof n<"u"&&(this.content_=n),this.content_},a.conditionalFocus_=function(){var n=Ye().activeElement,o=this.player_.el_;this.previouslyActiveEl_=null,(o.contains(n)||o===n)&&(this.previouslyActiveEl_=n,this.focus())},a.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},a.handleKeyDown=function(n){if(n.stopPropagation(),lt().isEventKey(n,"Escape")&&this.closeable())return n.preventDefault(),void this.close();if(lt().isEventKey(n,"Tab")){for(var _,o=this.focusableEls_(),h=this.el_.querySelector(":focus"),C=0;C<o.length;C++)if(h===o[C]){_=C;break}Ye().activeElement===this.el_&&(_=0),n.shiftKey&&0===_?(o[o.length-1].focus(),n.preventDefault()):!n.shiftKey&&_===o.length-1&&(o[0].focus(),n.preventDefault())}},a.focusableEls_=function(){var n=this.el_.querySelectorAll("*");return Array.prototype.filter.call(n,function(o){return(o instanceof ce().HTMLAnchorElement||o instanceof ce().HTMLAreaElement)&&o.hasAttribute("href")||(o instanceof ce().HTMLInputElement||o instanceof ce().HTMLSelectElement||o instanceof ce().HTMLTextAreaElement||o instanceof ce().HTMLButtonElement)&&!o.hasAttribute("disabled")||o instanceof ce().HTMLIFrameElement||o instanceof ce().HTMLObjectElement||o instanceof ce().HTMLEmbedElement||o.hasAttribute("tabindex")&&-1!==o.getAttribute("tabindex")||o.hasAttribute("contenteditable")})},u}(fn);Ll.prototype.options_={pauseOnOpen:!0,temporary:!0},fn.registerComponent("ModalDialog",Ll);var Mc=function(g){function u(l){var n;void 0===l&&(l=[]),(n=g.call(this)||this).tracks_=[],Object.defineProperty(q(n),"length",{get:function(){return this.tracks_.length}});for(var o=0;o<l.length;o++)n.addTrack(l[o]);return n}re(u,g);var a=u.prototype;return a.addTrack=function(n){var o=this,h=this.tracks_.length;""+h in this||Object.defineProperty(this,h,{get:function(){return this.tracks_[h]}}),-1===this.tracks_.indexOf(n)&&(this.tracks_.push(n),this.trigger({track:n,type:"addtrack",target:this})),n.labelchange_=function(){o.trigger({track:n,type:"labelchange",target:o})},Pe(n)&&n.addEventListener("labelchange",n.labelchange_)},a.removeTrack=function(n){for(var o,h=0,_=this.length;h<_;h++)if(this[h]===n){(o=this[h]).off&&o.off(),this.tracks_.splice(h,1);break}o&&this.trigger({track:o,type:"removetrack",target:this})},a.getTrackById=function(n){for(var o=null,h=0,_=this.length;h<_;h++){var C=this[h];if(C.id===n){o=C;break}}return o},u}(D);for(var kf in Mc.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},Mc.prototype.allowedEvents_)Mc.prototype["on"+kf]=null;var kc=function(u,a){for(var l=0;l<u.length;l++)!Object.keys(u[l]).length||a.id===u[l].id||(u[l].enabled=!1)},Fl=function(g){function u(l){var n;void 0===l&&(l=[]);for(var o=l.length-1;o>=0;o--)if(l[o].enabled){kc(l,l[o]);break}return(n=g.call(this,l)||this).changing_=!1,n}re(u,g);var a=u.prototype;return a.addTrack=function(n){var o=this;n.enabled&&kc(this,n),g.prototype.addTrack.call(this,n),n.addEventListener&&(n.enabledChange_=function(){o.changing_||(o.changing_=!0,kc(o,n),o.changing_=!1,o.trigger("change"))},n.addEventListener("enabledchange",n.enabledChange_))},a.removeTrack=function(n){g.prototype.removeTrack.call(this,n),n.removeEventListener&&n.enabledChange_&&(n.removeEventListener("enabledchange",n.enabledChange_),n.enabledChange_=null)},u}(Mc),nc=function(u,a){for(var l=0;l<u.length;l++)!Object.keys(u[l]).length||a.id===u[l].id||(u[l].selected=!1)},ad=function(g){function u(l){var n;void 0===l&&(l=[]);for(var o=l.length-1;o>=0;o--)if(l[o].selected){nc(l,l[o]);break}return(n=g.call(this,l)||this).changing_=!1,Object.defineProperty(q(n),"selectedIndex",{get:function(){for(var _=0;_<this.length;_++)if(this[_].selected)return _;return-1},set:function(){}}),n}re(u,g);var a=u.prototype;return a.addTrack=function(n){var o=this;n.selected&&nc(this,n),g.prototype.addTrack.call(this,n),n.addEventListener&&(n.selectedChange_=function(){o.changing_||(o.changing_=!0,nc(o,n),o.changing_=!1,o.trigger("change"))},n.addEventListener("selectedchange",n.selectedChange_))},a.removeTrack=function(n){g.prototype.removeTrack.call(this,n),n.removeEventListener&&n.selectedChange_&&(n.removeEventListener("selectedchange",n.selectedChange_),n.selectedChange_=null)},u}(Mc),Sh=function(g){function u(){return g.apply(this,arguments)||this}re(u,g);var a=u.prototype;return a.addTrack=function(n){var o=this;g.prototype.addTrack.call(this,n),this.queueChange_||(this.queueChange_=function(){return o.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return o.trigger("selectedlanguagechange")}),n.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(n.kind)&&n.addEventListener("modechange",this.triggerSelectedlanguagechange_)},a.removeTrack=function(n){g.prototype.removeTrack.call(this,n),n.removeEventListener&&(this.queueChange_&&n.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&n.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},u}(Mc),jl=function(){function g(a){void 0===a&&(a=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var l=0,n=a.length;l<n;l++)this.addTrackElement_(a[l])}var u=g.prototype;return u.addTrackElement_=function(l){var n=this.trackElements_.length;""+n in this||Object.defineProperty(this,n,{get:function(){return this.trackElements_[n]}}),-1===this.trackElements_.indexOf(l)&&this.trackElements_.push(l)},u.getTrackElementByTrack_=function(l){for(var n,o=0,h=this.trackElements_.length;o<h;o++)if(l===this.trackElements_[o].track){n=this.trackElements_[o];break}return n},u.removeTrackElement_=function(l){for(var n=0,o=this.trackElements_.length;n<o;n++)if(l===this.trackElements_[n]){this.trackElements_[n].track&&"function"==typeof this.trackElements_[n].track.off&&this.trackElements_[n].track.off(),"function"==typeof this.trackElements_[n].off&&this.trackElements_[n].off(),this.trackElements_.splice(n,1);break}},g}(),Pc=function(){function g(a){g.prototype.setCues_.call(this,a),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var u=g.prototype;return u.setCues_=function(l){var n=this.length||0,o=0,h=l.length;this.cues_=l,this.length_=l.length;var _=function(A){""+A in this||Object.defineProperty(this,""+A,{get:function(){return this.cues_[A]}})};if(n<h)for(o=n;o<h;o++)_.call(this,o)},u.getCueById=function(l){for(var n=null,o=0,h=this.length;o<h;o++){var _=this[o];if(_.id===l){n=_;break}}return n},g}(),Ul={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},rc={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},wp={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Bd={disabled:"disabled",hidden:"hidden",showing:"showing"},Bl=function(g){function u(a){var l;void 0===a&&(a={}),l=g.call(this)||this;var n={id:a.id||"vjs_track_"+Ca(),kind:a.kind||"",language:a.language||""},o=a.label||"",h=function(A){Object.defineProperty(q(l),A,{get:function(){return n[A]},set:function(){}})};for(var _ in n)h(_);return Object.defineProperty(q(l),"label",{get:function(){return o},set:function(A){A!==o&&(o=A,this.trigger("labelchange"))}}),l}return re(u,g),u}(D),Du=function(u){var a=["protocol","hostname","port","pathname","search","hash","host"],l=Ye().createElement("a");l.href=u;for(var n={},o=0;o<a.length;o++)n[a[o]]=l[a[o]];return"http:"===n.protocol&&(n.host=n.host.replace(/:80$/,"")),"https:"===n.protocol&&(n.host=n.host.replace(/:443$/,"")),n.protocol||(n.protocol=ce().location.protocol),n.host||(n.host=ce().location.host),n},Au=function(u){if(!u.match(/^https?:\/\//)){var a=Ye().createElement("a");a.href=u,u=a.href}return u},Os=function(u){if("string"==typeof u){var l=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(u);if(l)return l.pop().toLowerCase()}return""},Vl=function(u,a){void 0===a&&(a=ce().location);var l=Du(u);return(":"===l.protocol?a.protocol:l.protocol)+l.host!==a.protocol+a.host},ou=Object.freeze({__proto__:null,parseUrl:Du,getAbsoluteURL:Au,getFileExtension:Os,isCrossOrigin:Vl}),il=function(u,a){var l=new(ce().WebVTT.Parser)(ce(),ce().vttjs,ce().WebVTT.StringDecoder()),n=[];l.oncue=function(o){a.addCue(o)},l.onparsingerror=function(o){n.push(o)},l.onflush=function(){a.trigger({type:"loadeddata",target:a})},l.parse(u),n.length>0&&(ce().console&&ce().console.groupCollapsed&&ce().console.groupCollapsed("Text Track parsing errors for "+a.src),n.forEach(function(o){return ei.error(o)}),ce().console&&ce().console.groupEnd&&ce().console.groupEnd()),l.flush()},Rs=function(u,a){var l={uri:u},n=Vl(u);n&&(l.cors=n);var o="use-credentials"===a.tech_.crossOrigin();o&&(l.withCredentials=o),Y()(l,ss(this,function(h,_,C){if(h)return ei.error(h,_);a.loaded_=!0,"function"!=typeof ce().WebVTT?a.tech_&&a.tech_.any(["vttjsloaded","vttjserror"],function(A){if("vttjserror"!==A.type)return il(C,a);ei.error("vttjs failed to load, stopping trying to process "+a.src)}):il(C,a)}))},ic=function(g){function u(l){var n;if(void 0===l&&(l={}),!l.tech)throw new Error("A tech was not provided.");var o=Qi(l,{kind:wp[l.kind]||"subtitles",language:l.language||l.srclang||""}),h=Bd[o.mode]||"disabled",_=o.default;("metadata"===o.kind||"chapters"===o.kind)&&(h="hidden"),(n=g.call(this,o)||this).tech_=o.tech,n.cues_=[],n.activeCues_=[],n.preload_=!1!==n.tech_.preloadTextTracks;var C=new Pc(n.cues_),A=new Pc(n.activeCues_),j=!1;return n.timeupdateHandler=ss(q(n),function(Q){if(void 0===Q&&(Q={}),!this.tech_.isDisposed()){if(!this.tech_.isReady_)return void("timeupdate"!==Q.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)));this.activeCues=this.activeCues,j&&(this.trigger("cuechange"),j=!1),"timeupdate"!==Q.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}}),n.tech_.one("dispose",function(){n.stopTracking()}),"disabled"!==h&&n.startTracking(),Object.defineProperties(q(n),{default:{get:function(){return _},set:function(){}},mode:{get:function(){return h},set:function(Se){Bd[Se]&&h!==Se&&(h=Se,!this.preload_&&"disabled"!==h&&0===this.cues.length&&Rs(this.src,this),this.stopTracking(),"disabled"!==h&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?C:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return A;for(var Se=this.tech_.currentTime(),je=[],We=0,$e=this.cues.length;We<$e;We++){var kt=this.cues[We];(kt.startTime<=Se&&kt.endTime>=Se||kt.startTime===kt.endTime&&kt.startTime<=Se&&kt.startTime+.5>=Se)&&je.push(kt)}if(j=!1,je.length!==this.activeCues_.length)j=!0;else for(var pn=0;pn<je.length;pn++)-1===this.activeCues_.indexOf(je[pn])&&(j=!0);return this.activeCues_=je,A.setCues_(this.activeCues_),A},set:function(){}}}),o.src?(n.src=o.src,n.preload_||(n.loaded_=!0),(n.preload_||"subtitles"!==o.kind&&"captions"!==o.kind)&&Rs(n.src,q(n))):n.loaded_=!0,n}re(u,g);var a=u.prototype;return a.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},a.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},a.addCue=function(n){var o=n;if(ce().vttjs&&!(n instanceof ce().vttjs.VTTCue)){for(var h in o=new(ce().vttjs.VTTCue)(n.startTime,n.endTime,n.text),n)h in o||(o[h]=n[h]);o.id=n.id,o.originalCue_=n}for(var _=this.tech_.textTracks(),C=0;C<_.length;C++)_[C]!==this&&_[C].removeCue(o);this.cues_.push(o),this.cues.setCues_(this.cues_)},a.removeCue=function(n){for(var o=this.cues_.length;o--;){var h=this.cues_[o];if(h===n||h.originalCue_&&h.originalCue_===n){this.cues_.splice(o,1),this.cues.setCues_(this.cues_);break}}},u}(Bl);ic.prototype.allowedEvents_={cuechange:"cuechange"};var na=function(g){function u(a){var l;void 0===a&&(a={});var n=Qi(a,{kind:rc[a.kind]||""});l=g.call(this,n)||this;var o=!1;return Object.defineProperty(q(l),"enabled",{get:function(){return o},set:function(_){"boolean"!=typeof _||_===o||(o=_,this.trigger("enabledchange"))}}),n.enabled&&(l.enabled=n.enabled),l.loaded_=!0,l}return re(u,g),u}(Bl),Ns=function(g){function u(a){var l;void 0===a&&(a={});var n=Qi(a,{kind:Ul[a.kind]||""});l=g.call(this,n)||this;var o=!1;return Object.defineProperty(q(l),"selected",{get:function(){return o},set:function(_){"boolean"!=typeof _||_===o||(o=_,this.trigger("selectedchange"))}}),n.selected&&(l.selected=n.selected),l}return re(u,g),u}(Bl),Mu=function(g){function u(a){var l;void 0===a&&(a={}),l=g.call(this)||this;var n,o=new ic(a);return l.kind=o.kind,l.src=o.src,l.srclang=o.language,l.label=o.label,l.default=o.default,Object.defineProperties(q(l),{readyState:{get:function(){return n}},track:{get:function(){return o}}}),n=0,o.addEventListener("loadeddata",function(){n=2,l.trigger({type:"load",target:q(l)})}),l}return re(u,g),u}(D);Mu.prototype.allowedEvents_={load:"load"},Mu.NONE=0,Mu.LOADING=1,Mu.LOADED=2,Mu.ERROR=3;var Ni={audio:{ListClass:Fl,TrackClass:na,capitalName:"Audio"},video:{ListClass:ad,TrackClass:Ns,capitalName:"Video"},text:{ListClass:Sh,TrackClass:ic,capitalName:"Text"}};Object.keys(Ni).forEach(function(g){Ni[g].getterName=g+"Tracks",Ni[g].privateName=g+"Tracks_"});var sc={remoteText:{ListClass:Sh,TrackClass:ic,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:jl,TrackClass:Mu,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ri=Ke({},Ni,sc);sc.names=Object.keys(sc),Ni.names=Object.keys(Ni),ri.names=[].concat(sc.names).concat(Ni.names);var xi=function(g){function u(l,n){var o;return void 0===l&&(l={}),void 0===n&&(n=function(){}),l.reportTouchActivity=!1,(o=g.call(this,null,l,n)||this).onDurationChange_=function(h){return o.onDurationChange(h)},o.trackProgress_=function(h){return o.trackProgress(h)},o.trackCurrentTime_=function(h){return o.trackCurrentTime(h)},o.stopTrackingCurrentTime_=function(h){return o.stopTrackingCurrentTime(h)},o.disposeSourceHandler_=function(h){return o.disposeSourceHandler(h)},o.queuedHanders_=new Set,o.hasStarted_=!1,o.on("playing",function(){this.hasStarted_=!0}),o.on("loadstart",function(){this.hasStarted_=!1}),ri.names.forEach(function(h){var _=ri[h];l&&l[_.getterName]&&(o[_.privateName]=l[_.getterName])}),o.featuresProgressEvents||o.manualProgressOn(),o.featuresTimeupdateEvents||o.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(h){!1===l["native"+h+"Tracks"]&&(o["featuresNative"+h+"Tracks"]=!1)}),!1===l.nativeCaptions||!1===l.nativeTextTracks?o.featuresNativeTextTracks=!1:(!0===l.nativeCaptions||!0===l.nativeTextTracks)&&(o.featuresNativeTextTracks=!0),o.featuresNativeTextTracks||o.emulateTextTracks(),o.preloadTextTracks=!1!==l.preloadTextTracks,o.autoRemoteTextTracks_=new ri.text.ListClass,o.initTrackListeners(),l.nativeControlsForTouch||o.emitTapEvents(),o.constructor&&(o.name_=o.constructor.name||"Unknown Tech"),o}re(u,g);var a=u.prototype;return a.triggerSourceset=function(n){var o=this;this.isReady_||this.one("ready",function(){return o.setTimeout(function(){return o.triggerSourceset(n)},1)}),this.trigger({src:n,type:"sourceset"})},a.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},a.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},a.trackProgress=function(n){this.stopTrackingProgress(),this.progressInterval=this.setInterval(ss(this,function(){var o=this.bufferedPercent();this.bufferedPercent_!==o&&this.trigger("progress"),this.bufferedPercent_=o,1===o&&this.stopTrackingProgress()}),500)},a.onDurationChange=function(n){this.duration_=this.duration()},a.buffered=function(){return Mo(0,0)},a.bufferedPercent=function(){return zu(this.buffered(),this.duration_)},a.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},a.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},a.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},a.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},a.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},a.dispose=function(){this.clearTracks(Ni.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),g.prototype.dispose.call(this)},a.clearTracks=function(n){var o=this;(n=[].concat(n)).forEach(function(h){for(var _=o[h+"Tracks"]()||[],C=_.length;C--;){var A=_[C];"text"===h&&o.removeRemoteTextTrack(A),_.removeTrack(A)}})},a.cleanupAutoTextTracks=function(){for(var n=this.autoRemoteTextTracks_||[],o=n.length;o--;)this.removeRemoteTextTrack(n[o])},a.reset=function(){},a.crossOrigin=function(){},a.setCrossOrigin=function(){},a.error=function(n){return void 0!==n&&(this.error_=new Aa(n),this.trigger("error")),this.error_},a.played=function(){return this.hasStarted_?Mo(0,0):Mo()},a.play=function(){},a.setScrubbing=function(){},a.scrubbing=function(){},a.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},a.initTrackListeners=function(){var n=this;Ni.names.forEach(function(o){var _=function(){n.trigger(o+"trackchange")},C=n[Ni[o].getterName]();C.addEventListener("removetrack",_),C.addEventListener("addtrack",_),n.on("dispose",function(){C.removeEventListener("removetrack",_),C.removeEventListener("addtrack",_)})})},a.addWebVttScript_=function(){var n=this;if(!ce().WebVTT)if(Ye().body.contains(this.el())){if(!this.options_["vtt.js"]&&Io(Xe())&&Object.keys(Xe()).length>0)return void this.trigger("vttjsloaded");var o=Ye().createElement("script");o.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",o.onload=function(){n.trigger("vttjsloaded")},o.onerror=function(){n.trigger("vttjserror")},this.on("dispose",function(){o.onload=null,o.onerror=null}),ce().WebVTT=!0,this.el().parentNode.appendChild(o)}else this.ready(this.addWebVttScript_)},a.emulateTextTracks=function(){var n=this,o=this.textTracks(),h=this.remoteTextTracks(),_=function(Q){return o.addTrack(Q.track)},C=function(Q){return o.removeTrack(Q.track)};h.on("addtrack",_),h.on("removetrack",C),this.addWebVttScript_();var A=function(){return n.trigger("texttrackchange")},j=function(){A();for(var Q=0;Q<o.length;Q++){var Se=o[Q];Se.removeEventListener("cuechange",A),"showing"===Se.mode&&Se.addEventListener("cuechange",A)}};j(),o.addEventListener("change",j),o.addEventListener("addtrack",j),o.addEventListener("removetrack",j),this.on("dispose",function(){h.off("addtrack",_),h.off("removetrack",C),o.removeEventListener("change",j),o.removeEventListener("addtrack",j),o.removeEventListener("removetrack",j);for(var te=0;te<o.length;te++)o[te].removeEventListener("cuechange",A)})},a.addTextTrack=function(n,o,h){if(!n)throw new Error("TextTrack kind is required but was not provided");return function to(g,u,a,l,n){void 0===n&&(n={});var o=g.textTracks();n.kind=u,a&&(n.label=a),l&&(n.language=l),n.tech=g;var h=new ri.text.TrackClass(n);return o.addTrack(h),h}(this,n,o,h)},a.createRemoteTextTrack=function(n){var o=Qi(n,{tech:this});return new sc.remoteTextEl.TrackClass(o)},a.addRemoteTextTrack=function(n,o){var h=this;void 0===n&&(n={});var _=this.createRemoteTextTrack(n);return!0!==o&&!1!==o&&(ei.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),o=!0),this.remoteTextTrackEls().addTrackElement_(_),this.remoteTextTracks().addTrack(_.track),!0!==o&&this.ready(function(){return h.autoRemoteTextTracks_.addTrack(_.track)}),_},a.removeRemoteTextTrack=function(n){var o=this.remoteTextTrackEls().getTrackElementByTrack_(n);this.remoteTextTrackEls().removeTrackElement_(o),this.remoteTextTracks().removeTrack(n),this.autoRemoteTextTracks_.removeTrack(n)},a.getVideoPlaybackQuality=function(){return{}},a.requestPictureInPicture=function(){var n=this.options_.Promise||ce().Promise;if(n)return n.reject()},a.disablePictureInPicture=function(){return!0},a.setDisablePictureInPicture=function(){},a.requestVideoFrameCallback=function(n){var o=this,h=Ca();return!this.isReady_||this.paused()?(this.queuedHanders_.add(h),this.one("playing",function(){o.queuedHanders_.has(h)&&(o.queuedHanders_.delete(h),n())})):this.requestNamedAnimationFrame(h,n),h},a.cancelVideoFrameCallback=function(n){this.queuedHanders_.has(n)?this.queuedHanders_.delete(n):this.cancelNamedAnimationFrame(n)},a.setPoster=function(){},a.playsinline=function(){},a.setPlaysinline=function(){},a.overrideNativeAudioTracks=function(){},a.overrideNativeVideoTracks=function(){},a.canPlayType=function(){return""},u.canPlayType=function(){return""},u.canPlaySource=function(n,o){return u.canPlayType(n.type)},u.isTech=function(n){return n.prototype instanceof u||n instanceof u||n===u},u.registerTech=function(n,o){if(u.techs_||(u.techs_={}),!u.isTech(o))throw new Error("Tech "+n+" must be a Tech");if(!u.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!u.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return n=Yi(n),u.techs_[n]=o,u.techs_[iu(n)]=o,"Tech"!==n&&u.defaultTechOrder_.push(n),o},u.getTech=function(n){if(n){if(u.techs_&&u.techs_[n])return u.techs_[n];if(n=Yi(n),ce()&&ce().videojs&&ce().videojs[n])return ei.warn("The "+n+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),ce().videojs[n]}},u}(fn);ri.names.forEach(function(g){var u=ri[g];xi.prototype[u.getterName]=function(){return this[u.privateName]=this[u.privateName]||new u.ListClass,this[u.privateName]}}),xi.prototype.featuresVolumeControl=!0,xi.prototype.featuresMuteControl=!0,xi.prototype.featuresFullscreenResize=!1,xi.prototype.featuresPlaybackRate=!1,xi.prototype.featuresProgressEvents=!1,xi.prototype.featuresSourceset=!1,xi.prototype.featuresTimeupdateEvents=!1,xi.prototype.featuresNativeTextTracks=!1,xi.prototype.featuresVideoFrameCallback=!1,xi.withSourceHandlers=function(g){g.registerSourceHandler=function(a,l){var n=g.sourceHandlers;n||(n=g.sourceHandlers=[]),void 0===l&&(l=n.length),n.splice(l,0,a)},g.canPlayType=function(a){for(var n,l=g.sourceHandlers||[],o=0;o<l.length;o++)if(n=l[o].canPlayType(a))return n;return""},g.selectSourceHandler=function(a,l){for(var n=g.sourceHandlers||[],h=0;h<n.length;h++)if(n[h].canHandleSource(a,l))return n[h];return null},g.canPlaySource=function(a,l){var n=g.selectSourceHandler(a,l);return n?n.canHandleSource(a,l):""},["seekable","seeking","duration"].forEach(function(a){var l=this[a];"function"==typeof l&&(this[a]=function(){return this.sourceHandler_&&this.sourceHandler_[a]?this.sourceHandler_[a].apply(this.sourceHandler_,arguments):l.apply(this,arguments)})},g.prototype),g.prototype.setSource=function(a){var l=g.selectSourceHandler(a,this.options_);l||(g.nativeSourceHandler?l=g.nativeSourceHandler:ei.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),l!==g.nativeSourceHandler&&(this.currentSource_=a),this.sourceHandler_=l.handleSource(a,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},g.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},fn.registerComponent("Tech",xi),xi.registerTech("Tech",xi),xi.defaultTechOrder_=[];var ku={},fa={},Pu={};function O(g,u,a){g.setTimeout(function(){return Ho(u,ku[u.type],a,g)},1)}function ht(g,u,a,l){void 0===l&&(l=null);var n="call"+Yi(a),o=g.reduce(Fn(n),l),h=o===Pu,_=h?null:u[a](o);return function gr(g,u,a,l){for(var n=g.length-1;n>=0;n--){var o=g[n];o[u]&&o[u](l,a)}}(g,a,_,h),_}var It={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Ft={setCurrentTime:1,setMuted:1,setVolume:1},Kn={play:1,pause:1};function Fn(g){return function(u,a){return u===Pu?Pu:a[g]?a[g](u):u}}function Ho(g,u,a,l,n,o){void 0===g&&(g={}),void 0===u&&(u=[]),void 0===n&&(n=[]),void 0===o&&(o=!1);var _=u[0],C=u.slice(1);if("string"==typeof _)Ho(g,ku[_],a,l,n,o);else if(_){var A=function Or(g,u){var a=fa[g.id()],l=null;if(null==a)return l=u(g),fa[g.id()]=[[u,l]],l;for(var n=0;n<a.length;n++){var o=a[n];o[0]===u&&(l=o[1])}return null===l&&(l=u(g),a.push([u,l])),l}(l,_);if(!A.setSource)return n.push(A),Ho(g,C,a,l,n,o);A.setSource(as({},g),function(j,te){if(j)return Ho(g,C,a,l,n,o);n.push(A),Ho(te,g.type===te.type?C:ku[te.type],a,l,n,o)})}else C.length?Ho(g,C,a,l,n,o):o?a(g,n):Ho(g,ku["*"],a,l,n,!0)}var To={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},gl=function(u){void 0===u&&(u="");var a=Os(u);return To[a.toLowerCase()]||""},Hl=function g(u){if(Array.isArray(u)){var a=[];u.forEach(function(l){l=g(l),Array.isArray(l)?a=a.concat(l):Ea(l)&&a.push(l)}),u=a}else u="string"==typeof u&&u.trim()?[Zo({src:u})]:Ea(u)&&"string"==typeof u.src&&u.src&&u.src.trim()?[Zo(u)]:[];return u};function Zo(g){if(!g.type){var u=gl(g.src);u&&(g.type=u)}return g}var uu=function(g){function u(a,l,n){var o,h=Qi({createEl:!1},l);if(o=g.call(this,a,h,n)||this,l.playerOptions.sources&&0!==l.playerOptions.sources.length)a.src(l.playerOptions.sources);else for(var _=0,C=l.playerOptions.techOrder;_<C.length;_++){var A=Yi(C[_]),j=xi.getTech(A);if(A||(j=fn.getComponent(A)),j&&j.isSupported()){a.loadTech_(A);break}}return o}return re(u,g),u}(fn);fn.registerComponent("MediaLoader",uu);var ld=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).options_.controlText&&o.controlText(o.options_.controlText),o.handleMouseOver_=function(h){return o.handleMouseOver(h)},o.handleMouseOut_=function(h){return o.handleMouseOut(h)},o.handleClick_=function(h){return o.handleClick(h)},o.handleKeyDown_=function(h){return o.handleKeyDown(h)},o.emitTapEvents(),o.enable(),o}re(u,g);var a=u.prototype;return a.createEl=function(n,o,h){void 0===n&&(n="div"),void 0===o&&(o={}),void 0===h&&(h={}),o=as({className:this.buildCSSClass(),tabIndex:0},o),"button"===n&&ei.error("Creating a ClickableComponent with an HTML element of "+n+" is not supported; use a Button instead."),h=as({role:"button"},h),this.tabIndex_=o.tabIndex;var _=jr(n,o,h);return _.appendChild(jr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(_),_},a.dispose=function(){this.controlTextEl_=null,g.prototype.dispose.call(this)},a.createControlTextEl=function(n){return this.controlTextEl_=jr("span",{className:"vjs-control-text"},{"aria-live":"polite"}),n&&n.appendChild(this.controlTextEl_),this.controlText(this.controlText_,n),this.controlTextEl_},a.controlText=function(n,o){if(void 0===o&&(o=this.el()),void 0===n)return this.controlText_||"Need Text";var h=this.localize(n);this.controlText_=n,Sa(this.controlTextEl_,h),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&o.setAttribute("title",h)},a.buildCSSClass=function(){return"vjs-control vjs-button "+g.prototype.buildCSSClass.call(this)},a.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},a.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},a.handleLanguagechange=function(){this.controlText(this.controlText_)},a.handleClick=function(n){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},a.handleKeyDown=function(n){lt().isEventKey(n,"Space")||lt().isEventKey(n,"Enter")?(n.preventDefault(),n.stopPropagation(),this.trigger("click")):g.prototype.handleKeyDown.call(this,n)},u}(fn);fn.registerComponent("ClickableComponent",ld);var Of=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).update(),o.update_=function(h){return o.update(h)},l.on("posterchange",o.update_),o}re(u,g);var a=u.prototype;return a.dispose=function(){this.player().off("posterchange",this.update_),g.prototype.dispose.call(this)},a.createEl=function(){return jr("div",{className:"vjs-poster",tabIndex:-1})},a.update=function(n){var o=this.player().poster();this.setSrc(o),o?this.show():this.hide()},a.setSrc=function(n){var o="";n&&(o='url("'+n+'")'),this.el_.style.backgroundImage=o},a.handleClick=function(n){if(this.player_.controls()){var o=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((Lt||z)&&o)&&this.player_.tech(!0).focus(),this.player_.paused()?Ba(this.player_.play()):this.player_.pause()}},u}(ld);fn.registerComponent("PosterImage",Of);var Wu="#222",Ha={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Ch(g,u){var a;if(4===g.length)a=g[1]+g[1]+g[2]+g[2]+g[3]+g[3];else{if(7!==g.length)throw new Error("Invalid color code provided, "+g+"; must be formatted as e.g. #f0e or #f604e2.");a=g.slice(1)}return"rgba("+parseInt(a.slice(0,2),16)+","+parseInt(a.slice(2,4),16)+","+parseInt(a.slice(4,6),16)+","+u+")"}function _s(g,u,a){try{g.style[u]=a}catch{return}}var ml=function(g){function u(l,n,o){var h;h=g.call(this,l,n,o)||this;var _=function(A){return h.updateDisplay(A)};return l.on("loadstart",function(C){return h.toggleDisplay(C)}),l.on("texttrackchange",_),l.on("loadedmetadata",function(C){return h.preselectTrack(C)}),l.ready(ss(q(h),function(){if(l.tech_&&l.tech_.featuresNativeTextTracks)this.hide();else{l.on("fullscreenchange",_),l.on("playerresize",_),ce().addEventListener("orientationchange",_),l.on("dispose",function(){return ce().removeEventListener("orientationchange",_)});for(var C=this.options_.playerOptions.tracks||[],A=0;A<C.length;A++)this.player_.addRemoteTextTrack(C[A],!0);this.preselectTrack()}})),h}re(u,g);var a=u.prototype;return a.preselectTrack=function(){for(var _,C,A,n={captions:1,subtitles:1},o=this.player_.textTracks(),h=this.player_.cache_.selectedLanguage,j=0;j<o.length;j++){var te=o[j];h&&h.enabled&&h.language&&h.language===te.language&&te.kind in n?te.kind===h.kind?A=te:A||(A=te):h&&!h.enabled?(A=null,_=null,C=null):te.default&&("descriptions"!==te.kind||_?te.kind in n&&!C&&(C=te):_=te)}A?A.mode="showing":C?C.mode="showing":_&&(_.mode="showing")},a.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},a.clearDisplay=function(){"function"==typeof ce().WebVTT&&ce().WebVTT.processCues(ce(),[],this.el_)},a.updateDisplay=function(){var n=this.player_.textTracks(),o=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),o){for(var h=[],_=0;_<n.length;++_){var C=n[_];"showing"===C.mode&&h.push(C)}this.updateForTrack(h)}else{for(var A=null,j=null,te=n.length;te--;){var Q=n[te];"showing"===Q.mode&&("descriptions"===Q.kind?A=Q:j=Q)}j?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(j)):A&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(A))}},a.updateDisplayState=function(n){for(var o=this.player_.textTrackSettings.getValues(),h=n.activeCues,_=h.length;_--;){var C=h[_];if(C){var A=C.displayState;if(o.color&&(A.firstChild.style.color=o.color),o.textOpacity&&_s(A.firstChild,"color",Ch(o.color||"#fff",o.textOpacity)),o.backgroundColor&&(A.firstChild.style.backgroundColor=o.backgroundColor),o.backgroundOpacity&&_s(A.firstChild,"backgroundColor",Ch(o.backgroundColor||"#000",o.backgroundOpacity)),o.windowColor&&(o.windowOpacity?_s(A,"backgroundColor",Ch(o.windowColor,o.windowOpacity)):A.style.backgroundColor=o.windowColor),o.edgeStyle&&("dropshadow"===o.edgeStyle?A.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+Wu:"raised"===o.edgeStyle?A.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+Wu:"depressed"===o.edgeStyle?A.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+Wu:"uniform"===o.edgeStyle&&(A.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+Wu)),o.fontPercent&&1!==o.fontPercent){var j=ce().parseFloat(A.style.fontSize);A.style.fontSize=j*o.fontPercent+"px",A.style.height="auto",A.style.top="auto"}o.fontFamily&&"default"!==o.fontFamily&&("small-caps"===o.fontFamily?A.firstChild.style.fontVariant="small-caps":A.firstChild.style.fontFamily=Ha[o.fontFamily])}}},a.updateForTrack=function(n){if(Array.isArray(n)||(n=[n]),"function"==typeof ce().WebVTT&&!n.every(function(Se){return!Se.activeCues})){for(var o=[],h=0;h<n.length;++h)for(var _=n[h],C=0;C<_.activeCues.length;++C)o.push(_.activeCues[C]);ce().WebVTT.processCues(ce(),o,this.el_);for(var A=0;A<n.length;++A){for(var j=n[A],te=0;te<j.activeCues.length;++te){var Q=j.activeCues[te].displayState;zs(Q,"vjs-text-track-cue"),zs(Q,"vjs-text-track-cue-"+(j.language?j.language:A)),j.language&&nl(Q,"lang",j.language)}this.player_.textTrackSettings&&this.updateDisplayState(j)}}},u}(fn);fn.registerComponent("TextTrackDisplay",ml);var Vd=function(g){function u(){return g.apply(this,arguments)||this}return re(u,g),u.prototype.createEl=function(){var n=this.player_.isAudio(),o=this.localize(n?"Audio Player":"Video Player"),h=jr("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[o])}),_=g.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return _.appendChild(h),_},u}(fn);fn.registerComponent("LoadingSpinner",Vd);var sl=function(g){function u(){return g.apply(this,arguments)||this}re(u,g);var a=u.prototype;return a.createEl=function(n,o,h){void 0===o&&(o={}),void 0===h&&(h={});var _=jr("button",o=as({className:this.buildCSSClass()},o),h=as({type:"button"},h));return _.appendChild(jr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(_),_},a.addChild=function(n,o){return void 0===o&&(o={}),ei.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead."),fn.prototype.addChild.call(this,n,o)},a.enable=function(){g.prototype.enable.call(this),this.el_.removeAttribute("disabled")},a.disable=function(){g.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},a.handleKeyDown=function(n){lt().isEventKey(n,"Space")||lt().isEventKey(n,"Enter")?n.stopPropagation():g.prototype.handleKeyDown.call(this,n)},u}(ld);fn.registerComponent("Button",sl);var cd=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).mouseused_=!1,o.on("mousedown",function(h){return o.handleMouseDown(h)}),o}re(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-big-play-button"},a.handleClick=function(n){var o=this.player_.play();if(this.mouseused_&&n.clientX&&n.clientY){var h=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return Ba(o),void(this.player_.tech(!0)&&(!Lt&&!z||!h)&&this.player_.tech(!0).focus())}var _=this.player_.getChild("controlBar"),C=_&&_.getChild("playToggle");if(C){var A=function(){return C.focus()};Rl(o)?o.then(A,function(){}):this.setTimeout(A,1)}else this.player_.tech(!0).focus()},a.handleKeyDown=function(n){this.mouseused_=!1,g.prototype.handleKeyDown.call(this,n)},a.handleMouseDown=function(n){this.mouseused_=!0},u}(sl);cd.prototype.controlText_="Play Video",fn.registerComponent("BigPlayButton",cd);var Hd=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).controlText(n&&n.controlText||o.localize("Close")),o}re(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-close-button "+g.prototype.buildCSSClass.call(this)},a.handleClick=function(n){this.trigger({type:"close",bubbles:!1})},a.handleKeyDown=function(n){lt().isEventKey(n,"Esc")?(n.preventDefault(),n.stopPropagation(),this.trigger("click")):g.prototype.handleKeyDown.call(this,n)},u}(sl);fn.registerComponent("CloseButton",Hd);var dd=function(g){function u(l,n){var o;return void 0===n&&(n={}),o=g.call(this,l,n)||this,n.replay=void 0===n.replay||n.replay,o.on(l,"play",function(h){return o.handlePlay(h)}),o.on(l,"pause",function(h){return o.handlePause(h)}),n.replay&&o.on(l,"ended",function(h){return o.handleEnded(h)}),o}re(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-play-control "+g.prototype.buildCSSClass.call(this)},a.handleClick=function(n){this.player_.paused()?Ba(this.player_.play()):this.player_.pause()},a.handleSeeked=function(n){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(n):this.handlePlay(n)},a.handlePlay=function(n){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},a.handlePause=function(n){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},a.handleEnded=function(n){var o=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(h){return o.handleSeeked(h)})},u}(sl);dd.prototype.controlText_="Play",fn.registerComponent("PlayToggle",dd);var Hi=function(u,a){u=u<0?0:u;var l=Math.floor(u%60),n=Math.floor(u/60%60),o=Math.floor(u/3600),h=Math.floor(a/60%60),_=Math.floor(a/3600);return(isNaN(u)||u===1/0)&&(o=n=l="-"),(o=o>0||_>0?o+":":"")+(n=((o||h>=10)&&n<10?"0"+n:n)+":")+(l<10?"0"+l:l)},bs=Hi;function oc(g,u){return void 0===u&&(u=g),bs(g,u)}var fd=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).on(l,["timeupdate","ended"],function(h){return o.updateContent(h)}),o.updateTextNode_(),o}re(u,g);var a=u.prototype;return a.createEl=function(){var n=this.buildCSSClass(),o=g.prototype.createEl.call(this,"div",{className:n+" vjs-time-control vjs-control"}),h=jr("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xa0"},{role:"presentation"});return o.appendChild(h),this.contentEl_=jr("span",{className:n+"-display"},{"aria-live":"off",role:"presentation"}),o.appendChild(this.contentEl_),o},a.dispose=function(){this.contentEl_=null,this.textNode_=null,g.prototype.dispose.call(this)},a.updateTextNode_=function(n){var o=this;void 0===n&&(n=0),n=oc(n),this.formattedTime_!==n&&(this.formattedTime_=n,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(o.contentEl_){var h=o.textNode_;h&&o.contentEl_.firstChild!==h&&(h=null,ei.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),o.textNode_=Ye().createTextNode(o.formattedTime_),o.textNode_&&(h?o.contentEl_.replaceChild(o.textNode_,h):o.contentEl_.appendChild(o.textNode_))}}))},a.updateContent=function(n){},u}(fn);fd.prototype.labelText_="Time",fd.prototype.controlText_="Time",fn.registerComponent("TimeDisplay",fd);var Ih=function(g){function u(){return g.apply(this,arguments)||this}re(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-current-time"},a.updateContent=function(n){var o;o=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(o)},u}(fd);Ih.prototype.labelText_="Current Time",Ih.prototype.controlText_="Current Time",fn.registerComponent("CurrentTimeDisplay",Ih);var Rf=function(g){function u(l,n){var o,h=function(C){return o.updateContent(C)};return(o=g.call(this,l,n)||this).on(l,"durationchange",h),o.on(l,"loadstart",h),o.on(l,"loadedmetadata",h),o}re(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-duration"},a.updateContent=function(n){var o=this.player_.duration();this.updateTextNode_(o)},u}(fd);Rf.prototype.labelText_="Duration",Rf.prototype.controlText_="Duration",fn.registerComponent("DurationDisplay",Rf);var xh=function(g){function u(){return g.apply(this,arguments)||this}return re(u,g),u.prototype.createEl=function(){var n=g.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),o=g.prototype.createEl.call(this,"div"),h=g.prototype.createEl.call(this,"span",{textContent:"/"});return o.appendChild(h),n.appendChild(o),n},u}(fn);fn.registerComponent("TimeDivider",xh);var Dh=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).on(l,"durationchange",function(h){return o.updateContent(h)}),o}re(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-remaining-time"},a.createEl=function(){var n=g.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&n.insertBefore(jr("span",{},{"aria-hidden":!0},"-"),this.contentEl_),n},a.updateContent=function(n){var o;"number"==typeof this.player_.duration()&&(o=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(o))},u}(fd);Dh.prototype.labelText_="Remaining Time",Dh.prototype.controlText_="Remaining Time",fn.registerComponent("RemainingTimeDisplay",Dh);var Ug=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).updateShowing(),o.on(o.player(),"durationchange",function(h){return o.updateShowing(h)}),o}re(u,g);var a=u.prototype;return a.createEl=function(){var n=g.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=jr("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(jr("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xa0"})),this.contentEl_.appendChild(Ye().createTextNode(this.localize("LIVE"))),n.appendChild(this.contentEl_),n},a.dispose=function(){this.contentEl_=null,g.prototype.dispose.call(this)},a.updateShowing=function(n){this.player().duration()===1/0?this.show():this.hide()},u}(fn);fn.registerComponent("LiveDisplay",Ug);var xp=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).updateLiveEdgeStatus(),o.player_.liveTracker&&(o.updateLiveEdgeStatusHandler_=function(h){return o.updateLiveEdgeStatus(h)},o.on(o.player_.liveTracker,"liveedgechange",o.updateLiveEdgeStatusHandler_)),o}re(u,g);var a=u.prototype;return a.createEl=function(){var n=g.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=jr("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),n.appendChild(this.textEl_),n},a.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},a.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},a.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,g.prototype.dispose.call(this)},u}(sl);xp.prototype.controlText_="Seek to live, currently playing live",fn.registerComponent("SeekToLive",xp);var Dp=function(u,a,l){return u=Number(u),Math.min(l,Math.max(a,isNaN(u)?a:u))},Ah=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).handleMouseDown_=function(h){return o.handleMouseDown(h)},o.handleMouseUp_=function(h){return o.handleMouseUp(h)},o.handleKeyDown_=function(h){return o.handleKeyDown(h)},o.handleClick_=function(h){return o.handleClick(h)},o.handleMouseMove_=function(h){return o.handleMouseMove(h)},o.update_=function(h){return o.update(h)},o.bar=o.getChild(o.options_.barName),o.vertical(!!o.options_.vertical),o.enable(),o}re(u,g);var a=u.prototype;return a.enabled=function(){return this.enabled_},a.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},a.disable=function(){if(this.enabled()){var n=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(n,"mousemove",this.handleMouseMove_),this.off(n,"mouseup",this.handleMouseUp_),this.off(n,"touchmove",this.handleMouseMove_),this.off(n,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},a.createEl=function(n,o,h){return void 0===o&&(o={}),void 0===h&&(h={}),o.className=o.className+" vjs-slider",o=as({tabIndex:0},o),h=as({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},h),g.prototype.createEl.call(this,n,o,h)},a.handleMouseDown=function(n){var o=this.bar.el_.ownerDocument;"mousedown"===n.type&&n.preventDefault(),"touchstart"===n.type&&!Ie&&n.preventDefault(),nd(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(o,"mousemove",this.handleMouseMove_),this.on(o,"mouseup",this.handleMouseUp_),this.on(o,"touchmove",this.handleMouseMove_),this.on(o,"touchend",this.handleMouseUp_),this.handleMouseMove(n,!0)},a.handleMouseMove=function(n){},a.handleMouseUp=function(){var n=this.bar.el_.ownerDocument;Ws(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(n,"mousemove",this.handleMouseMove_),this.off(n,"mouseup",this.handleMouseUp_),this.off(n,"touchmove",this.handleMouseMove_),this.off(n,"touchend",this.handleMouseUp_),this.update()},a.update=function(){var n=this;if(this.el_&&this.bar){var o=this.getProgress();return o===this.progress_||(this.progress_=o,this.requestNamedAnimationFrame("Slider#update",function(){var h=n.vertical()?"height":"width";n.bar.el().style[h]=(100*o).toFixed(2)+"%"})),o}},a.getProgress=function(){return Number(Dp(this.getPercent(),0,1).toFixed(4))},a.calculateDistance=function(n){var o=rl(this.el_,n);return this.vertical()?o.y:o.x},a.handleKeyDown=function(n){lt().isEventKey(n,"Left")||lt().isEventKey(n,"Down")?(n.preventDefault(),n.stopPropagation(),this.stepBack()):lt().isEventKey(n,"Right")||lt().isEventKey(n,"Up")?(n.preventDefault(),n.stopPropagation(),this.stepForward()):g.prototype.handleKeyDown.call(this,n)},a.handleClick=function(n){n.stopPropagation(),n.preventDefault()},a.vertical=function(n){if(void 0===n)return this.vertical_||!1;this.vertical_=!!n,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")},u}(fn);fn.registerComponent("Slider",Ah);var Bg=function(u,a){return Dp(u/a*100,0,100).toFixed(2)+"%"},Vg=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).partEls_=[],o.on(l,"progress",function(h){return o.update(h)}),o}re(u,g);var a=u.prototype;return a.createEl=function(){var n=g.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),o=jr("span",{className:"vjs-control-text"}),h=jr("span",{textContent:this.localize("Loaded")}),_=Ye().createTextNode(": ");return this.percentageEl_=jr("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),n.appendChild(o),o.appendChild(h),o.appendChild(_),o.appendChild(this.percentageEl_),n},a.dispose=function(){this.partEls_=null,this.percentageEl_=null,g.prototype.dispose.call(this)},a.update=function(n){var o=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var h=o.player_.liveTracker,_=o.player_.buffered(),C=h&&h.isLive()?h.seekableEnd():o.player_.duration(),A=o.player_.bufferedEnd(),j=o.partEls_,te=Bg(A,C);o.percent_!==te&&(o.el_.style.width=te,Sa(o.percentageEl_,te),o.percent_=te);for(var Q=0;Q<_.length;Q++){var Se=_.start(Q),je=_.end(Q),We=j[Q];We||(We=o.el_.appendChild(jr()),j[Q]=We),(We.dataset.start!==Se||We.dataset.end!==je)&&(We.dataset.start=Se,We.dataset.end=je,We.style.left=Bg(Se,A),We.style.width=Bg(je-Se,A))}for(var $e=j.length;$e>_.length;$e--)o.el_.removeChild(j[$e-1]);j.length=_.length})},u}(fn);fn.registerComponent("LoadProgressBar",Vg);var Ap=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).update=k(ss(q(o),o.update),30),o}re(u,g);var a=u.prototype;return a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},a.update=function(n,o,h){var _=nu(this.el_),C=eo(this.player_.el()),A=n.width*o;if(C&&_){var j=n.left-C.left+A,te=n.width-A+(C.right-n.right),Q=_.width/2;j<Q?Q+=Q-j:te<Q&&(Q=te),Q<0?Q=0:Q>_.width&&(Q=_.width),Q=Math.round(Q),this.el_.style.right="-"+Q+"px",this.write(h)}},a.write=function(n){Sa(this.el_,n)},a.updateTime=function(n,o,h,_){var C=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var A,j=C.player_.duration();if(C.player_.liveTracker&&C.player_.liveTracker.isLive()){var te=C.player_.liveTracker.liveWindow(),Q=te-o*te;A=(Q<1?"":"-")+oc(Q,te)}else A=oc(h,j);C.update(n,o,A),_&&_()})},u}(fn);fn.registerComponent("TimeTooltip",Ap);var pd=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).update=k(ss(q(o),o.update),30),o}re(u,g);var a=u.prototype;return a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},a.update=function(n,o){var h=this.getChild("timeTooltip");if(h){var _=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();h.updateTime(n,o,_)}},u}(fn);pd.prototype.options_={children:[]},!mr&&!Ja&&pd.prototype.options_.children.push("timeTooltip"),fn.registerComponent("PlayProgressBar",pd);var Xm=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).update=k(ss(q(o),o.update),30),o}re(u,g);var a=u.prototype;return a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},a.update=function(n,o){var h=this,_=o*this.player_.duration();this.getChild("timeTooltip").updateTime(n,o,_,function(){h.el_.style.left=n.width*o+"px"})},u}(fn);Xm.prototype.options_={children:["timeTooltip"]},fn.registerComponent("MouseTimeDisplay",Xm);var md=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).setEventHandlers_(),o}re(u,g);var a=u.prototype;return a.setEventHandlers_=function(){var n=this;this.update_=ss(this,this.update),this.update=k(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(o){return n.enableInterval_(o)},this.disableIntervalHandler_=function(o){return n.disableInterval_(o)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Ye()&&"visibilityState"in Ye()&&this.on(Ye(),"visibilitychange",this.toggleVisibility_)},a.toggleVisibility_=function(n){"hidden"===Ye().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(n)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},a.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},a.disableInterval_=function(n){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&n&&"ended"!==n.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},a.update=function(n){var o=this;if("hidden"!==Ye().visibilityState){var h=g.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var _=o.player_.ended()?o.player_.duration():o.getCurrentTime_(),C=o.player_.liveTracker,A=o.player_.duration();C&&C.isLive()&&(A=o.player_.liveTracker.liveCurrentTime()),o.percent_!==h&&(o.el_.setAttribute("aria-valuenow",(100*h).toFixed(2)),o.percent_=h),(o.currentTime_!==_||o.duration_!==A)&&(o.el_.setAttribute("aria-valuetext",o.localize("progress bar timing: currentTime={1} duration={2}",[oc(_,A),oc(A,A)],"{1} of {2}")),o.currentTime_=_,o.duration_=A),o.bar&&o.bar.update(eo(o.el()),o.getProgress())}),h}},a.userSeek_=function(n){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(n)},a.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},a.getPercent=function(){var o,n=this.getCurrentTime_(),h=this.player_.liveTracker;return h&&h.isLive()?(o=(n-h.seekableStart())/h.liveWindow(),h.atLiveEdge()&&(o=1)):o=n/this.player_.duration(),o},a.handleMouseDown=function(n){Xn(n)&&(n.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),g.prototype.handleMouseDown.call(this,n))},a.handleMouseMove=function(n,o){if(void 0===o&&(o=!1),Xn(n)){!o&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);var h,_=this.calculateDistance(n),C=this.player_.liveTracker;if(C&&C.isLive()){if(_>=.99)return void C.seekToLiveEdge();var A=C.seekableStart(),j=C.liveCurrentTime();if((h=A+_*C.liveWindow())>=j&&(h=j),h<=A&&(h=A+.1),h===1/0)return}else(h=_*this.player_.duration())===this.player_.duration()&&(h-=.1);this.userSeek_(h)}},a.enable=function(){g.prototype.enable.call(this);var n=this.getChild("mouseTimeDisplay");n&&n.show()},a.disable=function(){g.prototype.disable.call(this);var n=this.getChild("mouseTimeDisplay");n&&n.hide()},a.handleMouseUp=function(n){g.prototype.handleMouseUp.call(this,n),n&&n.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Ba(this.player_.play()):this.update_()},a.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},a.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},a.handleAction=function(n){this.player_.paused()?this.player_.play():this.player_.pause()},a.handleKeyDown=function(n){var o=this.player_.liveTracker;if(lt().isEventKey(n,"Space")||lt().isEventKey(n,"Enter"))n.preventDefault(),n.stopPropagation(),this.handleAction(n);else if(lt().isEventKey(n,"Home"))n.preventDefault(),n.stopPropagation(),this.userSeek_(0);else if(lt().isEventKey(n,"End"))n.preventDefault(),n.stopPropagation(),o&&o.isLive()?this.userSeek_(o.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(lt()(n))){n.preventDefault(),n.stopPropagation();var h=10*(lt().codes[lt()(n)]-lt().codes[0])/100;o&&o.isLive()?this.userSeek_(o.seekableStart()+o.liveWindow()*h):this.userSeek_(this.player_.duration()*h)}else lt().isEventKey(n,"PgDn")?(n.preventDefault(),n.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):lt().isEventKey(n,"PgUp")?(n.preventDefault(),n.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):g.prototype.handleKeyDown.call(this,n)},a.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Ye()&&"visibilityState"in Ye()&&this.off(Ye(),"visibilitychange",this.toggleVisibility_),g.prototype.dispose.call(this)},u}(Ah);md.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},!mr&&!Ja&&md.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),fn.registerComponent("SeekBar",md);var Nf=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).handleMouseMove=k(ss(q(o),o.handleMouseMove),30),o.throttledHandleMouseSeek=k(ss(q(o),o.handleMouseSeek),30),o.handleMouseUpHandler_=function(h){return o.handleMouseUp(h)},o.handleMouseDownHandler_=function(h){return o.handleMouseDown(h)},o.enable(),o}re(u,g);var a=u.prototype;return a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},a.handleMouseMove=function(n){var o=this.getChild("seekBar");if(o){var h=o.getChild("playProgressBar"),_=o.getChild("mouseTimeDisplay");if(h||_){var C=o.el(),A=nu(C),j=rl(C,n).x;j=Dp(j,0,1),_&&_.update(A,j),h&&h.update(A,o.getProgress())}}},a.handleMouseSeek=function(n){var o=this.getChild("seekBar");o&&o.handleMouseMove(n)},a.enabled=function(){return this.enabled_},a.disable=function(){if(this.children().forEach(function(o){return o.disable&&o.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var n=this.getChild("seekBar");this.player_.scrubbing(!1),n.videoWasPlaying&&Ba(this.player_.play())}},a.enable=function(){this.children().forEach(function(n){return n.enable&&n.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},a.removeListenersAddedOnMousedownAndTouchstart=function(){var n=this.el_.ownerDocument;this.off(n,"mousemove",this.throttledHandleMouseSeek),this.off(n,"touchmove",this.throttledHandleMouseSeek),this.off(n,"mouseup",this.handleMouseUpHandler_),this.off(n,"touchend",this.handleMouseUpHandler_)},a.handleMouseDown=function(n){var o=this.el_.ownerDocument,h=this.getChild("seekBar");h&&h.handleMouseDown(n),this.on(o,"mousemove",this.throttledHandleMouseSeek),this.on(o,"touchmove",this.throttledHandleMouseSeek),this.on(o,"mouseup",this.handleMouseUpHandler_),this.on(o,"touchend",this.handleMouseUpHandler_)},a.handleMouseUp=function(n){var o=this.getChild("seekBar");o&&o.handleMouseUp(n),this.removeListenersAddedOnMousedownAndTouchstart()},u}(fn);Nf.prototype.options_={children:["seekBar"]},fn.registerComponent("ProgressControl",Nf);var $d=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).on(l,["enterpictureinpicture","leavepictureinpicture"],function(h){return o.handlePictureInPictureChange(h)}),o.on(l,["disablepictureinpicturechanged","loadedmetadata"],function(h){return o.handlePictureInPictureEnabledChange(h)}),o.on(l,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){"audio"===l.currentType().substring(0,5)||l.audioPosterMode()||l.audioOnlyMode()?(l.isInPictureInPicture()&&l.exitPictureInPicture(),o.hide()):o.show()}),o.disable(),o}re(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-picture-in-picture-control "+g.prototype.buildCSSClass.call(this)},a.handlePictureInPictureEnabledChange=function(){Ye().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},a.handlePictureInPictureChange=function(n){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},a.handleClick=function(n){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},u}(sl);$d.prototype.controlText_="Picture-in-Picture",fn.registerComponent("PictureInPictureToggle",$d);var Hg=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).on(l,"fullscreenchange",function(h){return o.handleFullscreenChange(h)}),!1===Ye()[l.fsApi_.fullscreenEnabled]&&o.disable(),o}re(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-fullscreen-control "+g.prototype.buildCSSClass.call(this)},a.handleFullscreenChange=function(n){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},a.handleClick=function(n){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},u}(sl);Hg.prototype.controlText_="Fullscreen",fn.registerComponent("FullscreenToggle",Hg);var vl=function(g){function u(){return g.apply(this,arguments)||this}return re(u,g),u.prototype.createEl=function(){var n=g.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return n.appendChild(g.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),n},u}(fn);fn.registerComponent("VolumeLevel",vl);var Mh=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).update=k(ss(q(o),o.update),30),o}re(u,g);var a=u.prototype;return a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},a.update=function(n,o,h,_){if(!h){var C=eo(this.el_),A=eo(this.player_.el()),j=n.width*o;if(!A||!C)return;var te=n.left-A.left+j,Q=n.width-j+(A.right-n.right),Se=C.width/2;te<Se?Se+=Se-te:Q<Se&&(Se=Q),Se<0?Se=0:Se>C.width&&(Se=C.width),this.el_.style.right="-"+Se+"px"}this.write(_+"%")},a.write=function(n){Sa(this.el_,n)},a.updateVolume=function(n,o,h,_,C){var A=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){A.update(n,o,h,_.toFixed(0)),C&&C()})},u}(fn);fn.registerComponent("VolumeLevelTooltip",Mh);var ol=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).update=k(ss(q(o),o.update),30),o}re(u,g);var a=u.prototype;return a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},a.update=function(n,o,h){var _=this,C=100*o;this.getChild("volumeLevelTooltip").updateVolume(n,o,h,C,function(){h?_.el_.style.bottom=n.height*o+"px":_.el_.style.left=n.width*o+"px"})},u}(fn);ol.prototype.options_={children:["volumeLevelTooltip"]},fn.registerComponent("MouseVolumeLevelDisplay",ol);var vd=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).on("slideractive",function(h){return o.updateLastVolume_(h)}),o.on(l,"volumechange",function(h){return o.updateARIAAttributes(h)}),l.ready(function(){return o.updateARIAAttributes()}),o}re(u,g);var a=u.prototype;return a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},a.handleMouseDown=function(n){Xn(n)&&g.prototype.handleMouseDown.call(this,n)},a.handleMouseMove=function(n){var o=this.getChild("mouseVolumeLevelDisplay");if(o){var h=this.el(),_=eo(h),C=this.vertical(),A=rl(h,n);A=Dp(A=C?A.y:A.x,0,1),o.update(_,A,C)}Xn(n)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(n)))},a.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},a.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},a.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},a.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},a.updateARIAAttributes=function(n){var o=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",o),this.el_.setAttribute("aria-valuetext",o+"%")},a.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},a.updateLastVolume_=function(){var n=this,o=this.player_.volume();this.one("sliderinactive",function(){0===n.player_.volume()&&n.player_.lastVolume_(o)})},u}(Ah);vd.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},!mr&&!Ja&&vd.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),vd.prototype.playerEvent="volumechange",fn.registerComponent("VolumeBar",vd);var Gd=function(g){function u(l,n){var o;return void 0===n&&(n={}),n.vertical=n.vertical||!1,(typeof n.volumeBar>"u"||Io(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),function(u,a){a.tech_&&!a.tech_.featuresVolumeControl&&u.addClass("vjs-hidden"),u.on(a,"loadstart",function(){a.tech_.featuresVolumeControl?u.removeClass("vjs-hidden"):u.addClass("vjs-hidden")})}(q(o=g.call(this,l,n)||this),l),o.throttledHandleMouseMove=k(ss(q(o),o.handleMouseMove),30),o.handleMouseUpHandler_=function(h){return o.handleMouseUp(h)},o.on("mousedown",function(h){return o.handleMouseDown(h)}),o.on("touchstart",function(h){return o.handleMouseDown(h)}),o.on("mousemove",function(h){return o.handleMouseMove(h)}),o.on(o.volumeBar,["focus","slideractive"],function(){o.volumeBar.addClass("vjs-slider-active"),o.addClass("vjs-slider-active"),o.trigger("slideractive")}),o.on(o.volumeBar,["blur","sliderinactive"],function(){o.volumeBar.removeClass("vjs-slider-active"),o.removeClass("vjs-slider-active"),o.trigger("sliderinactive")}),o}re(u,g);var a=u.prototype;return a.createEl=function(){var n="vjs-volume-horizontal";return this.options_.vertical&&(n="vjs-volume-vertical"),g.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+n})},a.handleMouseDown=function(n){var o=this.el_.ownerDocument;this.on(o,"mousemove",this.throttledHandleMouseMove),this.on(o,"touchmove",this.throttledHandleMouseMove),this.on(o,"mouseup",this.handleMouseUpHandler_),this.on(o,"touchend",this.handleMouseUpHandler_)},a.handleMouseUp=function(n){var o=this.el_.ownerDocument;this.off(o,"mousemove",this.throttledHandleMouseMove),this.off(o,"touchmove",this.throttledHandleMouseMove),this.off(o,"mouseup",this.handleMouseUpHandler_),this.off(o,"touchend",this.handleMouseUpHandler_)},a.handleMouseMove=function(n){this.volumeBar.handleMouseMove(n)},u}(fn);Gd.prototype.options_={children:["volumeBar"]},fn.registerComponent("VolumeControl",Gd);var ac=function(g){function u(l,n){var o;return function(u,a){a.tech_&&!a.tech_.featuresMuteControl&&u.addClass("vjs-hidden"),u.on(a,"loadstart",function(){a.tech_.featuresMuteControl?u.removeClass("vjs-hidden"):u.addClass("vjs-hidden")})}(q(o=g.call(this,l,n)||this),l),o.on(l,["loadstart","volumechange"],function(h){return o.update(h)}),o}re(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-mute-control "+g.prototype.buildCSSClass.call(this)},a.handleClick=function(n){var o=this.player_.volume(),h=this.player_.lastVolume_();0===o?(this.player_.volume(h<.1?.1:h),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},a.update=function(n){this.updateIcon_(),this.updateControlText_()},a.updateIcon_=function(){var n=this.player_.volume(),o=3;mr&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===n||this.player_.muted()?o=0:n<.33?o=1:n<.67&&(o=2);for(var h=0;h<4;h++)ec(this.el_,"vjs-vol-"+h);zs(this.el_,"vjs-vol-"+o)},a.updateControlText_=function(){var o=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==o&&this.controlText(o)},u}(sl);ac.prototype.controlText_="Mute",fn.registerComponent("MuteToggle",ac);var uc=function(g){function u(l,n){var o;return void 0===n&&(n={}),n.inline=!(typeof n.inline<"u")||n.inline,(typeof n.volumeControl>"u"||Io(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),(o=g.call(this,l,n)||this).handleKeyPressHandler_=function(h){return o.handleKeyPress(h)},o.on(l,["loadstart"],function(h){return o.volumePanelState_(h)}),o.on(o.muteToggle,"keyup",function(h){return o.handleKeyPress(h)}),o.on(o.volumeControl,"keyup",function(h){return o.handleVolumeControlKeyUp(h)}),o.on("keydown",function(h){return o.handleKeyPress(h)}),o.on("mouseover",function(h){return o.handleMouseOver(h)}),o.on("mouseout",function(h){return o.handleMouseOut(h)}),o.on(o.volumeControl,["slideractive"],o.sliderActive_),o.on(o.volumeControl,["sliderinactive"],o.sliderInactive_),o}re(u,g);var a=u.prototype;return a.sliderActive_=function(){this.addClass("vjs-slider-active")},a.sliderInactive_=function(){this.removeClass("vjs-slider-active")},a.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},a.createEl=function(){var n="vjs-volume-panel-horizontal";return this.options_.inline||(n="vjs-volume-panel-vertical"),g.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+n})},a.dispose=function(){this.handleMouseOut(),g.prototype.dispose.call(this)},a.handleVolumeControlKeyUp=function(n){lt().isEventKey(n,"Esc")&&this.muteToggle.focus()},a.handleMouseOver=function(n){this.addClass("vjs-hover"),Zn(Ye(),"keyup",this.handleKeyPressHandler_)},a.handleMouseOut=function(n){this.removeClass("vjs-hover"),Qr(Ye(),"keyup",this.handleKeyPressHandler_)},a.handleKeyPress=function(n){lt().isEventKey(n,"Esc")&&this.handleMouseOut()},u}(fn);uc.prototype.options_={children:["muteToggle","volumeControl"]},fn.registerComponent("VolumePanel",uc);var pa=function(g){function u(l,n){var o;return o=g.call(this,l,n)||this,n&&(o.menuButton_=n.menuButton),o.focusedChild_=-1,o.on("keydown",function(h){return o.handleKeyDown(h)}),o.boundHandleBlur_=function(h){return o.handleBlur(h)},o.boundHandleTapClick_=function(h){return o.handleTapClick(h)},o}re(u,g);var a=u.prototype;return a.addEventListenerForItem=function(n){n instanceof fn&&(this.on(n,"blur",this.boundHandleBlur_),this.on(n,["tap","click"],this.boundHandleTapClick_))},a.removeEventListenerForItem=function(n){n instanceof fn&&(this.off(n,"blur",this.boundHandleBlur_),this.off(n,["tap","click"],this.boundHandleTapClick_))},a.removeChild=function(n){"string"==typeof n&&(n=this.getChild(n)),this.removeEventListenerForItem(n),g.prototype.removeChild.call(this,n)},a.addItem=function(n){var o=this.addChild(n);o&&this.addEventListenerForItem(o)},a.createEl=function(){this.contentEl_=jr(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var o=g.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return o.appendChild(this.contentEl_),Zn(o,"click",function(h){h.preventDefault(),h.stopImmediatePropagation()}),o},a.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,g.prototype.dispose.call(this)},a.handleBlur=function(n){var o=n.relatedTarget||Ye().activeElement;if(!this.children().some(function(_){return _.el()===o})){var h=this.menuButton_;h&&h.buttonPressed_&&o!==h.el().firstChild&&h.unpressButton()}},a.handleTapClick=function(n){if(this.menuButton_){this.menuButton_.unpressButton();var o=this.children();if(!Array.isArray(o))return;var h=o.filter(function(_){return _.el()===n.target})[0];if(!h)return;"CaptionSettingsMenuItem"!==h.name()&&this.menuButton_.focus()}},a.handleKeyDown=function(n){lt().isEventKey(n,"Left")||lt().isEventKey(n,"Down")?(n.preventDefault(),n.stopPropagation(),this.stepForward()):(lt().isEventKey(n,"Right")||lt().isEventKey(n,"Up"))&&(n.preventDefault(),n.stopPropagation(),this.stepBack())},a.stepForward=function(){var n=0;void 0!==this.focusedChild_&&(n=this.focusedChild_+1),this.focus(n)},a.stepBack=function(){var n=0;void 0!==this.focusedChild_&&(n=this.focusedChild_-1),this.focus(n)},a.focus=function(n){void 0===n&&(n=0);var o=this.children().slice();o.length&&o[0].hasClass("vjs-menu-title")&&o.shift(),o.length>0&&(n<0?n=0:n>=o.length&&(n=o.length-1),this.focusedChild_=n,o[n].el_.focus())},u}(fn);fn.registerComponent("Menu",pa);var Rc=function(g){function u(l,n){var o;void 0===n&&(n={}),(o=g.call(this,l,n)||this).menuButton_=new sl(l,n),o.menuButton_.controlText(o.controlText_),o.menuButton_.el_.setAttribute("aria-haspopup","true");var h=sl.prototype.buildCSSClass();o.menuButton_.el_.className=o.buildCSSClass()+" "+h,o.menuButton_.removeClass("vjs-control"),o.addChild(o.menuButton_),o.update(),o.enabled_=!0;var _=function(A){return o.handleClick(A)};return o.handleMenuKeyUp_=function(C){return o.handleMenuKeyUp(C)},o.on(o.menuButton_,"tap",_),o.on(o.menuButton_,"click",_),o.on(o.menuButton_,"keydown",function(C){return o.handleKeyDown(C)}),o.on(o.menuButton_,"mouseenter",function(){o.addClass("vjs-hover"),o.menu.show(),Zn(Ye(),"keyup",o.handleMenuKeyUp_)}),o.on("mouseleave",function(C){return o.handleMouseLeave(C)}),o.on("keydown",function(C){return o.handleSubmenuKeyDown(C)}),o}re(u,g);var a=u.prototype;return a.update=function(){var n=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=n,this.addChild(n),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},a.createMenu=function(){var n=new pa(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var o=jr("li",{className:"vjs-menu-title",textContent:Yi(this.options_.title),tabIndex:-1}),h=new fn(this.player_,{el:o});n.addItem(h)}if(this.items=this.createItems(),this.items)for(var _=0;_<this.items.length;_++)n.addItem(this.items[_]);return n},a.createItems=function(){},a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},a.buildWrapperCSSClass=function(){var n="vjs-menu-button";return"vjs-menu-button "+(n+=!0===this.options_.inline?"-inline":"-popup")+" "+sl.prototype.buildCSSClass()+" "+g.prototype.buildCSSClass.call(this)},a.buildCSSClass=function(){var n="vjs-menu-button";return"vjs-menu-button "+(n+=!0===this.options_.inline?"-inline":"-popup")+" "+g.prototype.buildCSSClass.call(this)},a.controlText=function(n,o){return void 0===o&&(o=this.menuButton_.el()),this.menuButton_.controlText(n,o)},a.dispose=function(){this.handleMouseLeave(),g.prototype.dispose.call(this)},a.handleClick=function(n){this.buttonPressed_?this.unpressButton():this.pressButton()},a.handleMouseLeave=function(n){this.removeClass("vjs-hover"),Qr(Ye(),"keyup",this.handleMenuKeyUp_)},a.focus=function(){this.menuButton_.focus()},a.blur=function(){this.menuButton_.blur()},a.handleKeyDown=function(n){lt().isEventKey(n,"Esc")||lt().isEventKey(n,"Tab")?(this.buttonPressed_&&this.unpressButton(),lt().isEventKey(n,"Tab")||(n.preventDefault(),this.menuButton_.focus())):(lt().isEventKey(n,"Up")||lt().isEventKey(n,"Down"))&&(this.buttonPressed_||(n.preventDefault(),this.pressButton()))},a.handleMenuKeyUp=function(n){(lt().isEventKey(n,"Esc")||lt().isEventKey(n,"Tab"))&&this.removeClass("vjs-hover")},a.handleSubmenuKeyPress=function(n){this.handleSubmenuKeyDown(n)},a.handleSubmenuKeyDown=function(n){(lt().isEventKey(n,"Esc")||lt().isEventKey(n,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),lt().isEventKey(n,"Tab")||(n.preventDefault(),this.menuButton_.focus()))},a.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),mr&&is())return;this.menu.focus()}},a.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},a.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},a.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},u}(fn);fn.registerComponent("MenuButton",Rc);var lu=function(g){function u(a,l){var n,o=l.tracks;if((n=g.call(this,a,l)||this).items.length<=1&&n.hide(),!o)return q(n);var h=ss(q(n),n.update);return o.addEventListener("removetrack",h),o.addEventListener("addtrack",h),o.addEventListener("labelchange",h),n.player_.on("ready",h),n.player_.on("dispose",function(){o.removeEventListener("removetrack",h),o.removeEventListener("addtrack",h),o.removeEventListener("labelchange",h)}),n}return re(u,g),u}(Rc);fn.registerComponent("TrackButton",lu);var Ph=["Tab","Esc","Up","Down","Right","Left"],Oh=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).selectable=n.selectable,o.isSelected_=n.selected||!1,o.multiSelectable=n.multiSelectable,o.selected(o.isSelected_),o.el_.setAttribute("role",o.selectable?o.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem"),o}re(u,g);var a=u.prototype;return a.createEl=function(n,o,h){this.nonIconControl=!0;var _=g.prototype.createEl.call(this,"li",as({className:"vjs-menu-item",tabIndex:-1},o),h);return _.replaceChild(jr("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),_.querySelector(".vjs-icon-placeholder")),_},a.handleKeyDown=function(n){Ph.some(function(o){return lt().isEventKey(n,o)})||g.prototype.handleKeyDown.call(this,n)},a.handleClick=function(n){this.selected(!0)},a.selected=function(n){this.selectable&&(n?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},u}(ld);fn.registerComponent("MenuItem",Oh);var qu=function(g){function u(l,n){var o,h=n.track,_=l.textTracks();n.label=h.label||h.language||"Unknown",n.selected="showing"===h.mode,(o=g.call(this,l,n)||this).track=h,o.kinds=(n.kinds||[n.kind||o.track.kind]).filter(Boolean);var j,C=function(){for(var Q=arguments.length,Se=new Array(Q),je=0;je<Q;je++)Se[je]=arguments[je];o.handleTracksChange.apply(q(o),Se)},A=function(){for(var Q=arguments.length,Se=new Array(Q),je=0;je<Q;je++)Se[je]=arguments[je];o.handleSelectedLanguageChange.apply(q(o),Se)};return l.on(["loadstart","texttrackchange"],C),_.addEventListener("change",C),_.addEventListener("selectedlanguagechange",A),o.on("dispose",function(){l.off(["loadstart","texttrackchange"],C),_.removeEventListener("change",C),_.removeEventListener("selectedlanguagechange",A)}),void 0===_.onchange&&o.on(["tap","click"],function(){if("object"!=typeof ce().Event)try{j=new(ce().Event)("change")}catch{}j||(j=Ye().createEvent("Event")).initEvent("change",!0,!0),_.dispatchEvent(j)}),o.handleTracksChange(),o}re(u,g);var a=u.prototype;return a.handleClick=function(n){var o=this.track,h=this.player_.textTracks();if(g.prototype.handleClick.call(this,n),h)for(var _=0;_<h.length;_++){var C=h[_];-1!==this.kinds.indexOf(C.kind)&&(C===o?"showing"!==C.mode&&(C.mode="showing"):"disabled"!==C.mode&&(C.mode="disabled"))}},a.handleTracksChange=function(n){var o="showing"===this.track.mode;o!==this.isSelected_&&this.selected(o)},a.handleSelectedLanguageChange=function(n){if("showing"===this.track.mode){var o=this.player_.cache_.selectedLanguage;if(o&&o.enabled&&o.language===this.track.language&&o.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},a.dispose=function(){this.track=null,g.prototype.dispose.call(this)},u}(Oh);fn.registerComponent("TextTrackMenuItem",qu);var yd=function(g){function u(l,n){return n.track={player:l,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.track.label=n.label?n.label:n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,g.call(this,l,n)||this}re(u,g);var a=u.prototype;return a.handleTracksChange=function(n){for(var o=this.player().textTracks(),h=!0,_=0,C=o.length;_<C;_++){var A=o[_];if(this.options_.kinds.indexOf(A.kind)>-1&&"showing"===A.mode){h=!1;break}}h!==this.isSelected_&&this.selected(h)},a.handleSelectedLanguageChange=function(n){for(var o=this.player().textTracks(),h=!0,_=0,C=o.length;_<C;_++){var A=o[_];if(["captions","descriptions","subtitles"].indexOf(A.kind)>-1&&"showing"===A.mode){h=!1;break}}h&&(this.player_.cache_.selectedLanguage={enabled:!1})},u}(qu);fn.registerComponent("OffTextTrackMenuItem",yd);var lc=function(g){function u(l,n){return void 0===n&&(n={}),n.tracks=l.textTracks(),g.call(this,l,n)||this}return re(u,g),u.prototype.createItems=function(n,o){var h;void 0===n&&(n=[]),void 0===o&&(o=qu),this.label_&&(h=this.label_+" off"),n.push(new yd(this.player_,{kinds:this.kinds_,kind:this.kind_,label:h})),this.hideThreshold_+=1;var _=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var C=0;C<_.length;C++){var A=_[C];if(this.kinds_.indexOf(A.kind)>-1){var j=new o(this.player_,{track:A,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});j.addClass("vjs-"+A.kind+"-menu-item"),n.push(j)}}return n},u}(lu);fn.registerComponent("TextTrackButton",lc);var Rh=function(g){function u(l,n){var o,h=n.track,_=n.cue,C=l.currentTime();return n.selectable=!0,n.multiSelectable=!1,n.label=_.text,n.selected=_.startTime<=C&&C<_.endTime,(o=g.call(this,l,n)||this).track=h,o.cue=_,o}return re(u,g),u.prototype.handleClick=function(n){g.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},u}(Oh);fn.registerComponent("ChaptersTrackMenuItem",Rh);var Mp=function(g){function u(l,n,o){var h;return(h=g.call(this,l,n,o)||this).selectCurrentItem_=function(){h.items.forEach(function(_){_.selected(h.track_.activeCues[0]===_.cue)})},h}re(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-chapters-button "+g.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return"vjs-chapters-button "+g.prototype.buildWrapperCSSClass.call(this)},a.update=function(n){if(!n||!n.track||"chapters"===n.track.kind){var o=this.findChaptersTrack();o!==this.track_?(this.setTrack(o),g.prototype.update.call(this)):(!this.items||o&&o.cues&&o.cues.length!==this.items.length)&&g.prototype.update.call(this)}},a.setTrack=function(n){if(this.track_!==n){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var o=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);o&&o.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=n,this.track_){this.track_.mode="hidden";var h=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);h&&h.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},a.findChaptersTrack=function(){for(var n=this.player_.textTracks()||[],o=n.length-1;o>=0;o--){var h=n[o];if(h.kind===this.kind_)return h}},a.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Yi(this.kind_))},a.createMenu=function(){return this.options_.title=this.getMenuCaption(),g.prototype.createMenu.call(this)},a.createItems=function(){var n=[];if(!this.track_)return n;var o=this.track_.cues;if(!o)return n;for(var h=0,_=o.length;h<_;h++){var A=new Rh(this.player_,{track:this.track_,cue:o[h]});n.push(A)}return n},u}(lc);Mp.prototype.kind_="chapters",Mp.prototype.controlText_="Chapters",fn.registerComponent("ChaptersButton",Mp);var Ku=function(g){function u(l,n,o){var h;h=g.call(this,l,n,o)||this;var _=l.textTracks(),C=ss(q(h),h.handleTracksChange);return _.addEventListener("change",C),h.on("dispose",function(){_.removeEventListener("change",C)}),h}re(u,g);var a=u.prototype;return a.handleTracksChange=function(n){for(var o=this.player().textTracks(),h=!1,_=0,C=o.length;_<C;_++){var A=o[_];if(A.kind!==this.kind_&&"showing"===A.mode){h=!0;break}}h?this.disable():this.enable()},a.buildCSSClass=function(){return"vjs-descriptions-button "+g.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+g.prototype.buildWrapperCSSClass.call(this)},u}(lc);Ku.prototype.kind_="descriptions",Ku.prototype.controlText_="Descriptions",fn.registerComponent("DescriptionsButton",Ku);var Lf=function(g){function u(l,n,o){return g.call(this,l,n,o)||this}re(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-subtitles-button "+g.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+g.prototype.buildWrapperCSSClass.call(this)},u}(lc);Lf.prototype.kind_="subtitles",Lf.prototype.controlText_="Subtitles",fn.registerComponent("SubtitlesButton",Lf);var cu=function(g){function u(l,n){var o;return n.track={player:l,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",(o=g.call(this,l,n)||this).addClass("vjs-texttrack-settings"),o.controlText(", opens "+n.kind+" settings dialog"),o}return re(u,g),u.prototype.handleClick=function(n){this.player().getChild("textTrackSettings").open()},u}(qu);fn.registerComponent("CaptionSettingsMenuItem",cu);var zd=function(g){function u(l,n,o){return g.call(this,l,n,o)||this}re(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-captions-button "+g.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return"vjs-captions-button "+g.prototype.buildWrapperCSSClass.call(this)},a.createItems=function(){var n=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(n.push(new cu(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),g.prototype.createItems.call(this,n)},u}(lc);zd.prototype.kind_="captions",zd.prototype.controlText_="Captions",fn.registerComponent("CaptionsButton",zd);var ga=function(g){function u(){return g.apply(this,arguments)||this}return re(u,g),u.prototype.createEl=function(n,o,h){var _=g.prototype.createEl.call(this,n,o,h),C=_.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(C.appendChild(jr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),C.appendChild(jr("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),_},u}(qu);fn.registerComponent("SubsCapsMenuItem",ga);var Wd=function(g){function u(l,n){var o;return void 0===n&&(n={}),(o=g.call(this,l,n)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(o.player_.language_)>-1&&(o.label_="captions"),o.menuButton_.controlText(Yi(o.label_)),o}re(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-subs-caps-button "+g.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+g.prototype.buildWrapperCSSClass.call(this)},a.createItems=function(){var n=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(n.push(new cu(this.player_,{kind:this.label_})),this.hideThreshold_+=1),g.prototype.createItems.call(this,n,ga)},u}(lc);Wd.prototype.kinds_=["captions","subtitles"],Wd.prototype.controlText_="Subtitles",fn.registerComponent("SubsCapsButton",Wd);var Ou=function(g){function u(l,n){var o,h=n.track,_=l.audioTracks();n.label=h.label||h.language||"Unknown",n.selected=h.enabled,(o=g.call(this,l,n)||this).track=h,o.addClass("vjs-"+h.kind+"-menu-item");var C=function(){for(var j=arguments.length,te=new Array(j),Q=0;Q<j;Q++)te[Q]=arguments[Q];o.handleTracksChange.apply(q(o),te)};return _.addEventListener("change",C),o.on("dispose",function(){_.removeEventListener("change",C)}),o}re(u,g);var a=u.prototype;return a.createEl=function(n,o,h){var _=g.prototype.createEl.call(this,n,o,h),C=_.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(C.appendChild(jr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),C.appendChild(jr("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),_},a.handleClick=function(n){if(g.prototype.handleClick.call(this,n),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var o=this.player_.audioTracks(),h=0;h<o.length;h++){var _=o[h];_!==this.track&&(_.enabled=_===this.track)}},a.handleTracksChange=function(n){this.selected(this.track.enabled)},u}(Oh);fn.registerComponent("AudioTrackMenuItem",Ou);var Nh=function(g){function u(l,n){return void 0===n&&(n={}),n.tracks=l.audioTracks(),g.call(this,l,n)||this}re(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-audio-button "+g.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return"vjs-audio-button "+g.prototype.buildWrapperCSSClass.call(this)},a.createItems=function(n){void 0===n&&(n=[]),this.hideThreshold_=1;for(var o=this.player_.audioTracks(),h=0;h<o.length;h++)n.push(new Ou(this.player_,{track:o[h],selectable:!0,multiSelectable:!1}));return n},u}(lu);Nh.prototype.controlText_="Audio Track",fn.registerComponent("AudioTrackButton",Nh);var $o=function(g){function u(l,n){var o,h=n.rate,_=parseFloat(h,10);return n.label=h,n.selected=_===l.playbackRate(),n.selectable=!0,n.multiSelectable=!1,(o=g.call(this,l,n)||this).label=h,o.rate=_,o.on(l,"ratechange",function(C){return o.update(C)}),o}re(u,g);var a=u.prototype;return a.handleClick=function(n){g.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},a.update=function(n){this.selected(this.player().playbackRate()===this.rate)},u}(Oh);$o.prototype.contentElType="button",fn.registerComponent("PlaybackRateMenuItem",$o);var qd=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).menuButton_.el_.setAttribute("aria-describedby",o.labelElId_),o.updateVisibility(),o.updateLabel(),o.on(l,"loadstart",function(h){return o.updateVisibility(h)}),o.on(l,"ratechange",function(h){return o.updateLabel(h)}),o.on(l,"playbackrateschange",function(h){return o.handlePlaybackRateschange(h)}),o}re(u,g);var a=u.prototype;return a.createEl=function(){var n=g.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=jr("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),n.appendChild(this.labelEl_),n},a.dispose=function(){this.labelEl_=null,g.prototype.dispose.call(this)},a.buildCSSClass=function(){return"vjs-playback-rate "+g.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return"vjs-playback-rate "+g.prototype.buildWrapperCSSClass.call(this)},a.createItems=function(){for(var n=this.playbackRates(),o=[],h=n.length-1;h>=0;h--)o.push(new $o(this.player(),{rate:n[h]+"x"}));return o},a.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},a.handleClick=function(n){var o=this.player().playbackRate(),h=this.playbackRates(),C=(h.indexOf(o)+1)%h.length;this.player().playbackRate(h[C])},a.handlePlaybackRateschange=function(n){this.update()},a.playbackRates=function(){var n=this.player();return n.playbackRates&&n.playbackRates()||[]},a.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},a.updateVisibility=function(n){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},a.updateLabel=function(n){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},u}(Rc);qd.prototype.controlText_="Playback Rate",fn.registerComponent("PlaybackRateMenuButton",qd);var kp=function(g){function u(){return g.apply(this,arguments)||this}re(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-spacer "+g.prototype.buildCSSClass.call(this)},a.createEl=function(n,o,h){return void 0===n&&(n="div"),void 0===o&&(o={}),void 0===h&&(h={}),o.className||(o.className=this.buildCSSClass()),g.prototype.createEl.call(this,n,o,h)},u}(fn);fn.registerComponent("Spacer",kp);var vi=function(g){function u(){return g.apply(this,arguments)||this}re(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-custom-control-spacer "+g.prototype.buildCSSClass.call(this)},a.createEl=function(){return g.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xa0"})},u}(kp);fn.registerComponent("CustomControlSpacer",vi);var Lh=function(g){function u(){return g.apply(this,arguments)||this}return re(u,g),u.prototype.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},u}(fn);Lh.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in Ye()&&Lh.prototype.options_.children.splice(Lh.prototype.options_.children.length-1,0,"pictureInPictureToggle"),fn.registerComponent("ControlBar",Lh);var _d=function(g){function u(l,n){var o;return(o=g.call(this,l,n)||this).on(l,"error",function(h){return o.open(h)}),o}re(u,g);var a=u.prototype;return a.buildCSSClass=function(){return"vjs-error-display "+g.prototype.buildCSSClass.call(this)},a.content=function(){var n=this.player().error();return n?this.localize(n.message):""},u}(Ll);_d.prototype.options_=Ke({},Ll.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),fn.registerComponent("ErrorDisplay",_d);var Ff="vjs-text-track-settings",jf=["#000","Black"],Fh=["#00F","Blue"],Nc=["#0FF","Cyan"],$g=["#0F0","Green"],Gg=["#F0F","Magenta"],Lc=["#F00","Red"],cc=["#FFF","White"],Fc=["#FF0","Yellow"],jc=["1","Opaque"],Gl=["0.5","Semi-Transparent"],Pp=["0","Transparent"],Ru={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[jf,cc,Lc,$g,Fh,Fc,Gg,Nc]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[jc,Gl,Pp]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[cc,jf,Lc,$g,Fh,Fc,Gg,Nc]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(u){return"1.00"===u?null:Number(u)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[jc,Gl]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Pp,Gl,jc]}};function jh(g,u){if(u&&(g=u(g)),g&&"none"!==g)return g}Ru.windowColor.options=Ru.backgroundColor.options;var Uf=function(g){function u(l,n){var o;return n.temporary=!1,(o=g.call(this,l,n)||this).updateDisplay=o.updateDisplay.bind(q(o)),o.fill(),o.hasBeenOpened_=o.hasBeenFilled_=!0,o.endDialog=jr("p",{className:"vjs-control-text",textContent:o.localize("End of dialog window.")}),o.el().appendChild(o.endDialog),o.setDefaults(),void 0===n.persistTextTrackSettings&&(o.options_.persistTextTrackSettings=o.options_.playerOptions.persistTextTrackSettings),o.on(o.$(".vjs-done-button"),"click",function(){o.saveSettings(),o.close()}),o.on(o.$(".vjs-default-button"),"click",function(){o.setDefaults(),o.updateDisplay()}),Qa(Ru,function(h){o.on(o.$(h.selector),"change",o.updateDisplay)}),o.options_.persistTextTrackSettings&&o.restoreSettings(),o}re(u,g);var a=u.prototype;return a.dispose=function(){this.endDialog=null,g.prototype.dispose.call(this)},a.createElSelect_=function(n,o,h){var _=this;void 0===o&&(o=""),void 0===h&&(h="label");var C=Ru[n],A=C.id.replace("%s",this.id_),j=[o,A].join(" ").trim();return["<"+h+' id="'+A+'" class="'+("label"===h?"vjs-label":"")+'">',this.localize(C.label),"</"+h+">",'<select aria-labelledby="'+j+'">'].concat(C.options.map(function(te){var Q=A+"-"+te[1].replace(/\W+/g,"");return['<option id="'+Q+'" value="'+te[0]+'" ','aria-labelledby="'+j+" "+Q+'">',_.localize(te[1]),"</option>"].join("")})).concat("</select>").join("")},a.createElFgColor_=function(){var n="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+n+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",n),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",n),"</span>","</fieldset>"].join("")},a.createElBgColor_=function(){var n="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+n+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",n),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",n),"</span>","</fieldset>"].join("")},a.createElWinColor_=function(){var n="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+n+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",n),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",n),"</span>","</fieldset>"].join("")},a.createElColors_=function(){return jr("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},a.createElFont_=function(){return jr("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},a.createElControls_=function(){var n=this.localize("restore all settings to the default values");return jr("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+n+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+n+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},a.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},a.label=function(){return this.localize("Caption Settings Dialog")},a.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},a.buildCSSClass=function(){return g.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},a.getValues=function(){var n=this;return function yu(g,u,a){return void 0===a&&(a=0),Ya(g).reduce(function(l,n){return u(l,g[n],n)},a)}(Ru,function(o,h,_){var C=function Op(g,u){return jh(g.options[g.options.selectedIndex].value,u)}(n.$(h.selector),h.parser);return void 0!==C&&(o[_]=C),o},{})},a.setValues=function(n){var o=this;Qa(Ru,function(h,_){!function Nu(g,u,a){if(u)for(var l=0;l<g.options.length;l++)if(jh(g.options[l].value,a)===u){g.selectedIndex=l;break}}(o.$(h.selector),n[_],h.parser)})},a.setDefaults=function(){var n=this;Qa(Ru,function(o){var h=o.hasOwnProperty("default")?o.default:0;n.$(o.selector).selectedIndex=h})},a.restoreSettings=function(){var n;try{n=JSON.parse(ce().localStorage.getItem(Ff))}catch(o){ei.warn(o)}n&&this.setValues(n)},a.saveSettings=function(){if(this.options_.persistTextTrackSettings){var n=this.getValues();try{Object.keys(n).length?ce().localStorage.setItem(Ff,JSON.stringify(n)):ce().localStorage.removeItem(Ff)}catch(o){ei.warn(o)}}},a.updateDisplay=function(){var n=this.player_.getChild("textTrackDisplay");n&&n.updateDisplay()},a.conditionalBlur_=function(){this.previouslyActiveEl_=null;var n=this.player_.controlBar,o=n&&n.subsCapsButton,h=n&&n.captionsButton;o?o.focus():h&&h.focus()},u}(Ll);fn.registerComponent("TextTrackSettings",Uf);var Rp=function(g){function u(l,n){var o,h=n.ResizeObserver||ce().ResizeObserver;null===n.ResizeObserver&&(h=!1);var _=Qi({createEl:!h,reportTouchActivity:!1},n);return(o=g.call(this,l,_)||this).ResizeObserver=n.ResizeObserver||ce().ResizeObserver,o.loadListener_=null,o.resizeObserver_=null,o.debouncedHandler_=function(u,a,l,n){void 0===n&&(n=ce());var o,_=function(){var A=this,j=arguments,te=function(){o=null,te=null,u.apply(A,j)};n.clearTimeout(o),o=n.setTimeout(te,100)};return _.cancel=function(){n.clearTimeout(o),o=null},_}(function(){o.resizeHandler()},0,0,q(o)),h?(o.resizeObserver_=new o.ResizeObserver(o.debouncedHandler_),o.resizeObserver_.observe(l.el())):(o.loadListener_=function(){if(o.el_&&o.el_.contentWindow){var C=o.debouncedHandler_,A=o.unloadListener_=function(){Qr(this,"resize",C),Qr(this,"unload",A),A=null};Zn(o.el_.contentWindow,"unload",A),Zn(o.el_.contentWindow,"resize",C)}},o.one("load",o.loadListener_)),o}re(u,g);var a=u.prototype;return a.createEl=function(){return g.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},a.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},a.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,g.prototype.dispose.call(this)},u}(fn);fn.registerComponent("ResizeManager",Rp);var no={trackingThreshold:20,liveTolerance:15},bd=function(g){function u(l,n){var o,h=Qi(no,n,{createEl:!1});return(o=g.call(this,l,h)||this).handleVisibilityChange_=function(_){return o.handleVisibilityChange(_)},o.trackLiveHandler_=function(){return o.trackLive_()},o.handlePlay_=function(_){return o.handlePlay(_)},o.handleFirstTimeupdate_=function(_){return o.handleFirstTimeupdate(_)},o.handleSeeked_=function(_){return o.handleSeeked(_)},o.seekToLiveEdge_=function(_){return o.seekToLiveEdge(_)},o.reset_(),o.on(o.player_,"durationchange",function(_){return o.handleDurationchange(_)}),o.on(o.player_,"canplay",function(){return o.toggleTracking()}),Lt&&"hidden"in Ye()&&"visibilityState"in Ye()&&o.on(Ye(),"visibilitychange",o.handleVisibilityChange_),o}re(u,g);var a=u.prototype;return a.handleVisibilityChange=function(){this.player_.duration()===1/0&&(Ye().hidden?this.stopTracking():this.startTracking())},a.trackLive_=function(){var n=this.player_.seekable();if(n&&n.length){var o=Number(ce().performance.now().toFixed(4)),h=-1===this.lastTime_?0:(o-this.lastTime_)/1e3;this.lastTime_=o,this.pastSeekEnd_=this.pastSeekEnd()+h;var _=this.liveCurrentTime(),C=this.player_.currentTime(),A=this.player_.paused()||this.seekedBehindLive_||Math.abs(_-C)>this.options_.liveTolerance;(!this.timeupdateSeen_||_===1/0)&&(A=!1),A!==this.behindLiveEdge_&&(this.behindLiveEdge_=A,this.trigger("liveedgechange"))}},a.handleDurationchange=function(){this.toggleTracking()},a.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},a.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},a.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},a.handleSeeked=function(){var n=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&n>2,this.nextSeekedFromUser_=!1,this.trackLive_()},a.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},a.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},a.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},a.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},a.seekableEnd=function(){for(var n=this.player_.seekable(),o=[],h=n?n.length:0;h--;)o.push(n.end(h));return o.length?o.sort()[o.length-1]:1/0},a.seekableStart=function(){for(var n=this.player_.seekable(),o=[],h=n?n.length:0;h--;)o.push(n.start(h));return o.length?o.sort()[0]:0},a.liveWindow=function(){var n=this.liveCurrentTime();return n===1/0?0:n-this.seekableStart()},a.isLive=function(){return this.isTracking()},a.atLiveEdge=function(){return!this.behindLiveEdge()},a.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},a.pastSeekEnd=function(){var n=this.seekableEnd();return-1!==this.lastSeekEnd_&&n!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=n,this.pastSeekEnd_},a.behindLiveEdge=function(){return this.behindLiveEdge_},a.isTracking=function(){return"number"==typeof this.trackingInterval_},a.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},a.dispose=function(){this.off(Ye(),"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),g.prototype.dispose.call(this)},u}(fn);fn.registerComponent("LiveTracker",bd);var dc,Kd=function(u){var a=u.el();if(a.hasAttribute("src"))return u.triggerSourceset(a.src),!0;var l=u.$$("source"),n=[],o="";if(!l.length)return!1;for(var h=0;h<l.length;h++){var _=l[h].src;_&&-1===n.indexOf(_)&&n.push(_)}return!!n.length&&(1===n.length&&(o=n[0]),u.triggerSourceset(o),!0)},zg=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(u){var a=Ye().createElement(this.nodeName.toLowerCase());a.innerHTML=u;for(var l=Ye().createDocumentFragment();a.childNodes.length;)l.appendChild(a.childNodes[0]);return this.innerText="",ce().Element.prototype.appendChild.call(this,l),this.innerHTML}}),Np=function(u,a){for(var l={},n=0;n<u.length&&!((l=Object.getOwnPropertyDescriptor(u[n],a))&&l.set&&l.get);n++);return l.enumerable=!0,l.configurable=!0,l},Bf=function(u){var a=u.el();if(!a.resetSourceWatch_){var l={},n=function(u){return Np([u.el(),ce().HTMLMediaElement.prototype,ce().Element.prototype,zg],"innerHTML")}(u),o=function(_){return function(){for(var C=arguments.length,A=new Array(C),j=0;j<C;j++)A[j]=arguments[j];var te=_.apply(a,A);return Kd(u),te}};["append","appendChild","insertAdjacentHTML"].forEach(function(h){a[h]&&(l[h]=a[h],a[h]=o(l[h]))}),Object.defineProperty(a,"innerHTML",Qi(n,{set:o(n.set)})),a.resetSourceWatch_=function(){a.resetSourceWatch_=null,Object.keys(l).forEach(function(h){a[h]=l[h]}),Object.defineProperty(a,"innerHTML",n)},u.one("sourceset",a.resetSourceWatch_)}},Lp=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Au(ce().Element.prototype.getAttribute.call(this,"src")):""},set:function(u){return ce().Element.prototype.setAttribute.call(this,"src",u),u}}),Uh=function(u,a,l,n){void 0===n&&(n=!0);var o=function(C){return Object.defineProperty(u,a,{value:C,enumerable:!0,writable:!0})},h={configurable:!0,enumerable:!0,get:function(){var C=l();return o(C),C}};return n&&(h.set=o),Object.defineProperty(u,a,h)},zn=function(g){function u(l,n){var o;o=g.call(this,l,n)||this;var h=l.source,_=!1;if(o.featuresVideoFrameCallback=o.featuresVideoFrameCallback&&"VIDEO"===o.el_.tagName,h&&(o.el_.currentSrc!==h.src||l.tag&&3===l.tag.initNetworkState_)?o.setSource(h):o.handleLateInit_(o.el_),l.enableSourceset&&o.setupSourcesetHandling_(),o.isScrubbing_=!1,o.el_.hasChildNodes()){for(var C=o.el_.childNodes,A=C.length,j=[];A--;){var te=C[A];"track"===te.nodeName.toLowerCase()&&(o.featuresNativeTextTracks?(o.remoteTextTrackEls().addTrackElement_(te),o.remoteTextTracks().addTrack(te.track),o.textTracks().addTrack(te.track),!_&&!o.el_.hasAttribute("crossorigin")&&Vl(te.src)&&(_=!0)):j.push(te))}for(var Se=0;Se<j.length;Se++)o.el_.removeChild(j[Se])}return o.proxyNativeTracks_(),o.featuresNativeTextTracks&&_&&ei.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),o.restoreMetadataTracksInIOSNativePlayer_(),(ti||hi||B)&&!0===l.nativeControlsForTouch&&o.setControls(!0),o.proxyWebkitFullscreen_(),o.triggerReady(),o}re(u,g);var a=u.prototype;return a.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),u.disposeMediaElement(this.el_),this.options_=null,g.prototype.dispose.call(this)},a.setupSourcesetHandling_=function(){!function(u){if(u.featuresSourceset){var a=u.el();if(!a.resetSourceset_){var l=function(u){return Np([u.el(),ce().HTMLMediaElement.prototype,Lp],"src")}(u),n=a.setAttribute,o=a.load;Object.defineProperty(a,"src",Qi(l,{set:function(_){var C=l.set.call(a,_);return u.triggerSourceset(a.src),C}})),a.setAttribute=function(h,_){var C=n.call(a,h,_);return/src/i.test(h)&&u.triggerSourceset(a.src),C},a.load=function(){var h=o.call(a);return Kd(u)||(u.triggerSourceset(""),Bf(u)),h},a.currentSrc?u.triggerSourceset(a.currentSrc):Kd(u)||Bf(u),a.resetSourceset_=function(){a.resetSourceset_=null,a.load=o,a.setAttribute=n,Object.defineProperty(a,"src",l),a.resetSourceWatch_&&a.resetSourceWatch_()}}}}(this)},a.restoreMetadataTracksInIOSNativePlayer_=function(){var o,n=this.textTracks(),h=function(){o=[];for(var A=0;A<n.length;A++){var j=n[A];"metadata"===j.kind&&o.push({track:j,storedMode:j.mode})}};h(),n.addEventListener("change",h),this.on("dispose",function(){return n.removeEventListener("change",h)});var _=function C(){for(var A=0;A<o.length;A++){var j=o[A];"disabled"===j.track.mode&&j.track.mode!==j.storedMode&&(j.track.mode=j.storedMode)}n.removeEventListener("change",C)};this.on("webkitbeginfullscreen",function(){n.removeEventListener("change",h),n.removeEventListener("change",_),n.addEventListener("change",_)}),this.on("webkitendfullscreen",function(){n.removeEventListener("change",h),n.addEventListener("change",h),n.removeEventListener("change",_)})},a.overrideNative_=function(n,o){var h=this;if(o===this["featuresNative"+n+"Tracks"]){var _=n.toLowerCase();this[_+"TracksListeners_"]&&Object.keys(this[_+"TracksListeners_"]).forEach(function(C){h.el()[_+"Tracks"].removeEventListener(C,h[_+"TracksListeners_"][C])}),this["featuresNative"+n+"Tracks"]=!o,this[_+"TracksListeners_"]=null,this.proxyNativeTracksForType_(_)}},a.overrideNativeAudioTracks=function(n){this.overrideNative_("Audio",n)},a.overrideNativeVideoTracks=function(n){this.overrideNative_("Video",n)},a.proxyNativeTracksForType_=function(n){var o=this,h=Ni[n],_=this.el()[h.getterName],C=this[h.getterName]();if(this["featuresNative"+h.capitalName+"Tracks"]&&_&&_.addEventListener){var A={change:function(Q){var Se={type:"change",target:C,currentTarget:C,srcElement:C};C.trigger(Se),"text"===n&&o[sc.remoteText.getterName]().trigger(Se)},addtrack:function(Q){C.addTrack(Q.track)},removetrack:function(Q){C.removeTrack(Q.track)}},j=function(){for(var Q=[],Se=0;Se<C.length;Se++){for(var je=!1,We=0;We<_.length;We++)if(_[We]===C[Se]){je=!0;break}je||Q.push(C[Se])}for(;Q.length;)C.removeTrack(Q.shift())};this[h.getterName+"Listeners_"]=A,Object.keys(A).forEach(function(te){var Q=A[te];_.addEventListener(te,Q),o.on("dispose",function(Se){return _.removeEventListener(te,Q)})}),this.on("loadstart",j),this.on("dispose",function(te){return o.off("loadstart",j)})}},a.proxyNativeTracks_=function(){var n=this;Ni.names.forEach(function(o){n.proxyNativeTracksForType_(o)})},a.createEl=function(){var n=this.options_.tag;if(!n||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(n){var o=n.cloneNode(!0);n.parentNode&&n.parentNode.insertBefore(o,n),u.disposeMediaElement(n),n=o}else{n=Ye().createElement("video");var _=Qi({},this.options_.tag&&qr(this.options_.tag));(!ti||!0!==this.options_.nativeControlsForTouch)&&delete _.controls,_n(n,as(_,{id:this.options_.techId,class:"vjs-tech"}))}n.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&nl(n,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(n.disablePictureInPicture=this.options_.disablePictureInPicture);for(var C=["loop","muted","playsinline","autoplay"],A=0;A<C.length;A++){var j=C[A],te=this.options_[j];typeof te<"u"&&(te?nl(n,j,j):Us(n,j),n[j]=te)}return n},a.handleLateInit_=function(n){if(0!==n.networkState&&3!==n.networkState){if(0===n.readyState){var o=!1,h=function(){o=!0};this.on("loadstart",h);var _=function(){o||this.trigger("loadstart")};return this.on("loadedmetadata",_),void this.ready(function(){this.off("loadstart",h),this.off("loadedmetadata",_),o||this.trigger("loadstart")})}var C=["loadstart"];C.push("loadedmetadata"),n.readyState>=2&&C.push("loadeddata"),n.readyState>=3&&C.push("canplay"),n.readyState>=4&&C.push("canplaythrough"),this.ready(function(){C.forEach(function(A){this.trigger(A)},this)})}},a.setScrubbing=function(n){this.isScrubbing_=n},a.scrubbing=function(){return this.isScrubbing_},a.setCurrentTime=function(n){try{this.isScrubbing_&&this.el_.fastSeek&&us?this.el_.fastSeek(n):this.el_.currentTime=n}catch(o){ei(o,"Video is not ready. (Video.js)")}},a.duration=function(){var n=this;return this.el_.duration===1/0&&Ja&&Ie&&0===this.el_.currentTime?(this.on("timeupdate",function h(){n.el_.currentTime>0&&(n.el_.duration===1/0&&n.trigger("durationchange"),n.off("timeupdate",h))}),NaN):this.el_.duration||NaN},a.width=function(){return this.el_.offsetWidth},a.height=function(){return this.el_.offsetHeight},a.proxyWebkitFullscreen_=function(){var n=this;if("webkitDisplayingFullscreen"in this.el_){var o=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},h=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",o),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",h),this.on("dispose",function(){n.off("webkitbeginfullscreen",h),n.off("webkitendfullscreen",o)})}},a.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var n=ce().navigator&&ce().navigator.userAgent||"";if(/Android/.test(n)||!/Chrome|Mac OS X 10.5/.test(n))return!0}return!1},a.enterFullScreen=function(){var n=this.el_;if(n.paused&&n.networkState<=n.HAVE_METADATA)Ba(this.el_.play()),this.setTimeout(function(){n.pause();try{n.webkitEnterFullScreen()}catch(o){this.trigger("fullscreenerror",o)}},0);else try{n.webkitEnterFullScreen()}catch(o){this.trigger("fullscreenerror",o)}},a.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},a.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},a.requestVideoFrameCallback=function(n){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(n):g.prototype.requestVideoFrameCallback.call(this,n)},a.cancelVideoFrameCallback=function(n){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(n):g.prototype.cancelVideoFrameCallback.call(this,n)},a.src=function(n){if(void 0===n)return this.el_.src;this.setSrc(n)},a.reset=function(){u.resetMediaElement(this.el_)},a.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},a.setControls=function(n){this.el_.controls=!!n},a.addTextTrack=function(n,o,h){return this.featuresNativeTextTracks?this.el_.addTextTrack(n,o,h):g.prototype.addTextTrack.call(this,n,o,h)},a.createRemoteTextTrack=function(n){if(!this.featuresNativeTextTracks)return g.prototype.createRemoteTextTrack.call(this,n);var o=Ye().createElement("track");return n.kind&&(o.kind=n.kind),n.label&&(o.label=n.label),(n.language||n.srclang)&&(o.srclang=n.language||n.srclang),n.default&&(o.default=n.default),n.id&&(o.id=n.id),n.src&&(o.src=n.src),o},a.addRemoteTextTrack=function(n,o){var h=g.prototype.addRemoteTextTrack.call(this,n,o);return this.featuresNativeTextTracks&&this.el().appendChild(h),h},a.removeRemoteTextTrack=function(n){if(g.prototype.removeRemoteTextTrack.call(this,n),this.featuresNativeTextTracks)for(var o=this.$$("track"),h=o.length;h--;)(n===o[h]||n===o[h].track)&&this.el().removeChild(o[h])},a.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var n={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(n.droppedVideoFrames=this.el().webkitDroppedFrameCount,n.totalVideoFrames=this.el().webkitDecodedFrameCount),ce().performance&&"function"==typeof ce().performance.now?n.creationTime=ce().performance.now():ce().performance&&ce().performance.timing&&"number"==typeof ce().performance.timing.navigationStart&&(n.creationTime=ce().Date.now()-ce().performance.timing.navigationStart),n},u}(xi);Uh(zn,"TEST_VID",function(){if(Do()){var g=Ye().createElement("video"),u=Ye().createElement("track");return u.kind="captions",u.srclang="en",u.label="English",g.appendChild(u),g}}),zn.isSupported=function(){try{zn.TEST_VID.volume=.5}catch{return!1}return!(!zn.TEST_VID||!zn.TEST_VID.canPlayType)},zn.canPlayType=function(g){return zn.TEST_VID.canPlayType(g)},zn.canPlaySource=function(g,u){return zn.canPlayType(g.type)},zn.canControlVolume=function(){try{var g=zn.TEST_VID.volume;zn.TEST_VID.volume=g/2+.1;var u=g!==zn.TEST_VID.volume;return u&&mr?(ce().setTimeout(function(){zn&&zn.prototype&&(zn.prototype.featuresVolumeControl=g!==zn.TEST_VID.volume)}),!1):u}catch{return!1}},zn.canMuteVolume=function(){try{var g=zn.TEST_VID.muted;return zn.TEST_VID.muted=!g,zn.TEST_VID.muted?nl(zn.TEST_VID,"muted","muted"):Us(zn.TEST_VID,"muted"),g!==zn.TEST_VID.muted}catch{return!1}},zn.canControlPlaybackRate=function(){if(Ja&&Ie&&Ge<58)return!1;try{var g=zn.TEST_VID.playbackRate;return zn.TEST_VID.playbackRate=g/2+.1,g!==zn.TEST_VID.playbackRate}catch{return!1}},zn.canOverrideAttributes=function(){try{var g=function(){};Object.defineProperty(Ye().createElement("video"),"src",{get:g,set:g}),Object.defineProperty(Ye().createElement("audio"),"src",{get:g,set:g}),Object.defineProperty(Ye().createElement("video"),"innerHTML",{get:g,set:g}),Object.defineProperty(Ye().createElement("audio"),"innerHTML",{get:g,set:g})}catch{return!1}return!0},zn.supportsNativeTextTracks=function(){return us||mr&&Ie},zn.supportsNativeVideoTracks=function(){return!(!zn.TEST_VID||!zn.TEST_VID.videoTracks)},zn.supportsNativeAudioTracks=function(){return!(!zn.TEST_VID||!zn.TEST_VID.audioTracks)},zn.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(g){var a=g[1];Uh(zn.prototype,g[0],function(){return zn[a]()},!0)}),zn.prototype.featuresVolumeControl=zn.canControlVolume(),zn.prototype.movingMediaElementInDOM=!mr,zn.prototype.featuresFullscreenResize=!0,zn.prototype.featuresProgressEvents=!0,zn.prototype.featuresTimeupdateEvents=!0,zn.prototype.featuresVideoFrameCallback=!(!zn.TEST_VID||!zn.TEST_VID.requestVideoFrameCallback),zn.patchCanPlayType=function(){eu>=4&&!he&&!Ie&&(dc=zn.TEST_VID&&zn.TEST_VID.constructor.prototype.canPlayType,zn.TEST_VID.constructor.prototype.canPlayType=function(g){return g&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(g)?"maybe":dc.call(this,g)})},zn.unpatchCanPlayType=function(){var g=zn.TEST_VID.constructor.prototype.canPlayType;return dc&&(zn.TEST_VID.constructor.prototype.canPlayType=dc),g},zn.patchCanPlayType(),zn.disposeMediaElement=function(g){if(g){for(g.parentNode&&g.parentNode.removeChild(g);g.hasChildNodes();)g.removeChild(g.firstChild);g.removeAttribute("src"),"function"==typeof g.load&&function(){try{g.load()}catch{}}()}},zn.resetMediaElement=function(g){if(g){for(var u=g.querySelectorAll("source"),a=u.length;a--;)g.removeChild(u[a]);g.removeAttribute("src"),"function"==typeof g.load&&function(){try{g.load()}catch{}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(g){zn.prototype[g]=function(){return this.el_[g]||this.el_.hasAttribute(g)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(g){zn.prototype["set"+Yi(g)]=function(u){this.el_[g]=u,u?this.el_.setAttribute(g,g):this.el_.removeAttribute(g)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(g){zn.prototype[g]=function(){return this.el_[g]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(g){zn.prototype["set"+Yi(g)]=function(u){this.el_[g]=u}}),["pause","load","play"].forEach(function(g){zn.prototype[g]=function(){return this.el_[g]()}}),xi.withSourceHandlers(zn),zn.nativeSourceHandler={},zn.nativeSourceHandler.canPlayType=function(g){try{return zn.TEST_VID.canPlayType(g)}catch{return""}},zn.nativeSourceHandler.canHandleSource=function(g,u){if(g.type)return zn.nativeSourceHandler.canPlayType(g.type);if(g.src){var a=Os(g.src);return zn.nativeSourceHandler.canPlayType("video/"+a)}return""},zn.nativeSourceHandler.handleSource=function(g,u,a){u.setSrc(g.src)},zn.nativeSourceHandler.dispose=function(){},zn.registerSourceHandler(zn.nativeSourceHandler),xi.registerTech("Html5",zn);var Uc=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Sd={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Bc=["tiny","xsmall","small","medium","large","xlarge","huge"],Lu={};Bc.forEach(function(g){var u="x"===g.charAt(0)?"x-"+g.substring(1):g;Lu[g]="vjs-layout-"+u});var Vf={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Go=function(g){function u(l,n,o){var h;if(l.id=l.id||n.id||"vjs_video_"+Ca(),(n=as(u.getTagSettings(l),n)).initChildren=!1,n.createEl=!1,n.evented=!1,n.reportTouchActivity=!1,!n.language)if("function"==typeof l.closest){var _=l.closest("[lang]");_&&_.getAttribute&&(n.language=_.getAttribute("lang"))}else for(var C=l;C&&1===C.nodeType;){if(qr(C).hasOwnProperty("lang")){n.language=C.getAttribute("lang");break}C=C.parentNode}if((h=g.call(this,null,n,o)||this).boundDocumentFullscreenChange_=function(Q){return h.documentFullscreenChange_(Q)},h.boundFullWindowOnEscKey_=function(Q){return h.fullWindowOnEscKey(Q)},h.boundUpdateStyleEl_=function(Q){return h.updateStyleEl_(Q)},h.boundApplyInitTime_=function(Q){return h.applyInitTime_(Q)},h.boundUpdateCurrentBreakpoint_=function(Q){return h.updateCurrentBreakpoint_(Q)},h.boundHandleTechClick_=function(Q){return h.handleTechClick_(Q)},h.boundHandleTechDoubleClick_=function(Q){return h.handleTechDoubleClick_(Q)},h.boundHandleTechTouchStart_=function(Q){return h.handleTechTouchStart_(Q)},h.boundHandleTechTouchMove_=function(Q){return h.handleTechTouchMove_(Q)},h.boundHandleTechTouchEnd_=function(Q){return h.handleTechTouchEnd_(Q)},h.boundHandleTechTap_=function(Q){return h.handleTechTap_(Q)},h.isFullscreen_=!1,h.log=kl(h.id_),h.fsApi_=Ki,h.isPosterFromTech_=!1,h.queuedCallbacks_=[],h.isReady_=!1,h.hasStarted_=!1,h.userActive_=!1,h.debugEnabled_=!1,h.audioOnlyMode_=!1,h.audioPosterMode_=!1,h.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!h.options_||!h.options_.techOrder||!h.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(h.tag=l,h.tagAttributes=l&&qr(l),h.language(h.options_.language),n.languages){var A={};Object.getOwnPropertyNames(n.languages).forEach(function(Q){A[Q.toLowerCase()]=n.languages[Q]}),h.languages_=A}else h.languages_=u.prototype.options_.languages;h.resetCache_(),h.poster_=n.poster||"",h.controls_=!!n.controls,l.controls=!1,l.removeAttribute("controls"),h.changingSrc_=!1,h.playCallbacks_=[],h.playTerminatedQueue_=[],l.hasAttribute("autoplay")?h.autoplay(!0):h.autoplay(h.options_.autoplay),n.plugins&&Object.keys(n.plugins).forEach(function(Q){if("function"!=typeof h[Q])throw new Error('plugin "'+Q+'" does not exist')}),h.scrubbing_=!1,h.el_=h.createEl(),xa(q(h),{eventBusKey:"el_"}),h.fsApi_.requestFullscreen&&(Zn(Ye(),h.fsApi_.fullscreenchange,h.boundDocumentFullscreenChange_),h.on(h.fsApi_.fullscreenchange,h.boundDocumentFullscreenChange_)),h.fluid_&&h.on(["playerreset","resize"],h.boundUpdateStyleEl_);var j=Qi(h.options_);n.plugins&&Object.keys(n.plugins).forEach(function(Q){h[Q](n.plugins[Q])}),n.debug&&h.debug(!0),h.options_.playerOptions=j,h.middleware_=[],h.playbackRates(n.playbackRates),h.initChildren(),h.isAudio("audio"===l.nodeName.toLowerCase()),h.controls()?h.addClass("vjs-controls-enabled"):h.addClass("vjs-controls-disabled"),h.el_.setAttribute("role","region"),h.isAudio()?h.el_.setAttribute("aria-label",h.localize("Audio Player")):h.el_.setAttribute("aria-label",h.localize("Video Player")),h.isAudio()&&h.addClass("vjs-audio"),h.flexNotSupported_()&&h.addClass("vjs-no-flex"),ti&&h.addClass("vjs-touch-enabled"),mr||h.addClass("vjs-workinghover"),u.players[h.id_]=q(h);var te="7.21.4".split(".")[0];return h.addClass("vjs-v"+te),h.userActive(!0),h.reportUserActivity(),h.one("play",function(Q){return h.listenForUserActivity_(Q)}),h.on("stageclick",function(Q){return h.handleStageClick_(Q)}),h.on("keydown",function(Q){return h.handleKeyDown(Q)}),h.on("languagechange",function(Q){return h.handleLanguagechange(Q)}),h.breakpoints(h.options_.breakpoints),h.responsive(h.options_.responsive),h.on("ready",function(){h.audioPosterMode(h.options_.audioPosterMode),h.audioOnlyMode(h.options_.audioOnlyMode)}),h}re(u,g);var a=u.prototype;return a.dispose=function(){var n=this;this.trigger("dispose"),this.off("dispose"),Qr(Ye(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Qr(Ye(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),u.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function Ur(g){fa[g.id()]=null}(this),ri.names.forEach(function(o){var _=n[ri[o].getterName]();_&&_.off&&_.off()}),g.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},a.createEl=function(){var o,n=this.tag,h=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),_="video-js"===this.tag.tagName.toLowerCase();h?o=this.el_=n.parentNode:_||(o=this.el_=g.prototype.createEl.call(this,"div"));var C=qr(n);if(_){for(o=this.el_=n,n=this.tag=Ye().createElement("video");o.children.length;)n.appendChild(o.firstChild);_u(o,"video-js")||zs(o,"video-js"),o.appendChild(n),h=this.playerElIngest_=o,Object.keys(o).forEach(function(je){try{n[je]=o[je]}catch{}})}if(n.setAttribute("tabindex","-1"),C.tabindex="-1",(Lt||Ie&&ur)&&(n.setAttribute("role","application"),C.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in C&&delete C.width,"height"in C&&delete C.height,Object.getOwnPropertyNames(C).forEach(function(je){_&&"class"===je||o.setAttribute(je,C[je]),_&&n.setAttribute(je,C[je])}),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",n.player=o.player=this,this.addClass("vjs-paused"),!0!==ce().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=xc("vjs-styles-dimensions");var A=Ln(".vjs-styles-defaults"),j=Ln("head");j.insertBefore(this.styleEl_,A?A.nextSibling:j.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var te=n.getElementsByTagName("a"),Q=0;Q<te.length;Q++){var Se=te.item(Q);zs(Se,"vjs-hidden"),Se.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!h&&n.parentNode.insertBefore(o,n),wc(n,o),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=o,o},a.crossOrigin=function(n){if(!n)return this.techGet_("crossOrigin");"anonymous"===n||"use-credentials"===n?this.techCall_("setCrossOrigin",n):ei.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+n+'"')},a.width=function(n){return this.dimension("width",n)},a.height=function(n){return this.dimension("height",n)},a.dimension=function(n,o){var h=n+"_";if(void 0===o)return this[h]||0;if(""===o||"auto"===o)return this[h]=void 0,void this.updateStyleEl_();var _=parseFloat(o);isNaN(_)?ei.error('Improper value "'+o+'" supplied for for '+n):(this[h]=_,this.updateStyleEl_())},a.fluid=function(n){var o=this;if(void 0===n)return!!this.fluid_;this.fluid_=!!n,Pe(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),n?(this.addClass("vjs-fluid"),this.fill(!1),function(u,a){Pe(u)?a():(u.eventedCallbacks||(u.eventedCallbacks=[]),u.eventedCallbacks.push(a))}(this,function(){o.on(["playerreset","resize"],o.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},a.fill=function(n){if(void 0===n)return!!this.fill_;this.fill_=!!n,n?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},a.aspectRatio=function(n){if(void 0===n)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(n))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=n,this.fluid(!0),this.updateStyleEl_()},a.updateStyleEl_=function(){if(!0!==ce().VIDEOJS_NO_DYNAMIC_STYLE){var _,C,j,te=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),Q=te[1]/te[0];_=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/Q:this.videoWidth()||300,C=void 0!==this.height_?this.height_:_*Q,j=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(j),fl(this.styleEl_,"\n      ."+j+" {\n        width: "+_+"px;\n        height: "+C+"px;\n      }\n\n      ."+j+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*Q+"%;\n      }\n    ")}else{var n="number"==typeof this.width_?this.width_:this.options_.width,o="number"==typeof this.height_?this.height_:this.options_.height,h=this.tech_&&this.tech_.el();h&&(n>=0&&(h.width=n),o>=0&&(h.height=o))}},a.loadTech_=function(n,o){var h=this;this.tech_&&this.unloadTech_();var _=Yi(n),C=n.charAt(0).toLowerCase()+n.slice(1);"Html5"!==_&&this.tag&&(xi.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=_,this.isReady_=!1;var A=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(A=!1);var j={source:o,autoplay:A,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+C+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};ri.names.forEach(function(Q){var Se=ri[Q];j[Se.getterName]=h[Se.privateName]}),as(j,this.options_[_]),as(j,this.options_[C]),as(j,this.options_[n.toLowerCase()]),this.tag&&(j.tag=this.tag),o&&o.src===this.cache_.src&&this.cache_.currentTime>0&&(j.startTime=this.cache_.currentTime);var te=xi.getTech(n);if(!te)throw new Error("No Tech named '"+_+"' exists! '"+_+"' should be registered using videojs.registerTech()'");this.tech_=new te(j),this.tech_.ready(ss(this,this.handleTechReady_),!0),function(u,a){u.forEach(function(l){var n=a.addRemoteTextTrack(l).track;!l.src&&l.cues&&l.cues.forEach(function(o){return n.addCue(o)})}),a.textTracks()}(this.textTracksJson_||[],this.tech_),Uc.forEach(function(Q){h.on(h.tech_,Q,function(Se){return h["handleTech"+Yi(Q)+"_"](Se)})}),Object.keys(Sd).forEach(function(Q){h.on(h.tech_,Q,function(Se){0===h.tech_.playbackRate()&&h.tech_.seeking()?h.queuedCallbacks_.push({callback:h["handleTech"+Sd[Q]+"_"].bind(h),event:Se}):h["handleTech"+Sd[Q]+"_"](Se)})}),this.on(this.tech_,"loadstart",function(Q){return h.handleTechLoadStart_(Q)}),this.on(this.tech_,"sourceset",function(Q){return h.handleTechSourceset_(Q)}),this.on(this.tech_,"waiting",function(Q){return h.handleTechWaiting_(Q)}),this.on(this.tech_,"ended",function(Q){return h.handleTechEnded_(Q)}),this.on(this.tech_,"seeking",function(Q){return h.handleTechSeeking_(Q)}),this.on(this.tech_,"play",function(Q){return h.handleTechPlay_(Q)}),this.on(this.tech_,"firstplay",function(Q){return h.handleTechFirstPlay_(Q)}),this.on(this.tech_,"pause",function(Q){return h.handleTechPause_(Q)}),this.on(this.tech_,"durationchange",function(Q){return h.handleTechDurationChange_(Q)}),this.on(this.tech_,"fullscreenchange",function(Q,Se){return h.handleTechFullscreenChange_(Q,Se)}),this.on(this.tech_,"fullscreenerror",function(Q,Se){return h.handleTechFullscreenError_(Q,Se)}),this.on(this.tech_,"enterpictureinpicture",function(Q){return h.handleTechEnterPictureInPicture_(Q)}),this.on(this.tech_,"leavepictureinpicture",function(Q){return h.handleTechLeavePictureInPicture_(Q)}),this.on(this.tech_,"error",function(Q){return h.handleTechError_(Q)}),this.on(this.tech_,"posterchange",function(Q){return h.handleTechPosterChange_(Q)}),this.on(this.tech_,"textdata",function(Q){return h.handleTechTextData_(Q)}),this.on(this.tech_,"ratechange",function(Q){return h.handleTechRateChange_(Q)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&("Html5"!==_||!this.tag)&&wc(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},a.unloadTech_=function(){var n=this;ri.names.forEach(function(o){var h=ri[o];n[h.privateName]=n[h.getterName]()}),this.textTracksJson_=function(u){var a=u.$$("track"),l=Array.prototype.map.call(a,function(o){return o.track});return Array.prototype.map.call(a,function(o){var h=Nl(o.track);return o.src&&(h.src=o.src),h}).concat(Array.prototype.filter.call(u.textTracks(),function(o){return-1===l.indexOf(o)}).map(Nl))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},a.tech=function(n){return void 0===n&&ei.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},a.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},a.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},a.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},a.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},a.manualAutoplay_=function(n){var o=this;if(this.tech_&&"string"==typeof n){var _,h=function(){var A=o.muted();o.muted(!0);var j=function(){o.muted(A)};o.playTerminatedQueue_.push(j);var te=o.play();if(Rl(te))return te.catch(function(Q){throw j(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(Q||""))})};if("any"!==n||this.muted()?_="muted"!==n||this.muted()?this.play():h():Rl(_=this.play())&&(_=_.catch(h)),Rl(_))return _.then(function(){o.trigger({type:"autoplay-success",autoplay:n})}).catch(function(){o.trigger({type:"autoplay-failure",autoplay:n})})}},a.updateSourceCaches_=function(n){void 0===n&&(n="");var o=n,h="";"string"!=typeof o&&(o=n.src,h=n.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],o&&!h&&(h=function(u,a){if(!a)return"";if(u.cache_.source.src===a&&u.cache_.source.type)return u.cache_.source.type;var l=u.cache_.sources.filter(function(_){return _.src===a});if(l.length)return l[0].type;for(var n=u.$$("source"),o=0;o<n.length;o++){var h=n[o];if(h.type&&h.src&&h.src===a)return h.type}return gl(a)}(this,o)),this.cache_.source=Qi({},n,{src:o,type:h});for(var _=this.cache_.sources.filter(function(Se){return Se.src&&Se.src===o}),C=[],A=this.$$("source"),j=[],te=0;te<A.length;te++){var Q=qr(A[te]);C.push(Q),Q.src&&Q.src===o&&j.push(Q.src)}j.length&&!_.length?this.cache_.sources=C:_.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=o},a.handleTechSourceset_=function(n){var o=this;if(!this.changingSrc_){var h=function(j){return o.updateSourceCaches_(j)},_=this.currentSource().src,C=n.src;_&&!/^blob:/.test(_)&&/^blob:/.test(C)&&(!this.lastSource_||this.lastSource_.tech!==C&&this.lastSource_.player!==_)&&(h=function(){}),h(C),n.src||this.tech_.any(["sourceset","loadstart"],function(A){if("sourceset"!==A.type){var j=o.techGet("currentSrc");o.lastSource_.tech=j,o.updateSourceCaches_(j)}})}this.lastSource_={player:this.currentSource().src,tech:n.src},this.trigger({src:n.src,type:"sourceset"})},a.hasStarted=function(n){if(void 0===n)return this.hasStarted_;n!==this.hasStarted_&&(this.hasStarted_=n,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},a.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},a.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(n){return n.callback(n.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},a.handleTechWaiting_=function(){var n=this;this.addClass("vjs-waiting"),this.trigger("waiting");var o=this.currentTime();this.on("timeupdate",function _(){o!==n.currentTime()&&(n.removeClass("vjs-waiting"),n.off("timeupdate",_))})},a.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},a.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},a.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},a.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},a.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},a.handleTechFirstPlay_=function(){this.options_.starttime&&(ei.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},a.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},a.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},a.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},a.handleTechClick_=function(n){this.controls_&&(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.click||!1!==this.options_.userActions.click)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,n):this.paused()?Ba(this.play()):this.pause())},a.handleTechDoubleClick_=function(n){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(h){return h.contains(n.target)})||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.doubleClick||!1!==this.options_.userActions.doubleClick)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,n):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},a.handleTechTap_=function(){this.userActive(!this.userActive())},a.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},a.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},a.handleTechTouchEnd_=function(n){n.cancelable&&n.preventDefault()},a.handleStageClick_=function(){this.reportUserActivity()},a.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},a.documentFullscreenChange_=function(n){var o=n.target.player;if(!o||o===this){var h=this.el(),_=Ye()[this.fsApi_.fullscreenElement]===h;!_&&h.matches?_=h.matches(":"+this.fsApi_.fullscreen):!_&&h.msMatchesSelector&&(_=h.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(_)}},a.handleTechFullscreenChange_=function(n,o){var h=this;o&&(o.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){h.removeClass("vjs-ios-native-fs")})),this.isFullscreen(o.isFullscreen))},a.handleTechFullscreenError_=function(n,o){this.trigger("fullscreenerror",o)},a.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},a.handleTechEnterPictureInPicture_=function(n){this.isInPictureInPicture(!0)},a.handleTechLeavePictureInPicture_=function(n){this.isInPictureInPicture(!1)},a.handleTechError_=function(){var n=this.tech_.error();this.error(n)},a.handleTechTextData_=function(){var n=null;arguments.length>1&&(n=arguments[1]),this.trigger("textdata",n)},a.getCache=function(){return this.cache_},a.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},a.techCall_=function(n,o){this.ready(function(){if(n in Ft)return function ze(g,u,a,l){return u[a](g.reduce(Fn(a),l))}(this.middleware_,this.tech_,n,o);if(n in Kn)return ht(this.middleware_,this.tech_,n,o);try{this.tech_&&this.tech_[n](o)}catch(h){throw ei(h),h}},!0)},a.techGet_=function(n){if(this.tech_&&this.tech_.isReady_){if(n in It)return function pe(g,u,a){return g.reduceRight(Fn(a),u[a]())}(this.middleware_,this.tech_,n);if(n in Kn)return ht(this.middleware_,this.tech_,n);try{return this.tech_[n]()}catch(o){throw void 0===this.tech_[n]?(ei("Video.js: "+n+" method not defined for "+this.techName_+" playback technology.",o),o):"TypeError"===o.name?(ei("Video.js: "+n+" unavailable on "+this.techName_+" playback technology element.",o),this.tech_.isReady_=!1,o):(ei(o),o)}}},a.play=function(){var n=this,o=this.options_.Promise||ce().Promise;return o?new o(function(h){n.play_(h)}):this.play_()},a.play_=function(n){var o=this;void 0===n&&(n=Ba),this.playCallbacks_.push(n);var h=!(this.changingSrc_||!this.src()&&!this.currentSrc()),_=!(!us&&!mr);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!h)return this.waitToPlay_=function(j){o.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!h&&_&&this.load());var C=this.techGet_("play");_&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===C?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(C)},a.runPlayTerminatedQueue_=function(){var n=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],n.forEach(function(o){o()})},a.runPlayCallbacks_=function(n){var o=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],o.forEach(function(h){h(n)})},a.pause=function(){this.techCall_("pause")},a.paused=function(){return!1!==this.techGet_("paused")},a.played=function(){return this.techGet_("played")||Mo(0,0)},a.scrubbing=function(n){if(typeof n>"u")return this.scrubbing_;this.scrubbing_=!!n,this.techCall_("setScrubbing",this.scrubbing_),n?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},a.currentTime=function(n){return typeof n<"u"?(n<0&&(n=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",n),void(this.cache_.initTime=0)):(this.cache_.initTime=n,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},a.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},a.duration=function(n){if(void 0===n)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(n=parseFloat(n))<0&&(n=1/0),n!==this.cache_.duration&&(this.cache_.duration=n,n===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(n)||this.trigger("durationchange"))},a.remainingTime=function(){return this.duration()-this.currentTime()},a.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},a.buffered=function(){var n=this.techGet_("buffered");return(!n||!n.length)&&(n=Mo(0,0)),n},a.bufferedPercent=function(){return zu(this.buffered(),this.duration())},a.bufferedEnd=function(){var n=this.buffered(),o=this.duration(),h=n.end(n.length-1);return h>o&&(h=o),h},a.volume=function(n){var o;return void 0!==n?(o=Math.max(0,Math.min(1,parseFloat(n))),this.cache_.volume=o,this.techCall_("setVolume",o),void(o>0&&this.lastVolume_(o))):(o=parseFloat(this.techGet_("volume")),isNaN(o)?1:o)},a.muted=function(n){if(void 0===n)return this.techGet_("muted")||!1;this.techCall_("setMuted",n)},a.defaultMuted=function(n){return void 0!==n?this.techCall_("setDefaultMuted",n):this.techGet_("defaultMuted")||!1},a.lastVolume_=function(n){if(void 0===n||0===n)return this.cache_.lastVolume;this.cache_.lastVolume=n},a.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},a.isFullscreen=function(n){if(void 0!==n){var o=this.isFullscreen_;return this.isFullscreen_=!!n,this.isFullscreen_!==o&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},a.requestFullscreen=function(n){var o=this.options_.Promise||ce().Promise;if(o){var h=this;return new o(function(_,C){function A(){h.off("fullscreenerror",te),h.off("fullscreenchange",j)}function j(){A(),_()}function te(Se,je){A(),C(je)}h.one("fullscreenchange",j),h.one("fullscreenerror",te);var Q=h.requestFullscreenHelper_(n);Q&&(Q.then(A,A),Q.then(_,C))})}return this.requestFullscreenHelper_()},a.requestFullscreenHelper_=function(n){var h,o=this;if(this.fsApi_.prefixed||(h=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==n&&(h=n)),this.fsApi_.requestFullscreen){var _=this.el_[this.fsApi_.requestFullscreen](h);return _&&_.then(function(){return o.isFullscreen(!0)},function(){return o.isFullscreen(!1)}),_}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},a.exitFullscreen=function(){var n=this.options_.Promise||ce().Promise;if(n){var o=this;return new n(function(h,_){function C(){o.off("fullscreenerror",j),o.off("fullscreenchange",A)}function A(){C(),h()}function j(Q,Se){C(),_(Se)}o.one("fullscreenchange",A),o.one("fullscreenerror",j);var te=o.exitFullscreenHelper_();te&&(te.then(C,C),te.then(h,_))})}return this.exitFullscreenHelper_()},a.exitFullscreenHelper_=function(){var n=this;if(this.fsApi_.requestFullscreen){var o=Ye()[this.fsApi_.exitFullscreen]();return o&&Ba(o.then(function(){return n.isFullscreen(!1)})),o}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},a.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Ye().documentElement.style.overflow,Zn(Ye(),"keydown",this.boundFullWindowOnEscKey_),Ye().documentElement.style.overflow="hidden",zs(Ye().body,"vjs-full-window"),this.trigger("enterFullWindow")},a.fullWindowOnEscKey=function(n){lt().isEventKey(n,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},a.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Qr(Ye(),"keydown",this.boundFullWindowOnEscKey_),Ye().documentElement.style.overflow=this.docOrigOverflow,ec(Ye().body,"vjs-full-window"),this.trigger("exitFullWindow")},a.disablePictureInPicture=function(n){if(void 0===n)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",n),this.options_.disablePictureInPicture=n,this.trigger("disablepictureinpicturechanged")},a.isInPictureInPicture=function(n){return void 0!==n?(this.isInPictureInPicture_=!!n,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},a.requestPictureInPicture=function(){if("pictureInPictureEnabled"in Ye()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},a.exitPictureInPicture=function(){if("pictureInPictureEnabled"in Ye())return Ye().exitPictureInPicture()},a.handleKeyDown=function(n){var C,A,o=this.options_.userActions;o&&o.hotkeys&&(A=(C=this.el_.ownerDocument.activeElement).tagName.toLowerCase(),C.isContentEditable||("input"===A?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(C.type):-1!==["textarea"].indexOf(A))||("function"==typeof o.hotkeys?o.hotkeys.call(this,n):this.handleHotkeys(n)))},a.handleHotkeys=function(n){var o=this.options_.userActions?this.options_.userActions.hotkeys:{},h=o.fullscreenKey,C=o.muteKey,A=void 0===C?function(We){return lt().isEventKey(We,"m")}:C,j=o.playPauseKey,te=void 0===j?function(We){return lt().isEventKey(We,"k")||lt().isEventKey(We,"Space")}:j;if((void 0===h?function(We){return lt().isEventKey(We,"f")}:h).call(this,n)){n.preventDefault(),n.stopPropagation();var Q=fn.getComponent("FullscreenToggle");!1!==Ye()[this.fsApi_.fullscreenEnabled]&&Q.prototype.handleClick.call(this,n)}else A.call(this,n)?(n.preventDefault(),n.stopPropagation(),fn.getComponent("MuteToggle").prototype.handleClick.call(this,n)):te.call(this,n)&&(n.preventDefault(),n.stopPropagation(),fn.getComponent("PlayToggle").prototype.handleClick.call(this,n))},a.canPlayType=function(n){for(var o,h=0,_=this.options_.techOrder;h<_.length;h++){var C=_[h],A=xi.getTech(C);if(A||(A=fn.getComponent(C)),A){if(A.isSupported()&&(o=A.canPlayType(n)))return o}else ei.error('The "'+C+'" tech is undefined. Skipped browser support check for that tech.')}return""},a.selectSource=function(n){var Q,o=this,h=this.options_.techOrder.map(function(te){return[te,xi.getTech(te)]}).filter(function(te){var Q=te[0],Se=te[1];return Se?Se.isSupported():(ei.error('The "'+Q+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),_=function(Q,Se,je){var We;return Q.some(function($e){return Se.some(function(kt){if(We=je($e,kt))return!0})}),We},j=function(Q,Se){var je=Q[0];if(Q[1].canPlaySource(Se,o.options_[je.toLowerCase()]))return{source:Se,tech:je}};return(this.options_.sourceOrder?_(n,h,(Q=j,function(Se,je){return Q(je,Se)})):_(h,n,j))||!1},a.handleSrc_=function(n,o){var h=this;if(typeof n>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var _=Hl(n);if(_.length){if(this.changingSrc_=!0,o||(this.cache_.sources=_),this.updateSourceCaches_(_[0]),O(this,_[0],function(j,te){if(h.middleware_=te,o||(h.cache_.sources=_),h.updateSourceCaches_(j),h.src_(j))return _.length>1?h.handleSrc_(_.slice(1)):(h.changingSrc_=!1,h.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void h.triggerReady());!function G(g,u){g.forEach(function(a){return a.setTech&&a.setTech(u)})}(te,h.tech_)}),this.options_.retryOnError&&_.length>1){var C=function(){h.error(null),h.handleSrc_(_.slice(1),!0)},A=function(){h.off("error",C)};this.one("error",C),this.one("playing",A),this.resetRetryOnError_=function(){h.off("error",C),h.off("playing",A)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)},a.src=function(n){return this.handleSrc_(n,!1)},a.src_=function(n){var o=this,h=this.selectSource([n]);return!h||(function(u,a){return Yi(u)===Yi(a)}(h.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",n):this.techCall_("src",n.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(h.tech,h.source),this.tech_.ready(function(){o.changingSrc_=!1}),!1))},a.load=function(){this.techCall_("load")},a.reset=function(){var n=this,o=this.options_.Promise||ce().Promise;this.paused()||!o?this.doReset_():Ba(this.play().then(function(){return n.doReset_()}))},a.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Pe(this)&&this.trigger("playerreset")},a.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},a.resetProgressBar_=function(){this.currentTime(0);var n=this.controlBar||{},o=n.durationDisplay,h=n.remainingTimeDisplay;o&&o.updateContent(),h&&h.updateContent()},a.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},a.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},a.currentSources=function(){var n=this.currentSource(),o=[];return 0!==Object.keys(n).length&&o.push(n),this.cache_.sources||o},a.currentSource=function(){return this.cache_.source||{}},a.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},a.currentType=function(){return this.currentSource()&&this.currentSource().type||""},a.preload=function(n){return void 0!==n?(this.techCall_("setPreload",n),void(this.options_.preload=n)):this.techGet_("preload")},a.autoplay=function(n){if(void 0===n)return this.options_.autoplay||!1;var o;"string"==typeof n&&/(any|play|muted)/.test(n)||!0===n&&this.options_.normalizeAutoplay?(this.options_.autoplay=n,this.manualAutoplay_("string"==typeof n?n:"play"),o=!1):this.options_.autoplay=!!n,o=typeof o>"u"?this.options_.autoplay:o,this.tech_&&this.techCall_("setAutoplay",o)},a.playsinline=function(n){return void 0!==n?(this.techCall_("setPlaysinline",n),this.options_.playsinline=n,this):this.techGet_("playsinline")},a.loop=function(n){return void 0!==n?(this.techCall_("setLoop",n),void(this.options_.loop=n)):this.techGet_("loop")},a.poster=function(n){if(void 0===n)return this.poster_;n||(n=""),n!==this.poster_&&(this.poster_=n,this.techCall_("setPoster",n),this.isPosterFromTech_=!1,this.trigger("posterchange"))},a.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var n=this.tech_.poster()||"";n!==this.poster_&&(this.poster_=n,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},a.controls=function(n){if(void 0===n)return!!this.controls_;this.controls_!==(n=!!n)&&(this.controls_=n,this.usingNativeControls()&&this.techCall_("setControls",n),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},a.usingNativeControls=function(n){if(void 0===n)return!!this.usingNativeControls_;this.usingNativeControls_!==(n=!!n)&&(this.usingNativeControls_=n,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},a.error=function(n){var o=this;if(void 0===n)return this.error_||null;if(Jr("beforeerror").forEach(function(_){var C=_(o,n);Ea(C)&&!Array.isArray(C)||"string"==typeof C||"number"==typeof C||null===C?n=C:o.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&n&&4===n.code){var h=function(){this.error(n)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],h),void this.one("loadstart",function(){this.off(["click","touchstart"],h)})}if(null===n)return this.error_=n,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Aa(n),this.addClass("vjs-error"),ei.error("(CODE:"+this.error_.code+" "+Aa.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),Jr("error").forEach(function(_){return _(o,o.error_)})},a.reportUserActivity=function(n){this.userActivity_=!0},a.userActive=function(n){if(void 0===n)return this.userActive_;if((n=!!n)!==this.userActive_){if(this.userActive_=n,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(o){o.stopPropagation(),o.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},a.listenForUserActivity_=function(){var n,o,h,_=ss(this,this.reportUserActivity),j=function(je){_(),this.clearInterval(n)};this.on("mousedown",function(){_(),this.clearInterval(n),n=this.setInterval(_,250)}),this.on("mousemove",function(je){(je.screenX!==o||je.screenY!==h)&&(o=je.screenX,h=je.screenY,_())}),this.on("mouseup",j),this.on("mouseleave",j);var Q,te=this.getChild("controlBar");te&&!mr&&!Ja&&(te.on("mouseenter",function(Se){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),te.on("mouseleave",function(Se){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",_),this.on("keyup",_),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(Q);var Se=this.options_.inactivityTimeout;Se<=0||(Q=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},Se))}},250)},a.playbackRate=function(n){if(void 0===n)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",n)},a.defaultPlaybackRate=function(n){return void 0!==n?this.techCall_("setDefaultPlaybackRate",n):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},a.isAudio=function(n){if(void 0===n)return!!this.isAudio_;this.isAudio_=!!n},a.enableAudioOnlyUI_=function(){var n=this;this.addClass("vjs-audio-only-mode");var o=this.children(),h=this.getChild("ControlBar"),_=h&&h.currentHeight();o.forEach(function(C){C!==h&&C.el_&&!C.hasClass("vjs-hidden")&&(C.hide(),n.audioOnlyCache_.hiddenChildren.push(C))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(_),this.trigger("audioonlymodechange")},a.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(n){return n.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},a.audioOnlyMode=function(n){var o=this;if("boolean"!=typeof n||n===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=n;var h=this.options_.Promise||ce().Promise;if(h){if(n){var _=[];return this.isInPictureInPicture()&&_.push(this.exitPictureInPicture()),this.isFullscreen()&&_.push(this.exitFullscreen()),this.audioPosterMode()&&_.push(this.audioPosterMode(!1)),h.all(_).then(function(){return o.enableAudioOnlyUI_()})}return h.resolve().then(function(){return o.disableAudioOnlyUI_()})}n?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},a.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},a.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},a.audioPosterMode=function(n){var o=this;if("boolean"!=typeof n||n===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=n;var h=this.options_.Promise||ce().Promise;return h?n?this.audioOnlyMode()?this.audioOnlyMode(!1).then(function(){o.enablePosterModeUI_()}):h.resolve().then(function(){o.enablePosterModeUI_()}):h.resolve().then(function(){o.disablePosterModeUI_()}):n?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},a.addTextTrack=function(n,o,h){if(this.tech_)return this.tech_.addTextTrack(n,o,h)},a.addRemoteTextTrack=function(n,o){if(this.tech_)return this.tech_.addRemoteTextTrack(n,o)},a.removeRemoteTextTrack=function(n){void 0===n&&(n={});var h=n.track;if(h||(h=n),this.tech_)return this.tech_.removeRemoteTextTrack(h)},a.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},a.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},a.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},a.language=function(n){if(void 0===n)return this.language_;this.language_!==String(n).toLowerCase()&&(this.language_=String(n).toLowerCase(),Pe(this)&&this.trigger("languagechange"))},a.languages=function(){return Qi(u.prototype.options_.languages,this.languages_)},a.toJSON=function(){var n=Qi(this.options_),o=n.tracks;n.tracks=[];for(var h=0;h<o.length;h++){var _=o[h];(_=Qi(_)).player=void 0,n.tracks[h]=_}return n},a.createModal=function(n,o){var h=this;(o=o||{}).content=n||"";var _=new Ll(this,o);return this.addChild(_),_.on("dispose",function(){h.removeChild(_)}),_.open(),_},a.updateCurrentBreakpoint_=function(){if(this.responsive())for(var n=this.currentBreakpoint(),o=this.currentWidth(),h=0;h<Bc.length;h++){var _=Bc[h];if(o<=this.breakpoints_[_]){if(n===_)return;n&&this.removeClass(Lu[n]),this.addClass(Lu[_]),this.breakpoint_=_;break}}},a.removeCurrentBreakpoint_=function(){var n=this.currentBreakpointClass();this.breakpoint_="",n&&this.removeClass(n)},a.breakpoints=function(n){return void 0===n||(this.breakpoint_="",this.breakpoints_=as({},Vf,n),this.updateCurrentBreakpoint_()),as(this.breakpoints_)},a.responsive=function(n){return void 0===n?this.responsive_:(n=!!n)!==this.responsive_?(this.responsive_=n,n?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),n):void 0},a.currentBreakpoint=function(){return this.breakpoint_},a.currentBreakpointClass=function(){return Lu[this.breakpoint_]||""},a.loadMedia=function(n,o){var h=this;if(n&&"object"==typeof n){this.reset(),this.cache_.media=Qi(n);var _=this.cache_.media,A=_.poster,j=_.src,te=_.textTracks;!_.artwork&&A&&(this.cache_.media.artwork=[{src:A,type:gl(A)}]),j&&this.src(j),A&&this.poster(A),Array.isArray(te)&&te.forEach(function(Q){return h.addRemoteTextTrack(Q,!1)}),this.ready(o)}},a.getMedia=function(){if(!this.cache_.media){var n=this.poster(),_={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(C){return{kind:C.kind,label:C.label,language:C.language,src:C.src}})};return n&&(_.poster=n,_.artwork=[{src:_.poster,type:gl(_.poster)}]),_}return Qi(this.cache_.media)},u.getTagSettings=function(n){var o={sources:[],tracks:[]},h=qr(n),_=h["data-setup"];if(_u(n,"vjs-fill")&&(h.fill=!0),_u(n,"vjs-fluid")&&(h.fluid=!0),null!==_){var C=bt()(_||"{}"),A=C[0],j=C[1];A&&ei.error(A),as(h,j)}if(as(o,h),n.hasChildNodes())for(var te=n.childNodes,Q=0,Se=te.length;Q<Se;Q++){var je=te[Q],We=je.nodeName.toLowerCase();"source"===We?o.sources.push(qr(je)):"track"===We&&o.tracks.push(qr(je))}return o},a.flexNotSupported_=function(){var n=Ye().createElement("i");return!("flexBasis"in n.style||"webkitFlexBasis"in n.style||"mozFlexBasis"in n.style||"msFlexBasis"in n.style||"msFlexOrder"in n.style)},a.debug=function(n){if(void 0===n)return this.debugEnabled_;n?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},a.playbackRates=function(n){if(void 0===n)return this.cache_.playbackRates;Array.isArray(n)&&n.every(function(o){return"number"==typeof o})&&(this.cache_.playbackRates=n,this.trigger("playbackrateschange"))},u}(fn);ri.names.forEach(function(g){var u=ri[g];Go.prototype[u.getterName]=function(){return this.tech_?this.tech_[u.getterName]():(this[u.privateName]=this[u.privateName]||new u.ListClass,this[u.privateName])}}),Go.prototype.crossorigin=Go.prototype.crossOrigin,Go.players={};var Bh=ce().navigator;Go.prototype.options_={techOrder:xi.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Bh&&(Bh.languages&&Bh.languages[0]||Bh.userLanguage||Bh.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(g){Go.prototype[g]=function(){return this.techGet_(g)}}),Uc.forEach(function(g){Go.prototype["handleTech"+Yi(g)+"_"]=function(){return this.trigger(g)}}),fn.registerComponent("Player",Go);var Ls="plugin",yi="activePlugins_",wd={},Zd=function(u){return wd.hasOwnProperty(u)},Cd=function(u){return Zd(u)?wd[u]:void 0},Id=function(u,a){u[yi]=u[yi]||{},u[yi][a]=!0},ra=function(u,a,l){var n=(l?"before":"")+"pluginsetup";u.trigger(n,a),u.trigger(n+":"+a.name,a)},Vc=function(u,a){return a.prototype.name=u,function(){ra(this,{name:u,plugin:a,instance:null},!0);for(var l=arguments.length,n=new Array(l),o=0;o<l;o++)n[o]=arguments[o];var h=Rt(a,[this].concat(n));return this[u]=function(){return h},ra(this,h.getEventHash()),h}},Tu=function(){function g(a){if(this.constructor===g)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=a,this.log||(this.log=this.player.log.createLogger(this.name)),xa(this),delete this.trigger,Ac(this,this.constructor.defaultState),Id(a,this.name),this.dispose=this.dispose.bind(this),a.on("dispose",this.dispose)}var u=g.prototype;return u.version=function(){return this.constructor.VERSION},u.getEventHash=function(l){return void 0===l&&(l={}),l.name=this.name,l.plugin=this.constructor,l.instance=this,l},u.trigger=function(l,n){return void 0===n&&(n={}),pi(this.eventBusEl_,l,this.getEventHash(n))},u.handleStateChanged=function(l){},u.dispose=function(){var l=this.name,n=this.player;this.trigger("dispose"),this.off(),n.off("dispose",this.dispose),n[yi][l]=!1,this.player=this.state=null,n[l]=Vc(l,wd[l])},g.isBasic=function(l){var n="string"==typeof l?Cd(l):l;return"function"==typeof n&&!g.prototype.isPrototypeOf(n.prototype)},g.registerPlugin=function(l,n){if("string"!=typeof l)throw new Error('Illegal plugin name, "'+l+'", must be a string, was '+typeof l+".");if(Zd(l))ei.warn('A plugin named "'+l+'" already exists. You may want to avoid re-registering plugins!');else if(Go.prototype.hasOwnProperty(l))throw new Error('Illegal plugin name, "'+l+'", cannot share a name with an existing player method!');if("function"!=typeof n)throw new Error('Illegal plugin for "'+l+'", must be a function, was '+typeof n+".");return wd[l]=n,l!==Ls&&(Go.prototype[l]=g.isBasic(n)?function(u,a){var l=function(){ra(this,{name:u,plugin:a,instance:null},!0);var o=a.apply(this,arguments);return Id(this,u),ra(this,{name:u,plugin:a,instance:o}),o};return Object.keys(a).forEach(function(n){l[n]=a[n]}),l}(l,n):Vc(l,n)),n},g.deregisterPlugin=function(l){if(l===Ls)throw new Error("Cannot de-register base plugin.");Zd(l)&&(delete wd[l],delete Go.prototype[l])},g.getPlugins=function(l){var n;return void 0===l&&(l=Object.keys(wd)),l.forEach(function(o){var h=Cd(o);h&&((n=n||{})[o]=h)}),n},g.getPluginVersion=function(l){var n=Cd(l);return n&&n.VERSION||""},g}();Tu.getPlugin=Cd,Tu.BASE_PLUGIN_NAME=Ls,Tu.registerPlugin(Ls,Tu),Go.prototype.usingPlugin=function(g){return!!this[yi]&&!0===this[yi][g]},Go.prototype.hasPlugin=function(g){return!!Zd(g)};var Yu=!1,zl=function(u){return 0===u.indexOf("#")?u.slice(1):u};function St(g,u,a){var l=St.getPlayer(g);if(l)return u&&ei.warn('Player "'+g+'" is already initialised. Options will not be applied.'),a&&l.ready(a),l;var n="string"==typeof g?Ln("#"+zl(g)):g;if(!Js(n))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!n.ownerDocument.defaultView||!n.ownerDocument.body.contains(n))&&ei.warn("The element supplied is not included in the DOM"),!0===(u=u||{}).restoreEl&&(u.restoreEl=(n.parentNode&&n.parentNode.hasAttribute("data-vjs-player")?n.parentNode:n).cloneNode(!0)),Jr("beforesetup").forEach(function(h){var _=h(n,Qi(u));Ea(_)&&!Array.isArray(_)?u=Qi(u,_):ei.error("please return an object in beforesetup hooks")});var o=fn.getComponent("Player");return l=new o(n,u,a),Jr("setup").forEach(function(h){return h(l)}),l}if(St.hooks_=qi,St.hooks=Jr,St.hook=function(u,a){Jr(u,a)},St.hookOnce=function(u,a){Jr(u,[].concat(a).map(function(l){return function o(){return bo(u,o),l.apply(void 0,arguments)}}))},St.removeHook=bo,!0!==ce().VIDEOJS_NO_DYNAMIC_STYLE&&Do()){var hc=Ln(".vjs-styles-defaults");if(!hc){hc=xc("vjs-styles-defaults");var Wl=Ln("head");Wl&&Wl.insertBefore(hc,Wl.firstChild),fl(hc,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}Pl(1,St),St.VERSION="7.21.4",St.options=Go.prototype.options_,St.getPlayers=function(){return Go.players},St.getPlayer=function(g){var a,u=Go.players;if("string"==typeof g){var l=zl(g),n=u[l];if(n)return n;a=Ln("#"+l)}else a=g;if(Js(a)){var h=a.player,_=a.playerId;if(h||u[_])return h||u[_]}},St.getAllPlayers=function(){return Object.keys(Go.players).map(function(g){return Go.players[g]}).filter(Boolean)},St.players=Go.players,St.getComponent=fn.getComponent,St.registerComponent=function(g,u){xi.isTech(u)&&ei.warn("The "+g+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),fn.registerComponent.call(fn,g,u)},St.getTech=xi.getTech,St.registerTech=xi.registerTech,St.use=function wh(g,u){ku[g]=ku[g]||[],ku[g].push(u)},Object.defineProperty(St,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(St.middleware,"TERMINATOR",{value:Pu,writeable:!1,enumerable:!0}),St.browser=fi,St.TOUCH_ENABLED=ti,St.extend=function(u,a){void 0===a&&(a={}),Yu||(ei.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0"),Yu=!0);var l=function(){u.apply(this,arguments)},n={};for(var o in"object"==typeof a?(a.constructor!==Object.prototype.constructor&&(l=a.constructor),n=a):"function"==typeof a&&(l=a),function xt(g,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(u&&u.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),u&&ge(g,u)}(l,u),u&&(l.super_=u),n)n.hasOwnProperty(o)&&(l.prototype[o]=n[o]);return l},St.mergeOptions=Qi,St.bind=ss,St.registerPlugin=Tu.registerPlugin,St.deregisterPlugin=Tu.deregisterPlugin,St.plugin=function(g,u){return ei.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Tu.registerPlugin(g,u)},St.getPlugins=Tu.getPlugins,St.getPlugin=Tu.getPlugin,St.getPluginVersion=Tu.getPluginVersion,St.addLanguage=function(g,u){var a;return g=(""+g).toLowerCase(),(St.options.languages=Qi(St.options.languages,((a={})[g]=u,a)))[g]},St.log=ei,St.createLogger=kl,St.createTimeRange=St.createTimeRanges=Mo,St.formatTime=oc,St.setFormatTime=function hd(g){bs=g},St.resetFormatTime=function Ip(){bs=Hi},St.parseUrl=Du,St.isCrossOrigin=Vl,St.EventTarget=D,St.on=Zn,St.one=qs,St.off=Qr,St.trigger=pi,St.xhr=Y(),St.TextTrack=ic,St.AudioTrack=na,St.VideoTrack=Ns,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(g){St[g]=function(){return ei.warn("videojs."+g+"() is deprecated; use videojs.dom."+g+"() instead"),Bn[g].apply(null,arguments)}}),St.computedStyle=Iu,St.dom=Bn,St.url=ou,St.defineLazyProperty=Uh,St.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var al=an,Yd=function(u,a,l){return u&&l&&l.responseURL&&a!==l.responseURL?l.responseURL:a},_l=function(u){return St.log.debug?St.log.debug.bind(St,"VHS:",u+" >"):function(){}},fc=1/30,w=.1,v=function(u,a){var n,l=[];if(u&&u.length)for(n=0;n<u.length;n++)a(u.start(n),u.end(n))&&l.push([u.start(n),u.end(n)]);return St.createTimeRanges(l)},b=function(u,a){return v(u,function(l,n){return l-w<=a&&n+w>=a})},x=function(u,a){return v(u,function(l){return l-fc>=a})},Je=function(u){var a=[];if(!u||!u.length)return"";for(var l=0;l<u.length;l++)a.push(u.start(l)+" => "+u.end(l));return a.join(", ")},dn=function(u){for(var a=[],l=0;l<u.length;l++)a.push({start:u.start(l),end:u.end(l)});return a},Un=function(u){if(u&&u.length&&u.end)return u.end(u.length-1)},Wn=function(u,a){var l=0;if(!u||!u.length)return l;for(var n=0;n<u.length;n++){var o=u.start(n),h=u.end(n);if(!(a>h)){if(a>o&&a<=h){l+=h-a;continue}l+=h-o}}return l},zr=St.createTimeRange,zi=function(u,a){if(!a.preload)return a.duration;var l=0;return(a.parts||[]).forEach(function(n){l+=n.duration}),(a.preloadHints||[]).forEach(function(n){"PART"===n.type&&(l+=u.partTargetDuration)}),l},ma=function(u){return(u.segments||[]).reduce(function(a,l,n){return l.parts?l.parts.forEach(function(o,h){a.push({duration:o.duration,segmentIndex:n,partIndex:h,part:o,segment:l})}):a.push({duration:l.duration,segmentIndex:n,partIndex:null,segment:l,part:null}),a},[])},Fu=function(u){var a=u.segments&&u.segments.length&&u.segments[u.segments.length-1];return a&&a.parts||[]},$a=function(u){var a=u.preloadSegment;if(a){var l=a.parts;return(a.preloadHints||[]).reduce(function(h,_){return h+("PART"===_.type?1:0)},0)+(l&&l.length?l.length:0)}},bl=function(u,a){if(a.endList)return 0;if(u&&u.suggestedPresentationDelay)return u.suggestedPresentationDelay;var l=Fu(a).length>0;return l&&a.serverControl&&a.serverControl.partHoldBack?a.serverControl.partHoldBack:l&&a.partTargetDuration?3*a.partTargetDuration:a.serverControl&&a.serverControl.holdBack?a.serverControl.holdBack:a.targetDuration?3*a.targetDuration:0},Fp=function(u,a,l){if(typeof a>"u"&&(a=u.mediaSequence+u.segments.length),a<u.mediaSequence)return 0;var n=function(u,a){var l=0,n=a-u.mediaSequence,o=u.segments[n];if(o){if(typeof o.start<"u")return{result:o.start,precise:!0};if(typeof o.end<"u")return{result:o.end-o.duration,precise:!0}}for(;n--;){if(typeof(o=u.segments[n]).end<"u")return{result:l+o.end,precise:!0};if(l+=zi(u,o),typeof o.start<"u")return{result:l+o.start,precise:!0}}return{result:l,precise:!1}}(u,a);if(n.precise)return n.result;var o=function(u,a){for(var n,l=0,o=a-u.mediaSequence;o<u.segments.length;o++){if(typeof(n=u.segments[o]).start<"u")return{result:n.start-l,precise:!0};if(l+=zi(u,n),typeof n.end<"u")return{result:n.end-l,precise:!0}}return{result:-1,precise:!1}}(u,a);return o.precise?o.result:n.result+l},jp=function(u,a,l){if(!u)return 0;if("number"!=typeof l&&(l=0),typeof a>"u"){if(u.totalDuration)return u.totalDuration;if(!u.endList)return ce()[1/0]}return Fp(u,a,l)},Tl=function(u){var a=u.defaultDuration,l=u.durationList,n=u.startIndex,o=u.endIndex,h=0;if(n>o){var _=[o,n];n=_[0],o=_[1]}if(n<0){for(var C=n;C<Math.min(0,o);C++)h+=a;n=0}for(var A=n;A<o;A++)h+=l[A].duration;return h},Vh=function(u,a,l,n){if(!u||!u.segments)return null;if(u.endList)return jp(u);if(null===a)return null;var o=Fp(u,u.mediaSequence+u.segments.length,a=a||0);return l&&(o-=n="number"==typeof n?n:bl(null,u)),Math.max(0,o)},Gf=function(u){return u.excludeUntil&&u.excludeUntil>Date.now()},Wg=function(u){return u.excludeUntil&&u.excludeUntil===1/0},qg=function(u){var a=Gf(u);return!u.disabled&&!a},Iy=function(u,a){return a.attributes&&a.attributes[u]},Hc=function(u,a){if(1===u.playlists.length)return!0;var l=a.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===u.playlists.filter(function(n){return!!qg(n)&&(n.attributes.BANDWIDTH||0)<l}).length},Qd=function(u,a){return!(!u&&!a||!u&&a||u&&!a||!(u===a||u.id&&a.id&&u.id===a.id||u.resolvedUri&&a.resolvedUri&&u.resolvedUri===a.resolvedUri||u.uri&&a.uri&&u.uri===a.uri))},Jm=function(u,a){var l=u&&u.mediaGroups&&u.mediaGroups.AUDIO||{},n=!1;for(var o in l){for(var h in l[o])if(n=a(l[o][h]))break;if(n)break}return!!n},Up=function(u){if(!u||!u.playlists||!u.playlists.length)return Jm(u,function(h){return h.playlists&&h.playlists.length||h.uri});for(var l=function(_){var C=u.playlists[_],A=C.attributes&&C.attributes.CODECS;return A&&A.split(",").every(function(te){return Hn(te)})||Jm(u,function(te){return Qd(C,te)})?"continue":{v:!1}},n=0;n<u.playlists.length;n++){var o=l(n);if("continue"!==o&&"object"==typeof o)return o.v}return!0},du={liveEdgeDelay:bl,duration:jp,seekable:function(u,a,l){var o=a||0,h=Vh(u,a,!0,l);return null===h?zr():zr(o,h)},getMediaInfoForTime:function(u){for(var a=u.playlist,l=u.currentTime,n=u.startingSegmentIndex,o=u.startingPartIndex,h=u.startTime,_=u.experimentalExactManifestTimings,C=l-h,A=ma(a),j=0,te=0;te<A.length;te++){var Q=A[te];if(n===Q.segmentIndex&&("number"!=typeof o||"number"!=typeof Q.partIndex||o===Q.partIndex)){j=te;break}}if(C<0){if(j>0)for(var Se=j-1;Se>=0;Se--){var je=A[Se];if(C+=je.duration,_){if(C<0)continue}else if(C+fc<=0)continue;return{partIndex:je.partIndex,segmentIndex:je.segmentIndex,startTime:h-Tl({defaultDuration:a.targetDuration,durationList:A,startIndex:j,endIndex:Se})}}return{partIndex:A[0]&&A[0].partIndex||null,segmentIndex:A[0]&&A[0].segmentIndex||0,startTime:l}}if(j<0){for(var We=j;We<0;We++)if((C-=a.targetDuration)<0)return{partIndex:A[0]&&A[0].partIndex||null,segmentIndex:A[0]&&A[0].segmentIndex||0,startTime:l};j=0}for(var $e=j;$e<A.length;$e++){var kt=A[$e];if(C-=kt.duration,_){if(C>0)continue}else if(C-fc>=0)continue;return{partIndex:kt.partIndex,segmentIndex:kt.segmentIndex,startTime:h+Tl({defaultDuration:a.targetDuration,durationList:A,startIndex:j,endIndex:$e})}}return{segmentIndex:A[A.length-1].segmentIndex,partIndex:A[A.length-1].partIndex,startTime:l}},isEnabled:qg,isDisabled:function(u){return u.disabled},isBlacklisted:Gf,isIncompatible:Wg,playlistEnd:Vh,isAes:function(u){for(var a=0;a<u.segments.length;a++)if(u.segments[a].key)return!0;return!1},hasAttribute:Iy,estimateSegmentRequestTime:function(u,a,l,n){return void 0===n&&(n=0),Iy("BANDWIDTH",l)?(u*l.attributes.BANDWIDTH-8*n)/a:NaN},isLowestEnabledRendition:Hc,isAudioOnly:Up,playlistMatch:Qd,segmentDurationWithParts:zi},hu=St.log,Xd=function(u,a){return u+"-"+a},Dy=function(u,a,l){return"placeholder-uri-"+u+"-"+a+"-"+l},$c=function(u,a){u.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(l){if(u.mediaGroups[l])for(var n in u.mediaGroups[l])for(var o in u.mediaGroups[l][n])a(u.mediaGroups[l][n][o],l,n,o)})},Hh=function(u){var a=u.playlist,l=u.uri;a.id=u.id,a.playlistErrors_=0,l&&(a.uri=l),a.attributes=a.attributes||{}},Bp=function(u,a,l){void 0===l&&(l=Dy),u.uri=a;for(var n=0;n<u.playlists.length;n++)u.playlists[n].uri||(u.playlists[n].uri="placeholder-uri-"+n);var h=Up(u);$c(u,function(_,C,A,j){if(!_.playlists||!_.playlists.length){if(h&&"AUDIO"===C&&!_.uri)for(var te=0;te<u.playlists.length;te++){var Q=u.playlists[te];if(Q.attributes&&Q.attributes.AUDIO&&Q.attributes.AUDIO===A)return}_.playlists=[Ke({},_)]}_.playlists.forEach(function(Se,je){var We=l(C,A,j,Se),$e=Xd(je,We);Se.uri?Se.resolvedUri=Se.resolvedUri||al(u.uri,Se.uri):(Se.uri=0===je?We:$e,Se.resolvedUri=Se.uri),Se.id=Se.id||$e,Se.attributes=Se.attributes||{},u.playlists[Se.id]=Se,u.playlists[Se.uri]=Se})}),function(u){for(var a=u.playlists.length;a--;){var l=u.playlists[a];Hh({playlist:l,id:Xd(a,l.uri)}),l.resolvedUri=al(u.uri,l.uri),u.playlists[l.id]=l,u.playlists[l.uri]=l,l.attributes.BANDWIDTH||hu.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(u),function(u){$c(u,function(a){a.uri&&(a.resolvedUri=al(u.uri,a.uri))})}(u)},Vp=St.mergeOptions,My=function(u,a){if(!u)return a;var l=Vp(u,a);if(u.preloadHints&&!a.preloadHints&&delete l.preloadHints,u.parts&&!a.parts)delete l.parts;else if(u.parts&&a.parts)for(var n=0;n<a.parts.length;n++)u.parts&&u.parts[n]&&(l.parts[n]=Vp(u.parts[n],a.parts[n]));return!u.skipped&&a.skipped&&(l.skipped=!1),u.preload&&!a.preload&&(l.preload=!1),l},nv=function(u,a){!u.resolvedUri&&u.uri&&(u.resolvedUri=al(a,u.uri)),u.key&&!u.key.resolvedUri&&(u.key.resolvedUri=al(a,u.key.uri)),u.map&&!u.map.resolvedUri&&(u.map.resolvedUri=al(a,u.map.uri)),u.map&&u.map.key&&!u.map.key.resolvedUri&&(u.map.key.resolvedUri=al(a,u.map.key.uri)),u.parts&&u.parts.length&&u.parts.forEach(function(l){l.resolvedUri||(l.resolvedUri=al(a,l.uri))}),u.preloadHints&&u.preloadHints.length&&u.preloadHints.forEach(function(l){l.resolvedUri||(l.resolvedUri=al(a,l.uri))})},rv=function(u){var a=u.segments||[],l=u.preloadSegment;if(l&&l.parts&&l.parts.length){if(l.preloadHints)for(var n=0;n<l.preloadHints.length;n++)if("MAP"===l.preloadHints[n].type)return a;l.duration=u.targetDuration,l.preload=!0,a.push(l)}return a},qf=function(u,a){return u===a||u.segments&&a.segments&&u.segments.length===a.segments.length&&u.endList===a.endList&&u.mediaSequence===a.mediaSequence&&u.preloadSegment===a.preloadSegment},Gc=function(u,a,l){void 0===l&&(l=qf);var n=Vp(u,{}),o=n.playlists[a.id];if(!o||l(o,a))return null;a.segments=rv(a);var h=Vp(o,a);if(h.preloadSegment&&!a.preloadSegment&&delete h.preloadSegment,o.segments){if(a.skip){a.segments=a.segments||[];for(var _=0;_<a.skip.skippedSegments;_++)a.segments.unshift({skipped:!0})}h.segments=function(u,a,l){var n=u.slice(),o=a.slice();l=l||0;for(var _,h=[],C=0;C<o.length;C++){var A=n[C+l],j=o[C];A?(_=A.map||_,h.push(My(A,j))):(_&&!j.map&&(j.map=_),h.push(j))}return h}(o.segments,a.segments,a.mediaSequence-o.mediaSequence)}h.segments.forEach(function(A){nv(A,h.resolvedUri)});for(var C=0;C<n.playlists.length;C++)n.playlists[C].id===a.id&&(n.playlists[C]=h);return n.playlists[a.id]=h,n.playlists[a.uri]=h,$c(u,function(A,j,te,Q){if(A.playlists)for(var Se=0;Se<A.playlists.length;Se++)a.id===A.playlists[Se].id&&(A.playlists[Se]=h)}),n},zc=function(u,a){var l=u.segments||[],n=l[l.length-1],o=n&&n.parts&&n.parts[n.parts.length-1],h=o&&o.duration||n&&n.duration;return a&&h?1e3*h:500*(u.partTargetDuration||u.targetDuration||10)},Jd=function(g){function u(l,n,o){var h;if(void 0===o&&(o={}),h=g.call(this)||this,!l)throw new Error("A non-empty playlist URL or object is required");h.logger_=_l("PlaylistLoader");var C=o.withCredentials,A=void 0!==C&&C,j=o.handleManifestRedirects,te=void 0!==j&&j;h.src=l,h.vhs_=n,h.withCredentials=A,h.handleManifestRedirects=te;var Q=n.options_;return h.customTagParsers=Q&&Q.customTagParsers||[],h.customTagMappers=Q&&Q.customTagMappers||[],h.experimentalLLHLS=Q&&Q.experimentalLLHLS||!1,St.browser.IE_VERSION&&(h.experimentalLLHLS=!1),h.state="HAVE_NOTHING",h.handleMediaupdatetimeout_=h.handleMediaupdatetimeout_.bind(q(h)),h.on("mediaupdatetimeout",h.handleMediaupdatetimeout_),h}re(u,g);var a=u.prototype;return a.handleMediaupdatetimeout_=function(){var n=this;if("HAVE_METADATA"===this.state){var o=this.media(),h=al(this.master.uri,o.uri);this.experimentalLLHLS&&(h=function(u,a){if(a.endList||!a.serverControl)return u;var l={};if(a.serverControl.canBlockReload){var n=a.preloadSegment,o=a.mediaSequence+a.segments.length;if(n){var h=n.parts||[],_=$a(a)-1;_>-1&&_!==h.length-1&&(l._HLS_part=_),(_>-1||h.length)&&o--}l._HLS_msn=o}if(a.serverControl&&a.serverControl.canSkipUntil&&(l._HLS_skip=a.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(l).length){var C=new(ce().URL)(u);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(A){l.hasOwnProperty(A)&&C.searchParams.set(A,l[A])}),u=C.toString()}return u}(h,o)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:h,withCredentials:this.withCredentials},function(_,C){if(n.request){if(_)return n.playlistRequestError(n.request,n.media(),"HAVE_METADATA");n.haveMetadata({playlistString:n.request.responseText,url:n.media().uri,id:n.media().id})}})}},a.playlistRequestError=function(n,o,h){var _=o.uri,C=o.id;this.request=null,h&&(this.state=h),this.error={playlist:this.master.playlists[C],status:n.status,message:"HLS playlist request error at URL: "+_+".",responseText:n.responseText,code:n.status>=500?4:2},this.trigger("error")},a.parseManifest_=function(n){var o=this,h=n.url;return function(u){var a=u.onwarn,l=u.oninfo,n=u.manifestString,o=u.customTagParsers,h=void 0===o?[]:o,_=u.customTagMappers,C=void 0===_?[]:_,A=u.experimentalLLHLS,j=new Ai;a&&j.on("warn",a),l&&j.on("info",l),h.forEach(function(We){return j.addParser(We)}),C.forEach(function(We){return j.addTagMapper(We)}),j.push(n),j.end();var te=j.manifest;if(A||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(We){te.hasOwnProperty(We)&&delete te[We]}),te.segments&&te.segments.forEach(function(We){["parts","preloadHints"].forEach(function($e){We.hasOwnProperty($e)&&delete We[$e]})})),!te.targetDuration){var Q=10;te.segments&&te.segments.length&&(Q=te.segments.reduce(function(We,$e){return Math.max(We,$e.duration)},0)),a&&a("manifest has no targetDuration defaulting to "+Q),te.targetDuration=Q}var Se=Fu(te);if(Se.length&&!te.partTargetDuration){var je=Se.reduce(function(We,$e){return Math.max(We,$e.duration)},0);a&&(a("manifest has no partTargetDuration defaulting to "+je),hu.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),te.partTargetDuration=je}return te}({onwarn:function(A){return o.logger_("m3u8-parser warn for "+h+": "+A.message)},oninfo:function(A){return o.logger_("m3u8-parser info for "+h+": "+A.message)},manifestString:n.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},a.haveMetadata=function(n){var o=n.playlistString,h=n.playlistObject,_=n.url,C=n.id;this.request=null,this.state="HAVE_METADATA";var A=h||this.parseManifest_({url:_,manifestString:o});A.lastRequest=Date.now(),Hh({playlist:A,uri:_,id:C});var j=Gc(this.master,A);this.targetDuration=A.partTargetDuration||A.targetDuration,this.pendingMedia_=null,j?(this.master=j,this.media_=this.master.playlists[C]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(zc(this.media(),!!j)),this.trigger("loadedplaylist")},a.dispose=function(){this.trigger("dispose"),this.stopRequest(),ce().clearTimeout(this.mediaUpdateTimeout),ce().clearTimeout(this.finalRenditionTimeout),this.off()},a.stopRequest=function(){if(this.request){var n=this.request;this.request=null,n.onreadystatechange=null,n.abort()}},a.media=function(n,o){var h=this;if(!n)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof n){if(!this.master.playlists[n])throw new Error("Unknown playlist URI: "+n);n=this.master.playlists[n]}if(ce().clearTimeout(this.finalRenditionTimeout),o){var _=(n.partTargetDuration||n.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=ce().setTimeout(this.media.bind(this,n,!1),_)}else{var C=this.state,A=!this.media_||n.id!==this.media_.id,j=this.master.playlists[n.id];if(j&&j.endList||n.endList&&n.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=n,void(A&&(this.trigger("mediachanging"),this.trigger("HAVE_MASTER"===C?"loadedmetadata":"mediachange")));if(this.updateMediaUpdateTimeout_(zc(n,!0)),A){if(this.state="SWITCHING_MEDIA",this.request){if(n.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=n,this.request=this.vhs_.xhr({uri:n.resolvedUri,withCredentials:this.withCredentials},function(te,Q){if(h.request){if(n.lastRequest=Date.now(),n.resolvedUri=Yd(h.handleManifestRedirects,n.resolvedUri,Q),te)return h.playlistRequestError(h.request,n,C);h.haveMetadata({playlistString:Q.responseText,url:n.uri,id:n.id}),h.trigger("HAVE_MASTER"===C?"loadedmetadata":"mediachange")}})}}},a.pause=function(){this.mediaUpdateTimeout&&(ce().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},a.load=function(n){var o=this;this.mediaUpdateTimeout&&(ce().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var h=this.media();if(n){var _=h?(h.partTargetDuration||h.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=ce().setTimeout(function(){o.mediaUpdateTimeout=null,o.load()},_)}else this.started?this.trigger(h&&!h.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()},a.updateMediaUpdateTimeout_=function(n){var o=this;this.mediaUpdateTimeout&&(ce().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=ce().setTimeout(function(){o.mediaUpdateTimeout=null,o.trigger("mediaupdatetimeout"),o.updateMediaUpdateTimeout_(n)},n))},a.start=function(){var n=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=ce().location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){n.setupInitialPlaylist(n.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(o,h){if(n.request){if(n.request=null,o)return n.error={status:h.status,message:"HLS playlist request error at URL: "+n.src+".",responseText:h.responseText,code:2},"HAVE_NOTHING"===n.state&&(n.started=!1),n.trigger("error");n.src=Yd(n.handleManifestRedirects,n.src,h);var _=n.parseManifest_({manifestString:h.responseText,url:n.src});n.setupInitialPlaylist(_)}})},a.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},a.setupInitialPlaylist=function(n){if(this.state="HAVE_MASTER",n.playlists)return this.master=n,Bp(this.master,this.srcUri()),n.playlists.forEach(function(h){h.segments=rv(h),h.segments.forEach(function(_){nv(_,h.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var o=this.srcUri()||ce().location.href;this.master=function(u,a){var l=Xd(0,a),n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:ce().location.href,resolvedUri:ce().location.href,playlists:[{uri:a,id:l,resolvedUri:a,attributes:{}}]};return n.playlists[l]=n.playlists[0],n.playlists[a]=n.playlists[0],n}(0,o),this.haveMetadata({playlistObject:n,url:o,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},u}(St.EventTarget),ky=St.xhr,va=St.mergeOptions,iv=function(u,a,l,n){var o="arraybuffer"===u.responseType?u.response:u.responseText;!a&&o&&(u.responseTime=Date.now(),u.roundTripTime=u.responseTime-u.requestTime,u.bytesReceived=o.byteLength||o.length,u.bandwidth||(u.bandwidth=Math.floor(u.bytesReceived/u.roundTripTime*8*1e3))),l.headers&&(u.responseHeaders=l.headers),a&&"ETIMEDOUT"===a.code&&(u.timedout=!0),!a&&!u.aborted&&200!==l.statusCode&&206!==l.statusCode&&0!==l.statusCode&&(a=new Error("XHR Failed with a response of: "+(u&&(o||u.responseText)))),n(a,u)},Py=function(){var u=function a(l,n){l=va({timeout:45e3},l);var o=a.beforeRequest||St.Vhs.xhr.beforeRequest;if(o&&"function"==typeof o){var h=o(l);h&&(l=h)}var C=(!0===St.Vhs.xhr.original?ky:St.Vhs.xhr)(l,function(j,te){return iv(C,j,te,n)}),A=C.abort;return C.abort=function(){return C.aborted=!0,A.apply(C,arguments)},C.uri=l.uri,C.requestTime=Date.now(),C};return u.original=!0,u},Wc=function(u){var a={};return u.byterange&&(a.Range=function(u){return"bytes="+u.offset+"-"+("bigint"==typeof u.offset||"bigint"==typeof u.length?ce().BigInt(u.offset)+ce().BigInt(u.length)-ce().BigInt(1):u.offset+u.length-1)}(u.byterange)),a},eh=function(u,a){return u.start(a)+"-"+u.end(a)},Oy=function(u,a){var l=u.toString(16);return"00".substring(0,2-l.length)+l+(a%2?" ":"")},B_=function(u){return u>=32&&u<126?String.fromCharCode(u):"."},sv=function(u){var a={};return Object.keys(u).forEach(function(l){var n=u[l];a[l]=Si(n)?{bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:n}),a},Hp=function(u){var a=u.byterange||{length:1/0,offset:0};return[a.length,a.offset,u.resolvedUri].join(",")},ov=function(u){return u.resolvedUri},av=function(u){for(var a=Array.prototype.slice.call(u),l=16,n="",_=0;_<a.length/l;_++)n+=a.slice(_*l,_*l+l).map(Oy).join("")+" "+a.slice(_*l,_*l+l).map(B_).join("")+"\n";return n},zh=Object.freeze({__proto__:null,createTransferableMessage:sv,initSegmentId:Hp,segmentKeyId:ov,hexDump:av,tagDump:function(u){return av(u.bytes)},textRanges:function(u){var l,a="";for(l=0;l<u.length;l++)a+=eh(u,l)+" ";return a}}),lv=function g(u){var a=u.programTime,l=u.playlist,n=u.retryCount,o=void 0===n?2:n,h=u.seekTo,_=u.pauseAfterSeek,C=void 0===_||_,A=u.tech,j=u.callback;if(!j)throw new Error("seekToProgramTime: callback must be provided");if(typeof a>"u"||!l||!h)return j({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!l.endList&&!A.hasStarted_)return j({message:"player must be playing a live stream to start buffering"});if(!function(u){if(!u.segments||0===u.segments.length)return!1;for(var a=0;a<u.segments.length;a++)if(!u.segments[a].dateTimeObject)return!1;return!0}(l))return j({message:"programDateTime tags must be provided in the manifest "+l.resolvedUri});var te=function(u,a){var l;try{l=new Date(u)}catch{return null}if(!a||!a.segments||0===a.segments.length)return null;var n=a.segments[0];if(l<n.dateTimeObject)return null;for(var o=0;o<a.segments.length-1&&(n=a.segments[o],!(l<a.segments[o+1].dateTimeObject));o++);var _=a.segments[a.segments.length-1],C=_.dateTimeObject,A=_.videoTimingInfo?function(u){return u.transmuxedPresentationEnd-u.transmuxedPresentationStart-u.transmuxerPrependedSeconds}(_.videoTimingInfo):_.duration+.25*_.duration;return l>new Date(C.getTime()+1e3*A)?null:(l>C&&(n=_),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:du.duration(a,a.mediaSequence+a.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})}(a,l);if(!te)return j({message:a+" was not found in the stream"});var Q=te.segment,Se=function(u,a){var l,n;try{l=new Date(u),n=new Date(a)}catch{}var o=l.getTime();return(n.getTime()-o)/1e3}(Q.dateTimeObject,a);if("estimate"===te.type)return 0===o?j({message:a+" is not buffered yet. Try again"}):(h(te.estimatedStart+Se),void A.one("seeked",function(){g({programTime:a,playlist:l,retryCount:o-1,seekTo:h,pauseAfterSeek:C,tech:A,callback:j})}));var je=Q.start+Se;A.one("seeked",function(){return j(null,A.currentTime())}),C&&A.pause(),h(je)},xd=function(u,a){if(4===u.readyState)return a()},fu=St.mergeOptions,Qg=function(u,a){if(!qf(u,a)||u.sidx&&a.sidx&&(u.sidx.offset!==a.sidx.offset||u.sidx.length!==a.sidx.length))return!1;if(!u.sidx&&a.sidx||u.sidx&&!a.sidx||u.segments&&!a.segments||!u.segments&&a.segments)return!1;if(!u.segments&&!a.segments)return!0;for(var l=0;l<u.segments.length;l++){var n=u.segments[l],o=a.segments[l];if(n.uri!==o.uri)return!1;if(n.byterange||o.byterange){var h=n.byterange,_=o.byterange;if(h&&!_||!h&&_||h.offset!==_.offset||h.length!==_.length)return!1}}return!0},qc=function(u,a,l,n){return"placeholder-uri-"+u+"-"+a+"-"+(n.attributes.NAME||l)},Zf=function(u,a){return(!u.map&&!a.map||!(!u.map||!a.map||u.map.byterange.offset!==a.map.byterange.offset||u.map.byterange.length!==a.map.byterange.length))&&u.uri===a.uri&&u.byterange.offset===a.byterange.offset&&u.byterange.length===a.byterange.length},zp=function(u,a){var l={};for(var n in u){var h=u[n].sidx;if(h){var _=$s(h);if(!a[_])break;Zf(a[_].sidxInfo,h)&&(l[_]=a[_])}}return l},Dd=function(g){function u(l,n,o,h){var _;void 0===o&&(o={}),(_=g.call(this)||this).masterPlaylistLoader_=h||q(_),h||(_.isMaster_=!0);var A=o.withCredentials,j=void 0!==A&&A,te=o.handleManifestRedirects,Q=void 0!==te&&te;if(_.vhs_=n,_.withCredentials=j,_.handleManifestRedirects=Q,!l)throw new Error("A non-empty playlist URL or object is required");return _.on("minimumUpdatePeriod",function(){_.refreshXml_()}),_.on("mediaupdatetimeout",function(){_.refreshMedia_(_.media().id)}),_.state="HAVE_NOTHING",_.loadedPlaylists_={},_.logger_=_l("DashPlaylistLoader"),_.isMaster_?(_.masterPlaylistLoader_.srcUrl=l,_.masterPlaylistLoader_.sidxMapping_={}):_.childPlaylist_=l,_}re(u,g);var a=u.prototype;return a.requestErrored_=function(n,o,h){return!this.request||(this.request=null,n?(this.error="object"!=typeof n||n instanceof Error?{status:o.status,message:"DASH request error at URL: "+o.uri,response:o.response,code:2}:n,h&&(this.state=h),this.trigger("error"),!0):void 0)},a.addSidxSegments_=function(n,o,h){var _=this,C=n.sidx&&$s(n.sidx);if(n.sidx&&C&&!this.masterPlaylistLoader_.sidxMapping_[C]){var A=Yd(this.handleManifestRedirects,n.sidx.resolvedUri),j=function(Q,Se){if(!_.requestErrored_(Q,Se,o)){var We,je=_.masterPlaylistLoader_.sidxMapping_;try{We=ao()(Mn(Se.response).subarray(8))}catch($e){return void _.requestErrored_($e,Se,o)}return je[C]={sidxInfo:n.sidx,sidx:We},po(n,We,n.sidx.resolvedUri),h(!0)}};this.request=function(u,a,l){var o,n=[],h=!1,_=function(Q,Se,je,We){return Se.abort(),h=!0,l(Q,Se,je,We)},C=function(Q,Se){if(!h){if(Q)return _(Q,Se,"",n);var je=Se.responseText.substring(n&&n.byteLength||0,Se.responseText.length);if(n=function(){for(var u=arguments.length,a=new Array(u),l=0;l<u;l++)a[l]=arguments[l];if((a=a.filter(function(_){return _&&(_.byteLength||_.length)&&"string"!=typeof _})).length<=1)return Mn(a[0]);var n=a.reduce(function(_,C,A){return _+(C.byteLength||C.length)},0),o=new Uint8Array(n),h=0;return a.forEach(function(_){_=Mn(_),o.set(_,h),h+=_.byteLength}),o}(n,be(je,!0)),o=o||Uo(n),n.length<10||o&&n.length<o+2)return xd(Se,function(){return _(Q,Se,"",n)});var We=dr(n);return"ts"===We&&n.length<188||!We&&n.length<376?xd(Se,function(){return _(Q,Se,"",n)}):_(null,Se,We,n)}},j=a({uri:u,beforeSend:function(Q){Q.overrideMimeType("text/plain; charset=x-user-defined"),Q.addEventListener("progress",function(Se){return iv(Q,null,{statusCode:Q.status},C)})}},function(te,Q){return iv(j,te,Q,C)});return j}(A,this.vhs_.xhr,function(te,Q,Se,je){if(te)return j(te,Q);if(!Se||"mp4"!==Se)return j({status:Q.status,message:"Unsupported "+(Se||"unknown")+" container type for sidx segment at URL: "+A,response:"",playlist:n,internal:!0,blacklistDuration:1/0,code:2},Q);var We=n.sidx.byterange,$e=We.offset,kt=We.length;if(je.length>=kt+$e)return j(te,{response:je.subarray($e,$e+kt),status:Q.status,uri:Q.uri});_.request=_.vhs_.xhr({uri:A,responseType:"arraybuffer",headers:Wc({byterange:n.sidx.byterange})},j)})}else this.mediaRequest_=ce().setTimeout(function(){return h(!1)},0)},a.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},ce().clearTimeout(this.minimumUpdatePeriodTimeout_),ce().clearTimeout(this.mediaRequest_),ce().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},a.hasPendingRequest=function(){return this.request||this.mediaRequest_},a.stopRequest=function(){if(this.request){var n=this.request;this.request=null,n.onreadystatechange=null,n.abort()}},a.media=function(n){var o=this;if(!n)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var h=this.state;if("string"==typeof n){if(!this.masterPlaylistLoader_.master.playlists[n])throw new Error("Unknown playlist URI: "+n);n=this.masterPlaylistLoader_.master.playlists[n]}var _=!this.media_||n.id!==this.media_.id;if(_&&this.loadedPlaylists_[n.id]&&this.loadedPlaylists_[n.id].endList)return this.state="HAVE_METADATA",this.media_=n,void(_&&(this.trigger("mediachanging"),this.trigger("mediachange")));_&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(n,h,function(C){o.haveMetadata({startingState:h,playlist:n})}))},a.haveMetadata=function(n){var o=n.startingState,h=n.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[h.id]=h,this.mediaRequest_=null,this.refreshMedia_(h.id),this.trigger("HAVE_MASTER"===o?"loadedmetadata":"mediachange")},a.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),ce().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(ce().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},a.load=function(n){var o=this;ce().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var h=this.media();if(n){var _=h?h.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=ce().setTimeout(function(){return o.load()},_)}else this.started?h&&!h.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},a.start=function(){var n=this;this.started=!0,this.isMaster_?this.requestMaster_(function(o,h){n.haveMaster_(),!n.hasPendingRequest()&&!n.media_&&n.media(n.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=ce().setTimeout(function(){return n.haveMaster_()},0)},a.requestMaster_=function(n){var o=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(h,_){if(!o.requestErrored_(h,_)){var C=_.responseText!==o.masterPlaylistLoader_.masterXml_;return o.masterPlaylistLoader_.masterXml_=_.responseText,o.masterLoaded_=_.responseHeaders&&_.responseHeaders.date?Date.parse(_.responseHeaders.date):Date.now(),o.masterPlaylistLoader_.srcUrl=Yd(o.handleManifestRedirects,o.masterPlaylistLoader_.srcUrl,_),C?(o.handleMaster_(),void o.syncClientServerClock_(function(){return n(_,C)})):n(_,C)}"HAVE_NOTHING"===o.state&&(o.started=!1)})},a.syncClientServerClock_=function(n){var o=this,h=function(u){return function(u){var a=Er(u,"UTCTiming")[0];if(!a)return null;var l=Bi(a);switch(l.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":l.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":l.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":l.method="DIRECT",l.value=Date.parse(l.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return l}(Ds(u))}(this.masterPlaylistLoader_.masterXml_);return null===h?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),n()):"DIRECT"===h.method?(this.masterPlaylistLoader_.clientOffset_=h.value-Date.now(),n()):void(this.request=this.vhs_.xhr({uri:al(this.masterPlaylistLoader_.srcUrl,h.value),method:h.method,withCredentials:this.withCredentials},function(_,C){if(o.request){if(_)return o.masterPlaylistLoader_.clientOffset_=o.masterLoaded_-Date.now(),n();var A;A="HEAD"===h.method?C.responseHeaders&&C.responseHeaders.date?Date.parse(C.responseHeaders.date):o.masterLoaded_:Date.parse(C.responseText),o.masterPlaylistLoader_.clientOffset_=A-Date.now(),n()}}))},a.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},a.handleMaster_=function(){this.mediaRequest_=null;var n=this.masterPlaylistLoader_.master,o=function(u){var l=u.srcUrl,_=function(u,a){void 0===a&&(a={});var l=function(u,a){void 0===a&&(a={});var l=a,n=l.manifestUri,o=void 0===n?"":n,h=l.NOW,_=void 0===h?Date.now():h,C=l.clientOffset,A=void 0===C?0:C,j=Er(u,"Period");if(!j.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var te=Er(u,"Location"),Q=Bi(u),Se=wo([o],Er(u,"BaseURL"));Q.type=Q.type||"static",Q.sourceDuration=Q.mediaPresentationDuration||0,Q.NOW=_,Q.clientOffset=A,te.length&&(Q.locations=te.map($r));var je=[];return j.forEach(function(We,$e){var kt=Bi(We),pn=je[$e-1];kt.start=function(u){var a=u.attributes,l=u.priorPeriodAttributes;return"number"==typeof a.start?a.start:l&&"number"==typeof l.start&&"number"==typeof l.duration?l.start+l.duration:l||"static"!==u.mpdType?null:0}({attributes:kt,priorPeriodAttributes:pn?pn.attributes:null,mpdType:Q.type}),je.push({node:We,attributes:kt})}),{locations:Q.locations,representationInfo:ii(je.map(hs(Q,Se)))}}(Ds(u),a),n=function(u){return u.map($n)}(l.representationInfo);return wi({dashPlaylists:n,locations:l.locations,sidxMapping:a.sidxMapping,previousManifest:a.previousManifest})}(u.masterXml,{manifestUri:l,clientOffset:u.clientOffset,sidxMapping:u.sidxMapping,previousManifest:u.previousManifest});return Bp(_,l,qc),_}({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:n});n&&(o=function(u,a,l){for(var n=!0,o=fu(u,{duration:a.duration,minimumUpdatePeriod:a.minimumUpdatePeriod,timelineStarts:a.timelineStarts}),h=0;h<a.playlists.length;h++){var _=a.playlists[h];if(_.sidx){var C=$s(_.sidx);l&&l[C]&&l[C].sidx&&po(_,l[C].sidx,_.sidx.resolvedUri)}var A=Gc(o,_,Qg);A&&(o=A,n=!1)}return $c(a,function(j,te,Q,Se){if(j.playlists&&j.playlists.length){var je=j.playlists[0].id,We=Gc(o,j.playlists[0],Qg);We&&(Se in(o=We).mediaGroups[te][Q]||(o.mediaGroups[te][Q][Se]=j),o.mediaGroups[te][Q][Se].playlists[0]=o.playlists[je],n=!1)}}),function(u,a){$c(u,function(l,n,o,h){h in a.mediaGroups[n][o]||delete u.mediaGroups[n][o][h]})}(o,a),a.minimumUpdatePeriod!==u.minimumUpdatePeriod&&(n=!1),n?null:o}(n,o,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=o||n;var h=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return h&&h!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=h),(!n||o&&o.minimumUpdatePeriod!==n.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),!!o},a.updateMinimumUpdatePeriodTimeout_=function(){var n=this.masterPlaylistLoader_;n.createMupOnMedia_&&(n.off("loadedmetadata",n.createMupOnMedia_),n.createMupOnMedia_=null),n.minimumUpdatePeriodTimeout_&&(ce().clearTimeout(n.minimumUpdatePeriodTimeout_),n.minimumUpdatePeriodTimeout_=null);var o=n.master&&n.master.minimumUpdatePeriod;0===o&&(n.media()?o=1e3*n.media().targetDuration:(n.createMupOnMedia_=n.updateMinimumUpdatePeriodTimeout_,n.one("loadedmetadata",n.createMupOnMedia_))),"number"!=typeof o||o<=0?o<0&&this.logger_("found invalid minimumUpdatePeriod of "+o+", not setting a timeout"):this.createMUPTimeout_(o)},a.createMUPTimeout_=function(n){var o=this.masterPlaylistLoader_;o.minimumUpdatePeriodTimeout_=ce().setTimeout(function(){o.minimumUpdatePeriodTimeout_=null,o.trigger("minimumUpdatePeriod"),o.createMUPTimeout_(n)},n)},a.refreshXml_=function(){var n=this;this.requestMaster_(function(o,h){h&&(n.media_&&(n.media_=n.masterPlaylistLoader_.master.playlists[n.media_.id]),n.masterPlaylistLoader_.sidxMapping_=function(u,a){var n=zp(u.playlists,a);return $c(u,function(o,h,_,C){o.playlists&&o.playlists.length&&(n=fu(n,zp(o.playlists,a)))}),n}(n.masterPlaylistLoader_.master,n.masterPlaylistLoader_.sidxMapping_),n.addSidxSegments_(n.media(),n.state,function(_){n.refreshMedia_(n.media().id)}))})},a.refreshMedia_=function(n){var o=this;if(!n)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var h=this.masterPlaylistLoader_.master.playlists,_=!this.media_||this.media_!==h[n];_?this.media_=h[n]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function A(){o.media().endList||(o.mediaUpdateTimeout=ce().setTimeout(function(){o.trigger("mediaupdatetimeout"),A()},zc(o.media(),!!_)))}(),this.trigger("loadedplaylist")},u}(St.EventTarget),ko={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},Ad=function(u){return u.on=u.addEventListener,u.off=u.removeEventListener,u},cv=function(u){return function(){var a=function(u){try{return URL.createObjectURL(new Blob([u],{type:"application/javascript"}))}catch{var a=new BlobBuilder;return a.append(u),URL.createObjectURL(a.getBlob())}}(u),l=Ad(new Worker(a));l.objURL=a;var n=l.terminate;return l.on=l.addEventListener,l.off=l.removeEventListener,l.terminate=function(){return URL.revokeObjectURL(a),n.call(this)},l}},th=function(u){return"var browserWorkerPolyFill = "+Ad.toString()+";\nbrowserWorkerPolyFill(self);\n"+u},jy=function(u){return u.toString().replace(/^function.+?{/,"").slice(0,-1)},Uy=th(jy(function(){var g=function(){this.init=function(){var M={};this.on=function(U,R){M[U]||(M[U]=[]),M[U]=M[U].concat(R)},this.off=function(U,R){var $;return!!M[U]&&($=M[U].indexOf(R),M[U]=M[U].slice(),M[U].splice($,1),$>-1)},this.trigger=function(U){var R,$,ie,de;if(R=M[U])if(2===arguments.length)for(ie=R.length,$=0;$<ie;++$)R[$].call(this,arguments[1]);else{for(de=[],$=arguments.length,$=1;$<arguments.length;++$)de.push(arguments[$]);for(ie=R.length,$=0;$<ie;++$)R[$].apply(this,de)}},this.dispose=function(){M={}}}};g.prototype.pipe=function(we){return this.on("data",function(M){we.push(M)}),this.on("done",function(M){we.flush(M)}),this.on("partialdone",function(M){we.partialFlush(M)}),this.on("endedtimeline",function(M){we.endTimeline(M)}),this.on("reset",function(M){we.reset(M)}),we},g.prototype.push=function(we){this.trigger("data",we)},g.prototype.flush=function(we){this.trigger("done",we)},g.prototype.partialFlush=function(we){this.trigger("partialdone",we)},g.prototype.endTimeline=function(we){this.trigger("endedtimeline",we)},g.prototype.reset=function(we){this.trigger("reset",we)};var h,_,C,A,j,te,Q,Se,je,We,$e,kt,pn,jn,Zt,rn,xn,ln,sn,Dn,hn,Cr,nr,Br,Ts,Es,co,ia,Eo,ka,br,cp,ll,cl,Xc,Ss,we,M,u=g,a=Math.pow(2,32),n={getUint64:function(M){var R,U=new DataView(M.buffer,M.byteOffset,M.byteLength);return U.getBigUint64?(R=U.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(R):R:U.getUint32(0)*a+U.getUint32(4)},MAX_UINT32:a},o=n.MAX_UINT32;(function(){var we;if(nr={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(we in nr)nr.hasOwnProperty(we)&&(nr[we]=[we.charCodeAt(0),we.charCodeAt(1),we.charCodeAt(2),we.charCodeAt(3)]);Br=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Es=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Ts=new Uint8Array([0,0,0,1]),co=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ia=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Eo={video:co,audio:ia},cp=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),br=new Uint8Array([0,0,0,0,0,0,0,0]),ll=new Uint8Array([0,0,0,0,0,0,0,0]),cl=ll,Xc=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Ss=ll,ka=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),h=function(M){var $,ie,U=[],R=0;for($=1;$<arguments.length;$++)U.push(arguments[$]);for($=U.length;$--;)R+=U[$].byteLength;for(ie=new Uint8Array(R+8),new DataView(ie.buffer,ie.byteOffset,ie.byteLength).setUint32(0,ie.byteLength),ie.set(M,4),$=0,R=8;$<U.length;$++)ie.set(U[$],R),R+=U[$].byteLength;return ie},_=function(){return h(nr.dinf,h(nr.dref,cp))},C=function(M){return h(nr.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,M.audioobjecttype<<3|M.samplingfrequencyindex>>>1,M.samplingfrequencyindex<<7|M.channelcount<<3,6,1,2]))},A=function(){return h(nr.ftyp,Br,Ts,Br,Es)},rn=function(M){return h(nr.hdlr,Eo[M])},j=function(M){return h(nr.mdat,M)},Zt=function(M){var U=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,M.duration>>>24&255,M.duration>>>16&255,M.duration>>>8&255,255&M.duration,85,196,0,0]);return M.samplerate&&(U[12]=M.samplerate>>>24&255,U[13]=M.samplerate>>>16&255,U[14]=M.samplerate>>>8&255,U[15]=255&M.samplerate),h(nr.mdhd,U)},jn=function(M){return h(nr.mdia,Zt(M),rn(M.type),Q(M))},te=function(M){return h(nr.mfhd,new Uint8Array([0,0,0,0,(4278190080&M)>>24,(16711680&M)>>16,(65280&M)>>8,255&M]))},Q=function(M){return h(nr.minf,"video"===M.type?h(nr.vmhd,ka):h(nr.smhd,br),_(),ln(M))},Se=function(M,U){for(var R=[],$=U.length;$--;)R[$]=Dn(U[$]);return h.apply(null,[nr.moof,te(M)].concat(R))},je=function(M){for(var U=M.length,R=[];U--;)R[U]=kt(M[U]);return h.apply(null,[nr.moov,$e(4294967295)].concat(R).concat(We(M)))},We=function(M){for(var U=M.length,R=[];U--;)R[U]=hn(M[U]);return h.apply(null,[nr.mvex].concat(R))},$e=function(M){var U=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&M)>>24,(16711680&M)>>16,(65280&M)>>8,255&M,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return h(nr.mvhd,U)},xn=function(M){var $,ie,U=M.samples||[],R=new Uint8Array(4+U.length);for(ie=0;ie<U.length;ie++)R[ie+4]=($=U[ie].flags).dependsOn<<4|$.isDependedOn<<2|$.hasRedundancy;return h(nr.sdtp,R)},ln=function(M){return h(nr.stbl,sn(M),h(nr.stts,Ss),h(nr.stsc,cl),h(nr.stsz,Xc),h(nr.stco,ll))},sn=function(R){return h(nr.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===R.type?we(R):M(R))},we=function(R){var nt,pt,$=R.sps||[],ie=R.pps||[],de=[],Ve=[];for(nt=0;nt<$.length;nt++)de.push((65280&$[nt].byteLength)>>>8),de.push(255&$[nt].byteLength),de=de.concat(Array.prototype.slice.call($[nt]));for(nt=0;nt<ie.length;nt++)Ve.push((65280&ie[nt].byteLength)>>>8),Ve.push(255&ie[nt].byteLength),Ve=Ve.concat(Array.prototype.slice.call(ie[nt]));if(pt=[nr.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&R.width)>>8,255&R.width,(65280&R.height)>>8,255&R.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),h(nr.avcC,new Uint8Array([1,R.profileIdc,R.profileCompatibility,R.levelIdc,255].concat([$.length],de,[ie.length],Ve))),h(nr.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],R.sarRatio){var at=R.sarRatio[0],mt=R.sarRatio[1];pt.push(h(nr.pasp,new Uint8Array([(4278190080&at)>>24,(16711680&at)>>16,(65280&at)>>8,255&at,(4278190080&mt)>>24,(16711680&mt)>>16,(65280&mt)>>8,255&mt])))}return h.apply(null,pt)},M=function(R){return h(nr.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&R.channelcount)>>8,255&R.channelcount,(65280&R.samplesize)>>8,255&R.samplesize,0,0,0,0,(65280&R.samplerate)>>8,255&R.samplerate,0,0]),C(R))},pn=function(M){var U=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&M.id)>>24,(16711680&M.id)>>16,(65280&M.id)>>8,255&M.id,0,0,0,0,(4278190080&M.duration)>>24,(16711680&M.duration)>>16,(65280&M.duration)>>8,255&M.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&M.width)>>8,255&M.width,0,0,(65280&M.height)>>8,255&M.height,0,0]);return h(nr.tkhd,U)},Dn=function(M){var U,R,$,ie,Ve,nt;return U=h(nr.tfhd,new Uint8Array([0,0,0,58,(4278190080&M.id)>>24,(16711680&M.id)>>16,(65280&M.id)>>8,255&M.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),Ve=Math.floor(M.baseMediaDecodeTime/o),nt=Math.floor(M.baseMediaDecodeTime%o),R=h(nr.tfdt,new Uint8Array([1,0,0,0,Ve>>>24&255,Ve>>>16&255,Ve>>>8&255,255&Ve,nt>>>24&255,nt>>>16&255,nt>>>8&255,255&nt])),"audio"===M.type?($=Cr(M,92),h(nr.traf,U,R,$)):(ie=xn(M),$=Cr(M,ie.length+92),h(nr.traf,U,R,$,ie))},kt=function(M){return M.duration=M.duration||4294967295,h(nr.trak,pn(M),jn(M))},hn=function(M){var U=new Uint8Array([0,0,0,0,(4278190080&M.id)>>24,(16711680&M.id)>>16,(65280&M.id)>>8,255&M.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==M.type&&(U[U.length-1]=0),h(nr.trex,U)},function(){var we,M,U;U=function($,ie){var de=0,Ve=0,nt=0,pt=0;return $.length&&(void 0!==$[0].duration&&(de=1),void 0!==$[0].size&&(Ve=2),void 0!==$[0].flags&&(nt=4),void 0!==$[0].compositionTimeOffset&&(pt=8)),[0,0,de|Ve|nt|pt,1,(4278190080&$.length)>>>24,(16711680&$.length)>>>16,(65280&$.length)>>>8,255&$.length,(4278190080&ie)>>>24,(16711680&ie)>>>16,(65280&ie)>>>8,255&ie]},M=function($,ie){var de,Ve,nt,pt,at,mt;for(nt=U(pt=$.samples||[],ie+=20+16*pt.length),(Ve=new Uint8Array(nt.length+16*pt.length)).set(nt),de=nt.length,mt=0;mt<pt.length;mt++)Ve[de++]=(4278190080&(at=pt[mt]).duration)>>>24,Ve[de++]=(16711680&at.duration)>>>16,Ve[de++]=(65280&at.duration)>>>8,Ve[de++]=255&at.duration,Ve[de++]=(4278190080&at.size)>>>24,Ve[de++]=(16711680&at.size)>>>16,Ve[de++]=(65280&at.size)>>>8,Ve[de++]=255&at.size,Ve[de++]=at.flags.isLeading<<2|at.flags.dependsOn,Ve[de++]=at.flags.isDependedOn<<6|at.flags.hasRedundancy<<4|at.flags.paddingValue<<1|at.flags.isNonSyncSample,Ve[de++]=61440&at.flags.degradationPriority,Ve[de++]=15&at.flags.degradationPriority,Ve[de++]=(4278190080&at.compositionTimeOffset)>>>24,Ve[de++]=(16711680&at.compositionTimeOffset)>>>16,Ve[de++]=(65280&at.compositionTimeOffset)>>>8,Ve[de++]=255&at.compositionTimeOffset;return h(nr.trun,Ve)},we=function($,ie){var de,Ve,nt,pt,at,mt;for(nt=U(pt=$.samples||[],ie+=20+8*pt.length),(de=new Uint8Array(nt.length+8*pt.length)).set(nt),Ve=nt.length,mt=0;mt<pt.length;mt++)de[Ve++]=(4278190080&(at=pt[mt]).duration)>>>24,de[Ve++]=(16711680&at.duration)>>>16,de[Ve++]=(65280&at.duration)>>>8,de[Ve++]=255&at.duration,de[Ve++]=(4278190080&at.size)>>>24,de[Ve++]=(16711680&at.size)>>>16,de[Ve++]=(65280&at.size)>>>8,de[Ve++]=255&at.size;return h(nr.trun,de)},Cr=function($,ie){return"audio"===$.type?we($,ie):M($,ie)}}();var df,_g,Xv,ch,Jv,v_,h0,y_,ro_mdat=j,ro_moof=Se,Qv=function(M,U){var R={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return R.dataOffset=U,R.compositionTimeOffset=M.pts-M.dts,R.duration=M.duration,R.size=4*M.length,R.size+=M.byteLength,M.keyFrame&&(R.flags.dependsOn=2,R.flags.isNonSyncSample=0),R},ws=[33,16,5,32,164,27],Nm=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Cs=function(M){for(var U=[];M--;)U.push(0);return U};_g=function(M){return 9e4*M},Xv=function(M,U){return M*U},ch=function(M){return M/9e4},Jv=function(M,U){return M/U},v_=function(M,U){return _g(Jv(M,U))},h0=function(M,U){return Xv(ch(M),U)},y_=function(M,U,R){return ch(R?M:M-U)};var gs_secondsToVideoTs=_g,gs_videoTsToSeconds=ch,gs_audioTsToVideoTs=v_,gs_videoTsToAudioTs=h0,gs_metadataTsToSeconds=y_,Tg_prefixWithSilence=function(M,U,R,$){var ie,at,mt,i,de=0,Ve=0,nt=0,pt=0;if(U.length&&(ie=gs_audioTsToVideoTs(M.baseMediaDecodeTime,M.samplerate),de=Math.ceil(9e4/(M.samplerate/1024)),R&&$&&(Ve=ie-Math.max(R,$),pt=(nt=Math.floor(Ve/de))*de),!(nt<1||pt>45e3))){for((at=function(){if(!df){var M={96e3:[ws,[227,64],Cs(154),[56]],88200:[ws,[231],Cs(170),[56]],64e3:[ws,[248,192],Cs(240),[56]],48e3:[ws,[255,192],Cs(268),[55,148,128],Cs(54),[112]],44100:[ws,[255,192],Cs(268),[55,163,128],Cs(84),[112]],32e3:[ws,[255,192],Cs(268),[55,234],Cs(226),[112]],24e3:[ws,[255,192],Cs(268),[55,255,128],Cs(268),[111,112],Cs(126),[224]],16e3:[ws,[255,192],Cs(268),[55,255,128],Cs(268),[111,255],Cs(269),[223,108],Cs(195),[1,192]],12e3:[Nm,Cs(268),[3,127,248],Cs(268),[6,255,240],Cs(268),[13,255,224],Cs(268),[27,253,128],Cs(259),[56]],11025:[Nm,Cs(268),[3,127,248],Cs(268),[6,255,240],Cs(268),[13,255,224],Cs(268),[27,255,192],Cs(268),[55,175,128],Cs(108),[112]],8e3:[Nm,Cs(268),[3,121,16],Cs(47),[7]]};df=function(M){return Object.keys(M).reduce(function(U,R){return U[R]=new Uint8Array(M[R].reduce(function($,ie){return $.concat(ie)},[])),U},{})}(M)}return df}()[M.samplerate])||(at=U[0].data),mt=0;mt<nt;mt++)U.splice(0,0,{data:at,dts:(i=U[0]).dts-de,pts:i.pts-de});return M.baseMediaDecodeTime-=Math.floor(gs_videoTsToAudioTs(pt,M.samplerate)),pt}},Sl_clearDtsInfo=function(M){delete M.minSegmentDts,delete M.maxSegmentDts,delete M.minSegmentPts,delete M.maxSegmentPts},Sl_calculateTrackBaseMediaDecodeTime=function(M,U){var R,ie=M.minSegmentDts;return U||(ie-=M.timelineStartInfo.dts),R=M.timelineStartInfo.baseMediaDecodeTime,R+=ie,R=Math.max(0,R),"audio"===M.type&&(R*=M.samplerate/9e4,R=Math.floor(R)),R},Sl_collectDtsInfo=function(M,U){"number"==typeof U.pts&&(void 0===M.timelineStartInfo.pts&&(M.timelineStartInfo.pts=U.pts),M.minSegmentPts=void 0===M.minSegmentPts?U.pts:Math.min(M.minSegmentPts,U.pts),M.maxSegmentPts=void 0===M.maxSegmentPts?U.pts:Math.max(M.maxSegmentPts,U.pts)),"number"==typeof U.dts&&(void 0===M.timelineStartInfo.dts&&(M.timelineStartInfo.dts=U.dts),M.minSegmentDts=void 0===M.minSegmentDts?U.dts:Math.min(M.minSegmentDts,U.dts),M.maxSegmentDts=void 0===M.maxSegmentDts?U.dts:Math.max(M.maxSegmentDts,U.dts))},Eu=function we(M){M=M||{},we.prototype.init.call(this),this.parse708captions_="boolean"!=typeof M.parse708captions||M.parse708captions,this.captionPackets_=[],this.ccStreams_=[new zo(0,0),new zo(0,1),new zo(1,0),new zo(1,1)],this.parse708captions_&&(this.cc708Stream_=new ho({captionServices:M.captionServices})),this.reset(),this.ccStreams_.forEach(function(U){U.on("data",this.trigger.bind(this,"data")),U.on("partialdone",this.trigger.bind(this,"partialdone")),U.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(Eu.prototype=new u).push=function(we){var M,U,R;if("sei_rbsp"===we.nalUnitType&&(M=function(M){for(var U=0,R={payloadType:-1,payloadSize:0},$=0,ie=0;U<M.byteLength&&128!==M[U];){for(;255===M[U];)$+=255,U++;for($+=M[U++];255===M[U];)ie+=255,U++;if(ie+=M[U++],!R.payload&&4===$){if("GA94"===String.fromCharCode(M[U+3],M[U+4],M[U+5],M[U+6])){R.payloadType=$,R.payloadSize=ie,R.payload=M.subarray(U,U+ie);break}R.payload=void 0}U+=ie,$=0,ie=0}return R}(we.escapedRBSP)).payload&&4===M.payloadType&&(U=function(M){return 181!==M.payload[0]||49!=(M.payload[1]<<8|M.payload[2])||"GA94"!==String.fromCharCode(M.payload[3],M.payload[4],M.payload[5],M.payload[6])||3!==M.payload[7]?null:M.payload.subarray(8,M.payload.length-1)}(M))){if(we.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(we.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));R=function(M,U){var $,ie,de,Ve,R=[];if(!(64&U[0]))return R;for(ie=31&U[0],$=0;$<ie;$++)Ve={type:3&U[2+(de=3*$)],pts:M},4&U[de+2]&&(Ve.ccData=U[de+3]<<8|U[de+4],R.push(Ve));return R}(we.pts,U),this.captionPackets_=this.captionPackets_.concat(R),this.latestDts_!==we.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=we.dts}},Eu.prototype.flushCCStreams=function(we){this.ccStreams_.forEach(function(M){return"flush"===we?M.flush():M.partialFlush()},this)},Eu.prototype.flushStream=function(we){this.captionPackets_.length?(this.captionPackets_.forEach(function(M,U){M.presortIndex=U}),this.captionPackets_.sort(function(M,U){return M.pts===U.pts?M.presortIndex-U.presortIndex:M.pts-U.pts}),this.captionPackets_.forEach(function(M){M.type<2?this.dispatchCea608Packet(M):this.dispatchCea708Packet(M)},this),this.captionPackets_.length=0,this.flushCCStreams(we)):this.flushCCStreams(we)},Eu.prototype.flush=function(){return this.flushStream("flush")},Eu.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Eu.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(we){we.reset()})},Eu.prototype.dispatchCea608Packet=function(we){this.setsTextOrXDSActive(we)?this.activeCea608Channel_[we.type]=null:this.setsChannel1Active(we)?this.activeCea608Channel_[we.type]=0:this.setsChannel2Active(we)&&(this.activeCea608Channel_[we.type]=1),null!==this.activeCea608Channel_[we.type]&&this.ccStreams_[(we.type<<1)+this.activeCea608Channel_[we.type]].push(we)},Eu.prototype.setsChannel1Active=function(we){return 4096==(30720&we.ccData)},Eu.prototype.setsChannel2Active=function(we){return 6144==(30720&we.ccData)},Eu.prototype.setsTextOrXDSActive=function(we){return 256==(28928&we.ccData)||4138==(30974&we.ccData)||6186==(30974&we.ccData)},Eu.prototype.dispatchCea708Packet=function(we){this.parse708captions_&&this.cc708Stream_.push(we)};var m0={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},gf=function(M){return 32<=M&&M<=127||160<=M&&M<=255},wl=function(M){this.windowNum=M,this.reset()};wl.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},wl.prototype.getText=function(){return this.rows.join("\n")},wl.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},wl.prototype.newLine=function(we){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(we),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},wl.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},wl.prototype.addText=function(we){this.rows[this.rowIdx]+=we},wl.prototype.backspace=function(){if(!this.isEmpty()){var we=this.rows[this.rowIdx];this.rows[this.rowIdx]=we.substr(0,we.length-1)}};var mf=function(M,U,R){this.serviceNum=M,this.text="",this.currentWindow=new wl(-1),this.windows=[],this.stream=R,"string"==typeof U&&this.createTextDecoder(U)};mf.prototype.init=function(we,M){this.startPts=we;for(var U=0;U<8;U++)this.windows[U]=new wl(U),"function"==typeof M&&(this.windows[U].beforeRowOverflow=M)},mf.prototype.setCurrentWindow=function(we){this.currentWindow=this.windows[we]},mf.prototype.createTextDecoder=function(we){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(we)}catch(M){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+we+" encoding. "+M})}};var ho=function we(M){M=M||{},we.prototype.init.call(this);var ie,U=this,R=M.captionServices||{},$={};Object.keys(R).forEach(function(de){ie=R[de],/^SERVICE/.test(de)&&($[de]=ie.encoding)}),this.serviceEncodings=$,this.current708Packet=null,this.services={},this.push=function(de){3===de.type?(U.new708Packet(),U.add708Bytes(de)):(null===U.current708Packet&&U.new708Packet(),U.add708Bytes(de))}};ho.prototype=new u,ho.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},ho.prototype.add708Bytes=function(we){var M=we.ccData,U=M>>>8,R=255&M;this.current708Packet.ptsVals.push(we.pts),this.current708Packet.data.push(U),this.current708Packet.data.push(R)},ho.prototype.push708Packet=function(){var we=this.current708Packet,M=we.data,U=null,R=null,$=0,ie=M[$++];for(we.seq=ie>>6,we.sizeCode=63&ie;$<M.length;$++)R=31&(ie=M[$++]),7==(U=ie>>5)&&R>0&&(U=ie=M[$++]),this.pushServiceBlock(U,$,R),R>0&&($+=R-1)},ho.prototype.pushServiceBlock=function(we,M,U){var R,$=M,ie=this.current708Packet.data,de=this.services[we];for(de||(de=this.initService(we,$));$<M+U&&$<ie.length;$++)gf(R=ie[$])?$=this.handleText($,de):24===R?$=this.multiByteCharacter($,de):16===R?$=this.extendedCommands($,de):128<=R&&R<=135?$=this.setCurrentWindow($,de):152<=R&&R<=159?$=this.defineWindow($,de):136===R?$=this.clearWindows($,de):140===R?$=this.deleteWindows($,de):137===R?$=this.displayWindows($,de):138===R?$=this.hideWindows($,de):139===R?$=this.toggleWindows($,de):151===R?$=this.setWindowAttributes($,de):144===R?$=this.setPenAttributes($,de):145===R?$=this.setPenColor($,de):146===R?$=this.setPenLocation($,de):143===R?de=this.reset($,de):8===R?de.currentWindow.backspace():12===R?de.currentWindow.clearText():13===R?de.currentWindow.pendingNewLine=!0:14===R?de.currentWindow.clearText():141===R&&$++},ho.prototype.extendedCommands=function(we,M){var R=this.current708Packet.data[++we];return gf(R)&&(we=this.handleText(we,M,{isExtended:!0})),we},ho.prototype.getPts=function(we){return this.current708Packet.ptsVals[Math.floor(we/2)]},ho.prototype.initService=function(we,M){var R,$,U=this;return(R="SERVICE"+we)in this.serviceEncodings&&($=this.serviceEncodings[R]),this.services[we]=new mf(we,$,U),this.services[we].init(this.getPts(M),function(ie){U.flushDisplayed(ie,U.services[we])}),this.services[we]},ho.prototype.handleText=function(we,M,U){var at,mt,R=U&&U.isExtended,ie=this.current708Packet.data,de=R?4096:0,Ve=ie[we],pt=M.currentWindow;return M.textDecoder_&&!R?(U&&U.isMultiByte?(mt=[Ve,ie[we+1]],we++):mt=[Ve],at=M.textDecoder_.decode(new Uint8Array(mt))):at=function(M){var U=m0[M]||M;return 4096&M&&M===U?"":String.fromCharCode(U)}(de|Ve),pt.pendingNewLine&&!pt.isEmpty()&&pt.newLine(this.getPts(we)),pt.pendingNewLine=!1,pt.addText(at),we},ho.prototype.multiByteCharacter=function(we,M){var U=this.current708Packet.data,$=U[we+2];return gf(U[we+1])&&gf($)&&(we=this.handleText(++we,M,{isMultiByte:!0})),we},ho.prototype.setCurrentWindow=function(we,M){return M.setCurrentWindow(7&this.current708Packet.data[we]),we},ho.prototype.defineWindow=function(we,M){var U=this.current708Packet.data,R=U[we];M.setCurrentWindow(7&R);var ie=M.currentWindow;return R=U[++we],ie.visible=(32&R)>>5,ie.rowLock=(16&R)>>4,ie.columnLock=(8&R)>>3,ie.priority=7&R,R=U[++we],ie.relativePositioning=(128&R)>>7,ie.anchorVertical=127&R,R=U[++we],ie.anchorHorizontal=R,R=U[++we],ie.anchorPoint=(240&R)>>4,ie.rowCount=15&R,R=U[++we],ie.columnCount=63&R,R=U[++we],ie.windowStyle=(56&R)>>3,ie.penStyle=7&R,ie.virtualRowCount=ie.rowCount+1,we},ho.prototype.setWindowAttributes=function(we,M){var U=this.current708Packet.data,R=U[we],$=M.currentWindow.winAttr;return R=U[++we],$.fillOpacity=(192&R)>>6,$.fillRed=(48&R)>>4,$.fillGreen=(12&R)>>2,$.fillBlue=3&R,R=U[++we],$.borderType=(192&R)>>6,$.borderRed=(48&R)>>4,$.borderGreen=(12&R)>>2,$.borderBlue=3&R,R=U[++we],$.borderType+=(128&R)>>5,$.wordWrap=(64&R)>>6,$.printDirection=(48&R)>>4,$.scrollDirection=(12&R)>>2,$.justify=3&R,R=U[++we],$.effectSpeed=(240&R)>>4,$.effectDirection=(12&R)>>2,$.displayEffect=3&R,we},ho.prototype.flushDisplayed=function(we,M){for(var U=[],R=0;R<8;R++)M.windows[R].visible&&!M.windows[R].isEmpty()&&U.push(M.windows[R].getText());M.endPts=we,M.text=U.join("\n\n"),this.pushCaption(M),M.startPts=we},ho.prototype.pushCaption=function(we){""!==we.text&&(this.trigger("data",{startPts:we.startPts,endPts:we.endPts,text:we.text,stream:"cc708_"+we.serviceNum}),we.text="",we.startPts=we.endPts)},ho.prototype.displayWindows=function(we,M){var R=this.current708Packet.data[++we],$=this.getPts(we);this.flushDisplayed($,M);for(var ie=0;ie<8;ie++)R&1<<ie&&(M.windows[ie].visible=1);return we},ho.prototype.hideWindows=function(we,M){var R=this.current708Packet.data[++we],$=this.getPts(we);this.flushDisplayed($,M);for(var ie=0;ie<8;ie++)R&1<<ie&&(M.windows[ie].visible=0);return we},ho.prototype.toggleWindows=function(we,M){var R=this.current708Packet.data[++we],$=this.getPts(we);this.flushDisplayed($,M);for(var ie=0;ie<8;ie++)R&1<<ie&&(M.windows[ie].visible^=1);return we},ho.prototype.clearWindows=function(we,M){var R=this.current708Packet.data[++we],$=this.getPts(we);this.flushDisplayed($,M);for(var ie=0;ie<8;ie++)R&1<<ie&&M.windows[ie].clearText();return we},ho.prototype.deleteWindows=function(we,M){var R=this.current708Packet.data[++we],$=this.getPts(we);this.flushDisplayed($,M);for(var ie=0;ie<8;ie++)R&1<<ie&&M.windows[ie].reset();return we},ho.prototype.setPenAttributes=function(we,M){var U=this.current708Packet.data,R=U[we],$=M.currentWindow.penAttr;return R=U[++we],$.textTag=(240&R)>>4,$.offset=(12&R)>>2,$.penSize=3&R,R=U[++we],$.italics=(128&R)>>7,$.underline=(64&R)>>6,$.edgeType=(56&R)>>3,$.fontStyle=7&R,we},ho.prototype.setPenColor=function(we,M){var U=this.current708Packet.data,R=U[we],$=M.currentWindow.penColor;return R=U[++we],$.fgOpacity=(192&R)>>6,$.fgRed=(48&R)>>4,$.fgGreen=(12&R)>>2,$.fgBlue=3&R,R=U[++we],$.bgOpacity=(192&R)>>6,$.bgRed=(48&R)>>4,$.bgGreen=(12&R)>>2,$.bgBlue=3&R,R=U[++we],$.edgeRed=(48&R)>>4,$.edgeGreen=(12&R)>>2,$.edgeBlue=3&R,we},ho.prototype.setPenLocation=function(we,M){var U=this.current708Packet.data,R=U[we],$=M.currentWindow.penLoc;return M.currentWindow.pendingNewLine=!0,R=U[++we],$.row=15&R,R=U[++we],$.column=63&R,we},ho.prototype.reset=function(we,M){var U=this.getPts(we);return this.flushDisplayed(U,M),this.initService(M.serviceNum,we)};var vf={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},wg=function(M){return null===M?"":(M=vf[M]||M,String.fromCharCode(M))},fp=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Zl=function(){for(var M=[],U=15;U--;)M.push("");return M},zo=function we(M,U){we.prototype.init.call(this),this.field_=M||0,this.dataChannel_=U||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(R){var $,ie,de,Ve,nt;if(($=32639&R.ccData)!==this.lastControlCode_){if(4096==(61440&$)?this.lastControlCode_=$:$!==this.PADDING_&&(this.lastControlCode_=null),de=$>>>8,Ve=255&$,$!==this.PADDING_)if($===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if($===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(R.pts),this.flushDisplayed(R.pts),ie=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=ie,this.startPts_=R.pts;else if($===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(R.pts);else if($===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(R.pts);else if($===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(R.pts);else if($===this.CARRIAGE_RETURN_)this.clearFormatting(R.pts),this.flushDisplayed(R.pts),this.shiftRowsUp_(),this.startPts_=R.pts;else if($===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if($===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(R.pts),this.displayed_=Zl();else if($===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Zl();else if($===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(R.pts),this.displayed_=Zl()),this.mode_="paintOn",this.startPts_=R.pts;else if(this.isSpecialCharacter(de,Ve))nt=wg((de=(3&de)<<8)|Ve),this[this.mode_](R.pts,nt),this.column_++;else if(this.isExtCharacter(de,Ve))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),nt=wg((de=(3&de)<<8)|Ve),this[this.mode_](R.pts,nt),this.column_++;else if(this.isMidRowCode(de,Ve))this.clearFormatting(R.pts),this[this.mode_](R.pts," "),this.column_++,14==(14&Ve)&&this.addFormatting(R.pts,["i"]),1==(1&Ve)&&this.addFormatting(R.pts,["u"]);else if(this.isOffsetControlCode(de,Ve))this.column_+=3&Ve;else if(this.isPAC(de,Ve)){var pt=fp.indexOf(7968&$);"rollUp"===this.mode_&&(pt-this.rollUpRows_+1<0&&(pt=this.rollUpRows_-1),this.setRollUp(R.pts,pt)),pt!==this.row_&&(this.clearFormatting(R.pts),this.row_=pt),1&Ve&&-1===this.formatting_.indexOf("u")&&this.addFormatting(R.pts,["u"]),16==(16&$)&&(this.column_=4*((14&$)>>1)),this.isColorPAC(Ve)&&14==(14&Ve)&&this.addFormatting(R.pts,["i"])}else this.isNormalChar(de)&&(0===Ve&&(Ve=null),nt=wg(de),nt+=wg(Ve),this[this.mode_](R.pts,nt),this.column_+=nt.length)}else this.lastControlCode_=null}};zo.prototype=new u,zo.prototype.flushDisplayed=function(we){var M=this.displayed_.map(function(U,R){try{return U.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+R+"."}),""}},this).join("\n").replace(/^\n+|\n+$/g,"");M.length&&this.trigger("data",{startPts:this.startPts_,endPts:we,text:M,stream:this.name_})},zo.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Zl(),this.nonDisplayed_=Zl(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},zo.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},zo.prototype.isSpecialCharacter=function(we,M){return we===this.EXT_&&M>=48&&M<=63},zo.prototype.isExtCharacter=function(we,M){return(we===this.EXT_+1||we===this.EXT_+2)&&M>=32&&M<=63},zo.prototype.isMidRowCode=function(we,M){return we===this.EXT_&&M>=32&&M<=47},zo.prototype.isOffsetControlCode=function(we,M){return we===this.OFFSET_&&M>=33&&M<=35},zo.prototype.isPAC=function(we,M){return we>=this.BASE_&&we<this.BASE_+8&&M>=64&&M<=127},zo.prototype.isColorPAC=function(we){return we>=64&&we<=79||we>=96&&we<=127},zo.prototype.isNormalChar=function(we){return we>=32&&we<=127},zo.prototype.setRollUp=function(we,M){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(we),this.nonDisplayed_=Zl(),this.displayed_=Zl()),void 0!==M&&M!==this.row_)for(var U=0;U<this.rollUpRows_;U++)this.displayed_[M-U]=this.displayed_[this.row_-U],this.displayed_[this.row_-U]="";void 0===M&&(M=this.row_),this.topRow_=M-this.rollUpRows_+1},zo.prototype.addFormatting=function(we,M){this.formatting_=this.formatting_.concat(M);var U=M.reduce(function(R,$){return R+"<"+$+">"},"");this[this.mode_](we,U)},zo.prototype.clearFormatting=function(we){if(this.formatting_.length){var M=this.formatting_.reverse().reduce(function(U,R){return U+"</"+R+">"},"");this.formatting_=[],this[this.mode_](we,M)}},zo.prototype.popOn=function(we,M){var U=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=U+=M},zo.prototype.rollUp=function(we,M){var U=this.displayed_[this.row_];this.displayed_[this.row_]=U+=M},zo.prototype.shiftRowsUp_=function(){var we;for(we=0;we<this.topRow_;we++)this.displayed_[we]="";for(we=this.row_+1;we<15;we++)this.displayed_[we]="";for(we=this.topRow_;we<this.row_;we++)this.displayed_[we]=this.displayed_[we+1];this.displayed_[this.row_]=""},zo.prototype.paintOn=function(we,M){var U=this.displayed_[this.row_];this.displayed_[this.row_]=U+=M};var yf={CaptionStream:Eu,Cea608Stream:zo,Cea708Stream:ho},Pa={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},ph=function(M,U){var R=1;for(M>U&&(R=-1);Math.abs(U-M)>4294967296;)M+=8589934592*R;return M},Um=function we(M){var U,R;we.prototype.init.call(this),this.type_=M||"shared",this.push=function($){"shared"!==this.type_&&$.type!==this.type_||(void 0===R&&(R=$.dts),$.dts=ph($.dts,R),$.pts=ph($.pts,R),U=$.dts,this.trigger("data",$))},this.flush=function(){R=U,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){R=void 0,U=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Um.prototype=new u;var Vm,Bm_TimestampRolloverStream=Um,Bm_handleRollover=ph,bf=function(M,U,R){var $,ie="";for($=U;$<R;$++)ie+="%"+("00"+M[$].toString(16)).slice(-2);return ie},Yl=function(M,U,R){return decodeURIComponent(bf(M,U,R))},pp=function(M,U,R){return unescape(bf(M,U,R))},Cg=function(M){return M[0]<<21|M[1]<<14|M[2]<<7|M[3]},Tf={TXXX:function(M){var U;if(3===M.data[0]){for(U=1;U<M.data.length;U++)if(0===M.data[U]){M.description=Yl(M.data,1,U),M.value=Yl(M.data,U+1,M.data.length).replace(/\0*$/,"");break}M.data=M.value}},WXXX:function(M){var U;if(3===M.data[0])for(U=1;U<M.data.length;U++)if(0===M.data[U]){M.description=Yl(M.data,1,U),M.url=Yl(M.data,U+1,M.data.length);break}},PRIV:function(M){var U;for(U=0;U<M.data.length;U++)if(0===M.data[U]){M.owner=pp(M.data,0,U);break}M.privateData=M.data.subarray(U+1),M.data=M.privateData}};Vm=function(M){var de,U={descriptor:M&&M.descriptor},R=0,$=[],ie=0;if(Vm.prototype.init.call(this),this.dispatchType=Pa.METADATA_STREAM_TYPE.toString(16),U.descriptor)for(de=0;de<U.descriptor.length;de++)this.dispatchType+=("00"+U.descriptor[de].toString(16)).slice(-2);this.push=function(Ve){var nt,pt,at,mt,i;if("timed-metadata"===Ve.type){if(Ve.dataAlignmentIndicator&&(ie=0,$.length=0),0===$.length&&(Ve.data.length<10||Ve.data[0]!=="I".charCodeAt(0)||Ve.data[1]!=="D".charCodeAt(0)||Ve.data[2]!=="3".charCodeAt(0)))return void this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});if($.push(Ve),ie+=Ve.data.byteLength,1===$.length&&(R=Cg(Ve.data.subarray(6,10)),R+=10),!(ie<R)){for(nt={data:new Uint8Array(R),frames:[],pts:$[0].pts,dts:$[0].dts},i=0;i<R;)nt.data.set($[0].data.subarray(0,R-i),i),i+=$[0].data.byteLength,ie-=$[0].data.byteLength,$.shift();pt=10,64&nt.data[5]&&(pt+=4,pt+=Cg(nt.data.subarray(10,14)),R-=Cg(nt.data.subarray(16,20)));do{if((at=Cg(nt.data.subarray(pt+4,pt+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((mt={id:String.fromCharCode(nt.data[pt],nt.data[pt+1],nt.data[pt+2],nt.data[pt+3]),data:nt.data.subarray(pt+10,pt+at+10)}).key=mt.id,Tf[mt.id]&&(Tf[mt.id](mt),"com.apple.streaming.transportStreamTimestamp"===mt.owner)){var t=mt.data,c=(1&t[3])<<30|t[4]<<22|t[5]<<14|t[6]<<6|t[7]>>>2;c*=4,mt.timeStamp=c+=3&t[7],void 0===nt.pts&&void 0===nt.dts&&(nt.pts=mt.timeStamp,nt.dts=mt.timeStamp),this.trigger("timestamp",mt)}nt.frames.push(mt),pt+=10,pt+=at}while(pt<R);this.trigger("data",nt)}}}},Vm.prototype=new u;var gp,Rd,Ig,v0=Vm,Hm=Bm_TimestampRolloverStream;gp=function(){var M=new Uint8Array(188),U=0;gp.prototype.init.call(this),this.push=function(R){var de,$=0,ie=188;for(U?((de=new Uint8Array(R.byteLength+U)).set(M.subarray(0,U)),de.set(R,U),U=0):de=R;ie<de.byteLength;)71!==de[$]||71!==de[ie]?($++,ie++):(this.trigger("data",de.subarray($,ie)),$+=188,ie+=188);$<de.byteLength&&(M.set(de.subarray($),0),U=de.byteLength-$)},this.flush=function(){188===U&&71===M[0]&&(this.trigger("data",M),U=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){U=0,this.trigger("reset")}},gp.prototype=new u,Rd=function(){var M,U,R,$;Rd.prototype.init.call(this),$=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,M=function(de,Ve){var nt=0;Ve.payloadUnitStartIndicator&&(nt+=de[nt]+1),"pat"===Ve.type?U(de.subarray(nt),Ve):R(de.subarray(nt),Ve)},U=function(de,Ve){Ve.section_number=de[7],Ve.last_section_number=de[8],$.pmtPid=(31&de[10])<<8|de[11],Ve.pmtPid=$.pmtPid},R=function(de,Ve){var pt,mt;if(1&de[5]){for($.programMapTable={video:null,audio:null,"timed-metadata":{}},pt=3+((15&de[1])<<8|de[2])-4,mt=12+((15&de[10])<<8|de[11]);mt<pt;){var i=de[mt],e=(31&de[mt+1])<<8|de[mt+2];i===Pa.H264_STREAM_TYPE&&null===$.programMapTable.video?$.programMapTable.video=e:i===Pa.ADTS_STREAM_TYPE&&null===$.programMapTable.audio?$.programMapTable.audio=e:i===Pa.METADATA_STREAM_TYPE&&($.programMapTable["timed-metadata"][e]=i),mt+=5+((15&de[mt+3])<<8|de[mt+4])}Ve.programMapTable=$.programMapTable}},this.push=function(ie){var de={},Ve=4;if(de.payloadUnitStartIndicator=!!(64&ie[1]),de.pid=31&ie[1],de.pid<<=8,de.pid|=ie[2],(48&ie[3])>>>4>1&&(Ve+=ie[Ve]+1),0===de.pid)de.type="pat",M(ie.subarray(Ve),de),this.trigger("data",de);else if(de.pid===this.pmtPid)for(de.type="pmt",M(ie.subarray(Ve),de),this.trigger("data",de);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([ie,Ve,de]):this.processPes_(ie,Ve,de)},this.processPes_=function(ie,de,Ve){Ve.streamType=Ve.pid===this.programMapTable.video?Pa.H264_STREAM_TYPE:Ve.pid===this.programMapTable.audio?Pa.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][Ve.pid],Ve.type="pes",Ve.data=ie.subarray(de),this.trigger("data",Ve)}},Rd.prototype=new u,Rd.STREAM_TYPES={h264:27,adts:15},Ig=function(){var de,M=this,U=!1,R={data:[],size:0},$={data:[],size:0},ie={data:[],size:0},nt=function(at,mt,i){var S,e=new Uint8Array(at.size),t={type:mt},c=0,f=0,y=!1;if(at.data.length&&!(at.size<9)){for(t.trackId=at.data[0].pid,c=0;c<at.data.length;c++)e.set((S=at.data[c]).data,f),f+=S.data.byteLength;(function(at,mt){var i,e=at[0]<<16|at[1]<<8|at[2];mt.data=new Uint8Array,1===e&&(mt.packetLength=6+(at[4]<<8|at[5]),mt.dataAlignmentIndicator=0!=(4&at[6]),192&(i=at[7])&&(mt.pts=(14&at[9])<<27|(255&at[10])<<20|(254&at[11])<<12|(255&at[12])<<5|(254&at[13])>>>3,mt.pts*=4,mt.pts+=(6&at[13])>>>1,mt.dts=mt.pts,64&i&&(mt.dts=(14&at[14])<<27|(255&at[15])<<20|(254&at[16])<<12|(255&at[17])<<5|(254&at[18])>>>3,mt.dts*=4,mt.dts+=(6&at[18])>>>1)),mt.data=at.subarray(9+at[8]))})(e,t),y="video"===mt||t.packetLength<=at.size,(i||y)&&(at.size=0,at.data.length=0),y&&M.trigger("data",t)}};Ig.prototype.init.call(this),this.push=function(pt){({pat:function(){},pes:function(){var mt,i;switch(pt.streamType){case Pa.H264_STREAM_TYPE:mt=R,i="video";break;case Pa.ADTS_STREAM_TYPE:mt=$,i="audio";break;case Pa.METADATA_STREAM_TYPE:mt=ie,i="timed-metadata";break;default:return}pt.payloadUnitStartIndicator&&nt(mt,i,!0),mt.data.push(pt),mt.size+=pt.data.byteLength},pmt:function(){var mt={type:"metadata",tracks:[]};null!==(de=pt.programMapTable).video&&mt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+de.video,codec:"avc",type:"video"}),null!==de.audio&&mt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+de.audio,codec:"adts",type:"audio"}),U=!0,M.trigger("data",mt)}})[pt.type]()},this.reset=function(){R.size=0,R.data.length=0,$.size=0,$.data.length=0,this.trigger("reset")},this.flushStreams_=function(){nt(R,"video"),nt($,"audio"),nt(ie,"timed-metadata")},this.flush=function(){if(!U&&de){var pt={type:"metadata",tracks:[]};null!==de.video&&pt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+de.video,codec:"avc",type:"video"}),null!==de.audio&&pt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+de.audio,codec:"adts",type:"audio"}),M.trigger("data",pt)}U=!1,this.flushStreams_(),this.trigger("done")}},Ig.prototype=new u;var ny={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:gp,TransportParseStream:Rd,ElementaryStream:Ig,TimestampRolloverStream:Hm,CaptionStream:yf.CaptionStream,Cea608Stream:yf.Cea608Stream,Cea708Stream:yf.Cea708Stream,MetadataStream:v0};for(var $m in Pa)Pa.hasOwnProperty($m)&&(ny[$m]=Pa[$m]);var wf,Cl=ny,ed=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];wf=function(M){var U,R=0;wf.prototype.init.call(this),this.skipWarn_=function($,ie){this.trigger("log",{level:"warn",message:"adts skiping bytes "+$+" to "+ie+" in frame "+R+" outside syncword"})},this.push=function($){var de,Ve,nt,pt,at,ie=0;if(M||(R=0),"audio"===$.type){U&&U.length?(nt=U,(U=new Uint8Array(nt.byteLength+$.data.byteLength)).set(nt),U.set($.data,nt.byteLength)):U=$.data;for(var mt;ie+7<U.length;)if(255===U[ie]&&240==(246&U[ie+1])){if("number"==typeof mt&&(this.skipWarn_(mt,ie),mt=null),Ve=2*(1&~U[ie+1]),at=9e4*(pt=1024*(1+(3&U[ie+6])))/ed[(60&U[ie+2])>>>2],U.byteLength-ie<(de=(3&U[ie+3])<<11|U[ie+4]<<3|(224&U[ie+5])>>5))break;this.trigger("data",{pts:$.pts+R*at,dts:$.dts+R*at,sampleCount:pt,audioobjecttype:1+(U[ie+2]>>>6&3),channelcount:(1&U[ie+2])<<2|(192&U[ie+3])>>>6,samplerate:ed[(60&U[ie+2])>>>2],samplingfrequencyindex:(60&U[ie+2])>>>2,samplesize:16,data:U.subarray(ie+7+Ve,ie+de)}),R++,ie+=de}else"number"!=typeof mt&&(mt=ie),ie++;"number"==typeof mt&&(this.skipWarn_(mt,ie),mt=null),U=U.subarray(ie)}},this.flush=function(){R=0,this.trigger("done")},this.reset=function(){U=void 0,this.trigger("reset")},this.endTimeline=function(){U=void 0,this.trigger("endedtimeline")}},wf.prototype=new u;var iy,ry=wf;iy=function(M){var U=M.byteLength,R=0,$=0;this.length=function(){return 8*U},this.bitsAvailable=function(){return 8*U+$},this.loadWord=function(){var ie=M.byteLength-U,de=new Uint8Array(4),Ve=Math.min(4,U);if(0===Ve)throw new Error("no bytes available");de.set(M.subarray(ie,ie+Ve)),R=new DataView(de.buffer).getUint32(0),$=8*Ve,U-=Ve},this.skipBits=function(ie){var de;$>ie?(R<<=ie,$-=ie):(ie-=$,ie-=8*(de=Math.floor(ie/8)),U-=de,this.loadWord(),R<<=ie,$-=ie)},this.readBits=function(ie){var de=Math.min($,ie),Ve=R>>>32-de;return($-=de)>0?R<<=de:U>0&&this.loadWord(),(de=ie-de)>0?Ve<<de|this.readBits(de):Ve},this.skipLeadingZeros=function(){var ie;for(ie=0;ie<$;++ie)if(R&2147483648>>>ie)return R<<=ie,$-=ie,ie;return this.loadWord(),ie+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var ie=this.skipLeadingZeros();return this.readBits(ie+1)-1},this.readExpGolomb=function(){var ie=this.readUnsignedExpGolomb();return 1&ie?1+ie>>>1:-1*(ie>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Tc,gh,zm,Gm=iy;gh=function(){var U,R,M=0;gh.prototype.init.call(this),this.push=function($){var ie;R?((ie=new Uint8Array(R.byteLength+$.data.byteLength)).set(R),ie.set($.data,R.byteLength),R=ie):R=$.data;for(var de=R.byteLength;M<de-3;M++)if(1===R[M+2]){U=M+5;break}for(;U<de;)switch(R[U]){case 0:if(0!==R[U-1]){U+=2;break}if(0!==R[U-2]){U++;break}M+3!==U-2&&this.trigger("data",R.subarray(M+3,U-2));do{U++}while(1!==R[U]&&U<de);M=U-2,U+=3;break;case 1:if(0!==R[U-1]||0!==R[U-2]){U+=3;break}this.trigger("data",R.subarray(M+3,U-2)),M=U-2,U+=3;break;default:U+=3}R=R.subarray(M),U-=M,M=0},this.reset=function(){R=null,M=0,this.trigger("reset")},this.flush=function(){R&&R.byteLength>3&&this.trigger("data",R.subarray(M+3)),R=null,M=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},gh.prototype=new u,zm={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Tc=function(){var U,R,$,ie,de,Ve,nt,M=new gh;Tc.prototype.init.call(this),U=this,this.push=function(pt){"video"===pt.type&&(R=pt.trackId,$=pt.pts,ie=pt.dts,M.push(pt))},M.on("data",function(pt){var at={trackId:R,pts:$,dts:ie,data:pt,nalUnitTypeCode:31&pt[0]};switch(at.nalUnitTypeCode){case 5:at.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:at.nalUnitType="sei_rbsp",at.escapedRBSP=de(pt.subarray(1));break;case 7:at.nalUnitType="seq_parameter_set_rbsp",at.escapedRBSP=de(pt.subarray(1)),at.config=Ve(at.escapedRBSP);break;case 8:at.nalUnitType="pic_parameter_set_rbsp";break;case 9:at.nalUnitType="access_unit_delimiter_rbsp"}U.trigger("data",at)}),M.on("done",function(){U.trigger("done")}),M.on("partialdone",function(){U.trigger("partialdone")}),M.on("reset",function(){U.trigger("reset")}),M.on("endedtimeline",function(){U.trigger("endedtimeline")}),this.flush=function(){M.flush()},this.partialFlush=function(){M.partialFlush()},this.reset=function(){M.reset()},this.endTimeline=function(){M.endTimeline()},nt=function(at,mt){var t,i=8,e=8;for(t=0;t<at;t++)0!==e&&(e=(i+mt.readExpGolomb()+256)%256),i=0===e?i:e},de=function(at){for(var t,c,mt=at.byteLength,i=[],e=1;e<mt-2;)0===at[e]&&0===at[e+1]&&3===at[e+2]?(i.push(e+2),e+=2):e++;if(0===i.length)return at;t=mt-i.length,c=new Uint8Array(t);var f=0;for(e=0;e<t;f++,e++)f===i[0]&&(f++,i.shift()),c[e]=at[f];return c},Ve=function(at){var c,f,y,S,L,J,ue,Me,it,Pt,Xt,or,mt=0,i=0,e=0,t=0,bn=[1,1];if(f=(c=new Gm(at)).readUnsignedByte(),S=c.readUnsignedByte(),y=c.readUnsignedByte(),c.skipUnsignedExpGolomb(),zm[f]&&(3===(L=c.readUnsignedExpGolomb())&&c.skipBits(1),c.skipUnsignedExpGolomb(),c.skipUnsignedExpGolomb(),c.skipBits(1),c.readBoolean()))for(Xt=3!==L?8:12,or=0;or<Xt;or++)c.readBoolean()&&nt(or<6?16:64,c);if(c.skipUnsignedExpGolomb(),0===(J=c.readUnsignedExpGolomb()))c.readUnsignedExpGolomb();else if(1===J)for(c.skipBits(1),c.skipExpGolomb(),c.skipExpGolomb(),ue=c.readUnsignedExpGolomb(),or=0;or<ue;or++)c.skipExpGolomb();if(c.skipUnsignedExpGolomb(),c.skipBits(1),Me=c.readUnsignedExpGolomb(),it=c.readUnsignedExpGolomb(),0===(Pt=c.readBits(1))&&c.skipBits(1),c.skipBits(1),c.readBoolean()&&(mt=c.readUnsignedExpGolomb(),i=c.readUnsignedExpGolomb(),e=c.readUnsignedExpGolomb(),t=c.readUnsignedExpGolomb()),c.readBoolean()&&c.readBoolean())switch(c.readUnsignedByte()){case 1:bn=[1,1];break;case 2:bn=[12,11];break;case 3:bn=[10,11];break;case 4:bn=[16,11];break;case 5:bn=[40,33];break;case 6:bn=[24,11];break;case 7:bn=[20,11];break;case 8:bn=[32,11];break;case 9:bn=[80,33];break;case 10:bn=[18,11];break;case 11:bn=[15,11];break;case 12:bn=[64,33];break;case 13:bn=[160,99];break;case 14:bn=[4,3];break;case 15:bn=[3,2];break;case 16:bn=[2,1];break;case 255:bn=[c.readUnsignedByte()<<8|c.readUnsignedByte(),c.readUnsignedByte()<<8|c.readUnsignedByte()]}return{profileIdc:f,levelIdc:y,profileCompatibility:S,width:16*(Me+1)-2*mt-2*i,height:(2-Pt)*(it+1)*16-2*e-2*t,sarRatio:bn}}},Tc.prototype=new u;var Ag,mp={H264Stream:Tc,NalByteStream:gh},j0=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],U0=function(M,U){var R=M[U+6]<<21|M[U+7]<<14|M[U+8]<<7|M[U+9];return R=R>=0?R:0,(16&M[U+5])>>4?R+20:R+10},B0=function we(M,U){return M.length-U<10||M[U]!=="I".charCodeAt(0)||M[U+1]!=="D".charCodeAt(0)||M[U+2]!=="3".charCodeAt(0)?U:we(M,U+=U0(M,U))},b_=function(M){return M[0]<<21|M[1]<<14|M[2]<<7|M[3]},Po=function(M,U,R){return unescape(function(M,U,R){var $,ie="";for($=U;$<R;$++)ie+="%"+("00"+M[$].toString(16)).slice(-2);return ie}(M,U,R))},Dg={isLikelyAacData:function(M){var U=B0(M,0);return M.length>=U+2&&255==(255&M[U])&&240==(240&M[U+1])&&16==(22&M[U+1])},parseId3TagSize:U0,parseAdtsSize:function(M,U){return 6144&M[U+3]|M[U+4]<<3|(224&M[U+5])>>5},parseType:function(M,U){return M[U]==="I".charCodeAt(0)&&M[U+1]==="D".charCodeAt(0)&&M[U+2]==="3".charCodeAt(0)?"timed-metadata":!0&M[U]&&240==(240&M[U+1])?"audio":null},parseSampleRate:function(M){for(var U=0;U+5<M.length;){if(255===M[U]&&240==(246&M[U+1]))return j0[(60&M[U+2])>>>2];U++}return null},parseAacTimestamp:function(M){var U,R,$;U=10,64&M[5]&&(U+=4,U+=b_(M.subarray(10,14)));do{if((R=b_(M.subarray(U+4,U+8)))<1)return null;if("PRIV"===String.fromCharCode(M[U],M[U+1],M[U+2],M[U+3])){$=M.subarray(U+10,U+R+10);for(var de=0;de<$.byteLength;de++)if(0===$[de]){if("com.apple.streaming.transportStreamTimestamp"===Po($,0,de)){var nt=$.subarray(de+1),pt=(1&nt[3])<<30|nt[4]<<22|nt[5]<<14|nt[6]<<6|nt[7]>>>2;return(pt*=4)+(3&nt[7])}break}}U+=10,U+=R}while(U<M.byteLength);return null}};Ag=function(){var M=new Uint8Array,U=0;Ag.prototype.init.call(this),this.setTimestamp=function(R){U=R},this.push=function(R){var Ve,nt,pt,$=0,ie=0;for(M.length?(pt=M.length,(M=new Uint8Array(R.byteLength+pt)).set(M.subarray(0,pt)),M.set(R,pt)):M=R;M.length-ie>=3;)if(M[ie]!=="I".charCodeAt(0)||M[ie+1]!=="D".charCodeAt(0)||M[ie+2]!=="3".charCodeAt(0))if(255!=(255&M[ie])||240!=(240&M[ie+1]))ie++;else{if(M.length-ie<7||ie+($=Dg.parseAdtsSize(M,ie))>M.length)break;nt={type:"audio",data:M.subarray(ie,ie+$),pts:U,dts:U},this.trigger("data",nt),ie+=$}else{if(M.length-ie<10||ie+($=Dg.parseId3TagSize(M,ie))>M.length)break;Ve={type:"timed-metadata",data:M.subarray(ie,ie+$)},this.trigger("data",Ve),ie+=$}M=M.length-ie>0?M.subarray(ie):new Uint8Array},this.reset=function(){M=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){M=new Uint8Array,this.trigger("endedtimeline")}},Ag.prototype=new u;var yp,vh,dl,Cf,Nd=Ag,sy=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Wm=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],b0=mp.H264Stream,oy=Dg.isLikelyAacData,_p=function(M,U){U.stream=M,this.trigger("log",U)},Il=function(M,U){for(var R=Object.keys(U),$=0;$<R.length;$++){var ie=R[$];"headOfPipeline"===ie||!U[ie].on||U[ie].on("log",_p.bind(M,ie))}},Ec=function(M,U){var R;if(M.length!==U.length)return!1;for(R=0;R<M.length;R++)if(M[R]!==U[R])return!1;return!0},xl=function(M,U,R,$,ie,de){return{start:{dts:M,pts:M+(R-U)},end:{dts:M+($-U),pts:M+(ie-R)},prependedContentDuration:de,baseMediaDecodeTime:M}};vh=function(M,U){var $,R=[],ie=0,de=0,Ve=1/0;$=(U=U||{}).firstSequenceNumber||0,vh.prototype.init.call(this),this.push=function(nt){Sl_collectDtsInfo(M,nt),M&&sy.forEach(function(pt){M[pt]=nt[pt]}),R.push(nt)},this.setEarliestDts=function(nt){ie=nt},this.setVideoBaseMediaDecodeTime=function(nt){Ve=nt},this.setAudioAppendStart=function(nt){de=nt},this.flush=function(){var nt,pt,at,mt,i,e,t;0!==R.length?(nt=function(M,U,R){return U.minSegmentDts>=R?M:(U.minSegmentDts=1/0,M.filter(function($){return $.dts>=R&&(U.minSegmentDts=Math.min(U.minSegmentDts,$.dts),U.minSegmentPts=U.minSegmentDts,!0)}))}(R,M,ie),M.baseMediaDecodeTime=Sl_calculateTrackBaseMediaDecodeTime(M,U.keepOriginalTimestamps),t=Tg_prefixWithSilence(M,nt,de,Ve),M.samples=function(M){var U,$=[];for(U=0;U<M.length;U++)$.push({size:M[U].data.byteLength,duration:1024});return $}(nt),at=ro_mdat(function(M){var U,R,$=0,ie=new Uint8Array(function(M){var U,$=0;for(U=0;U<M.length;U++)$+=M[U].data.byteLength;return $}(M));for(U=0;U<M.length;U++)ie.set((R=M[U]).data,$),$+=R.data.byteLength;return ie}(nt)),R=[],pt=ro_moof($,[M]),mt=new Uint8Array(pt.byteLength+at.byteLength),$++,mt.set(pt),mt.set(at,pt.byteLength),Sl_clearDtsInfo(M),i=Math.ceil(9216e4/M.samplerate),nt.length&&(e=nt.length*i,this.trigger("segmentTimingInfo",xl(gs_audioTsToVideoTs(M.baseMediaDecodeTime,M.samplerate),nt[0].dts,nt[0].pts,nt[0].dts+e,nt[0].pts+e,t||0)),this.trigger("timingInfo",{start:nt[0].pts,end:nt[0].pts+e})),this.trigger("data",{track:M,boxes:mt}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){Sl_clearDtsInfo(M),R=[],this.trigger("reset")}},vh.prototype=new u,yp=function(M,U){var R,de,Ve,$=[],ie=[];R=(U=U||{}).firstSequenceNumber||0,yp.prototype.init.call(this),delete M.minPTS,this.gopCache_=[],this.push=function(nt){Sl_collectDtsInfo(M,nt),"seq_parameter_set_rbsp"===nt.nalUnitType&&!de&&(de=nt.config,M.sps=[nt.data],Wm.forEach(function(pt){M[pt]=de[pt]},this)),"pic_parameter_set_rbsp"===nt.nalUnitType&&!Ve&&(Ve=nt.data,M.pps=[nt.data]),$.push(nt)},this.flush=function(){for(var nt,pt,at,mt,i,e,c,f,t=0;$.length&&"access_unit_delimiter_rbsp"!==$[0].nalUnitType;)$.shift();if(0===$.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(nt=function(M){var U,R,$=[],ie=[];for(ie.byteLength=0,ie.nalCount=0,ie.duration=0,$.byteLength=0,U=0;U<M.length;U++)"access_unit_delimiter_rbsp"===(R=M[U]).nalUnitType?($.length&&($.duration=R.dts-$.dts,ie.byteLength+=$.byteLength,ie.nalCount+=$.length,ie.duration+=$.duration,ie.push($)),($=[R]).byteLength=R.data.byteLength,$.pts=R.pts,$.dts=R.dts):("slice_layer_without_partitioning_rbsp_idr"===R.nalUnitType&&($.keyFrame=!0),$.duration=R.dts-$.dts,$.byteLength+=R.data.byteLength,$.push(R));return ie.length&&(!$.duration||$.duration<=0)&&($.duration=ie[ie.length-1].duration),ie.byteLength+=$.byteLength,ie.nalCount+=$.length,ie.duration+=$.duration,ie.push($),ie}($),(at=function(M){var U,R,$=[],ie=[];for($.byteLength=0,$.nalCount=0,$.duration=0,$.pts=M[0].pts,$.dts=M[0].dts,ie.byteLength=0,ie.nalCount=0,ie.duration=0,ie.pts=M[0].pts,ie.dts=M[0].dts,U=0;U<M.length;U++)(R=M[U]).keyFrame?($.length&&(ie.push($),ie.byteLength+=$.byteLength,ie.nalCount+=$.nalCount,ie.duration+=$.duration),($=[R]).nalCount=R.length,$.byteLength=R.byteLength,$.pts=R.pts,$.dts=R.dts,$.duration=R.duration):($.duration+=R.duration,$.nalCount+=R.length,$.byteLength+=R.byteLength,$.push(R));return ie.length&&$.duration<=0&&($.duration=ie[ie.length-1].duration),ie.byteLength+=$.byteLength,ie.nalCount+=$.nalCount,ie.duration+=$.duration,ie.push($),ie}(nt))[0][0].keyFrame||((pt=this.getGopForFusion_($[0],M))?(t=pt.duration,at.unshift(pt),at.byteLength+=pt.byteLength,at.nalCount+=pt.nalCount,at.pts=pt.pts,at.dts=pt.dts,at.duration+=pt.duration):at=function(M){var U;return!M[0][0].keyFrame&&M.length>1&&(U=M.shift(),M.byteLength-=U.byteLength,M.nalCount-=U.nalCount,M[0][0].dts=U.dts,M[0][0].pts=U.pts,M[0][0].duration+=U.duration),M}(at)),ie.length){var y;if(!(y=U.alignGopsAtEnd?this.alignGopsAtEnd_(at):this.alignGopsAtStart_(at)))return this.gopCache_.unshift({gop:at.pop(),pps:M.pps,sps:M.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),$=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Sl_clearDtsInfo(M),at=y}Sl_collectDtsInfo(M,at),M.samples=function(M,U){var R,$,ie,de,nt=U||0,pt=[];for(R=0;R<M.length;R++)for(de=M[R],$=0;$<de.length;$++)nt+=(ie=Qv(de[$],nt)).size,pt.push(ie);return pt}(at),i=ro_mdat(function(M){var U,R,$,ie,de,Ve,nt=0,i=new Uint8Array(M.byteLength+4*M.nalCount),e=new DataView(i.buffer);for(U=0;U<M.length;U++)for(ie=M[U],R=0;R<ie.length;R++)for(de=ie[R],$=0;$<de.length;$++)e.setUint32(nt,(Ve=de[$]).data.byteLength),i.set(Ve.data,nt+=4),nt+=Ve.data.byteLength;return i}(at)),M.baseMediaDecodeTime=Sl_calculateTrackBaseMediaDecodeTime(M,U.keepOriginalTimestamps),this.trigger("processedGopsInfo",at.map(function(S){return{pts:S.pts,dts:S.dts,byteLength:S.byteLength}})),this.trigger("segmentTimingInfo",xl(M.baseMediaDecodeTime,(c=at[0]).dts,c.pts,(f=at[at.length-1]).dts+f.duration,f.pts+f.duration,t)),this.trigger("timingInfo",{start:at[0].pts,end:at[at.length-1].pts+at[at.length-1].duration}),this.gopCache_.unshift({gop:at.pop(),pps:M.pps,sps:M.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),$=[],this.trigger("baseMediaDecodeTime",M.baseMediaDecodeTime),this.trigger("timelineStartInfo",M.timelineStartInfo),mt=ro_moof(R,[M]),e=new Uint8Array(mt.byteLength+i.byteLength),R++,e.set(mt),e.set(i,mt.byteLength),this.trigger("data",{track:M,boxes:e}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),$=[],this.gopCache_.length=0,ie.length=0,this.trigger("reset")},this.resetStream_=function(){Sl_clearDtsInfo(M),de=void 0,Ve=void 0},this.getGopForFusion_=function(nt){var i,e,t,c,f,mt=1/0;for(f=0;f<this.gopCache_.length;f++)t=(c=this.gopCache_[f]).gop,M.pps&&Ec(M.pps[0],c.pps[0])&&M.sps&&Ec(M.sps[0],c.sps[0])&&(t.dts<M.timelineStartInfo.dts||(i=nt.dts-t.dts-t.duration)>=-1e4&&i<=45e3&&(!e||mt>i)&&(e=c,mt=i));return e?e.gop:null},this.alignGopsAtStart_=function(nt){var pt,at,mt,i,e,t,c,f;for(e=nt.byteLength,t=nt.nalCount,c=nt.duration,pt=at=0;pt<ie.length&&at<nt.length&&(mt=ie[pt]).pts!==(i=nt[at]).pts;)i.pts>mt.pts?pt++:(at++,e-=i.byteLength,t-=i.nalCount,c-=i.duration);return 0===at?nt:at===nt.length?null:((f=nt.slice(at)).byteLength=e,f.duration=c,f.nalCount=t,f.pts=f[0].pts,f.dts=f[0].dts,f)},this.alignGopsAtEnd_=function(nt){var pt,at,mt,i,e,t,c;for(pt=ie.length-1,at=nt.length-1,e=null,t=!1;pt>=0&&at>=0;){if((mt=ie[pt]).pts===(i=nt[at]).pts){t=!0;break}mt.pts>i.pts?pt--:(pt===ie.length-1&&(e=at),at--)}if(!t&&null===e)return null;if(0===(c=t?at:e))return nt;var f=nt.slice(c),y=f.reduce(function(S,L){return S.byteLength+=L.byteLength,S.duration+=L.duration,S.nalCount+=L.nalCount,S},{byteLength:0,duration:0,nalCount:0});return f.byteLength=y.byteLength,f.duration=y.duration,f.nalCount=y.nalCount,f.pts=f[0].pts,f.dts=f[0].dts,f},this.alignGopsWith=function(nt){ie=nt}},yp.prototype=new u,Cf=function(M,U){this.numberOfTracks=0,this.metadataStream=U,this.remuxTracks=!(typeof(M=M||{}).remux<"u"&&!M.remux),this.keepOriginalTimestamps="boolean"==typeof M.keepOriginalTimestamps&&M.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Cf.prototype.init.call(this),this.push=function(R){return R.text?this.pendingCaptions.push(R):R.frames?this.pendingMetadata.push(R):(this.pendingTracks.push(R.track),this.pendingBytes+=R.boxes.byteLength,"video"===R.track.type&&(this.videoTrack=R.track,this.pendingBoxes.push(R.boxes)),void("audio"===R.track.type&&(this.audioTrack=R.track,this.pendingBoxes.unshift(R.boxes))))}},Cf.prototype=new u,Cf.prototype.flush=function(we){var R,$,ie,Ve,M=0,U={captions:[],captionStreams:{},metadata:[],info:{}},de=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==we&&"AudioSegmentStream"!==we)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(de=this.videoTrack.timelineStartInfo.pts,Wm.forEach(function(nt){U.info[nt]=this.videoTrack[nt]},this)):this.audioTrack&&(de=this.audioTrack.timelineStartInfo.pts,sy.forEach(function(nt){U.info[nt]=this.audioTrack[nt]},this)),this.videoTrack||this.audioTrack){for(U.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,ie=function(M){var $,U=A(),R=je(M);return($=new Uint8Array(U.byteLength+R.byteLength)).set(U),$.set(R,U.byteLength),$}(this.pendingTracks),U.initSegment=new Uint8Array(ie.byteLength),U.initSegment.set(ie),U.data=new Uint8Array(this.pendingBytes),Ve=0;Ve<this.pendingBoxes.length;Ve++)U.data.set(this.pendingBoxes[Ve],M),M+=this.pendingBoxes[Ve].byteLength;for(Ve=0;Ve<this.pendingCaptions.length;Ve++)(R=this.pendingCaptions[Ve]).startTime=gs_metadataTsToSeconds(R.startPts,de,this.keepOriginalTimestamps),R.endTime=gs_metadataTsToSeconds(R.endPts,de,this.keepOriginalTimestamps),U.captionStreams[R.stream]=!0,U.captions.push(R);for(Ve=0;Ve<this.pendingMetadata.length;Ve++)($=this.pendingMetadata[Ve]).cueTime=gs_metadataTsToSeconds($.pts,de,this.keepOriginalTimestamps),U.metadata.push($);for(U.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",U),Ve=0;Ve<U.captions.length;Ve++)this.trigger("caption",R=U.captions[Ve]);for(Ve=0;Ve<U.metadata.length;Ve++)this.trigger("id3Frame",$=U.metadata[Ve])}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Cf.prototype.setRemux=function(we){this.remuxTracks=we},dl=function(M){var $,ie,U=this,R=!0;dl.prototype.init.call(this),this.baseMediaDecodeTime=(M=M||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var de={};this.transmuxPipeline_=de,de.type="aac",de.metadataStream=new Cl.MetadataStream,de.aacStream=new Nd,de.audioTimestampRolloverStream=new Cl.TimestampRolloverStream("audio"),de.timedMetadataTimestampRolloverStream=new Cl.TimestampRolloverStream("timed-metadata"),de.adtsStream=new ry,de.coalesceStream=new Cf(M,de.metadataStream),de.headOfPipeline=de.aacStream,de.aacStream.pipe(de.audioTimestampRolloverStream).pipe(de.adtsStream),de.aacStream.pipe(de.timedMetadataTimestampRolloverStream).pipe(de.metadataStream).pipe(de.coalesceStream),de.metadataStream.on("timestamp",function(Ve){de.aacStream.setTimestamp(Ve.timeStamp)}),de.aacStream.on("data",function(Ve){"timed-metadata"!==Ve.type&&"audio"!==Ve.type||de.audioSegmentStream||(ie=ie||{timelineStartInfo:{baseMediaDecodeTime:U.baseMediaDecodeTime},codec:"adts",type:"audio"},de.coalesceStream.numberOfTracks++,de.audioSegmentStream=new vh(ie,M),de.audioSegmentStream.on("log",U.getLogTrigger_("audioSegmentStream")),de.audioSegmentStream.on("timingInfo",U.trigger.bind(U,"audioTimingInfo")),de.adtsStream.pipe(de.audioSegmentStream).pipe(de.coalesceStream),U.trigger("trackinfo",{hasAudio:!!ie,hasVideo:!!$}))}),de.coalesceStream.on("data",this.trigger.bind(this,"data")),de.coalesceStream.on("done",this.trigger.bind(this,"done")),Il(this,de)},this.setupTsPipeline=function(){var de={};this.transmuxPipeline_=de,de.type="ts",de.metadataStream=new Cl.MetadataStream,de.packetStream=new Cl.TransportPacketStream,de.parseStream=new Cl.TransportParseStream,de.elementaryStream=new Cl.ElementaryStream,de.timestampRolloverStream=new Cl.TimestampRolloverStream,de.adtsStream=new ry,de.h264Stream=new b0,de.captionStream=new Cl.CaptionStream(M),de.coalesceStream=new Cf(M,de.metadataStream),de.headOfPipeline=de.packetStream,de.packetStream.pipe(de.parseStream).pipe(de.elementaryStream).pipe(de.timestampRolloverStream),de.timestampRolloverStream.pipe(de.h264Stream),de.timestampRolloverStream.pipe(de.adtsStream),de.timestampRolloverStream.pipe(de.metadataStream).pipe(de.coalesceStream),de.h264Stream.pipe(de.captionStream).pipe(de.coalesceStream),de.elementaryStream.on("data",function(Ve){var nt;if("metadata"===Ve.type){for(nt=Ve.tracks.length;nt--;)$||"video"!==Ve.tracks[nt].type?!ie&&"audio"===Ve.tracks[nt].type&&((ie=Ve.tracks[nt]).timelineStartInfo.baseMediaDecodeTime=U.baseMediaDecodeTime):($=Ve.tracks[nt]).timelineStartInfo.baseMediaDecodeTime=U.baseMediaDecodeTime;$&&!de.videoSegmentStream&&(de.coalesceStream.numberOfTracks++,de.videoSegmentStream=new yp($,M),de.videoSegmentStream.on("log",U.getLogTrigger_("videoSegmentStream")),de.videoSegmentStream.on("timelineStartInfo",function(pt){ie&&!M.keepOriginalTimestamps&&(ie.timelineStartInfo=pt,de.audioSegmentStream.setEarliestDts(pt.dts-U.baseMediaDecodeTime))}),de.videoSegmentStream.on("processedGopsInfo",U.trigger.bind(U,"gopInfo")),de.videoSegmentStream.on("segmentTimingInfo",U.trigger.bind(U,"videoSegmentTimingInfo")),de.videoSegmentStream.on("baseMediaDecodeTime",function(pt){ie&&de.audioSegmentStream.setVideoBaseMediaDecodeTime(pt)}),de.videoSegmentStream.on("timingInfo",U.trigger.bind(U,"videoTimingInfo")),de.h264Stream.pipe(de.videoSegmentStream).pipe(de.coalesceStream)),ie&&!de.audioSegmentStream&&(de.coalesceStream.numberOfTracks++,de.audioSegmentStream=new vh(ie,M),de.audioSegmentStream.on("log",U.getLogTrigger_("audioSegmentStream")),de.audioSegmentStream.on("timingInfo",U.trigger.bind(U,"audioTimingInfo")),de.audioSegmentStream.on("segmentTimingInfo",U.trigger.bind(U,"audioSegmentTimingInfo")),de.adtsStream.pipe(de.audioSegmentStream).pipe(de.coalesceStream)),U.trigger("trackinfo",{hasAudio:!!ie,hasVideo:!!$})}}),de.coalesceStream.on("data",this.trigger.bind(this,"data")),de.coalesceStream.on("id3Frame",function(Ve){Ve.dispatchType=de.metadataStream.dispatchType,U.trigger("id3Frame",Ve)}),de.coalesceStream.on("caption",this.trigger.bind(this,"caption")),de.coalesceStream.on("done",this.trigger.bind(this,"done")),Il(this,de)},this.setBaseMediaDecodeTime=function(de){var Ve=this.transmuxPipeline_;M.keepOriginalTimestamps||(this.baseMediaDecodeTime=de),ie&&(ie.timelineStartInfo.dts=void 0,ie.timelineStartInfo.pts=void 0,Sl_clearDtsInfo(ie),Ve.audioTimestampRolloverStream&&Ve.audioTimestampRolloverStream.discontinuity()),$&&(Ve.videoSegmentStream&&(Ve.videoSegmentStream.gopCache_=[]),$.timelineStartInfo.dts=void 0,$.timelineStartInfo.pts=void 0,Sl_clearDtsInfo($),Ve.captionStream.reset()),Ve.timestampRolloverStream&&Ve.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(de){ie&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(de)},this.setRemux=function(de){var Ve=this.transmuxPipeline_;M.remux=de,Ve&&Ve.coalesceStream&&Ve.coalesceStream.setRemux(de)},this.alignGopsWith=function(de){$&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(de)},this.getLogTrigger_=function(de){var Ve=this;return function(nt){nt.stream=de,Ve.trigger("log",nt)}},this.push=function(de){if(R){var Ve=oy(de);Ve&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():!Ve&&"ts"!==this.transmuxPipeline_.type&&this.setupTsPipeline(),R=!1}this.transmuxPipeline_.headOfPipeline.push(de)},this.flush=function(){R=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},dl.prototype=new u;var Pg,vy,Ld,E_={Transmuxer:dl,VideoSegmentStream:yp,AudioSegmentStream:vh,AUDIO_PROPERTIES:sy,VIDEO_PROPERTIES:Wm,generateSegmentTimingInfo:xl},qm_toUnsigned=function(M){return M>>>0},bp=function(M){var U="";return U+=String.fromCharCode(M[0]),U+=String.fromCharCode(M[1]),(U+=String.fromCharCode(M[2]))+String.fromCharCode(M[3])},w_=qm_toUnsigned,Oo=function we(M,U){var $,ie,de,Ve,nt,R=[];if(!U.length)return null;for($=0;$<M.byteLength;)ie=w_(M[$]<<24|M[$+1]<<16|M[$+2]<<8|M[$+3]),de=bp(M.subarray($+4,$+8)),Ve=ie>1?$+ie:M.byteLength,de===U[0]&&(1===U.length?R.push(M.subarray($+8,Ve)):(nt=we(M.subarray($+8,Ve),U.slice(1))).length&&(R=R.concat(nt))),$=Ve;return R},C_=qm_toUnsigned,S0=n.getUint64,Ql=function(M){return{isLeading:(12&M[0])>>>2,dependsOn:3&M[0],isDependedOn:(192&M[1])>>>6,hasRedundancy:(48&M[1])>>>4,paddingValue:(14&M[1])>>>1,isNonSyncSample:1&M[1],degradationPriority:M[2]<<8|M[3]}},x_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},If=typeof window<"u"?window:typeof x_<"u"?x_:typeof self<"u"?self:{},dy=function(M){for(var ie,de,U=M.byteLength,R=[],$=1;$<U-2;)0===M[$]&&0===M[$+1]&&3===M[$+2]?(R.push($+2),$+=2):$++;if(0===R.length)return M;ie=U-R.length,de=new Uint8Array(ie);var Ve=0;for($=0;$<ie;Ve++,$++)Ve===R[0]&&(Ve++,R.shift()),de[$]=M[Ve];return de},D_=yf.CaptionStream,hy=function(M,U){for(var R=M,$=0;$<U.length;$++){var ie=U[$];if(R<ie.size)return ie;R-=ie.size}return null},Zm=function(M,U){var R=Oo(M,["moof","traf"]),$=Oo(M,["mdat"]),ie={},de=[];return $.forEach(function(Ve,nt){de.push({mdat:Ve,traf:R[nt]})}),de.forEach(function(Ve){var f,y,nt=Ve.mdat,pt=Ve.traf,mt=function(M){var mt,U=new DataView(M.buffer,M.byteOffset,M.byteLength),R={version:M[0],flags:new Uint8Array(M.subarray(1,4)),trackId:U.getUint32(4)},$=1&R.flags[2],ie=2&R.flags[2],de=8&R.flags[2],Ve=16&R.flags[2],nt=32&R.flags[2],pt=65536&R.flags[0],at=131072&R.flags[0];return mt=8,$&&(mt+=4,R.baseDataOffset=U.getUint32(12),mt+=4),ie&&(R.sampleDescriptionIndex=U.getUint32(mt),mt+=4),de&&(R.defaultSampleDuration=U.getUint32(mt),mt+=4),Ve&&(R.defaultSampleSize=U.getUint32(mt),mt+=4),nt&&(R.defaultSampleFlags=U.getUint32(mt)),pt&&(R.durationIsEmpty=!0),!$&&at&&(R.baseDataOffsetIsMoof=!0),R}(Oo(pt,["tfhd"])[0]),i=mt.trackId,e=Oo(pt,["tfdt"]),t=e.length>0?function(M){var U={version:M[0],flags:new Uint8Array(M.subarray(1,4))};return U.baseMediaDecodeTime=1===U.version?S0(M.subarray(4)):C_(M[4]<<24|M[5]<<16|M[6]<<8|M[7]),U}(e[0]).baseMediaDecodeTime:0,c=Oo(pt,["trun"]);U===i&&c.length>0&&(f=function(M,U,R){var $=U,ie=R.defaultSampleDuration||0,de=R.defaultSampleSize||0,Ve=R.trackId,nt=[];return M.forEach(function(pt){var mt=function(M){var i,U={version:M[0],flags:new Uint8Array(M.subarray(1,4)),samples:[]},R=new DataView(M.buffer,M.byteOffset,M.byteLength),$=1&U.flags[2],ie=4&U.flags[2],de=1&U.flags[1],Ve=2&U.flags[1],nt=4&U.flags[1],pt=8&U.flags[1],at=R.getUint32(4),mt=8;for($&&(U.dataOffset=R.getInt32(mt),mt+=4),ie&&at&&(i={flags:Ql(M.subarray(mt,mt+4))},mt+=4,de&&(i.duration=R.getUint32(mt),mt+=4),Ve&&(i.size=R.getUint32(mt),mt+=4),pt&&(i.compositionTimeOffset=1===U.version?R.getInt32(mt):R.getUint32(mt),mt+=4),U.samples.push(i),at--);at--;)i={},de&&(i.duration=R.getUint32(mt),mt+=4),Ve&&(i.size=R.getUint32(mt),mt+=4),nt&&(i.flags=Ql(M.subarray(mt,mt+4)),mt+=4),pt&&(i.compositionTimeOffset=1===U.version?R.getInt32(mt):R.getUint32(mt),mt+=4),U.samples.push(i);return U}(pt).samples;mt.forEach(function(i){void 0===i.duration&&(i.duration=ie),void 0===i.size&&(i.size=de),i.trackId=Ve,i.dts=$,void 0===i.compositionTimeOffset&&(i.compositionTimeOffset=0),"bigint"==typeof $?(i.pts=$+If.BigInt(i.compositionTimeOffset),$+=If.BigInt(i.duration)):(i.pts=$+i.compositionTimeOffset,$+=i.duration)}),nt=nt.concat(mt)}),nt}(c,t,mt),y=function(M,U,R){var de,Ve,nt,pt,$=new DataView(M.buffer,M.byteOffset,M.byteLength),ie={logs:[],seiNals:[]};for(Ve=0;Ve+4<M.length;Ve+=nt)if(nt=$.getUint32(Ve),Ve+=4,!(nt<=0))switch(31&M[Ve]){case 6:var at=M.subarray(Ve+1,Ve+1+nt),mt=hy(Ve,U);if(de={nalUnitType:"sei_rbsp",size:nt,data:at,escapedRBSP:dy(at),trackId:R},mt)de.pts=mt.pts,de.dts=mt.dts,pt=mt;else{if(!pt){ie.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+Ve+" for trackId "+R+". See mux.js#223."});break}de.pts=pt.pts,de.dts=pt.dts}ie.seiNals.push(de)}return ie}(nt,f,i),ie[i]||(ie[i]={seiNals:[],logs:[]}),ie[i].seiNals=ie[i].seiNals.concat(y.seiNals),ie[i].logs=ie[i].logs.concat(y.logs))}),ie},Tp=function(){var U,R,$,ie,de,Ve,M=!1;this.isInitialized=function(){return M},this.init=function(nt){U=new D_,M=!0,Ve=!!nt&&nt.isPartial,U.on("data",function(pt){pt.startTime=pt.startPts/ie,pt.endTime=pt.endPts/ie,de.captions.push(pt),de.captionStreams[pt.stream]=!0}),U.on("log",function(pt){de.logs.push(pt)})},this.isNewInit=function(nt,pt){return!(nt&&0===nt.length||pt&&"object"==typeof pt&&0===Object.keys(pt).length||$===nt[0]&&ie===pt[$])},this.parse=function(nt,pt,at){var mt;if(!this.isInitialized())return null;if(!pt||!at)return null;if(this.isNewInit(pt,at))ie=at[$=pt[0]];else if(null===$||!ie)return R.push(nt),null;for(;R.length>0;){var i=R.shift();this.parse(i,pt,at)}return mt=function(M,U,R){if(null===U)return null;var ie=Zm(M,U)[U]||{};return{seiNals:ie.seiNals,logs:ie.logs,timescale:R}}(nt,$,ie),mt&&mt.logs&&(de.logs=de.logs.concat(mt.logs)),null!==mt&&mt.seiNals?(this.pushNals(mt.seiNals),this.flushStream(),de):de.logs.length?{logs:de.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(nt){if(!this.isInitialized()||!nt||0===nt.length)return null;nt.forEach(function(pt){U.push(pt)})},this.flushStream=function(){if(!this.isInitialized())return null;Ve?U.partialFlush():U.flush()},this.clearParsedCaptions=function(){de.captions=[],de.captionStreams={},de.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;U.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){R=[],$=null,ie=null,de?this.clearParsedCaptions():de={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Ep=qm_toUnsigned,kg=function(M){return("00"+M.toString(16)).slice(-2)},C0=n.getUint64;Pg=function(M,U){var $=Oo(U,["moof","traf"]).reduce(function(ie,de){var i,e,Ve=Oo(de,["tfhd"])[0],nt=Ep(Ve[4]<<24|Ve[5]<<16|Ve[6]<<8|Ve[7]),pt=M[nt]||9e4,at=Oo(de,["tfdt"])[0],mt=new DataView(at.buffer,at.byteOffset,at.byteLength);return"bigint"==typeof(i=1===at[0]?C0(at.subarray(4,12)):mt.getUint32(4))?e=i/If.BigInt(pt):"number"==typeof i&&!isNaN(i)&&(e=i/pt),e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e<ie&&(ie=e),ie},1/0);return"bigint"==typeof $||isFinite($)?$:0},Ld=function(M){var R=0===M[0]?12:20;return Ep(M[R]<<24|M[R+1]<<16|M[R+2]<<8|M[R+3])},vy=function(M){var U=Oo(M,["moov","trak"]),R=[];return U.forEach(function($){var Ve,nt,ie={},de=Oo($,["tkhd"])[0];de&&(nt=(Ve=new DataView(de.buffer,de.byteOffset,de.byteLength)).getUint8(0),ie.id=Ve.getUint32(0===nt?12:20));var pt=Oo($,["mdia","hdlr"])[0];if(pt){var at=bp(pt.subarray(8,12));ie.type="vide"===at?"video":"soun"===at?"audio":at}var mt=Oo($,["mdia","minf","stbl","stsd"])[0];if(mt){var i=mt.subarray(8);ie.codec=bp(i.subarray(4,8));var t,e=Oo(i,[ie.codec])[0];e&&(/^[asm]vc[1-9]$/i.test(ie.codec)?(t=e.subarray(78),"avcC"===bp(t.subarray(4,8))&&t.length>11?(ie.codec+=".",ie.codec+=kg(t[9]),ie.codec+=kg(t[10]),ie.codec+=kg(t[11])):ie.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(ie.codec)?(t=e.subarray(28),"esds"===bp(t.subarray(4,8))&&t.length>20&&0!==t[19]?(ie.codec+="."+kg(t[19]),ie.codec+="."+kg(t[20]>>>2&63).replace(/^0/,"")):ie.codec="mp4a.40.2"):ie.codec=ie.codec.toLowerCase())}var f=Oo($,["mdia","mdhd"])[0];f&&(ie.timescale=Ld(f)),R.push(ie)}),R};var Dl_startTime=Pg,Dl_tracks=vy,ju=function(M){var U=31&M[1];return(U<<=8)|M[2]},Og=function(M){return!!(64&M[1])},Rg=function(M){var U=0;return(48&M[3])>>>4>1&&(U+=M[4]+1),U},Fd=function(M){switch(M){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Ym={parseType:function(M,U){var R=ju(M);return 0===R?"pat":R===U?"pmt":U?"pes":null},parsePat:function(M){var U=Og(M),R=4+Rg(M);return U&&(R+=M[R]+1),(31&M[R+10])<<8|M[R+11]},parsePmt:function(M){var U={},R=Og(M),$=4+Rg(M);if(R&&($+=M[$]+1),1&M[$+5]){var de;de=3+((15&M[$+1])<<8|M[$+2])-4;for(var nt=12+((15&M[$+10])<<8|M[$+11]);nt<de;){var pt=$+nt;U[(31&M[pt+1])<<8|M[pt+2]]=M[pt],nt+=5+((15&M[pt+3])<<8|M[pt+4])}return U}},parsePayloadUnitStartIndicator:Og,parsePesType:function(M,U){switch(U[ju(M)]){case Pa.H264_STREAM_TYPE:return"video";case Pa.ADTS_STREAM_TYPE:return"audio";case Pa.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(M){if(!Og(M))return null;var R=4+Rg(M);if(R>=M.byteLength)return null;var ie,$=null;return 192&(ie=M[R+7])&&(($={}).pts=(14&M[R+9])<<27|(255&M[R+10])<<20|(254&M[R+11])<<12|(255&M[R+12])<<5|(254&M[R+13])>>>3,$.pts*=4,$.pts+=(6&M[R+13])>>>1,$.dts=$.pts,64&ie&&($.dts=(14&M[R+14])<<27|(255&M[R+15])<<20|(254&M[R+16])<<12|(255&M[R+17])<<5|(254&M[R+18])>>>3,$.dts*=4,$.dts+=(6&M[R+18])>>>1)),$},videoPacketContainsKeyFrame:function(M){for(var U=4+Rg(M),R=M.subarray(U),$=0,ie=0,de=!1;ie<R.byteLength-3;ie++)if(1===R[ie+2]){$=ie+5;break}for(;$<R.byteLength;)switch(R[$]){case 0:if(0!==R[$-1]){$+=2;break}if(0!==R[$-2]){$++;break}ie+3!==$-2&&"slice_layer_without_partitioning_rbsp_idr"===Fd(31&R[ie+3])&&(de=!0);do{$++}while(1!==R[$]&&$<R.length);ie=$-2,$+=3;break;case 1:if(0!==R[$-1]||0!==R[$-2]){$+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Fd(31&R[ie+3])&&(de=!0),ie=$-2,$+=3;break;default:$+=3}return R=R.subarray(ie),$-=ie,ie=0,R&&R.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===Fd(31&R[ie+3])&&(de=!0),de}},Al=Bm_handleRollover,Bs={};Bs.ts=Ym,Bs.aac=Dg;var _h=9e4,Uu=188,_y=function(M,U,R){for(var de,nt,pt,at,$=0,ie=Uu,mt=!1;ie<=M.byteLength;)if(71!==M[$]||71!==M[ie]&&ie!==M.byteLength)$++,ie++;else{if("pes"===(de=M.subarray($,ie),Bs.ts.parseType(de,U.pid))&&(nt=Bs.ts.parsePesType(de,U.table),pt=Bs.ts.parsePayloadUnitStartIndicator(de),"audio"===nt&&pt&&(at=Bs.ts.parsePesTime(de))&&(at.type="audio",R.audio.push(at),mt=!0)),mt)break;$+=Uu,ie+=Uu}for($=(ie=M.byteLength)-Uu,mt=!1;$>=0;)if(71!==M[$]||71!==M[ie]&&ie!==M.byteLength)$--,ie--;else{if("pes"===(de=M.subarray($,ie),Bs.ts.parseType(de,U.pid))&&(nt=Bs.ts.parsePesType(de,U.table),pt=Bs.ts.parsePayloadUnitStartIndicator(de),"audio"===nt&&pt&&(at=Bs.ts.parsePesTime(de))&&(at.type="audio",R.audio.push(at),mt=!0)),mt)break;$-=Uu,ie-=Uu}},O_=function(M,U,R){for(var de,nt,pt,at,mt,i,e,$=0,ie=Uu,t=!1,c={data:[],size:0};ie<M.byteLength;)if(71!==M[$]||71!==M[ie])$++,ie++;else{if("pes"===(de=M.subarray($,ie),Bs.ts.parseType(de,U.pid))&&(nt=Bs.ts.parsePesType(de,U.table),pt=Bs.ts.parsePayloadUnitStartIndicator(de),"video"===nt&&(pt&&!t&&(at=Bs.ts.parsePesTime(de))&&(at.type="video",R.video.push(at),t=!0),!R.firstKeyFrame))){if(pt&&0!==c.size){for(mt=new Uint8Array(c.size),i=0;c.data.length;)e=c.data.shift(),mt.set(e,i),i+=e.byteLength;if(Bs.ts.videoPacketContainsKeyFrame(mt)){var f=Bs.ts.parsePesTime(mt);f?(R.firstKeyFrame=f,R.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}c.size=0}c.data.push(de),c.size+=de.byteLength}if(t&&R.firstKeyFrame)break;$+=Uu,ie+=Uu}for($=(ie=M.byteLength)-Uu,t=!1;$>=0;)if(71!==M[$]||71!==M[ie])$--,ie--;else{if("pes"===(de=M.subarray($,ie),Bs.ts.parseType(de,U.pid))&&(nt=Bs.ts.parsePesType(de,U.table),pt=Bs.ts.parsePayloadUnitStartIndicator(de),"video"===nt&&pt&&(at=Bs.ts.parsePesTime(de))&&(at.type="video",R.video.push(at),t=!0)),t)break;$-=Uu,ie-=Uu}},D0_inspect=function(M,U){var $;return $=Bs.aac.isLikelyAacData(M)?function(M){for(var nt,U=!1,R=0,$=null,ie=null,de=0,Ve=0;M.length-Ve>=3;){switch(Bs.aac.parseType(M,Ve)){case"timed-metadata":if(M.length-Ve<10){U=!0;break}if((de=Bs.aac.parseId3TagSize(M,Ve))>M.length){U=!0;break}null===ie&&(nt=M.subarray(Ve,Ve+de),ie=Bs.aac.parseAacTimestamp(nt)),Ve+=de;break;case"audio":if(M.length-Ve<7){U=!0;break}if((de=Bs.aac.parseAdtsSize(M,Ve))>M.length){U=!0;break}null===$&&(nt=M.subarray(Ve,Ve+de),$=Bs.aac.parseSampleRate(nt)),R++,Ve+=de;break;default:Ve++}if(U)return null}if(null===$||null===ie)return null;var at=_h/$;return{audio:[{type:"audio",dts:ie,pts:ie},{type:"audio",dts:ie+1024*R*at,pts:ie+1024*R*at}]}}(M):function(M){var U={pid:null,table:null},R={};for(var $ in function(M,U){for(var ie,R=0,$=Uu;$<M.byteLength;)if(71!==M[R]||71!==M[$])R++,$++;else{switch(ie=M.subarray(R,$),Bs.ts.parseType(ie,U.pid)){case"pat":U.pid=Bs.ts.parsePat(ie);break;case"pmt":var Ve=Bs.ts.parsePmt(ie);U.table=U.table||{},Object.keys(Ve).forEach(function(nt){U.table[nt]=Ve[nt]})}R+=Uu,$+=Uu}}(M,U),U.table)if(U.table.hasOwnProperty($))switch(U.table[$]){case Pa.H264_STREAM_TYPE:R.video=[],O_(M,U,R),0===R.video.length&&delete R.video;break;case Pa.ADTS_STREAM_TYPE:R.audio=[],_y(M,U,R),0===R.audio.length&&delete R.audio}return R}(M),$&&($.audio||$.video)?(function(M,U){if(M.audio&&M.audio.length){var R=U;(typeof R>"u"||isNaN(R))&&(R=M.audio[0].dts),M.audio.forEach(function(de){de.dts=Al(de.dts,R),de.pts=Al(de.pts,R),de.dtsTime=de.dts/_h,de.ptsTime=de.pts/_h})}if(M.video&&M.video.length){var $=U;if((typeof $>"u"||isNaN($))&&($=M.video[0].dts),M.video.forEach(function(de){de.dts=Al(de.dts,$),de.pts=Al(de.pts,$),de.dtsTime=de.dts/_h,de.ptsTime=de.pts/_h}),M.firstKeyFrame){var ie=M.firstKeyFrame;ie.dts=Al(ie.dts,$),ie.pts=Al(ie.pts,$),ie.dtsTime=ie.dts/_h,ie.ptsTime=ie.pts/_h}}}($,U),$):null},Ey=function(){function we(U,R){this.options=R||{},this.self=U,this.init()}var M=we.prototype;return M.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new E_.Transmuxer(this.options),function(M,U){U.on("data",function(R){var $=R.initSegment;R.initSegment={data:$.buffer,byteOffset:$.byteOffset,byteLength:$.byteLength};var ie=R.data;R.data=ie.buffer,M.postMessage({action:"data",segment:R,byteOffset:ie.byteOffset,byteLength:ie.byteLength},[R.data])}),U.on("done",function(R){M.postMessage({action:"done"})}),U.on("gopInfo",function(R){M.postMessage({action:"gopInfo",gopInfo:R})}),U.on("videoSegmentTimingInfo",function(R){var $={start:{decode:gs_videoTsToSeconds(R.start.dts),presentation:gs_videoTsToSeconds(R.start.pts)},end:{decode:gs_videoTsToSeconds(R.end.dts),presentation:gs_videoTsToSeconds(R.end.pts)},baseMediaDecodeTime:gs_videoTsToSeconds(R.baseMediaDecodeTime)};R.prependedContentDuration&&($.prependedContentDuration=gs_videoTsToSeconds(R.prependedContentDuration)),M.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:$})}),U.on("audioSegmentTimingInfo",function(R){var $={start:{decode:gs_videoTsToSeconds(R.start.dts),presentation:gs_videoTsToSeconds(R.start.pts)},end:{decode:gs_videoTsToSeconds(R.end.dts),presentation:gs_videoTsToSeconds(R.end.pts)},baseMediaDecodeTime:gs_videoTsToSeconds(R.baseMediaDecodeTime)};R.prependedContentDuration&&($.prependedContentDuration=gs_videoTsToSeconds(R.prependedContentDuration)),M.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:$})}),U.on("id3Frame",function(R){M.postMessage({action:"id3Frame",id3Frame:R})}),U.on("caption",function(R){M.postMessage({action:"caption",caption:R})}),U.on("trackinfo",function(R){M.postMessage({action:"trackinfo",trackInfo:R})}),U.on("audioTimingInfo",function(R){M.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:gs_videoTsToSeconds(R.start),end:gs_videoTsToSeconds(R.end)}})}),U.on("videoTimingInfo",function(R){M.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:gs_videoTsToSeconds(R.start),end:gs_videoTsToSeconds(R.end)}})}),U.on("log",function(R){M.postMessage({action:"log",log:R})})}(this.self,this.transmuxer)},M.pushMp4Captions=function(R){this.captionParser||(this.captionParser=new Tp,this.captionParser.init());var $=new Uint8Array(R.data,R.byteOffset,R.byteLength),ie=this.captionParser.parse($,R.trackIds,R.timescales);this.self.postMessage({action:"mp4Captions",captions:ie&&ie.captions||[],logs:ie&&ie.logs||[],data:$.buffer},[$.buffer])},M.probeMp4StartTime=function(R){var ie=R.data,de=Dl_startTime(R.timescales,ie);this.self.postMessage({action:"probeMp4StartTime",startTime:de,data:ie},[ie.buffer])},M.probeMp4Tracks=function(R){var $=R.data,ie=Dl_tracks($);this.self.postMessage({action:"probeMp4Tracks",tracks:ie,data:$},[$.buffer])},M.probeTs=function(R){var $=R.data,ie=R.baseStartTime,de="number"!=typeof ie||isNaN(ie)?void 0:9e4*ie,Ve=D0_inspect($,de),nt=null;Ve&&((nt={hasVideo:Ve.video&&2===Ve.video.length||!1,hasAudio:Ve.audio&&2===Ve.audio.length||!1}).hasVideo&&(nt.videoStart=Ve.video[0].ptsTime),nt.hasAudio&&(nt.audioStart=Ve.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:nt,data:$},[$.buffer])},M.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},M.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},M.push=function(R){var $=new Uint8Array(R.data,R.byteOffset,R.byteLength);this.transmuxer.push($)},M.reset=function(){this.transmuxer.reset()},M.setTimestampOffset=function(R){this.transmuxer.setBaseMediaDecodeTime(Math.round(gs_secondsToVideoTs(R.timestampOffset||0)))},M.setAudioAppendStart=function(R){this.transmuxer.setAudioAppendStart(Math.ceil(gs_secondsToVideoTs(R.appendStart)))},M.setRemux=function(R){this.transmuxer.setRemux(R.remux)},M.flush=function(R){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},M.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},M.alignGopsWith=function(R){this.transmuxer.alignGopsWith(R.gopsToAlignWith.slice())},we}();self.onmessage=function(we){"init"===we.data.action&&we.data.options?this.messageHandlers=new Ey(self,we.data.options):(this.messageHandlers||(this.messageHandlers=new Ey(self)),we.data&&we.data.action&&"init"!==we.data.action&&this.messageHandlers[we.data.action]&&this.messageHandlers[we.data.action](we.data))}})),V_=cv(Uy),tm=function(u){var a=u.transmuxer,l=u.bytes,n=u.audioAppendStart,o=u.gopsToAlignWith,h=u.remux,_=u.onData,C=u.onTrackInfo,A=u.onAudioTimingInfo,j=u.onVideoTimingInfo,te=u.onVideoSegmentTimingInfo,Q=u.onAudioSegmentTimingInfo,Se=u.onId3,je=u.onCaptions,We=u.onDone,$e=u.onEndedTimeline,kt=u.onTransmuxerLog,pn=u.isEndOfTimeline,jn={buffer:[]},Zt=pn;if(a.onmessage=function(Dn){a.currentTransmux===u&&("data"===Dn.data.action&&function(u,a,l){var n=u.data.segment,o=n.type,h=n.initSegment,j=n.videoFrameDtsTime,te=n.videoFramePtsTime;a.buffer.push({captions:n.captions,captionStreams:n.captionStreams,metadata:n.metadata});var Q=u.data.segment.boxes||{data:u.data.segment.data},Se={type:o,data:new Uint8Array(Q.data,Q.data.byteOffset,Q.data.byteLength),initSegment:new Uint8Array(h.data,h.byteOffset,h.byteLength)};typeof j<"u"&&(Se.videoFrameDtsTime=j),typeof te<"u"&&(Se.videoFramePtsTime=te),l(Se)}(Dn,jn,_),"trackinfo"===Dn.data.action&&C(Dn.data.trackInfo),"gopInfo"===Dn.data.action&&function(u,a){a.gopInfo=u.data.gopInfo}(Dn,jn),"audioTimingInfo"===Dn.data.action&&A(Dn.data.audioTimingInfo),"videoTimingInfo"===Dn.data.action&&j(Dn.data.videoTimingInfo),"videoSegmentTimingInfo"===Dn.data.action&&te(Dn.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===Dn.data.action&&Q(Dn.data.audioSegmentTimingInfo),"id3Frame"===Dn.data.action&&Se([Dn.data.id3Frame],Dn.data.id3Frame.dispatchType),"caption"===Dn.data.action&&je(Dn.data.caption),"endedtimeline"===Dn.data.action&&(Zt=!1,$e()),"log"===Dn.data.action&&kt(Dn.data.log),"transmuxed"===Dn.data.type&&(Zt||(a.onmessage=null,function(u){var a=u.transmuxedData,l=u.callback;a.buffer=[],l(a)}({transmuxedData:jn,callback:We}),nm(a))))},n&&a.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(o)&&a.postMessage({action:"alignGopsWith",gopsToAlignWith:o}),typeof h<"u"&&a.postMessage({action:"setRemux",remux:h}),l.byteLength){var xn=l instanceof ArrayBuffer?l:l.buffer,ln=l instanceof ArrayBuffer?0:l.byteOffset;a.postMessage({action:"push",data:xn,byteOffset:ln,byteLength:l.byteLength},[xn])}pn&&a.postMessage({action:"endTimeline"}),a.postMessage({action:"flush"})},nm=function(u){u.currentTransmux=null,u.transmuxQueue.length&&(u.currentTransmux=u.transmuxQueue.shift(),"function"==typeof u.currentTransmux?u.currentTransmux():tm(u.currentTransmux))},By=function(u,a){u.postMessage({action:a}),nm(u)},hv_reset=function(u){!function(u,a){if(!a.currentTransmux)return a.currentTransmux=u,void By(a,u);a.transmuxQueue.push(By.bind(null,a,u))}("reset",u)},fv=function(u){var a=u.transmuxer,l=u.endAction||u.action,n=u.callback,o=Ke({},u,{endAction:null,transmuxer:null,callback:null});if(a.addEventListener("message",function A(j){j.data.action===l&&(a.removeEventListener("message",A),j.data.data&&(j.data.data=new Uint8Array(j.data.data,u.byteOffset||0,u.byteLength||j.data.data.byteLength),u.data&&(u.data=j.data.data)),n(j.data))}),u.data){var _=u.data instanceof ArrayBuffer;o.byteOffset=_?0:u.data.byteOffset,o.byteLength=u.data.byteLength,a.postMessage(o,[_?u.data:u.data.buffer])}else a.postMessage(o)},qp=function(u){u.forEach(function(a){a.abort()})},Kh=function(u,a){return a.timedout?{status:a.status,message:"HLS request timed-out at URL: "+a.uri,code:-101,xhr:a}:a.aborted?{status:a.status,message:"HLS request aborted at URL: "+a.uri,code:-102,xhr:a}:u?{status:a.status,message:"HLS request errored at URL: "+a.uri,code:2,xhr:a}:"arraybuffer"===a.responseType&&0===a.response.byteLength?{status:a.status,message:"Empty HLS response at URL: "+a.uri,code:2,xhr:a}:null},rm=function(u,a,l){return function(n,o){var h=o.response,_=Kh(n,o);if(_)return l(_,u);if(16!==h.byteLength)return l({status:o.status,message:"Invalid HLS key at URL: "+o.uri,code:2,xhr:o},u);for(var C=new DataView(h),A=new Uint32Array([C.getUint32(0),C.getUint32(4),C.getUint32(8),C.getUint32(12)]),j=0;j<a.length;j++)a[j].bytes=A;return l(null,u)}},im=function(u,a){var l=dr(u.map.bytes);if("mp4"!==l)return a({internal:!0,message:"Found unsupported "+(l||"unknown")+" container for initialization segment at URL: "+(u.map.resolvedUri||u.map.uri),code:2});fv({action:"probeMp4Tracks",data:u.map.bytes,transmuxer:u.transmuxer,callback:function(h){var _=h.tracks;return u.map.bytes=h.data,_.forEach(function(A){u.map.tracks=u.map.tracks||{},!u.map.tracks[A.type]&&(u.map.tracks[A.type]=A,"number"==typeof A.id&&A.timescale&&(u.map.timescales=u.map.timescales||{},u.map.timescales[A.id]=A.timescale))}),a(null)}})},nh=function(u){var a=u.segment,l=u.bytes,n=u.trackInfoFn,o=u.timingInfoFn,h=u.videoSegmentTimingInfoFn,_=u.audioSegmentTimingInfoFn,C=u.id3Fn,A=u.captionsFn,j=u.isEndOfTimeline,te=u.endedTimelineFn,Q=u.dataFn,Se=u.doneFn,je=u.onTransmuxerLog,We=a.map&&a.map.tracks||{},$e=!(!We.audio||!We.video),kt=o.bind(null,a,"audio","start"),pn=o.bind(null,a,"audio","end"),jn=o.bind(null,a,"video","start"),Zt=o.bind(null,a,"video","end");fv({action:"probeTs",transmuxer:a.transmuxer,data:l,baseStartTime:a.baseStartTime,callback:function(ln){a.bytes=l=ln.data;var sn=ln.result;sn&&(n(a,{hasAudio:sn.hasAudio,hasVideo:sn.hasVideo,isMuxed:$e}),n=null,sn.hasAudio&&!$e&&kt(sn.audioStart),sn.hasVideo&&jn(sn.videoStart),kt=null,jn=null),function(u){if(!u.transmuxer.currentTransmux)return u.transmuxer.currentTransmux=u,void tm(u);u.transmuxer.transmuxQueue.push(u)}({bytes:l,transmuxer:a.transmuxer,audioAppendStart:a.audioAppendStart,gopsToAlignWith:a.gopsToAlignWith,remux:$e,onData:function(sn){sn.type="combined"===sn.type?"video":sn.type,Q(a,sn)},onTrackInfo:function(sn){n&&($e&&(sn.isMuxed=!0),n(a,sn))},onAudioTimingInfo:function(sn){kt&&typeof sn.start<"u"&&(kt(sn.start),kt=null),pn&&typeof sn.end<"u"&&pn(sn.end)},onVideoTimingInfo:function(sn){jn&&typeof sn.start<"u"&&(jn(sn.start),jn=null),Zt&&typeof sn.end<"u"&&Zt(sn.end)},onVideoSegmentTimingInfo:function(sn){h(sn)},onAudioSegmentTimingInfo:function(sn){_(sn)},onId3:function(sn,Dn){C(a,sn,Dn)},onCaptions:function(sn){A(a,[sn])},isEndOfTimeline:j,onEndedTimeline:function(){te()},onTransmuxerLog:je,onDone:function(sn){Se&&(sn.type="combined"===sn.type?"video":sn.type,Se(null,a,sn))}})}})},Qf=function(u){var a=u.segment,l=u.bytes,n=u.trackInfoFn,o=u.timingInfoFn,h=u.videoSegmentTimingInfoFn,_=u.audioSegmentTimingInfoFn,C=u.id3Fn,A=u.captionsFn,j=u.isEndOfTimeline,te=u.endedTimelineFn,Q=u.dataFn,Se=u.doneFn,je=u.onTransmuxerLog,We=new Uint8Array(l);if(function(u){return Xr(u,["moof"]).length>0}(We)){a.isFmp4=!0;var $e=a.map.tracks,kt={isFmp4:!0,hasVideo:!!$e.video,hasAudio:!!$e.audio};$e.audio&&$e.audio.codec&&"enca"!==$e.audio.codec&&(kt.audioCodec=$e.audio.codec),$e.video&&$e.video.codec&&"encv"!==$e.video.codec&&(kt.videoCodec=$e.video.codec),$e.video&&$e.audio&&(kt.isMuxed=!0),n(a,kt);var pn=function(Zt){Q(a,{data:We,type:kt.hasAudio&&!kt.isMuxed?"audio":"video"}),Zt&&Zt.length&&A(a,Zt),Se(null,a,{})};fv({action:"probeMp4StartTime",timescales:a.map.timescales,data:We,transmuxer:a.transmuxer,callback:function(Zt){var rn=Zt.data,xn=Zt.startTime;l=rn.buffer,a.bytes=We=rn,kt.hasAudio&&!kt.isMuxed&&o(a,"audio","start",xn),kt.hasVideo&&o(a,"video","start",xn),$e.video&&rn.byteLength&&a.transmuxer?fv({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:a.transmuxer,data:We,timescales:a.map.timescales,trackIds:[$e.video.id],callback:function(sn){l=sn.data.buffer,a.bytes=We=sn.data,sn.logs.forEach(function(Dn){je(St.mergeOptions(Dn,{stream:"mp4CaptionParser"}))}),pn(sn.captions)}}):pn()}})}else{if(a.transmuxer)return typeof a.container>"u"&&(a.container=dr(We)),"ts"!==a.container&&"aac"!==a.container?(n(a,{hasAudio:!1,hasVideo:!1}),void Se(null,a,{})):void nh({segment:a,bytes:l,trackInfoFn:n,timingInfoFn:o,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:_,id3Fn:C,captionsFn:A,isEndOfTimeline:j,endedTimelineFn:te,dataFn:Q,doneFn:Se,onTransmuxerLog:je});Se(null,a,{})}},om=function(u,a){var C,l=u.id,n=u.key,o=u.encryptedBytes,h=u.decryptionWorker;h.addEventListener("message",function A(j){if(j.data.source===l){h.removeEventListener("message",A);var te=j.data.decrypted;a(new Uint8Array(te.bytes,te.byteOffset,te.byteLength))}}),C=n.bytes.slice?n.bytes.slice():new Uint32Array(Array.prototype.slice.call(n.bytes)),h.postMessage(sv({source:l,encrypted:o,key:C,iv:n.iv}),[o.buffer,C.buffer])},Yp=function(u){var a=u.xhr,l=u.xhrOptions,o=u.segment,h=u.abortFn,_=u.progressFn,C=u.trackInfoFn,A=u.timingInfoFn,j=u.videoSegmentTimingInfoFn,te=u.audioSegmentTimingInfoFn,Q=u.id3Fn,Se=u.captionsFn,je=u.isEndOfTimeline,We=u.endedTimelineFn,$e=u.dataFn,jn=[],Zt=function(u){var a=u.activeXhrs,l=u.decryptionWorker,n=u.trackInfoFn,o=u.timingInfoFn,h=u.videoSegmentTimingInfoFn,_=u.audioSegmentTimingInfoFn,C=u.id3Fn,A=u.captionsFn,j=u.isEndOfTimeline,te=u.endedTimelineFn,Q=u.dataFn,Se=u.doneFn,je=u.onTransmuxerLog,We=0,$e=!1;return function(kt,pn){if(!$e){if(kt)return $e=!0,qp(a),Se(kt,pn);if((We+=1)===a.length){var jn=function(){if(pn.encryptedBytes)return function(u){var l=u.segment,n=u.trackInfoFn,o=u.timingInfoFn,h=u.videoSegmentTimingInfoFn,_=u.audioSegmentTimingInfoFn,C=u.id3Fn,A=u.captionsFn,j=u.isEndOfTimeline,te=u.endedTimelineFn,Q=u.dataFn,Se=u.doneFn,je=u.onTransmuxerLog;om({id:l.requestId,key:l.key,encryptedBytes:l.encryptedBytes,decryptionWorker:u.decryptionWorker},function(We){l.bytes=We,Qf({segment:l,bytes:l.bytes,trackInfoFn:n,timingInfoFn:o,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:_,id3Fn:C,captionsFn:A,isEndOfTimeline:j,endedTimelineFn:te,dataFn:Q,doneFn:Se,onTransmuxerLog:je})})}({decryptionWorker:l,segment:pn,trackInfoFn:n,timingInfoFn:o,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:_,id3Fn:C,captionsFn:A,isEndOfTimeline:j,endedTimelineFn:te,dataFn:Q,doneFn:Se,onTransmuxerLog:je});Qf({segment:pn,bytes:pn.bytes,trackInfoFn:n,timingInfoFn:o,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:_,id3Fn:C,captionsFn:A,isEndOfTimeline:j,endedTimelineFn:te,dataFn:Q,doneFn:Se,onTransmuxerLog:je})};if(pn.endOfAllRequests=Date.now(),pn.map&&pn.map.encryptedBytes&&!pn.map.bytes)return om({decryptionWorker:l,id:pn.requestId+"-init",encryptedBytes:pn.map.encryptedBytes,key:pn.map.key},function(Zt){pn.map.bytes=Zt,im(pn,function(rn){if(rn)return qp(a),Se(rn,pn);jn()})});jn()}}}}({activeXhrs:jn,decryptionWorker:u.decryptionWorker,trackInfoFn:C,timingInfoFn:A,videoSegmentTimingInfoFn:j,audioSegmentTimingInfoFn:te,id3Fn:Q,captionsFn:Se,isEndOfTimeline:je,endedTimelineFn:We,dataFn:$e,doneFn:u.doneFn,onTransmuxerLog:u.onTransmuxerLog});if(o.key&&!o.key.bytes){var rn=[o.key];o.map&&!o.map.bytes&&o.map.key&&o.map.key.resolvedUri===o.key.resolvedUri&&rn.push(o.map.key);var sn=a(St.mergeOptions(l,{uri:o.key.resolvedUri,responseType:"arraybuffer"}),rm(o,rn,Zt));jn.push(sn)}if(o.map&&!o.map.bytes){if(o.map.key&&(!o.key||o.key.resolvedUri!==o.map.key.resolvedUri)){var nr=a(St.mergeOptions(l,{uri:o.map.key.resolvedUri,responseType:"arraybuffer"}),rm(o,[o.map.key],Zt));jn.push(nr)}var Br=St.mergeOptions(l,{uri:o.map.resolvedUri,responseType:"arraybuffer",headers:Wc(o.map)}),Ts=function(u){var a=u.segment,l=u.finishProcessingFn;return function(n,o){var h=Kh(n,o);if(h)return l(h,a);var _=new Uint8Array(o.response);if(a.map.key)return a.map.encryptedBytes=_,l(null,a);a.map.bytes=_,im(a,function(C){if(C)return C.xhr=o,C.status=o.status,l(C,a);l(null,a)})}}({segment:o,finishProcessingFn:Zt}),Es=a(Br,Ts);jn.push(Es)}var co=St.mergeOptions(l,{uri:o.part&&o.part.resolvedUri||o.resolvedUri,responseType:"arraybuffer",headers:Wc(o)}),Eo=a(co,function(u){var a=u.segment,l=u.finishProcessingFn,n=u.responseType;return function(o,h){var _=Kh(o,h);if(_)return l(_,a);var C="arraybuffer"!==n&&h.responseText?function(u){for(var a=new Uint8Array(new ArrayBuffer(u.length)),l=0;l<u.length;l++)a[l]=u.charCodeAt(l);return a.buffer}(h.responseText.substring(a.lastReachedChar||0)):h.response;return a.stats=function(u){return{bandwidth:u.bandwidth,bytesReceived:u.bytesReceived||0,roundTripTime:u.roundTripTime||0}}(h),a.key?a.encryptedBytes=new Uint8Array(C):a.bytes=new Uint8Array(C),l(null,a)}}({segment:o,finishProcessingFn:Zt,responseType:co.responseType}));Eo.addEventListener("progress",function(u){var a=u.segment,l=u.progressFn;return function(n){if(!n.target.aborted)return a.stats=St.mergeOptions(a.stats,function(u){var a=u.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-a.requestTime||0};return n.bytesReceived=u.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n}(n)),!a.stats.firstBytesReceivedAt&&a.stats.bytesReceived&&(a.stats.firstBytesReceivedAt=Date.now()),l(n,a)}}({segment:o,progressFn:_,trackInfoFn:C,timingInfoFn:A,videoSegmentTimingInfoFn:j,audioSegmentTimingInfoFn:te,id3Fn:Q,captionsFn:Se,isEndOfTimeline:je,endedTimelineFn:We,dataFn:$e})),jn.push(Eo);var ka={};return jn.forEach(function(br){br.addEventListener("loadend",function(u){var a=u.loadendState,l=u.abortFn;return function(n){n.target.aborted&&l&&!a.calledAbortFn&&(l(),a.calledAbortFn=!0)}}({loadendState:ka,abortFn:h}))}),function(){return qp(jn)}},gv=_l("CodecUtils"),am=function(u,a){var l=a.attributes||{};return u&&u.mediaGroups&&u.mediaGroups.AUDIO&&l.AUDIO&&u.mediaGroups.AUDIO[l.AUDIO]},Qp=function(u){var a={};return u.forEach(function(l){var n=l.mediaType,o=l.type,h=l.details;a[n]=a[n]||[],a[n].push(ir(""+o+h))}),Object.keys(a).forEach(function(l){if(a[l].length>1)return gv("multiple "+l+" codecs found as attributes: "+a[l].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(a[l]=null);a[l]=a[l][0]}),a},vv=function(u){var a=0;return u.audio&&a++,u.video&&a++,a},Xf=function(u,a){var l=a.attributes||{},n=Qp(function(u){var a=u.attributes||{};if(a.CODECS)return _r(a.CODECS)}(a)||[]);if(am(u,a)&&!n.audio&&!function(u,a){if(!am(u,a))return!0;var n=u.mediaGroups.AUDIO[(a.attributes||{}).AUDIO];for(var o in n)if(!n[o].uri&&!n[o].playlists)return!0;return!1}(u,a)){var o=Qp(function(u,a){if(!u.mediaGroups.AUDIO||!a)return null;var l=u.mediaGroups.AUDIO[a];if(!l)return null;for(var n in l){var o=l[n];if(o.default&&o.playlists)return _r(o.playlists[0].attributes.CODECS)}return null}(u,l.AUDIO)||[]);o.audio&&(n.audio=o.audio)}return n},um=_l("PlaylistSelector"),Xp=function(u){if(u&&u.playlist){var a=u.playlist;return JSON.stringify({id:a.id,bandwidth:u.bandwidth,width:u.width,height:u.height,codecs:a.attributes&&a.attributes.CODECS||""})}},Jf=function(u,a){if(!u)return"";var l=ce().getComputedStyle(u);return l?l[a]:""},Qh=function(u,a){var l=u.slice();u.sort(function(n,o){var h=a(n,o);return 0===h?l.indexOf(n)-l.indexOf(o):h})},lm=function(u,a){var l,n;return u.attributes.BANDWIDTH&&(l=u.attributes.BANDWIDTH),l=l||ce().Number.MAX_VALUE,a.attributes.BANDWIDTH&&(n=a.attributes.BANDWIDTH),l-(n||ce().Number.MAX_VALUE)},Zc=function(u,a,l,n,o,h){if(u){var _={bandwidth:a,width:l,height:n,limitRenditionByPlayerDimensions:o},C=u.playlists;du.isAudioOnly(u)&&(C=h.getAudioTrackPlaylists_(),_.audioOnly=!0);var A=C.map(function(hn){var nr=hn.attributes&&hn.attributes.RESOLUTION&&hn.attributes.RESOLUTION.width,Br=hn.attributes&&hn.attributes.RESOLUTION&&hn.attributes.RESOLUTION.height;return{bandwidth:hn.attributes&&hn.attributes.BANDWIDTH||ce().Number.MAX_VALUE,width:nr,height:Br,playlist:hn}});Qh(A,function(hn,Cr){return hn.bandwidth-Cr.bandwidth});var j=(A=A.filter(function(hn){return!du.isIncompatible(hn.playlist)})).filter(function(hn){return du.isEnabled(hn.playlist)});j.length||(j=A.filter(function(hn){return!du.isDisabled(hn.playlist)}));var te=j.filter(function(hn){return hn.bandwidth*ko.BANDWIDTH_VARIANCE<a}),Q=te[te.length-1],Se=te.filter(function(hn){return hn.bandwidth===Q.bandwidth})[0];if(!1===o){var je=Se||j[0]||A[0];if(je&&je.playlist){var We="sortedPlaylistReps";return Se&&(We="bandwidthBestRep"),j[0]&&(We="enabledPlaylistReps"),um("choosing "+Xp(je)+" using "+We+" with options",_),je.playlist}return um("could not choose a playlist with options",_),null}var $e=te.filter(function(hn){return hn.width&&hn.height});Qh($e,function(hn,Cr){return hn.width-Cr.width});var kt=$e.filter(function(hn){return hn.width===l&&hn.height===n});Q=kt[kt.length-1];var jn,Zt,rn,xn,pn=kt.filter(function(hn){return hn.bandwidth===Q.bandwidth})[0];if(pn||(Zt=(jn=$e.filter(function(hn){return hn.width>l||hn.height>n})).filter(function(hn){return hn.width===jn[0].width&&hn.height===jn[0].height}),Q=Zt[Zt.length-1],rn=Zt.filter(function(hn){return hn.bandwidth===Q.bandwidth})[0]),h.experimentalLeastPixelDiffSelector){var ln=$e.map(function(hn){return hn.pixelDiff=Math.abs(hn.width-l)+Math.abs(hn.height-n),hn});Qh(ln,function(hn,Cr){return hn.pixelDiff===Cr.pixelDiff?Cr.bandwidth-hn.bandwidth:hn.pixelDiff-Cr.pixelDiff}),xn=ln[0]}var sn=xn||rn||pn||Se||j[0]||A[0];if(sn&&sn.playlist){var Dn="sortedPlaylistReps";return xn?Dn="leastPixelDiffRep":rn?Dn="resolutionPlusOneRep":pn?Dn="resolutionBestRep":Se?Dn="bandwidthBestRep":j[0]&&(Dn="enabledPlaylistReps"),um("choosing "+Xp(sn)+" using "+Dn+" with options",_),sn.playlist}return um("could not choose a playlist with options",_),null}},cm=function(){var u=this.useDevicePixelRatio&&ce().devicePixelRatio||1;return Zc(this.playlists.master,this.systemBandwidth,parseInt(Jf(this.tech_.el(),"width"),10)*u,parseInt(Jf(this.tech_.el(),"height"),10)*u,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},np=function(u,a,l){var n,o;if(l&&l.cues)for(n=l.cues.length;n--;)(o=l.cues[n]).startTime>=u&&o.endTime<=a&&l.removeCue(o)},qy=function(u){return"number"==typeof u&&isFinite(u)},Md=1/60,Xh=function(u){var a=u.startOfSegment,l=u.duration,n=u.segment,o=u.part,h=u.playlist,_=h.mediaSequence,C=h.id,A=h.segments,te=u.mediaIndex,Q=u.partIndex,Se=u.timeline,je=(void 0===A?[]:A).length-1,We="mediaIndex/partIndex increment";u.getMediaInfoForTime?We="getMediaInfoForTime ("+u.getMediaInfoForTime+")":u.isSyncRequest&&(We="getSyncSegmentCandidate (isSyncRequest)"),u.independent&&(We+=" with independent "+u.independent);var $e="number"==typeof Q,kt=u.segment.uri?"segment":"pre-segment",pn=$e?$a({preloadSegment:n})-1:0;return kt+" ["+(_+te)+"/"+(_+je)+"]"+($e?" part ["+Q+"/"+pn+"]":"")+" segment start/end ["+n.start+" => "+n.end+"]"+($e?" part start/end ["+o.start+" => "+o.end+"]":"")+" startOfSegment ["+a+"] duration ["+l+"] timeline ["+Se+"] selected by ["+We+"] playlist ["+C+"]"},pu=function(u){return u+"TimingInfo"},_v=function(u){var a=u.timelineChangeController,n=u.segmentTimeline,o=u.loaderType,h=u.audioDisabled;if(u.currentTimeline===n)return!1;if("audio"===o){var _=a.lastTimelineChange({type:"main"});return!_||_.to!==n}if("main"===o&&h){var C=a.pendingTimelineChange({type:"audio"});return!(C&&C.to===n)}return!1},rp=function(u){var a=u.segmentDuration,l=u.maxDuration;return!!a&&Math.round(a)>l+fc},vm=function(g){function u(l,n){var o;if(o=g.call(this)||this,!l)throw new TypeError("Initialization settings are required");if("function"!=typeof l.currentTime)throw new TypeError("No currentTime getter specified");if(!l.mediaSource)throw new TypeError("No MediaSource specified");return o.bandwidth=l.bandwidth,o.throughput={rate:0,count:0},o.roundTrip=NaN,o.resetStats_(),o.mediaIndex=null,o.partIndex=null,o.hasPlayed_=l.hasPlayed,o.currentTime_=l.currentTime,o.seekable_=l.seekable,o.seeking_=l.seeking,o.duration_=l.duration,o.mediaSource_=l.mediaSource,o.vhs_=l.vhs,o.loaderType_=l.loaderType,o.currentMediaInfo_=void 0,o.startingMediaInfo_=void 0,o.segmentMetadataTrack_=l.segmentMetadataTrack,o.goalBufferLength_=l.goalBufferLength,o.sourceType_=l.sourceType,o.sourceUpdater_=l.sourceUpdater,o.inbandTextTracks_=l.inbandTextTracks,o.state_="INIT",o.timelineChangeController_=l.timelineChangeController,o.shouldSaveSegmentTimingInfo_=!0,o.parse708captions_=l.parse708captions,o.useDtsForTimestampOffset_=l.useDtsForTimestampOffset,o.captionServices_=l.captionServices,o.experimentalExactManifestTimings=l.experimentalExactManifestTimings,o.checkBufferTimeout_=null,o.error_=void 0,o.currentTimeline_=-1,o.pendingSegment_=null,o.xhrOptions_=null,o.pendingSegments_=[],o.audioDisabled_=!1,o.isPendingTimestampOffset_=!1,o.gopBuffer_=[],o.timeMapping_=0,o.safeAppend_=St.browser.IE_VERSION>=11,o.appendInitSegment_={audio:!0,video:!0},o.playlistOfLastInitSegment_={audio:null,video:null},o.callQueue_=[],o.loadQueue_=[],o.metadataQueue_={id3:[],caption:[]},o.waitingOnRemove_=!1,o.quotaExceededErrorRetryTimeout_=null,o.activeInitSegmentId_=null,o.initSegments_={},o.cacheEncryptionKeys_=l.cacheEncryptionKeys,o.keyCache_={},o.decrypter_=l.decrypter,o.syncController_=l.syncController,o.syncPoint_={segmentIndex:0,time:0},o.transmuxer_=o.createTransmuxer_(),o.triggerSyncInfoUpdate_=function(){return o.trigger("syncinfoupdate")},o.syncController_.on("syncinfoupdate",o.triggerSyncInfoUpdate_),o.mediaSource_.addEventListener("sourceopen",function(){o.isEndOfStream_()||(o.ended_=!1)}),o.fetchAtBuffer_=!1,o.logger_=_l("SegmentLoader["+o.loaderType_+"]"),Object.defineProperty(q(o),"state",{get:function(){return this.state_},set:function(_){_!==this.state_&&(this.logger_(this.state_+" -> "+_),this.state_=_,this.trigger("statechange"))}}),o.sourceUpdater_.on("ready",function(){o.hasEnoughInfoToAppend_()&&o.processCallQueue_()}),"main"===o.loaderType_&&o.timelineChangeController_.on("pendingtimelinechange",function(){o.hasEnoughInfoToAppend_()&&o.processCallQueue_()}),"audio"===o.loaderType_&&o.timelineChangeController_.on("timelinechange",function(){o.hasEnoughInfoToLoad_()&&o.processLoadQueue_(),o.hasEnoughInfoToAppend_()&&o.processCallQueue_()}),o}re(u,g);var a=u.prototype;return a.createTransmuxer_=function(){return function(u){var a=new V_;a.currentTransmux=null,a.transmuxQueue=[];var l=a.terminate;return a.terminate=function(){return a.currentTransmux=null,a.transmuxQueue.length=0,l.call(a)},a.postMessage({action:"init",options:u}),a}({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},a.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},a.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&ce().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},a.setAudio=function(n){this.audioDisabled_=!n,n?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},a.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},a.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,ce().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},a.checkForAbort_=function(n){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==n:(this.state="READY",!0)},a.error=function(n){return typeof n<"u"&&(this.logger_("error occurred:",n),this.error_=n),this.pendingSegment_=null,this.error_},a.endOfStream=function(){this.ended_=!0,this.transmuxer_&&hv_reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},a.buffered_=function(){var n=this.getMediaInfo_();if(!this.sourceUpdater_||!n)return St.createTimeRanges();if("main"===this.loaderType_){var h=n.hasVideo;if(h&&n.hasAudio&&!this.audioDisabled_&&!n.isMuxed)return this.sourceUpdater_.buffered();if(h)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},a.initSegmentForMap=function(n,o){if(void 0===o&&(o=!1),!n)return null;var h=Hp(n),_=this.initSegments_[h];return o&&!_&&n.bytes&&(this.initSegments_[h]=_={resolvedUri:n.resolvedUri,byterange:n.byterange,bytes:n.bytes,tracks:n.tracks,timescales:n.timescales}),_||n},a.segmentKey=function(n,o){if(void 0===o&&(o=!1),!n)return null;var h=ov(n),_=this.keyCache_[h];this.cacheEncryptionKeys_&&o&&!_&&n.bytes&&(this.keyCache_[h]=_={resolvedUri:n.resolvedUri,bytes:n.bytes});var C={resolvedUri:(_||n).resolvedUri};return _&&(C.bytes=_.bytes),C},a.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},a.load=function(){if(this.monitorBuffer_(),this.playlist_){if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}},a.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},a.playlist=function(n,o){if(void 0===o&&(o={}),n){var h=this.playlist_,_=this.pendingSegment_;this.playlist_=n,this.xhrOptions_=o,"INIT"===this.state&&(n.syncInfo={mediaSequence:n.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(n));var C=null;if(h&&(h.id?C=h.id:h.uri&&(C=h.uri)),this.logger_("playlist update ["+C+" => "+(n.id||n.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!h||h.uri!==n.uri)return null!==this.mediaIndex&&(n.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var A=n.mediaSequence-h.mediaSequence;if(this.logger_("live window shift ["+A+"]"),null!==this.mediaIndex)if(this.mediaIndex-=A,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var j=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!j.parts||!j.parts.length||!j.parts[this.partIndex])){var te=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=te}}_&&(_.mediaIndex-=A,_.mediaIndex<0?(_.mediaIndex=null,_.partIndex=null):(_.mediaIndex>=0&&(_.segment=n.segments[_.mediaIndex]),_.partIndex>=0&&_.segment.parts&&(_.part=_.segment.parts[_.partIndex]))),this.syncController_.saveExpiredSegmentInfo(h,n)}},a.pause=function(){this.checkBufferTimeout_&&(ce().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},a.paused=function(){return null===this.checkBufferTimeout_},a.resetEverything=function(n){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,n),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},a.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},a.resyncLoader=function(){this.transmuxer_&&hv_reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},a.remove=function(n,o,h,_){if(void 0===h&&(h=function(){}),void 0===_&&(_=!1),o===1/0&&(o=this.duration_()),o<=n)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var C=1,A=function(){0==--C&&h()};for(var j in(_||!this.audioDisabled_)&&(C++,this.sourceUpdater_.removeAudio(n,o,A)),(_||"main"===this.loaderType_)&&(this.gopBuffer_=function(u,a,l,n){for(var o=Math.ceil((a-n)*Mr.ONE_SECOND_IN_TS),h=Math.ceil((l-n)*Mr.ONE_SECOND_IN_TS),_=u.slice(),C=u.length;C--&&!(u[C].pts<=h););if(-1===C)return _;for(var A=C+1;A--&&!(u[A].pts<=o););return A=Math.max(A,0),_.splice(A,C-A+1),_}(this.gopBuffer_,n,o,this.timeMapping_),C++,this.sourceUpdater_.removeVideo(n,o,A)),this.inbandTextTracks_)np(n,o,this.inbandTextTracks_[j]);np(n,o,this.segmentMetadataTrack_),A()}else this.logger_("skipping remove because no source updater or starting media info")},a.monitorBuffer_=function(){this.checkBufferTimeout_&&ce().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=ce().setTimeout(this.monitorBufferTick_.bind(this),1)},a.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&ce().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=ce().setTimeout(this.monitorBufferTick_.bind(this),500)},a.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var n=this.chooseNextRequest_();n&&("number"==typeof n.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:n.timeline})),this.loadSegment_(n))}},a.isEndOfStream_=function(n,o,h){if(void 0===n&&(n=this.mediaIndex),void 0===o&&(o=this.playlist_),void 0===h&&(h=this.partIndex),!o||!this.mediaSource_)return!1;var _="number"==typeof n&&o.segments[n];return o.endList&&"open"===this.mediaSource_.readyState&&n+1===o.segments.length&&(!_||!_.parts||h+1===_.parts.length)},a.chooseNextRequest_=function(){var n=this.buffered_(),o=Un(n)||0,h=Wn(n,this.currentTime_()),_=!this.hasPlayed_()&&h>=1,C=h>=this.goalBufferLength_(),A=this.playlist_.segments;if(!A.length||_||C)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var j={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(j.isSyncRequest)j.mediaIndex=function(u,a,l){a=a||[];for(var n=[],o=0,h=0;h<a.length;h++){var _=a[h];if(u===_.timeline&&(n.push(h),(o+=_.duration)>l))return h}return 0===n.length?0:n[n.length-1]}(this.currentTimeline_,A,o);else if(null!==this.mediaIndex){var te=A[this.mediaIndex],Q="number"==typeof this.partIndex?this.partIndex:-1;j.startOfSegment=te.end?te.end:o,te.parts&&te.parts[Q+1]?(j.mediaIndex=this.mediaIndex,j.partIndex=Q+1):j.mediaIndex=this.mediaIndex+1}else{var Se=du.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?o:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),je=Se.segmentIndex,We=Se.startTime,$e=Se.partIndex;j.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+o:"currentTime "+this.currentTime_(),j.mediaIndex=je,j.startOfSegment=We,j.partIndex=$e}var kt=A[j.mediaIndex],pn=kt&&"number"==typeof j.partIndex&&kt.parts&&kt.parts[j.partIndex];if(!kt||"number"==typeof j.partIndex&&!pn)return null;if("number"!=typeof j.partIndex&&kt.parts&&(j.partIndex=0,pn=kt.parts[0]),!h&&pn&&!pn.independent)if(0===j.partIndex){var jn=A[j.mediaIndex-1],Zt=jn.parts&&jn.parts.length&&jn.parts[jn.parts.length-1];Zt&&Zt.independent&&(j.mediaIndex-=1,j.partIndex=jn.parts.length-1,j.independent="previous segment")}else kt.parts[j.partIndex-1].independent&&(j.partIndex-=1,j.independent="previous part");return j.mediaIndex>=A.length-1&&this.mediaSource_&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?null:this.generateSegmentInfo_(j)},a.generateSegmentInfo_=function(n){var o=n.independent,h=n.playlist,_=n.mediaIndex,C=n.startOfSegment,A=n.isSyncRequest,j=n.partIndex,te=n.forceTimestampOffset,Q=n.getMediaInfoForTime,Se=h.segments[_],je="number"==typeof j&&Se.parts[j],We={requestId:"segment-loader-"+Math.random(),uri:je&&je.resolvedUri||Se.resolvedUri,mediaIndex:_,partIndex:je?j:null,isSyncRequest:A,startOfSegment:C,playlist:h,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:Se.timeline,duration:je&&je.duration||Se.duration,segment:Se,part:je,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:Q,independent:o},$e=typeof te<"u"?te:this.isPendingTimestampOffset_;We.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:Se.timeline,currentTimeline:this.currentTimeline_,startOfSegment:C,buffered:this.buffered_(),overrideCheck:$e});var kt=Un(this.sourceUpdater_.audioBuffered());return"number"==typeof kt&&(We.audioAppendStart=kt-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(We.gopsToAlignWith=function(u,a,l){if(typeof a>"u"||null===a||!u.length)return[];var o,n=Math.ceil((a-l+3)*Mr.ONE_SECOND_IN_TS);for(o=0;o<u.length&&!(u[o].pts>n);o++);return u.slice(o)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),We},a.timestampOffsetForSegment_=function(n){return function(u){var a=u.segmentTimeline,l=u.currentTimeline,n=u.startOfSegment,o=u.buffered;return u.overrideCheck||a!==l?a<l?n:o.length?o.end(o.length-1):n:null}(n)},a.earlyAbortWhenNeeded_=function(n){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(n.firstBytesReceivedAt||Date.now())<1e3)){var o=this.currentTime_(),h=n.bandwidth,_=this.pendingSegment_.duration,C=du.estimateSegmentRequestTime(_,h,this.playlist_,n.bytesReceived),A=function(u,a,l){return void 0===l&&(l=1),((u.length?u.end(u.length-1):0)-a)/l}(this.buffered_(),o,this.vhs_.tech_.playbackRate())-1;if(!(C<=A)){var j=function(u){var l=u.currentTime,n=u.bandwidth,o=u.duration,h=u.segmentDuration,_=u.timeUntilRebuffer,C=u.currentTimeline,A=u.syncController,j=u.master.playlists.filter(function(We){return!du.isIncompatible(We)}),te=j.filter(du.isEnabled);te.length||(te=j.filter(function(We){return!du.isDisabled(We)}));var Se=te.filter(du.hasAttribute.bind(null,"BANDWIDTH")).map(function(We){var kt=A.getSyncPoint(We,o,C,l)?1:2;return{playlist:We,rebufferingImpact:du.estimateSegmentRequestTime(h,n,We)*kt-_}}),je=Se.filter(function(We){return We.rebufferingImpact<=0});return Qh(je,function(We,$e){return lm($e.playlist,We.playlist)}),je.length?je[0]:(Qh(Se,function(We,$e){return We.rebufferingImpact-$e.rebufferingImpact}),Se[0]||null)}({master:this.vhs_.playlists.master,currentTime:o,bandwidth:h,duration:this.duration_(),segmentDuration:_,timeUntilRebuffer:A,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(j){var Se=.5;A<=fc&&(Se=1),j.playlist&&j.playlist.uri!==this.playlist_.uri&&!(C-A-j.rebufferingImpact<Se)&&(this.bandwidth=j.playlist.attributes.BANDWIDTH*ko.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},a.handleAbort_=function(n){this.logger_("Aborting "+Xh(n)),this.mediaRequestsAborted+=1},a.handleProgress_=function(n,o){this.earlyAbortWhenNeeded_(o.stats),!this.checkForAbort_(o.requestId)&&this.trigger("progress")},a.handleTrackInfo_=function(n,o){this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)&&(this.checkForIllegalMediaSwitch(o)||(function(u,a){if(!u&&!a||!u&&a||u&&!a)return!1;if(u===a)return!0;var l=Object.keys(u).sort(),n=Object.keys(a).sort();if(l.length!==n.length)return!1;for(var o=0;o<l.length;o++){var h=l[o];if(h!==n[o]||u[h]!==a[h])return!1}return!0}(this.currentMediaInfo_,o=o||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=o,this.currentMediaInfo_=o,this.logger_("trackinfo update",o),this.trigger("trackinfo")),!this.checkForAbort_(n.requestId)&&(this.pendingSegment_.trackInfo=o,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},a.handleTimingInfo_=function(n,o,h,_){if(this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)){var C=this.pendingSegment_,A=pu(o);C[A]=C[A]||{},C[A][h]=_,this.logger_("timinginfo: "+o+" - "+h+" - "+_),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},a.handleCaptions_=function(n,o){var h=this;if(this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)){if(0===o.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,n,o));var C=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),A={};o.forEach(function(j){A[j.stream]=A[j.stream]||{startTime:1/0,captions:[],endTime:0};var te=A[j.stream];te.startTime=Math.min(te.startTime,j.startTime+C),te.endTime=Math.max(te.endTime,j.endTime+C),te.captions.push(j)}),Object.keys(A).forEach(function(j){var te=A[j],Q=te.startTime,Se=te.endTime,je=te.captions,We=h.inbandTextTracks_;h.logger_("adding cues from "+Q+" -> "+Se+" for "+j),function(u,a,l){if(!u[l]){a.trigger({type:"usage",name:"vhs-608"}),a.trigger({type:"usage",name:"hls-608"});var n=l;/^cc708_/.test(l)&&(n="SERVICE"+l.split("_")[1]);var o=a.textTracks().getTrackById(n);if(o)u[l]=o;else{var _=l,C=l,A=!1,j=(a.options_.vhs&&a.options_.vhs.captionServices||{})[n];j&&(_=j.label,C=j.language,A=j.default),u[l]=a.addRemoteTextTrack({kind:"captions",id:n,default:A,label:_,language:C},!1).track}}}(We,h.vhs_.tech_,j),np(Q,Se,We[j]),function(u){var a=u.inbandTextTracks,l=u.captionArray,n=u.timestampOffset;if(l){var o=ce().WebKitDataCue||ce().VTTCue;l.forEach(function(h){a[h.stream].addCue(new o(h.startTime+n,h.endTime+n,h.text))})}}({captionArray:je,inbandTextTracks:We,timestampOffset:C})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},a.handleId3_=function(n,o,h){if(this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)){if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.id3.push(this.handleId3_.bind(this,n,o,h));var C=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();(function(u,a,l){u.metadataTrack_||(u.metadataTrack_=l.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,u.metadataTrack_.inBandMetadataTrackDispatchType=a)})(this.inbandTextTracks_,h,this.vhs_.tech_),function(u){var a=u.inbandTextTracks,l=u.metadataArray,n=u.timestampOffset,o=u.videoDuration;if(l){var h=ce().WebKitDataCue||ce().VTTCue,_=a.metadataTrack_;if(_&&(l.forEach(function(Se){var je=Se.cueTime+n;"number"!=typeof je||ce().isNaN(je)||je<0||!(je<1/0)||Se.frames.forEach(function(We){var $e=new h(je,je,We.value||We.url||We.data||"");$e.frame=We,$e.value=We,function(u){Object.defineProperties(u.frame,{id:{get:function(){return St.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),u.value.key}},value:{get:function(){return St.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),u.value.data}},privateData:{get:function(){return St.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),u.value.data}}})}($e),_.addCue($e)})}),_.cues&&_.cues.length)){for(var C=_.cues,A=[],j=0;j<C.length;j++)C[j]&&A.push(C[j]);var te=A.reduce(function(Se,je){var We=Se[je.startTime]||[];return We.push(je),Se[je.startTime]=We,Se},{}),Q=Object.keys(te).sort(function(Se,je){return Number(Se)-Number(je)});Q.forEach(function(Se,je){var We=te[Se],$e=Number(Q[je+1])||o;We.forEach(function(kt){kt.endTime=$e})})}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:o,timestampOffset:C,videoDuration:this.duration_()})}},a.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(n){return n()}),this.metadataQueue_.caption.forEach(function(n){return n()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},a.processCallQueue_=function(){var n=this.callQueue_;this.callQueue_=[],n.forEach(function(o){return o()})},a.processLoadQueue_=function(){var n=this.loadQueue_;this.loadQueue_=[],n.forEach(function(o){return o()})},a.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var n=this.pendingSegment_;return!(!n||this.getCurrentMediaInfo_()&&_v({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:n.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},a.getCurrentMediaInfo_=function(n){return void 0===n&&(n=this.pendingSegment_),n&&n.trackInfo||this.currentMediaInfo_},a.getMediaInfo_=function(n){return void 0===n&&(n=this.pendingSegment_),this.getCurrentMediaInfo_(n)||this.startingMediaInfo_},a.getPendingSegmentPlaylist=function(){return this.pendingSegment_?this.pendingSegment_.playlist:null},a.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var n=this.pendingSegment_,o=this.getCurrentMediaInfo_();return!(!n||!o||o.hasVideo&&!n.videoTimingInfo||o.hasAudio&&!this.audioDisabled_&&!o.isMuxed&&!n.audioTimingInfo||_v({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:n.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},a.handleData_=function(n,o){if(this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,n,o));var h=this.pendingSegment_;if(this.setTimeMapping_(h.timeline),this.updateMediaSecondsLoaded_(h.part||h.segment),"closed"!==this.mediaSource_.readyState){if(n.map&&(n.map=this.initSegmentForMap(n.map,!0),h.segment.map=n.map),n.key&&this.segmentKey(n.key,!0),h.isFmp4=n.isFmp4,h.timingInfo=h.timingInfo||{},h.isFmp4)this.trigger("fmp4"),h.timingInfo.start=h[pu(o.type)].start;else{var A,_=this.getCurrentMediaInfo_(),C="main"===this.loaderType_&&_&&_.hasVideo;C&&(A=h.videoTimingInfo.start),h.timingInfo.start=this.trueSegmentStart_({currentStart:h.timingInfo.start,playlist:h.playlist,mediaIndex:h.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:C,firstVideoFrameTimeForData:A,videoTimingInfo:h.videoTimingInfo,audioTimingInfo:h.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(h,o.type),this.updateSourceBufferTimestampOffset_(h),h.isSyncRequest){this.updateTimingInfoEnd_(h),this.syncController_.saveSegmentTimingInfo({segmentInfo:h,shouldSaveTimelineMapping:"main"===this.loaderType_});var j=this.chooseNextRequest_();if(j.mediaIndex!==h.mediaIndex||j.partIndex!==h.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}h.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(h,o)}}},a.updateAppendInitSegmentStatus=function(n,o){"main"===this.loaderType_&&"number"==typeof n.timestampOffset&&!n.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[o]!==n.playlist&&(this.appendInitSegment_[o]=!0)},a.getInitSegmentAndUpdateState_=function(n){var o=n.type,h=n.initSegment,_=n.map,C=n.playlist;if(_){var A=Hp(_);if(this.activeInitSegmentId_===A)return null;h=this.initSegmentForMap(_,!0).bytes,this.activeInitSegmentId_=A}return h&&this.appendInitSegment_[o]?(this.playlistOfLastInitSegment_[o]=C,this.appendInitSegment_[o]=!1,this.activeInitSegmentId_=null,h):null},a.handleQuotaExceededError_=function(n,o){var h=this,_=n.segmentInfo,C=n.type,A=n.bytes,j=this.sourceUpdater_.audioBuffered(),te=this.sourceUpdater_.videoBuffered();j.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+dn(j).join(", ")),te.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+dn(te).join(", "));var Q=j.length?j.start(0):0,Se=j.length?j.end(j.length-1):0,je=te.length?te.start(0):0,We=te.length?te.end(te.length-1):0;if(Se-Q<=1&&We-je<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+A.byteLength+", audio buffer: "+dn(j).join(", ")+", video buffer: "+dn(te).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:_,type:C,bytes:A}));var kt=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+kt),this.remove(0,kt,function(){h.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),h.waitingOnRemove_=!1,h.quotaExceededErrorRetryTimeout_=ce().setTimeout(function(){h.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),h.quotaExceededErrorRetryTimeout_=null,h.processCallQueue_()},1e3)},!0)},a.handleAppendError_=function(n,o){var h=n.segmentInfo,_=n.type,C=n.bytes;if(o){if(22===o.code)return void this.handleQuotaExceededError_({segmentInfo:h,type:_,bytes:C});this.logger_("Received non QUOTA_EXCEEDED_ERR on append",o),this.error(_+" append of "+C.length+"b failed for segment #"+h.mediaIndex+" in playlist "+h.playlist.id),this.trigger("appenderror")}},a.appendToSourceBuffer_=function(n){var o=n.segmentInfo,h=n.type,_=n.initSegment,C=n.data,A=n.bytes;if(!A){var j=[C],te=C.byteLength;_&&(j.unshift(_),te+=_.byteLength),A=function(u){var l,a=0;return u.bytes&&(l=new Uint8Array(u.bytes),u.segments.forEach(function(n){l.set(n,a),a+=n.byteLength})),l}({bytes:te,segments:j})}this.sourceUpdater_.appendBuffer({segmentInfo:o,type:h,bytes:A},this.handleAppendError_.bind(this,{segmentInfo:o,type:h,bytes:A}))},a.handleSegmentTimingInfo_=function(n,o,h){if(this.pendingSegment_&&o===this.pendingSegment_.requestId){var _=this.pendingSegment_.segment,C=n+"TimingInfo";_[C]||(_[C]={}),_[C].transmuxerPrependedSeconds=h.prependedContentDuration||0,_[C].transmuxedPresentationStart=h.start.presentation,_[C].transmuxedDecodeStart=h.start.decode,_[C].transmuxedPresentationEnd=h.end.presentation,_[C].transmuxedDecodeEnd=h.end.decode,_[C].baseMediaDecodeTime=h.baseMediaDecodeTime}},a.appendData_=function(n,o){var h=o.type,_=o.data;if(_&&_.byteLength&&("audio"!==h||!this.audioDisabled_)){var C=this.getInitSegmentAndUpdateState_({type:h,initSegment:o.initSegment,playlist:n.playlist,map:n.isFmp4?n.segment.map:null});this.appendToSourceBuffer_({segmentInfo:n,type:h,initSegment:C,data:_})}},a.loadSegment_=function(n){var o=this;this.state="WAITING",this.pendingSegment_=n,this.trimBackBuffer_(n),"number"==typeof n.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(n):this.loadQueue_.push(function(){var h=Ke({},n,{forceTimestampOffset:!0});Ke(n,o.generateSegmentInfo_(h)),o.isPendingTimestampOffset_=!1,o.updateTransmuxerAndRequestSegment_(n)})},a.updateTransmuxerAndRequestSegment_=function(n){var o=this;this.shouldUpdateTransmuxerTimestampOffset_(n.timestampOffset)&&(this.gopBuffer_.length=0,n.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:n.timestampOffset}));var h=this.createSimplifiedSegmentObj_(n),j=this.isEndOfStream_(n.mediaIndex,n.playlist,n.partIndex)||null!==this.mediaIndex&&n.timeline!==this.currentTimeline_&&n.timeline>0;this.logger_("Requesting "+Xh(n)),h.map&&!h.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),n.abortRequests=Yp({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:h,abortFn:this.handleAbort_.bind(this,n),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",n.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",n.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:j,endedTimelineFn:function(){o.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(Q){var Se=Q.message,je=Q.level,We=Q.stream;o.logger_(Xh(n)+" logged from transmuxer stream "+We+" as a "+je+": "+Se)}})},a.trimBackBuffer_=function(n){var o=function(u,a,l){var n=a-ko.BACK_BUFFER_LENGTH;return u.length&&(n=Math.max(n,u.start(0))),Math.min(a-l,n)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);o>0&&this.remove(0,o)},a.createSimplifiedSegmentObj_=function(n){var o=n.segment,h=n.part,_={resolvedUri:h?h.resolvedUri:o.resolvedUri,byterange:h?h.byterange:o.byterange,requestId:n.requestId,transmuxer:n.transmuxer,audioAppendStart:n.audioAppendStart,gopsToAlignWith:n.gopsToAlignWith,part:n.part},C=n.playlist.segments[n.mediaIndex-1];if(C&&C.timeline===o.timeline&&(C.videoTimingInfo?_.baseStartTime=C.videoTimingInfo.transmuxedDecodeEnd:C.audioTimingInfo&&(_.baseStartTime=C.audioTimingInfo.transmuxedDecodeEnd)),o.key){var A=o.key.iv||new Uint32Array([0,0,0,n.mediaIndex+n.playlist.mediaSequence]);_.key=this.segmentKey(o.key),_.key.iv=A}return o.map&&(_.map=this.initSegmentForMap(o.map)),_},a.saveTransferStats_=function(n){this.mediaRequests+=1,n&&(this.mediaBytesTransferred+=n.bytesReceived,this.mediaTransferDuration+=n.roundTripTime)},a.saveBandwidthRelatedStats_=function(n,o){this.pendingSegment_.byteLength=o.bytesReceived,n<Md?this.logger_("Ignoring segment's bandwidth because its duration of "+n+" is less than the min to record "+Md):(this.bandwidth=o.bandwidth,this.roundTrip=o.roundTripTime)},a.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")},a.segmentRequestFinished_=function(n,o,h){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,n,o,h));else if(this.saveTransferStats_(o.stats),this.pendingSegment_&&o.requestId===this.pendingSegment_.requestId){if(n){if(this.pendingSegment_=null,this.state="READY",-102===n.code)return;return this.pause(),-101===n.code?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(n),void this.trigger("error"))}var _=this.pendingSegment_;this.saveBandwidthRelatedStats_(_.duration,o.stats),_.endOfAllRequests=o.endOfAllRequests,h.gopInfo&&(this.gopBuffer_=function(u,a,l){if(!a.length)return u;if(l)return a.slice();for(var n=a[0].pts,o=0;o<u.length&&!(u[o].pts>=n);o++);return u.slice(0,o).concat(a)}(this.gopBuffer_,h.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(_)}},a.setTimeMapping_=function(n){var o=this.syncController_.mappingForTimeline(n);null!==o&&(this.timeMapping_=o)},a.updateMediaSecondsLoaded_=function(n){this.mediaSecondsLoaded+="number"==typeof n.start&&"number"==typeof n.end?n.end-n.start:n.duration},a.shouldUpdateTransmuxerTimestampOffset_=function(n){return null!==n&&("main"===this.loaderType_&&n!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&n!==this.sourceUpdater_.audioTimestampOffset())},a.trueSegmentStart_=function(n){var o=n.currentStart,_=n.mediaIndex,C=n.firstVideoFrameTimeForData;if(typeof o<"u")return o;if(!n.useVideoTimingInfo)return n.audioTimingInfo.start;var Se=n.playlist.segments[_-1];return 0===_||!Se||typeof Se.start>"u"||Se.end!==C+n.currentVideoTimestampOffset?C:n.videoTimingInfo.start},a.waitForAppendsToComplete_=function(n){var o=this.getCurrentMediaInfo_(n);if(!o)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var A="main"===this.loaderType_&&o.hasVideo,j=!this.audioDisabled_&&o.hasAudio&&!o.isMuxed;if(n.waitingOnAppends=0,!n.hasAppendedData_)return!n.timingInfo&&"number"==typeof n.timestampOffset&&(this.isPendingTimestampOffset_=!0),n.timingInfo={start:0},n.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(n),this.processMetadataQueue_()),void this.checkAppendsDone_(n);A&&n.waitingOnAppends++,j&&n.waitingOnAppends++,A&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,n)),j&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,n))},a.checkAppendsDone_=function(n){this.checkForAbort_(n.requestId)||(n.waitingOnAppends--,0===n.waitingOnAppends&&this.handleAppendsDone_())},a.checkForIllegalMediaSwitch=function(n){var o=function(u,a,l){return"main"===u&&a&&l?l.hasAudio||l.hasVideo?a.hasVideo&&!l.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!a.hasVideo&&l.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),n);return!!o&&(this.error({message:o,blacklistDuration:1/0}),this.trigger("error"),!0)},a.updateSourceBufferTimestampOffset_=function(n){if(null!==n.timestampOffset&&"number"==typeof n.timingInfo.start&&!n.changedTimestampOffset&&"main"===this.loaderType_){var o=!1;n.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:n.segment.videoTimingInfo,audioTimingInfo:n.segment.audioTimingInfo,timingInfo:n.timingInfo}),n.changedTimestampOffset=!0,n.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(n.timestampOffset),o=!0),n.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(n.timestampOffset),o=!0),o&&this.trigger("timestampoffset")}},a.getSegmentStartTimeForTimestampOffsetCalculation_=function(n){var o=n.videoTimingInfo,h=n.audioTimingInfo,_=n.timingInfo;return this.useDtsForTimestampOffset_?o&&"number"==typeof o.transmuxedDecodeStart?o.transmuxedDecodeStart:h&&"number"==typeof h.transmuxedDecodeStart?h.transmuxedDecodeStart:_.start:_.start},a.updateTimingInfoEnd_=function(n){n.timingInfo=n.timingInfo||{};var o=this.getMediaInfo_(),_="main"===this.loaderType_&&o&&o.hasVideo&&n.videoTimingInfo?n.videoTimingInfo:n.audioTimingInfo;_&&(n.timingInfo.end="number"==typeof _.end?_.end:_.start+n.duration)},a.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var n=this.pendingSegment_;this.updateTimingInfoEnd_(n),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:"main"===this.loaderType_});var o=function(u,a){if("hls"!==a)return null;var l=function(u){var a=0;return["video","audio"].forEach(function(l){var n=u[l+"TimingInfo"];if(n){var _,o=n.start,h=n.end;"bigint"==typeof o||"bigint"==typeof h?_=ce().BigInt(h)-ce().BigInt(o):"number"==typeof o&&"number"==typeof h&&(_=h-o),typeof _<"u"&&_>a&&(a=_)}}),"bigint"==typeof a&&a<Number.MAX_SAFE_INTEGER&&(a=Number(a)),a}({audioTimingInfo:u.audioTimingInfo,videoTimingInfo:u.videoTimingInfo});if(!l)return null;var n=u.playlist.targetDuration,o=rp({segmentDuration:l,maxDuration:2*n}),h=rp({segmentDuration:l,maxDuration:n});return o||h?{severity:o?"warn":"info",message:"Segment with index "+u.mediaIndex+" from playlist "+u.playlist.id+" has a duration of "+l+" when the reported duration is "+u.duration+" and the target duration is "+n+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1"}:null}(n,this.sourceType_);if(o&&("warn"===o.severity?St.log.warn(o.message):this.logger_(o.message)),this.recordThroughput_(n),this.pendingSegment_=null,this.state="READY",!n.isSyncRequest||(this.trigger("syncinfoupdate"),n.hasAppendedData_)){this.logger_("Appended "+Xh(n)),this.addSegmentMetadataCue_(n),this.fetchAtBuffer_=!0,this.currentTimeline_!==n.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:n.timeline}),"main"===this.loaderType_&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:n.timeline})),this.currentTimeline_=n.timeline,this.trigger("syncinfoupdate");var h=n.segment,_=n.part,C=h.end&&this.currentTime_()-h.end>3*n.playlist.targetDuration,A=_&&_.end&&this.currentTime_()-_.end>3*n.playlist.partTargetDuration;if(C||A)return this.logger_("bad "+(C?"segment":"part")+" "+Xh(n)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=n.mediaIndex,this.partIndex=n.partIndex,this.isEndOfStream_(n.mediaIndex,n.playlist,n.partIndex)&&this.endOfStream(),this.trigger("appended"),n.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+Xh(n))},a.recordThroughput_=function(n){if(n.duration<Md)this.logger_("Ignoring segment's throughput because its duration of "+n.duration+" is less than the min to record "+Md);else{var o=this.throughput.rate,h=Date.now()-n.endOfAllRequests+1,_=Math.floor(n.byteLength/h*8*1e3);this.throughput.rate+=(_-o)/++this.throughput.count}},a.addSegmentMetadataCue_=function(n){if(this.segmentMetadataTrack_){var o=n.segment,h=o.start,_=o.end;if(qy(h)&&qy(_)){np(h,_,this.segmentMetadataTrack_);var C=ce().WebKitDataCue||ce().VTTCue,A={custom:o.custom,dateTimeObject:o.dateTimeObject,dateTimeString:o.dateTimeString,bandwidth:n.playlist.attributes.BANDWIDTH,resolution:n.playlist.attributes.RESOLUTION,codecs:n.playlist.attributes.CODECS,byteLength:n.byteLength,uri:n.uri,timeline:n.timeline,playlist:n.playlist.id,start:h,end:_},te=new C(h,_,JSON.stringify(A));te.value=A,this.segmentMetadataTrack_.addCue(te)}}},u}(St.EventTarget);function Qc(){}var _c,Jh=function(u){return"string"!=typeof u?u:u.replace(/./,function(a){return a.toUpperCase()})},kd=["video","audio"],Ky=function(u,a){var l=a[u+"Buffer"];return l&&l.updating||a.queuePending[u]},Zy=function g(u,a){if(0!==a.queue.length){var l=0,n=a.queue[l];if("mediaSource"===n.type)return void(!a.updating()&&"closed"!==a.mediaSource.readyState&&(a.queue.shift(),n.action(a),n.doneFn&&n.doneFn(),g("audio",a),g("video",a)));if("mediaSource"!==u&&a.ready()&&"closed"!==a.mediaSource.readyState&&!Ky(u,a)){if(n.type!==u){if(l=function(u,a){for(var l=0;l<a.length;l++){var n=a[l];if("mediaSource"===n.type)return null;if(n.type===u)return l}return null}(u,a.queue),null===l)return;n=a.queue[l]}if(a.queue.splice(l,1),a.queuePending[u]=n,n.action(u,a),!n.doneFn)return a.queuePending[u]=null,void g(u,a)}}},K_=function(u,a){var l=a[u+"Buffer"],n=Jh(u);l&&(l.removeEventListener("updateend",a["on"+n+"UpdateEnd_"]),l.removeEventListener("error",a["on"+n+"Error_"]),a.codecs[u]=null,a[u+"Buffer"]=null)},Qu=function(u,a){return u&&a&&-1!==Array.prototype.indexOf.call(u.sourceBuffers,a)},ul_appendBuffer=function(u,a,l){return function(n,o){var h=o[n+"Buffer"];if(Qu(o.mediaSource,h)){o.logger_("Appending segment "+a.mediaIndex+"'s "+u.length+" bytes to "+n+"Buffer");try{h.appendBuffer(u)}catch(_){o.logger_("Error with code "+_.code+" "+(22===_.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+a.mediaIndex+" to "+n+"Buffer"),o.queuePending[n]=null,l(_)}}}},ul_remove=function(u,a){return function(l,n){var o=n[l+"Buffer"];if(Qu(n.mediaSource,o)){n.logger_("Removing "+u+" to "+a+" from "+l+"Buffer");try{o.remove(u,a)}catch{n.logger_("Remove "+u+" to "+a+" from "+l+"Buffer failed")}}}},ul_timestampOffset=function(u){return function(a,l){var n=l[a+"Buffer"];Qu(l.mediaSource,n)&&(l.logger_("Setting "+a+"timestampOffset to "+u),n.timestampOffset=u)}},ul_callback=function(u){return function(a,l){u()}},ul_endOfStream=function(u){return function(a){if("open"===a.mediaSource.readyState){a.logger_("Calling mediaSource endOfStream("+(u||"")+")");try{a.mediaSource.endOfStream(u)}catch(l){St.log.warn("Failed to call media source endOfStream",l)}}}},ul_duration=function(u){return function(a){a.logger_("Setting mediaSource duration to "+u);try{a.mediaSource.duration=u}catch(l){St.log.warn("Failed to set media source duration",l)}}},ul_addSourceBuffer=function(u,a){return function(l){var n=Jh(u),o=Rn(a);l.logger_("Adding "+u+"Buffer with codec "+a+" to mediaSource");var h=l.mediaSource.addSourceBuffer(o);h.addEventListener("updateend",l["on"+n+"UpdateEnd_"]),h.addEventListener("error",l["on"+n+"Error_"]),l.codecs[u]=a,l[u+"Buffer"]=h}},ul_removeSourceBuffer=function(u){return function(a){var l=a[u+"Buffer"];if(K_(u,a),Qu(a.mediaSource,l)){a.logger_("Removing "+u+"Buffer with codec "+a.codecs[u]+" from mediaSource");try{a.mediaSource.removeSourceBuffer(l)}catch(n){St.log.warn("Failed to removeSourceBuffer "+u+"Buffer",n)}}}},ul_changeType=function(u){return function(a,l){var n=l[a+"Buffer"],o=Rn(u);Qu(l.mediaSource,n)&&l.codecs[a]!==u&&(l.logger_("changing "+a+"Buffer codec from "+l.codecs[a]+" to "+u),n.changeType(o),l.codecs[a]=u)}},Ga=function(u){var a=u.type,l=u.sourceUpdater;l.queue.push({type:a,action:u.action,doneFn:u.doneFn,name:u.name}),Zy(a,l)},ef=function(u,a){return function(l){if(a.queuePending[u]){var n=a.queuePending[u].doneFn;a.queuePending[u]=null,n&&n(a[u+"Error_"])}Zy(u,a)}},ip=function(g){function u(l){var n;return(n=g.call(this)||this).mediaSource=l,n.sourceopenListener_=function(){return Zy("mediaSource",q(n))},n.mediaSource.addEventListener("sourceopen",n.sourceopenListener_),n.logger_=_l("SourceUpdater"),n.audioTimestampOffset_=0,n.videoTimestampOffset_=0,n.queue=[],n.queuePending={audio:null,video:null},n.delayedAudioAppendQueue_=[],n.videoAppendQueued_=!1,n.codecs={},n.onVideoUpdateEnd_=ef("video",q(n)),n.onAudioUpdateEnd_=ef("audio",q(n)),n.onVideoError_=function(o){n.videoError_=o},n.onAudioError_=function(o){n.audioError_=o},n.createdSourceBuffers_=!1,n.initializedEme_=!1,n.triggeredReady_=!1,n}re(u,g);var a=u.prototype;return a.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},a.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},a.hasInitializedAnyEme=function(){return this.initializedEme_},a.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},a.createSourceBuffers=function(n){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(n),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},a.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},a.addSourceBuffer=function(n,o){Ga({type:"mediaSource",sourceUpdater:this,action:ul_addSourceBuffer(n,o),name:"addSourceBuffer"})},a.abort=function(n){Ga({type:n,sourceUpdater:this,action:function(u,a){if("open"===a.mediaSource.readyState){var l=a[u+"Buffer"];if(Qu(a.mediaSource,l)){a.logger_("calling abort on "+u+"Buffer");try{l.abort()}catch(n){St.log.warn("Failed to abort on "+u+"Buffer",n)}}}},name:"abort"})},a.removeSourceBuffer=function(n){this.canRemoveSourceBuffer()?Ga({type:"mediaSource",sourceUpdater:this,action:ul_removeSourceBuffer(n),name:"removeSourceBuffer"}):St.log.error("removeSourceBuffer is not supported!")},a.canRemoveSourceBuffer=function(){return!St.browser.IE_VERSION&&!St.browser.IS_FIREFOX&&ce().MediaSource&&ce().MediaSource.prototype&&"function"==typeof ce().MediaSource.prototype.removeSourceBuffer},u.canChangeType=function(){return ce().SourceBuffer&&ce().SourceBuffer.prototype&&"function"==typeof ce().SourceBuffer.prototype.changeType},a.canChangeType=function(){return this.constructor.canChangeType()},a.changeType=function(n,o){this.canChangeType()?Ga({type:n,sourceUpdater:this,action:ul_changeType(o),name:"changeType"}):St.log.error("changeType is not supported!")},a.addOrChangeSourceBuffers=function(n){var o=this;if(!n||"object"!=typeof n||0===Object.keys(n).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(n).forEach(function(h){var _=n[h];if(!o.hasCreatedSourceBuffers())return o.addSourceBuffer(h,_);o.canChangeType()&&o.changeType(h,_)})},a.appendBuffer=function(n,o){var h=this,_=n.segmentInfo,C=n.type,A=n.bytes;if(this.processedAppend_=!0,"audio"===C&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([n,o]),void this.logger_("delayed audio append of "+A.length+" until video append");if(Ga({type:C,sourceUpdater:this,action:ul_appendBuffer(A,_||{mediaIndex:-1},o),doneFn:o,name:"appendBuffer"}),"video"===C){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var te=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+te.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,te.forEach(function(Q){h.appendBuffer.apply(h,Q)})}},a.audioBuffered=function(){return Qu(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:St.createTimeRange()},a.videoBuffered=function(){return Qu(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:St.createTimeRange()},a.buffered=function(){var n=Qu(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,o=Qu(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return o&&!n?this.audioBuffered():n&&!o?this.videoBuffered():function(u,a){var l=null,n=null,o=0,h=[],_=[];if(!(u&&u.length&&a&&a.length))return St.createTimeRange();for(var C=u.length;C--;)h.push({time:u.start(C),type:"start"}),h.push({time:u.end(C),type:"end"});for(C=a.length;C--;)h.push({time:a.start(C),type:"start"}),h.push({time:a.end(C),type:"end"});for(h.sort(function(A,j){return A.time-j.time}),C=0;C<h.length;C++)"start"===h[C].type?2==++o&&(l=h[C].time):"end"===h[C].type&&1==--o&&(n=h[C].time),null!==l&&null!==n&&(_.push([l,n]),l=null,n=null);return St.createTimeRanges(_)}(this.audioBuffered(),this.videoBuffered())},a.setDuration=function(n,o){void 0===o&&(o=Qc),Ga({type:"mediaSource",sourceUpdater:this,action:ul_duration(n),name:"duration",doneFn:o})},a.endOfStream=function(n,o){void 0===n&&(n=null),void 0===o&&(o=Qc),"string"!=typeof n&&(n=void 0),Ga({type:"mediaSource",sourceUpdater:this,action:ul_endOfStream(n),name:"endOfStream",doneFn:o})},a.removeAudio=function(n,o,h){void 0===h&&(h=Qc),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Ga({type:"audio",sourceUpdater:this,action:ul_remove(n,o),doneFn:h,name:"remove"}):h()},a.removeVideo=function(n,o,h){void 0===h&&(h=Qc),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Ga({type:"video",sourceUpdater:this,action:ul_remove(n,o),doneFn:h,name:"remove"}):h()},a.updating=function(){return!(!Ky("audio",this)&&!Ky("video",this))},a.audioTimestampOffset=function(n){return typeof n<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==n&&(Ga({type:"audio",sourceUpdater:this,action:ul_timestampOffset(n),name:"timestampOffset"}),this.audioTimestampOffset_=n),this.audioTimestampOffset_},a.videoTimestampOffset=function(n){return typeof n<"u"&&this.videoBuffer&&this.videoTimestampOffset!==n&&(Ga({type:"video",sourceUpdater:this,action:ul_timestampOffset(n),name:"timestampOffset"}),this.videoTimestampOffset_=n),this.videoTimestampOffset_},a.audioQueueCallback=function(n){this.audioBuffer&&Ga({type:"audio",sourceUpdater:this,action:ul_callback(n),name:"callback"})},a.videoQueueCallback=function(n){this.videoBuffer&&Ga({type:"video",sourceUpdater:this,action:ul_callback(n),name:"callback"})},a.dispose=function(){var n=this;this.trigger("dispose"),kd.forEach(function(o){n.abort(o),n.canRemoveSourceBuffer()?n.removeSourceBuffer(o):n[o+"QueueCallback"](function(){return K_(o,n)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},u}(St.EventTarget),tf=function(u){return decodeURIComponent(escape(String.fromCharCode.apply(null,u)))},rg=new Uint8Array("\n\n".split("").map(function(g){return g.charCodeAt(0)})),_i=function(g){function u(){return g.call(this,"Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")||this}return re(u,g),u}(ui(Error)),ym=function(g){function u(l,n){var o;return void 0===n&&(n={}),(o=g.call(this,l,n)||this).mediaSource_=null,o.subtitlesTrack_=null,o.loaderType_="subtitle",o.featuresNativeTextTracks_=l.featuresNativeTextTracks,o.loadVttJs=l.loadVttJs,o.shouldSaveSegmentTimingInfo_=!1,o}re(u,g);var a=u.prototype;return a.createTransmuxer_=function(){return null},a.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return St.createTimeRanges();var n=this.subtitlesTrack_.cues;return St.createTimeRanges([[n[0].startTime,n[n.length-1].startTime]])},a.initSegmentForMap=function(n,o){if(void 0===o&&(o=!1),!n)return null;var h=Hp(n),_=this.initSegments_[h];if(o&&!_&&n.bytes){var A=new Uint8Array(rg.byteLength+n.bytes.byteLength);A.set(n.bytes),A.set(rg,n.bytes.byteLength),this.initSegments_[h]=_={resolvedUri:n.resolvedUri,byterange:n.byterange,bytes:A}}return _||n},a.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},a.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},a.track=function(n){return typeof n>"u"||(this.subtitlesTrack_=n,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},a.remove=function(n,o){np(n,o,this.subtitlesTrack_)},a.fillBuffer_=function(){var n=this,o=this.chooseNextRequest_();if(o){if(null===this.syncController_.timestampOffsetForTimeline(o.timeline))return this.syncController_.one("timestampoffset",function(){n.state="READY",n.paused()||n.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(o)}},a.timestampOffsetForSegment_=function(){return null},a.chooseNextRequest_=function(){return this.skipEmptySegments_(g.prototype.chooseNextRequest_.call(this))},a.skipEmptySegments_=function(n){for(;n&&n.segment.empty;){if(n.mediaIndex+1>=n.playlist.segments.length){n=null;break}n=this.generateSegmentInfo_({playlist:n.playlist,mediaIndex:n.mediaIndex+1,startOfSegment:n.startOfSegment+n.duration,isSyncRequest:n.isSyncRequest})}return n},a.stopForError=function(n){this.error(n),this.state="READY",this.pause(),this.trigger("error")},a.segmentRequestFinished_=function(n,o,h){var _=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(o.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(n)return-101===n.code&&this.handleTimeout_(),-102===n.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(n);var C=this.pendingSegment_;this.saveBandwidthRelatedStats_(C.duration,o.stats),o.key&&this.segmentKey(o.key,!0),this.state="APPENDING",this.trigger("appending");var A=C.segment;if(A.map&&(A.map.bytes=o.map.bytes),C.bytes=o.bytes,"function"!=typeof ce().WebVTT&&"function"==typeof this.loadVttJs)return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then(function(){return _.segmentRequestFinished_(n,o,h)},function(){return _.stopForError({message:"Error loading vtt.js"})});A.requested=!0;try{this.parseVTTCues_(C)}catch(j){return void this.stopForError({message:j.message})}if(this.updateTimeMapping_(C,this.syncController_.timelines[C.timeline],this.playlist_),C.timingInfo=C.cues.length?{start:C.cues[0].startTime,end:C.cues[C.cues.length-1].endTime}:{start:C.startOfSegment,end:C.startOfSegment+C.duration},C.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");C.byteLength=C.bytes.byteLength,this.mediaSecondsLoaded+=A.duration,C.cues.forEach(function(j){_.subtitlesTrack_.addCue(_.featuresNativeTextTracks_?new(ce().VTTCue)(j.startTime,j.endTime,j.text):j)}),function(u){var a=u.cues;if(a)for(var l=0;l<a.length;l++){for(var n=[],o=0,h=0;h<a.length;h++)a[l].startTime===a[h].startTime&&a[l].endTime===a[h].endTime&&a[l].text===a[h].text&&++o>1&&n.push(a[h]);n.length&&n.forEach(function(_){return u.removeCue(_)})}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},a.handleData_=function(){},a.updateTimingInfoEnd_=function(){},a.parseVTTCues_=function(n){var o,h=!1;if("function"!=typeof ce().WebVTT)throw new _i;"function"==typeof ce().TextDecoder?o=new(ce().TextDecoder)("utf8"):(o=ce().WebVTT.StringDecoder(),h=!0);var _=new(ce().WebVTT.Parser)(ce(),ce().vttjs,o);if(n.cues=[],n.timestampmap={MPEGTS:0,LOCAL:0},_.oncue=n.cues.push.bind(n.cues),_.ontimestampmap=function(j){n.timestampmap=j},_.onparsingerror=function(j){St.log.warn("Error encountered when parsing cues: "+j.message)},n.segment.map){var C=n.segment.map.bytes;h&&(C=tf(C)),_.parse(C)}var A=n.bytes;h&&(A=tf(A)),_.parse(A),_.flush()},a.updateTimeMapping_=function(n,o,h){var _=n.segment;if(o){if(!n.cues.length)return void(_.empty=!0);var C=n.timestampmap,A=C.MPEGTS/Mr.ONE_SECOND_IN_TS-C.LOCAL+o.mapping;n.cues.forEach(function(Q){Q.startTime+=A,Q.endTime+=A}),h.syncInfo||(h.syncInfo={mediaSequence:h.mediaSequence+n.mediaIndex,time:Math.min(n.cues[0].startTime,n.cues[n.cues.length-1].startTime-_.duration)})}},u}(vm),_m=function(u,a){for(var l=u.cues,n=0;n<l.length;n++){var o=l[n];if(a>=o.adStartTime&&a<=o.adEndTime)return o}return null},Ev=[{name:"VOD",run:function(u,a,l,n,o){return l!==1/0?{time:0,segmentIndex:0,partIndex:null}:null}},{name:"ProgramDateTime",run:function(u,a,l,n,o){if(!Object.keys(u.timelineToDatetimeMappings).length)return null;var h=null,_=null,C=ma(a);o=o||0;for(var A=0;A<C.length;A++){var te=C[a.endList||0===o?A:C.length-(A+1)],Q=te.segment,Se=u.timelineToDatetimeMappings[Q.timeline];if(Se&&Q.dateTimeObject){var We=Q.dateTimeObject.getTime()/1e3+Se;if(Q.parts&&"number"==typeof te.partIndex)for(var $e=0;$e<te.partIndex;$e++)We+=Q.parts[$e].duration;var kt=Math.abs(o-We);if(null!==_&&(0===kt||_<kt))break;_=kt,h={time:We,segmentIndex:te.segmentIndex,partIndex:te.partIndex}}}return h}},{name:"Segment",run:function(u,a,l,n,o){var h=null,_=null;o=o||0;for(var C=ma(a),A=0;A<C.length;A++){var te=C[a.endList||0===o?A:C.length-(A+1)],Q=te.segment,Se=te.part&&te.part.start||Q&&Q.start;if(Q.timeline===n&&typeof Se<"u"){var je=Math.abs(o-Se);if(null!==_&&_<je)break;(!h||null===_||_>=je)&&(_=je,h={time:Se,segmentIndex:te.segmentIndex,partIndex:te.partIndex})}}return h}},{name:"Discontinuity",run:function(u,a,l,n,o){var h=null;if(o=o||0,a.discontinuityStarts&&a.discontinuityStarts.length)for(var _=null,C=0;C<a.discontinuityStarts.length;C++){var A=a.discontinuityStarts[C],te=u.discontinuities[a.discontinuitySequence+C+1];if(te){var Q=Math.abs(o-te.time);if(null!==_&&_<Q)break;(!h||null===_||_>=Q)&&(_=Q,h={time:te.time,segmentIndex:A,partIndex:null})}}return h}},{name:"Playlist",run:function(u,a,l,n,o){return a.syncInfo?{time:a.syncInfo.time,segmentIndex:a.syncInfo.mediaSequence-a.mediaSequence,partIndex:null}:null}}],Sv=function(g){function u(l){var n;return(n=g.call(this)||this).timelines=[],n.discontinuities=[],n.timelineToDatetimeMappings={},n.logger_=_l("SyncController"),n}re(u,g);var a=u.prototype;return a.getSyncPoint=function(n,o,h,_){var C=this.runStrategies_(n,o,h,_);return C.length?this.selectSyncPoint_(C,{key:"time",value:_}):null},a.getExpiredTime=function(n,o){if(!n||!n.segments)return null;var h=this.runStrategies_(n,o,n.discontinuitySequence,0);if(!h.length)return null;var _=this.selectSyncPoint_(h,{key:"segmentIndex",value:0});return _.segmentIndex>0&&(_.time*=-1),Math.abs(_.time+Tl({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:_.segmentIndex,endIndex:0}))},a.runStrategies_=function(n,o,h,_){for(var C=[],A=0;A<Ev.length;A++){var j=Ev[A],te=j.run(this,n,o,h,_);te&&(te.strategy=j.name,C.push({strategy:j.name,syncPoint:te}))}return C},a.selectSyncPoint_=function(n,o){for(var h=n[0].syncPoint,_=Math.abs(n[0].syncPoint[o.key]-o.value),C=n[0].strategy,A=1;A<n.length;A++){var j=Math.abs(n[A].syncPoint[o.key]-o.value);j<_&&(_=j,h=n[A].syncPoint,C=n[A].strategy)}return this.logger_("syncPoint for ["+o.key+": "+o.value+"] chosen with strategy ["+C+"]: [time:"+h.time+", segmentIndex:"+h.segmentIndex+("number"==typeof h.partIndex?",partIndex:"+h.partIndex:"")+"]"),h},a.saveExpiredSegmentInfo=function(n,o){var h=o.mediaSequence-n.mediaSequence;if(h>86400)St.log.warn("Not saving expired segment info. Media sequence gap "+h+" is too large.");else for(var _=h-1;_>=0;_--){var C=n.segments[_];if(C&&typeof C.start<"u"){o.syncInfo={mediaSequence:n.mediaSequence+_,time:C.start},this.logger_("playlist refresh sync: [time:"+o.syncInfo.time+", mediaSequence: "+o.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},a.setDateTimeMappingForStart=function(n){if(this.timelineToDatetimeMappings={},n.segments&&n.segments.length&&n.segments[0].dateTimeObject){var o=n.segments[0],h=o.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[o.timeline]=-h}},a.saveSegmentTimingInfo=function(n){var o=n.segmentInfo,h=n.shouldSaveTimelineMapping,_=this.calculateSegmentTimeMapping_(o,o.timingInfo,h),C=o.segment;_&&(this.saveDiscontinuitySyncInfo_(o),o.playlist.syncInfo||(o.playlist.syncInfo={mediaSequence:o.playlist.mediaSequence+o.mediaIndex,time:C.start}));var A=C.dateTimeObject;C.discontinuity&&h&&A&&(this.timelineToDatetimeMappings[C.timeline]=-A.getTime()/1e3)},a.timestampOffsetForTimeline=function(n){return typeof this.timelines[n]>"u"?null:this.timelines[n].time},a.mappingForTimeline=function(n){return typeof this.timelines[n]>"u"?null:this.timelines[n].mapping},a.calculateSegmentTimeMapping_=function(n,o,h){var j,te,_=n.segment,C=n.part,A=this.timelines[n.timeline];if("number"==typeof n.timestampOffset)A={time:n.startOfSegment,mapping:n.startOfSegment-o.start},h&&(this.timelines[n.timeline]=A,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+n.timeline+": [time: "+A.time+"] [mapping: "+A.mapping+"]")),j=n.startOfSegment,te=o.end+A.mapping;else{if(!A)return!1;j=o.start+A.mapping,te=o.end+A.mapping}return C&&(C.start=j,C.end=te),(!_.start||j<_.start)&&(_.start=j),_.end=te,!0},a.saveDiscontinuitySyncInfo_=function(n){var o=n.playlist,h=n.segment;if(h.discontinuity)this.discontinuities[h.timeline]={time:h.start,accuracy:0};else if(o.discontinuityStarts&&o.discontinuityStarts.length)for(var _=0;_<o.discontinuityStarts.length;_++){var C=o.discontinuityStarts[_],A=o.discontinuitySequence+_+1,j=C-n.mediaIndex,te=Math.abs(j);if(!this.discontinuities[A]||this.discontinuities[A].accuracy>te){var Q;Q=j<0?h.start-Tl({defaultDuration:o.targetDuration,durationList:o.segments,startIndex:n.mediaIndex,endIndex:C}):h.end+Tl({defaultDuration:o.targetDuration,durationList:o.segments,startIndex:n.mediaIndex+1,endIndex:C}),this.discontinuities[A]={time:Q,accuracy:te}}}},a.dispose=function(){this.trigger("dispose"),this.off()},u}(St.EventTarget),Z_=function(g){function u(){var l;return(l=g.call(this)||this).pendingTimelineChanges_={},l.lastTimelineChanges_={},l}re(u,g);var a=u.prototype;return a.clearPendingTimelineChange=function(n){this.pendingTimelineChanges_[n]=null,this.trigger("pendingtimelinechange")},a.pendingTimelineChange=function(n){var o=n.type,h=n.from,_=n.to;return"number"==typeof h&&"number"==typeof _&&(this.pendingTimelineChanges_[o]={type:o,from:h,to:_},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[o]},a.lastTimelineChange=function(n){var o=n.type,h=n.from,_=n.to;return"number"==typeof h&&"number"==typeof _&&(this.lastTimelineChanges_[o]={type:o,from:h,to:_},delete this.pendingTimelineChanges_[o],this.trigger("timelinechange")),this.lastTimelineChanges_[o]},a.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},u}(St.EventTarget),bm=th(jy(function(){var g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function u(Zt,rn,xn){return Zt(xn={path:rn,exports:{},require:function(sn,Dn){return function a(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},xn.exports),xn.exports}var l=u(function(Zt){function rn(ln,sn){for(var Dn=0;Dn<sn.length;Dn++){var hn=sn[Dn];hn.enumerable=hn.enumerable||!1,hn.configurable=!0,"value"in hn&&(hn.writable=!0),Object.defineProperty(ln,hn.key,hn)}}Zt.exports=function xn(ln,sn,Dn){return sn&&rn(ln.prototype,sn),Dn&&rn(ln,Dn),ln},Zt.exports.default=Zt.exports,Zt.exports.__esModule=!0}),n=u(function(Zt){function rn(xn,ln){return Zt.exports=rn=Object.setPrototypeOf||function(Dn,hn){return Dn.__proto__=hn,Dn},Zt.exports.default=Zt.exports,Zt.exports.__esModule=!0,rn(xn,ln)}Zt.exports=rn,Zt.exports.default=Zt.exports,Zt.exports.__esModule=!0}),o=u(function(Zt){Zt.exports=function rn(xn,ln){xn.prototype=Object.create(ln.prototype),xn.prototype.constructor=xn,n(xn,ln)},Zt.exports.default=Zt.exports,Zt.exports.__esModule=!0}),h=function(){function Zt(){this.listeners={}}var rn=Zt.prototype;return rn.on=function(ln,sn){this.listeners[ln]||(this.listeners[ln]=[]),this.listeners[ln].push(sn)},rn.off=function(ln,sn){if(!this.listeners[ln])return!1;var Dn=this.listeners[ln].indexOf(sn);return this.listeners[ln]=this.listeners[ln].slice(0),this.listeners[ln].splice(Dn,1),Dn>-1},rn.trigger=function(ln){var sn=this.listeners[ln];if(sn)if(2===arguments.length)for(var Dn=sn.length,hn=0;hn<Dn;++hn)sn[hn].call(this,arguments[1]);else for(var Cr=Array.prototype.slice.call(arguments,1),nr=sn.length,Br=0;Br<nr;++Br)sn[Br].apply(this,Cr)},rn.dispose=function(){this.listeners={}},rn.pipe=function(ln){this.on("data",function(sn){ln.push(sn)})},Zt}(),A=null,j=function(){function Zt(xn){A||(A=function(){var hn,Cr,nr,Es,co,Eo,ka,br,rn=[[[],[],[],[],[]],[[],[],[],[],[]]],xn=rn[0],ln=rn[1],sn=xn[4],Dn=ln[4],Br=[],Ts=[];for(hn=0;hn<256;hn++)Ts[(Br[hn]=hn<<1^283*(hn>>7))^hn]=hn;for(Cr=nr=0;!sn[Cr];Cr^=Es||1,nr=Ts[nr]||1)for(sn[Cr]=Eo=(Eo=nr^nr<<1^nr<<2^nr<<3^nr<<4)>>8^255&Eo^99,Dn[Eo]=Cr,br=16843009*Br[co=Br[Es=Br[Cr]]]^65537*co^257*Es^16843008*Cr,ka=257*Br[Eo]^16843008*Eo,hn=0;hn<4;hn++)xn[hn][Cr]=ka=ka<<24^ka>>>8,ln[hn][Eo]=br=br<<24^br>>>8;for(hn=0;hn<5;hn++)xn[hn]=xn[hn].slice(0),ln[hn]=ln[hn].slice(0);return rn}()),this._tables=[[A[0][0].slice(),A[0][1].slice(),A[0][2].slice(),A[0][3].slice(),A[0][4].slice()],[A[1][0].slice(),A[1][1].slice(),A[1][2].slice(),A[1][3].slice(),A[1][4].slice()]];var ln,sn,Dn,hn=this._tables[0][4],Cr=this._tables[1],nr=xn.length,Br=1;if(4!==nr&&6!==nr&&8!==nr)throw new Error("Invalid aes key size");var Ts=xn.slice(0),Es=[];for(this._key=[Ts,Es],ln=nr;ln<4*nr+28;ln++)Dn=Ts[ln-1],(ln%nr==0||8===nr&&ln%nr==4)&&(Dn=hn[Dn>>>24]<<24^hn[Dn>>16&255]<<16^hn[Dn>>8&255]<<8^hn[255&Dn],ln%nr==0&&(Dn=Dn<<8^Dn>>>24^Br<<24,Br=Br<<1^283*(Br>>7))),Ts[ln]=Ts[ln-nr]^Dn;for(sn=0;ln;sn++,ln--)Dn=Ts[3&sn?ln:ln-4],Es[sn]=ln<=4||sn<4?Dn:Cr[0][hn[Dn>>>24]]^Cr[1][hn[Dn>>16&255]]^Cr[2][hn[Dn>>8&255]]^Cr[3][hn[255&Dn]]}return Zt.prototype.decrypt=function(ln,sn,Dn,hn,Cr,nr){var Eo,ka,br,ll,Br=this._key[1],Ts=ln^Br[0],Es=hn^Br[1],co=Dn^Br[2],ia=sn^Br[3],cp=Br.length/4-2,cl=4,Xc=this._tables[1],Ss=Xc[0],ro=Xc[1],Ju=Xc[2],dp=Xc[3],vg=Xc[4];for(ll=0;ll<cp;ll++)Eo=Ss[Ts>>>24]^ro[Es>>16&255]^Ju[co>>8&255]^dp[255&ia]^Br[cl],ka=Ss[Es>>>24]^ro[co>>16&255]^Ju[ia>>8&255]^dp[255&Ts]^Br[cl+1],br=Ss[co>>>24]^ro[ia>>16&255]^Ju[Ts>>8&255]^dp[255&Es]^Br[cl+2],ia=Ss[ia>>>24]^ro[Ts>>16&255]^Ju[Es>>8&255]^dp[255&co]^Br[cl+3],cl+=4,Ts=Eo,Es=ka,co=br;for(ll=0;ll<4;ll++)Cr[(3&-ll)+nr]=vg[Ts>>>24]<<24^vg[Es>>16&255]<<16^vg[co>>8&255]<<8^vg[255&ia]^Br[cl++],Eo=Ts,Ts=Es,Es=co,co=ia,ia=Eo},Zt}(),te=function(Zt){function rn(){var ln;return(ln=Zt.call(this,h)||this).jobs=[],ln.delay=1,ln.timeout_=null,ln}o(rn,Zt);var xn=rn.prototype;return xn.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},xn.push=function(sn){this.jobs.push(sn),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},rn}(h),Q=function(rn){return rn<<24|(65280&rn)<<8|(16711680&rn)>>8|rn>>>24},je=function(){function Zt(xn,ln,sn,Dn){var hn=Zt.STEP,Cr=new Int32Array(xn.buffer),nr=new Uint8Array(xn.byteLength),Br=0;for(this.asyncStream_=new te,this.asyncStream_.push(this.decryptChunk_(Cr.subarray(Br,Br+hn),ln,sn,nr)),Br=hn;Br<Cr.length;Br+=hn)sn=new Uint32Array([Q(Cr[Br-4]),Q(Cr[Br-3]),Q(Cr[Br-2]),Q(Cr[Br-1])]),this.asyncStream_.push(this.decryptChunk_(Cr.subarray(Br,Br+hn),ln,sn,nr));this.asyncStream_.push(function(){Dn(null,function _(Zt){return Zt.subarray(0,Zt.byteLength-Zt[Zt.byteLength-1])}(nr))})}return Zt.prototype.decryptChunk_=function(ln,sn,Dn,hn){return function(){var Cr=function(rn,xn,ln){var nr,Br,Ts,Es,co,ia,Eo,ka,br,sn=new Int32Array(rn.buffer,rn.byteOffset,rn.byteLength>>2),Dn=new j(Array.prototype.slice.call(xn)),hn=new Uint8Array(rn.byteLength),Cr=new Int32Array(hn.buffer);for(nr=ln[0],Br=ln[1],Ts=ln[2],Es=ln[3],br=0;br<sn.length;br+=4)co=Q(sn[br]),ia=Q(sn[br+1]),Eo=Q(sn[br+2]),ka=Q(sn[br+3]),Dn.decrypt(co,ia,Eo,ka,Cr,br),Cr[br]=Q(Cr[br]^nr),Cr[br+1]=Q(Cr[br+1]^Br),Cr[br+2]=Q(Cr[br+2]^Ts),Cr[br+3]=Q(Cr[br+3]^Es),nr=co,Br=ia,Ts=Eo,Es=ka;return hn}(ln,sn,Dn);hn.set(Cr,ln.byteOffset)}},l(Zt,null,[{key:"STEP",get:function(){return 32e3}}]),Zt}(),pn=(typeof window<"u"?window:typeof g<"u"?g:typeof self<"u"?self:{}).BigInt||Number;pn("0x1"),pn("0x100"),pn("0x10000"),pn("0x1000000"),pn("0x100000000"),pn("0x10000000000"),pn("0x1000000000000"),pn("0x100000000000000"),pn("0x10000000000000000");self.onmessage=function(Zt){var rn=Zt.data,xn=new Uint8Array(rn.encrypted.bytes,rn.encrypted.byteOffset,rn.encrypted.byteLength),ln=new Uint32Array(rn.key.bytes,rn.key.byteOffset,rn.key.byteLength/4),sn=new Uint32Array(rn.iv.bytes,rn.iv.byteOffset,rn.iv.byteLength/4);new je(xn,ln,sn,function(Dn,hn){self.postMessage(function(rn){var xn={};return Object.keys(rn).forEach(function(ln){var sn=rn[ln];xn[ln]=function(rn){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(rn):rn&&rn.buffer instanceof ArrayBuffer}(sn)?{bytes:sn.buffer,byteOffset:sn.byteOffset,byteLength:sn.byteLength}:sn}),xn}({source:rn.source,decrypted:hn}),[hn.buffer])})}})),Y_=cv(bm),Tm=function(u){var a=u.default?"main":"alternative";return u.characteristics&&u.characteristics.indexOf("public.accessibility.describes-video")>=0&&(a="main-desc"),a},rf=function(u,a){u.abort(),u.pause(),a&&a.activePlaylistLoader&&(a.activePlaylistLoader.pause(),a.activePlaylistLoader=null)},ig=function(u,a){a.activePlaylistLoader=u,u.load()},yc={AUDIO:function(u,a){return function(){var n=a.mediaTypes[u],o=a.blacklistCurrentPlaylist;rf(a.segmentLoaders[u],n);var h=n.activeTrack(),_=n.activeGroup(),C=(_.filter(function(te){return te.default})[0]||_[0]).id,A=n.tracks[C];if(h!==A){for(var j in St.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),n.tracks)n.tracks[j].enabled=n.tracks[j]===A;n.onTrackChanged()}else o({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(u,a){return function(){var l=a.segmentLoaders[u],n=a.mediaTypes[u];St.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),rf(l,n);var o=n.activeTrack();o&&(o.mode="disabled"),n.onTrackChanged()}}},af={AUDIO:function(u,a,l){if(a){var n=l.tech,o=l.requestOptions,h=l.segmentLoaders[u];a.on("loadedmetadata",function(){var _=a.media();h.playlist(_,o),(!n.paused()||_.endList&&"none"!==n.preload())&&h.load()}),a.on("loadedplaylist",function(){h.playlist(a.media(),o),n.paused()||h.load()}),a.on("error",yc[u](u,l))}},SUBTITLES:function(u,a,l){var n=l.tech,o=l.requestOptions,h=l.segmentLoaders[u],_=l.mediaTypes[u];a.on("loadedmetadata",function(){var C=a.media();h.playlist(C,o),h.track(_.activeTrack()),(!n.paused()||C.endList&&"none"!==n.preload())&&h.load()}),a.on("loadedplaylist",function(){h.playlist(a.media(),o),n.paused()||h.load()}),a.on("error",yc[u](u,l))}},wv={AUDIO:function(u,a){var l=a.vhs,n=a.sourceType,o=a.segmentLoaders[u],h=a.requestOptions,_=a.master.mediaGroups,C=a.mediaTypes[u],A=C.groups,j=C.tracks,te=C.logger_,Q=a.masterPlaylistLoader,Se=Up(Q.master);for(var je in(!_[u]||0===Object.keys(_[u]).length)&&(_[u]={main:{default:{default:!0}}},Se&&(_[u].main.default.playlists=Q.master.playlists)),_[u])for(var We in A[je]||(A[je]=[]),_[u][je]){var $e=_[u][je][We],kt=void 0;if(Se?(te("AUDIO group '"+je+"' label '"+We+"' is a master playlist"),$e.isMasterPlaylist=!0,kt=null):kt="vhs-json"===n&&$e.playlists?new Jd($e.playlists[0],l,h):$e.resolvedUri?new Jd($e.resolvedUri,l,h):$e.playlists&&"dash"===n?new Dd($e.playlists[0],l,h,Q):null,$e=St.mergeOptions({id:We,playlistLoader:kt},$e),af[u](u,$e.playlistLoader,a),A[je].push($e),typeof j[We]>"u"){var pn=new St.AudioTrack({id:We,kind:Tm($e),enabled:!1,language:$e.language,default:$e.default,label:We});j[We]=pn}}o.on("error",yc[u](u,a))},SUBTITLES:function(u,a){var l=a.tech,n=a.vhs,o=a.sourceType,h=a.segmentLoaders[u],_=a.requestOptions,C=a.master.mediaGroups,A=a.mediaTypes[u],j=A.groups,te=A.tracks,Q=a.masterPlaylistLoader;for(var Se in C[u])for(var je in j[Se]||(j[Se]=[]),C[u][Se])if(!C[u][Se][je].forced){var We=C[u][Se][je],$e=void 0;if("hls"===o)$e=new Jd(We.resolvedUri,n,_);else if("dash"===o){if(!We.playlists.filter(function(jn){return jn.excludeUntil!==1/0}).length)return;$e=new Dd(We.playlists[0],n,_,Q)}else"vhs-json"===o&&($e=new Jd(We.playlists?We.playlists[0]:We.resolvedUri,n,_));if(We=St.mergeOptions({id:je,playlistLoader:$e},We),af[u](u,We.playlistLoader,a),j[Se].push(We),typeof te[je]>"u"){var pn=l.addRemoteTextTrack({id:je,kind:"subtitles",default:We.default&&We.autoselect,language:We.language,label:je},!1).track;te[je]=pn}}h.on("error",yc[u](u,a))},"CLOSED-CAPTIONS":function(u,a){var l=a.tech,n=a.master.mediaGroups,o=a.mediaTypes[u],h=o.groups,_=o.tracks;for(var C in n[u])for(var A in h[C]||(h[C]=[]),n[u][C]){var j=n[u][C][A];if(/^(?:CC|SERVICE)/.test(j.instreamId)){var te=l.options_.vhs&&l.options_.vhs.captionServices||{},Q={label:A,language:j.language,instreamId:j.instreamId,default:j.default&&j.autoselect};if(te[Q.instreamId]&&(Q=St.mergeOptions(Q,te[Q.instreamId])),void 0===Q.default&&delete Q.default,h[C].push(St.mergeOptions({id:A},j)),typeof _[A]>"u"){var Se=l.addRemoteTextTrack({id:Q.instreamId,kind:"captions",default:Q.default,language:Q.language,label:Q.label},!1).track;_[A]=Se}}}}},Qy=function g(u,a){for(var l=0;l<u.length;l++)if(Qd(a,u[l])||u[l].playlists&&g(u[l].playlists,a))return!0;return!1},oh={AUDIO:function(u,a){return function(){var l=a.mediaTypes[u].tracks;for(var n in l)if(l[n].enabled)return l[n];return null}},SUBTITLES:function(u,a){return function(){var l=a.mediaTypes[u].tracks;for(var n in l)if("showing"===l[n].mode||"hidden"===l[n].mode)return l[n];return null}}},og=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Iv=function(u){return this.audioSegmentLoader_[u]+this.mainSegmentLoader_[u]},xv=function(g){function u(l){var n;n=g.call(this)||this;var o=l.src,h=l.handleManifestRedirects,_=l.withCredentials,C=l.tech,A=l.bandwidth,j=l.externVhs,te=l.useCueTags,Q=l.blacklistDuration,Se=l.enableLowInitialPlaylist,je=l.sourceType,We=l.cacheEncryptionKeys,$e=l.experimentalBufferBasedABR,kt=l.experimentalLeastPixelDiffSelector,pn=l.captionServices;if(!o)throw new Error("A non-empty playlist URL or JSON manifest string is required");var jn=l.maxPlaylistRetries;(null===jn||typeof jn>"u")&&(jn=1/0),_c=j,n.experimentalBufferBasedABR=!!$e,n.experimentalLeastPixelDiffSelector=!!kt,n.withCredentials=_,n.tech_=C,n.vhs_=C.vhs,n.sourceType_=je,n.useCueTags_=te,n.blacklistDuration=Q,n.maxPlaylistRetries=jn,n.enableLowInitialPlaylist=Se,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:_,handleManifestRedirects:h,maxPlaylistRetries:jn,timeout:null},n.on("error",n.pauseLoading),n.mediaTypes_=function(){var u={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(a){u[a]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Qc,activeTrack:Qc,getActiveGroup:Qc,onGroupChanged:Qc,onTrackChanged:Qc,lastTrack_:null,logger_:_l("MediaGroups["+a+"]")}}),u}(),n.mediaSource=new(ce().MediaSource),n.handleDurationChange_=n.handleDurationChange_.bind(q(n)),n.handleSourceOpen_=n.handleSourceOpen_.bind(q(n)),n.handleSourceEnded_=n.handleSourceEnded_.bind(q(n)),n.mediaSource.addEventListener("durationchange",n.handleDurationChange_),n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen_),n.mediaSource.addEventListener("sourceended",n.handleSourceEnded_),n.seekable_=St.createTimeRanges(),n.hasPlayed_=!1,n.syncController_=new Sv(l),n.segmentMetadataTrack_=C.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=new Y_,n.sourceUpdater_=new ip(n.mediaSource),n.inbandTextTracks_={},n.timelineChangeController_=new Z_;var Zt={vhs:n.vhs_,parse708captions:l.parse708captions,useDtsForTimestampOffset:l.useDtsForTimestampOffset,captionServices:pn,mediaSource:n.mediaSource,currentTime:n.tech_.currentTime.bind(n.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.duration()},hasPlayed:function(){return n.hasPlayed_},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:A,syncController:n.syncController_,decrypter:n.decrypter_,sourceType:n.sourceType_,inbandTextTracks:n.inbandTextTracks_,cacheEncryptionKeys:We,sourceUpdater:n.sourceUpdater_,timelineChangeController:n.timelineChangeController_,experimentalExactManifestTimings:l.experimentalExactManifestTimings};n.masterPlaylistLoader_="dash"===n.sourceType_?new Dd(o,n.vhs_,n.requestOptions_):new Jd(o,n.vhs_,n.requestOptions_),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=new vm(St.mergeOptions(Zt,{segmentMetadataTrack:n.segmentMetadataTrack_,loaderType:"main"}),l),n.audioSegmentLoader_=new vm(St.mergeOptions(Zt,{loaderType:"audio"}),l),n.subtitleSegmentLoader_=new ym(St.mergeOptions(Zt,{loaderType:"vtt",featuresNativeTextTracks:n.tech_.featuresNativeTextTracks,loadVttJs:function(){return new Promise(function(ln,sn){function Dn(){C.off("vttjserror",hn),ln()}function hn(){C.off("vttjsloaded",Dn),sn()}C.one("vttjsloaded",Dn),C.one("vttjserror",hn),C.addWebVttScript_()})}}),l),n.setupSegmentLoaderListeners_(),n.experimentalBufferBasedABR&&(n.masterPlaylistLoader_.one("loadedplaylist",function(){return n.startABRTimer_()}),n.tech_.on("pause",function(){return n.stopABRTimer_()}),n.tech_.on("play",function(){return n.startABRTimer_()})),og.forEach(function(xn){n[xn+"_"]=Iv.bind(q(n),xn)}),n.logger_=_l("MPC"),n.triggeredFmp4Usage=!1,"none"===n.tech_.preload()?(n.loadOnPlay_=function(){n.loadOnPlay_=null,n.masterPlaylistLoader_.load()},n.tech_.one("play",n.loadOnPlay_)):n.masterPlaylistLoader_.load(),n.timeToLoadedData__=-1,n.mainAppendsToLoadedData__=-1,n.audioAppendsToLoadedData__=-1;var rn="none"===n.tech_.preload()?"play":"loadstart";return n.tech_.one(rn,function(){var xn=Date.now();n.tech_.one("loadeddata",function(){n.timeToLoadedData__=Date.now()-xn,n.mainAppendsToLoadedData__=n.mainSegmentLoader_.mediaAppends,n.audioAppendsToLoadedData__=n.audioSegmentLoader_.mediaAppends})}),n}re(u,g);var a=u.prototype;return a.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},a.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},a.appendsToLoadedData_=function(){var n=this.mainAppendsToLoadedData_(),o=this.audioAppendsToLoadedData_();return-1===n||-1===o?-1:n+o},a.timeToLoadedData_=function(){return this.timeToLoadedData__},a.checkABR_=function(n){void 0===n&&(n="abr");var o=this.selectPlaylist();o&&this.shouldSwitchToMedia_(o)&&this.switchMedia_(o,n)},a.switchMedia_=function(n,o,h){var _=this.media(),C=_&&(_.id||_.uri),A=n.id||n.uri;C&&C!==A&&(this.logger_("switch media "+C+" -> "+A+" from "+o),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+o})),this.masterPlaylistLoader_.media(n,h)},a.startABRTimer_=function(){var n=this;this.stopABRTimer_(),this.abrTimer_=ce().setInterval(function(){return n.checkABR_()},250)},a.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(ce().clearInterval(this.abrTimer_),this.abrTimer_=null)},a.getAudioTrackPlaylists_=function(){var n=this.master(),o=n&&n.playlists||[];if(!n||!n.mediaGroups||!n.mediaGroups.AUDIO)return o;var C,h=n.mediaGroups.AUDIO,_=Object.keys(h);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)C=this.mediaTypes_.AUDIO.activeTrack();else{var A=h.main||_.length&&h[_[0]];for(var j in A)if(A[j].default){C={label:j};break}}if(!C)return o;var te=[];for(var Q in h)if(h[Q][C.label]){var Se=h[Q][C.label];if(Se.playlists&&Se.playlists.length)te.push.apply(te,Se.playlists);else if(Se.uri)te.push(Se);else if(n.playlists.length)for(var je=0;je<n.playlists.length;je++){var We=n.playlists[je];We.attributes&&We.attributes.AUDIO&&We.attributes.AUDIO===Q&&te.push(We)}}return te.length?te:o},a.setupMasterPlaylistLoaderListeners_=function(){var n=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var o=n.masterPlaylistLoader_.media(),h=1.5*o.targetDuration*1e3;n.requestOptions_.timeout=Hc(n.masterPlaylistLoader_.master,n.masterPlaylistLoader_.media())?0:h,o.endList&&"none"!==n.tech_.preload()&&(n.mainSegmentLoader_.playlist(o,n.requestOptions_),n.mainSegmentLoader_.load()),function(u){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(je){wv[je](je,u)});var a=u.mediaTypes,l=u.masterPlaylistLoader,n=u.tech,o=u.vhs,h=u.segmentLoaders,_=h.AUDIO,C=h.main;["AUDIO","SUBTITLES"].forEach(function(je){a[je].activeGroup=function(u,a){return function(l){var o=a.mediaTypes[u].groups,h=a.masterPlaylistLoader.media();if(!h)return null;var _=null;h.attributes[u]&&(_=o[h.attributes[u]]);var C=Object.keys(o);if(!_)if("AUDIO"===u&&C.length>1&&Up(a.master))for(var A=0;A<C.length;A++){var j=o[C[A]];if(Qy(j,h)){_=j;break}}else o.main?_=o.main:1===C.length&&(_=o[C[0]]);return typeof l>"u"?_:null!==l&&_&&_.filter(function(te){return te.id===l.id})[0]||null}}(je,u),a[je].activeTrack=oh[je](je,u),a[je].onGroupChanged=function(u,a){return function(){var l=a.segmentLoaders,n=l[u],o=l.main,h=a.mediaTypes[u],_=h.activeTrack(),C=h.getActiveGroup(),A=h.activePlaylistLoader,j=h.lastGroup_;if((!C||!j||C.id!==j.id)&&(h.lastGroup_=C,h.lastTrack_=_,rf(n,h),C&&!C.isMasterPlaylist)){if(!C.playlistLoader)return void(A&&o.resetEverything());n.resyncLoader(),ig(C.playlistLoader,h)}}}(je,u),a[je].onGroupChanging=function(u,a){return function(){var l=a.segmentLoaders[u];a.mediaTypes[u].lastGroup_=null,l.abort(),l.pause()}}(je,u),a[je].onTrackChanged=function(u,a){return function(){var l=a.masterPlaylistLoader,n=a.segmentLoaders,o=n[u],h=n.main,_=a.mediaTypes[u],C=_.activeTrack(),A=_.getActiveGroup(),j=_.activePlaylistLoader,te=_.lastTrack_;if((!te||!C||te.id!==C.id)&&(_.lastGroup_=A,_.lastTrack_=C,rf(o,_),A)){if(A.isMasterPlaylist){if(!C||!te||C.id===te.id)return;var Q=a.vhs.masterPlaylistController_,Se=Q.selectPlaylist();if(Q.media()===Se)return;return _.logger_("track change. Switching master audio from "+te.id+" to "+C.id),l.pause(),h.resetEverything(),void Q.fastQualityChange_(Se)}if("AUDIO"===u){if(!A.playlistLoader)return h.setAudio(!0),void h.resetEverything();o.setAudio(!0),h.setAudio(!1)}if(j===A.playlistLoader)return void ig(A.playlistLoader,_);o.track&&o.track(C),o.resetEverything(),ig(A.playlistLoader,_)}}}(je,u),a[je].getActiveGroup=function(u,a){var l=a.mediaTypes;return function(){var n=l[u].activeTrack();return n?l[u].activeGroup(n):null}}(je,u)});var A=a.AUDIO.activeGroup();if(A){var j=(A.filter(function(je){return je.default})[0]||A[0]).id;a.AUDIO.tracks[j].enabled=!0,a.AUDIO.onGroupChanged(),a.AUDIO.onTrackChanged(),a.AUDIO.getActiveGroup().playlistLoader?(C.setAudio(!1),_.setAudio(!0)):C.setAudio(!0)}l.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(je){return a[je].onGroupChanged()})}),l.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(je){return a[je].onGroupChanging()})});var Q=function(){a.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"vhs-audio-change"}),n.trigger({type:"usage",name:"hls-audio-change"})};for(var Se in n.audioTracks().addEventListener("change",Q),n.remoteTextTracks().addEventListener("change",a.SUBTITLES.onTrackChanged),o.on("dispose",function(){n.audioTracks().removeEventListener("change",Q),n.remoteTextTracks().removeEventListener("change",a.SUBTITLES.onTrackChanged)}),n.clearTracks("audio"),a.AUDIO.tracks)n.audioTracks().addTrack(a.AUDIO.tracks[Se])}({sourceType:n.sourceType_,segmentLoaders:{AUDIO:n.audioSegmentLoader_,SUBTITLES:n.subtitleSegmentLoader_,main:n.mainSegmentLoader_},tech:n.tech_,requestOptions:n.requestOptions_,masterPlaylistLoader:n.masterPlaylistLoader_,vhs:n.vhs_,master:n.master(),mediaTypes:n.mediaTypes_,blacklistCurrentPlaylist:n.blacklistCurrentPlaylist.bind(n)}),n.triggerPresenceUsage_(n.master(),o),n.setupFirstPlay(),!n.mediaTypes_.AUDIO.activePlaylistLoader||n.mediaTypes_.AUDIO.activePlaylistLoader.media()?n.trigger("selectedinitialmedia"):n.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){n.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){n.loadOnPlay_&&n.tech_.off("play",n.loadOnPlay_);var o=n.masterPlaylistLoader_.media();if(!o){var h;if(n.excludeUnsupportedVariants_(),n.enableLowInitialPlaylist&&(h=n.selectInitialPlaylist()),h||(h=n.selectPlaylist()),!h||!n.shouldSwitchToMedia_(h))return;if(n.initialMedia_=h,n.switchMedia_(n.initialMedia_,"initial"),"vhs-json"!==n.sourceType_||!n.initialMedia_.segments)return;o=n.initialMedia_}n.handleUpdatedMediaPlaylist(o)}),this.masterPlaylistLoader_.on("error",function(){n.blacklistCurrentPlaylist(n.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){n.mainSegmentLoader_.abort(),n.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var o=n.masterPlaylistLoader_.media(),h=1.5*o.targetDuration*1e3;n.requestOptions_.timeout=Hc(n.masterPlaylistLoader_.master,n.masterPlaylistLoader_.media())?0:h,n.masterPlaylistLoader_.load(),n.mainSegmentLoader_.playlist(o,n.requestOptions_),n.mainSegmentLoader_.load(),n.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var o=n.masterPlaylistLoader_.media();"playlist-unchanged"!==o.lastExcludeReason_&&n.stuckAtPlaylistEnd_(o)&&(n.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),n.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){n.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),n.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){n.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),n.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},a.handleUpdatedMediaPlaylist=function(n){this.useCueTags_&&this.updateAdCues_(n),this.mainSegmentLoader_.playlist(n,this.requestOptions_),this.updateDuration(!n.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},a.triggerPresenceUsage_=function(n,o){var h=n.mediaGroups||{},_=!0,C=Object.keys(h.AUDIO);for(var A in h.AUDIO)for(var j in h.AUDIO[A])h.AUDIO[A][j].uri||(_=!1);_&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(h.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),_c.Playlist.isAes(o)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),C.length&&Object.keys(h.AUDIO[C[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},a.shouldSwitchToMedia_=function(n){var o=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,h=this.tech_.currentTime(),_=this.bufferLowWaterLine(),C=this.bufferHighWaterLine();return function(u){var a=u.currentPlaylist,l=u.buffered,n=u.currentTime,o=u.nextPlaylist,h=u.bufferLowWaterLine,_=u.bufferHighWaterLine,C=u.duration,A=u.experimentalBufferBasedABR,j=u.log;if(!o)return St.log.warn("We received no playlist to switch to. Please check your stream."),!1;var te="allowing switch "+(a&&a.id||"null")+" -> "+o.id;if(!a)return j(te+" as current playlist is not set"),!0;if(o.id===a.id)return!1;var Q=!!b(l,n).length;if(!a.endList)return Q||"number"!=typeof a.partTargetDuration?(j(te+" as current playlist is live"),!0):(j("not "+te+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var Se=Wn(l,n),je=A?ko.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:ko.MAX_BUFFER_LOW_WATER_LINE;if(C<je)return j(te+" as duration < max low water line ("+C+" < "+je+")"),!0;var We=o.attributes.BANDWIDTH,$e=a.attributes.BANDWIDTH;if(We<$e&&(!A||Se<_)){var kt=te+" as next bandwidth < current bandwidth ("+We+" < "+$e+")";return A&&(kt+=" and forwardBuffer < bufferHighWaterLine ("+Se+" < "+_+")"),j(kt),!0}if((!A||We>$e)&&Se>=h){var pn=te+" as forwardBuffer >= bufferLowWaterLine ("+Se+" >= "+h+")";return A&&(pn+=" and next bandwidth > current bandwidth ("+We+" > "+$e+")"),j(pn),!0}return j("not "+te+" as no switching criteria met"),!1}({buffered:this.tech_.buffered(),currentTime:h,currentPlaylist:o,nextPlaylist:n,bufferLowWaterLine:_,bufferHighWaterLine:C,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},a.setupSegmentLoaderListeners_=function(){var n=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){n.checkABR_("bandwidthupdate"),n.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",function(){n.experimentalBufferBasedABR&&n.mainSegmentLoader_.load()}),this.experimentalBufferBasedABR||this.mainSegmentLoader_.on("progress",function(){n.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){n.blacklistCurrentPlaylist(n.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){n.error=n.mainSegmentLoader_.error_,n.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){n.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){n.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),n.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){n.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){n.error=n.audioSegmentLoader_.error_,n.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){n.logger_("main segment loader ended"),n.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(h){n.experimentalBufferBasedABR||(n.delegateLoaders_("all",["abort"]),n.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))});var o=function(){if(!n.sourceUpdater_.hasCreatedSourceBuffers())return n.tryToCreateSourceBuffers_();var _=n.getCodecsOrExclude_();_&&n.sourceUpdater_.addOrChangeSourceBuffers(_)};this.mainSegmentLoader_.on("trackinfo",o),this.audioSegmentLoader_.on("trackinfo",o),this.mainSegmentLoader_.on("fmp4",function(){n.triggeredFmp4Usage||(n.tech_.trigger({type:"usage",name:"vhs-fmp4"}),n.tech_.trigger({type:"usage",name:"hls-fmp4"}),n.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){n.triggeredFmp4Usage||(n.tech_.trigger({type:"usage",name:"vhs-fmp4"}),n.tech_.trigger({type:"usage",name:"hls-fmp4"}),n.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){n.logger_("audioSegmentLoader ended"),n.onEndOfStream()})},a.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},a.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},a.smoothQualityChange_=function(n){void 0===n&&(n=this.selectPlaylist()),this.fastQualityChange_(n)},a.fastQualityChange_=function(n){var o=this;void 0===n&&(n=this.selectPlaylist()),n!==this.masterPlaylistLoader_.media()?(this.switchMedia_(n,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){o.tech_.setCurrentTime(St.browser.IE_VERSION||St.browser.IS_EDGE?o.tech_.currentTime()+.04:o.tech_.currentTime())})):this.logger_("skipping fastQualityChange because new media is same as old")},a.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var n=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<n.start(0))return this.tech_.setCurrentTime(n.end(n.length-1))}},a.setupFirstPlay=function(){var n=this,o=this.masterPlaylistLoader_.media();if(!o||this.tech_.paused()||this.hasPlayed_)return!1;if(!o.endList){var h=this.seekable();if(!h.length)return!1;if(St.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){n.trigger("firstplay"),n.tech_.setCurrentTime(h.end(0)),n.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(h.end(0))}return this.hasPlayed_=!0,this.load(),!0},a.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var n=this.tech_.play();typeof n<"u"&&"function"==typeof n.then&&n.then(null,function(o){})}this.trigger("sourceopen")},a.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var n=this.inbandTextTracks_.metadataTrack_.cues;if(n&&n.length){var o=this.duration();n[n.length-1].endTime=isNaN(o)||Math.abs(o)===1/0?Number.MAX_VALUE:o}}},a.handleDurationChange_=function(){this.tech_.trigger("durationchange")},a.onEndOfStream=function(){var n=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var o=this.mainSegmentLoader_.getCurrentMediaInfo_();n=!o||o.hasVideo?n&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}n&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},a.stuckAtPlaylistEnd_=function(n){if(!this.seekable().length)return!1;var h=this.syncController_.getExpiredTime(n,this.duration());if(null===h)return!1;var _=_c.Playlist.playlistEnd(n,h),C=this.tech_.currentTime(),A=this.tech_.buffered();if(!A.length)return _-C<=w;var j=A.end(A.length-1);return j-C<=w&&_-j<=w},a.blacklistCurrentPlaylist=function(n,o){void 0===n&&(n={});var h=n.playlist||this.masterPlaylistLoader_.media();if(o=o||n.blacklistDuration||this.blacklistDuration,!h)return this.error=n,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));h.playlistErrors_++;var te,_=this.masterPlaylistLoader_.master.playlists,C=_.filter(qg),A=1===C.length&&C[0]===h;if(1===_.length&&o!==1/0)return St.log.warn("Problem encountered with playlist "+h.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(A);if(A){var j=!1;_.forEach(function(kt){if(kt!==h){var pn=kt.excludeUntil;typeof pn<"u"&&pn!==1/0&&(j=!0,delete kt.excludeUntil)}}),j&&(St.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}te=h.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*o,h.excludeUntil=te,n.reason&&(h.lastExcludeReason_=n.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var Q=this.selectPlaylist();if(!Q)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");(n.internal?this.logger_:St.log.warn)((n.internal?"Internal problem":"Problem")+" encountered with playlist "+h.id+"."+(n.message?" "+n.message:"")+" Switching to playlist "+Q.id+"."),Q.attributes.AUDIO!==h.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),Q.attributes.SUBTITLES!==h.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var We=Q.targetDuration/2*1e3||5e3,$e="number"==typeof Q.lastRequest&&Date.now()-Q.lastRequest<=We;return this.switchMedia_(Q,"exclude",A||$e)},a.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},a.delegateLoaders_=function(n,o){var h=this,_=[],C="all"===n;(C||"main"===n)&&_.push(this.masterPlaylistLoader_);var A=[];(C||"audio"===n)&&A.push("AUDIO"),(C||"subtitle"===n)&&(A.push("CLOSED-CAPTIONS"),A.push("SUBTITLES")),A.forEach(function(j){var te=h.mediaTypes_[j]&&h.mediaTypes_[j].activePlaylistLoader;te&&_.push(te)}),["main","audio","subtitle"].forEach(function(j){var te=h[j+"SegmentLoader_"];te&&(n===j||"all"===n)&&_.push(te)}),_.forEach(function(j){return o.forEach(function(te){"function"==typeof j[te]&&j[te]()})})},a.setCurrentTime=function(n){var o=b(this.tech_.buffered(),n);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?o&&o.length?n:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},a.duration=function(){if(!this.masterPlaylistLoader_)return 0;var n=this.masterPlaylistLoader_.media();return n?n.endList?this.mediaSource?this.mediaSource.duration:_c.Playlist.duration(n):1/0:0},a.seekable=function(){return this.seekable_},a.onSyncInfoUpdate_=function(){var n;if(this.masterPlaylistLoader_){var o=this.masterPlaylistLoader_.media();if(o){var h=this.syncController_.getExpiredTime(o,this.duration());if(null!==h){var A,j,_=this.masterPlaylistLoader_.master,C=_c.Playlist.seekable(o,h,_c.Playlist.liveEdgeDelay(_,o));0===C.length||this.mediaTypes_.AUDIO.activePlaylistLoader&&(o=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(h=this.syncController_.getExpiredTime(o,this.duration()))||0===(n=_c.Playlist.seekable(o,h,_c.Playlist.liveEdgeDelay(_,o))).length)||(this.seekable_&&this.seekable_.length&&(A=this.seekable_.end(0),j=this.seekable_.start(0)),this.seekable_=n?n.start(0)>C.end(0)||C.start(0)>n.end(0)?C:St.createTimeRanges([[n.start(0)>C.start(0)?n.start(0):C.start(0),n.end(0)<C.end(0)?n.end(0):C.end(0)]]):C,(!this.seekable_||!this.seekable_.length||this.seekable_.end(0)!==A||this.seekable_.start(0)!==j)&&(this.logger_("seekable updated ["+Je(this.seekable_)+"]"),this.tech_.trigger("seekablechanged")))}}}},a.updateDuration=function(n){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,n),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(n){var o=this.seekable();if(!o.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<o.end(o.length-1))&&this.sourceUpdater_.setDuration(o.end(o.length-1))}else{var h=this.tech_.buffered(),_=_c.Playlist.duration(this.masterPlaylistLoader_.media());h.length>0&&(_=Math.max(_,h.end(h.length-1))),this.mediaSource.duration!==_&&this.sourceUpdater_.setDuration(_)}},a.dispose=function(){var n=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(o){var h=n.mediaTypes_[o].groups;for(var _ in h)h[_].forEach(function(C){C.playlistLoader&&C.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},a.master=function(){return this.masterPlaylistLoader_.master},a.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},a.areMediaTypesKnown_=function(){var n=!!this.mediaTypes_.AUDIO.activePlaylistLoader,o=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),h=!n||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!o||!h)},a.getCodecsOrExclude_=function(){var n=this,o={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},h=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();o.video=o.main;var _=Xf(this.master(),h),C={},A=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(o.main.hasVideo&&(C.video=_.video||o.main.videoCodec||"avc1.4d400d"),o.main.isMuxed&&(C.video+=","+(_.audio||o.main.audioCodec||Oi)),(o.main.hasAudio&&!o.main.isMuxed||o.audio.hasAudio||A)&&(C.audio=_.audio||o.main.audioCodec||o.audio.audioCodec||Oi,o.audio.isFmp4=o.main.hasAudio&&!o.main.isMuxed?o.main.isFmp4:o.audio.isFmp4),C.audio||C.video){var Q,te={};if(["video","audio"].forEach(function($e){if(C.hasOwnProperty($e)&&!function(kt,pn){return kt?Ei(pn):ai(pn)}(o[$e].isFmp4,C[$e])){var kt=o[$e].isFmp4?"browser":"muxer";te[kt]=te[kt]||[],te[kt].push(C[$e]),"audio"===$e&&(Q=kt)}}),A&&Q&&h.attributes.AUDIO){var Se=h.attributes.AUDIO;this.master().playlists.forEach(function($e){($e.attributes&&$e.attributes.AUDIO)===Se&&$e!==h&&($e.excludeUntil=1/0)}),this.logger_("excluding audio group "+Se+" as "+Q+' does not support codec(s): "'+C.audio+'"')}if(!Object.keys(te).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var We=[];if(["video","audio"].forEach(function($e){var kt=(_r(n.sourceUpdater_.codecs[$e]||"")[0]||{}).type,pn=(_r(C[$e]||"")[0]||{}).type;kt&&pn&&kt.toLowerCase()!==pn.toLowerCase()&&We.push('"'+n.sourceUpdater_.codecs[$e]+'" -> "'+C[$e]+'"')}),We.length)return void this.blacklistCurrentPlaylist({playlist:h,message:"Codec switching not supported: "+We.join(", ")+".",blacklistDuration:1/0,internal:!0})}return C}var je=Object.keys(te).reduce(function($e,kt){return $e&&($e+=", "),$e+(kt+' does not support codec(s): "')+te[kt].join(",")+'"'},"")+".";this.blacklistCurrentPlaylist({playlist:h,internal:!0,message:je,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:h,message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},a.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var n=this.getCodecsOrExclude_();if(n){this.sourceUpdater_.createSourceBuffers(n);var o=[n.video,n.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(o)}}},a.excludeUnsupportedVariants_=function(){var n=this,o=this.master().playlists,h=[];Object.keys(o).forEach(function(_){var C=o[_];if(-1===h.indexOf(C.id)){h.push(C.id);var A=Xf(n.master,C),j=[];A.audio&&!ai(A.audio)&&!Ei(A.audio)&&j.push("audio codec "+A.audio),A.video&&!ai(A.video)&&!Ei(A.video)&&j.push("video codec "+A.video),A.text&&"stpp.ttml.im1t"===A.text&&j.push("text codec "+A.text),j.length&&(C.excludeUntil=1/0,n.logger_("excluding "+C.id+" for unsupported: "+j.join(", ")))}})},a.excludeIncompatibleVariants_=function(n){var o=this,h=[],_=this.master().playlists,C=Qp(_r(n)),A=vv(C),j=C.video&&_r(C.video)[0]||null,te=C.audio&&_r(C.audio)[0]||null;Object.keys(_).forEach(function(Q){var Se=_[Q];if(-1===h.indexOf(Se.id)&&Se.excludeUntil!==1/0){h.push(Se.id);var je=[],We=Xf(o.masterPlaylistLoader_.master,Se),$e=vv(We);if(We.audio||We.video){if($e!==A&&je.push('codec count "'+$e+'" !== "'+A+'"'),!o.sourceUpdater_.canChangeType()){var kt=We.video&&_r(We.video)[0]||null,pn=We.audio&&_r(We.audio)[0]||null;kt&&j&&kt.type.toLowerCase()!==j.type.toLowerCase()&&je.push('video codec "'+kt.type+'" !== "'+j.type+'"'),pn&&te&&pn.type.toLowerCase()!==te.type.toLowerCase()&&je.push('audio codec "'+pn.type+'" !== "'+te.type+'"')}je.length&&(Se.excludeUntil=1/0,o.logger_("blacklisting "+Se.id+": "+je.join(" && ")))}}})},a.updateAdCues_=function(n){var o=0,h=this.seekable();h.length&&(o=h.start(0)),function(u,a,l){if(void 0===l&&(l=0),u.segments)for(var o,n=l,h=0;h<u.segments.length;h++){var _=u.segments[h];if(o||(o=_m(a,n+_.duration/2)),o){if("cueIn"in _){o.endTime=n,o.adEndTime=n,n+=_.duration,o=null;continue}if(n<o.endTime){n+=_.duration;continue}o.endTime+=_.duration}else if("cueOut"in _&&((o=new(ce().VTTCue)(n,n+_.duration,_.cueOut)).adStartTime=n,o.adEndTime=n+parseFloat(_.cueOut),a.addCue(o)),"cueOutCont"in _){var C=_.cueOutCont.split("/").map(parseFloat),A=C[0],j=C[1];(o=new(ce().VTTCue)(n,n+_.duration,"")).adStartTime=n-A,o.adEndTime=o.adStartTime+j,a.addCue(o)}n+=_.duration}}(n,this.cueTagsTrack_,o)},a.goalBufferLength=function(){var n=this.tech_.currentTime(),o=ko.GOAL_BUFFER_LENGTH,h=ko.GOAL_BUFFER_LENGTH_RATE,_=Math.max(o,ko.MAX_GOAL_BUFFER_LENGTH);return Math.min(o+n*h,_)},a.bufferLowWaterLine=function(){var n=this.tech_.currentTime(),o=ko.BUFFER_LOW_WATER_LINE,h=ko.BUFFER_LOW_WATER_LINE_RATE,_=Math.max(o,ko.MAX_BUFFER_LOW_WATER_LINE),C=Math.max(o,ko.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(o+n*h,this.experimentalBufferBasedABR?C:_)},a.bufferHighWaterLine=function(){return ko.BUFFER_HIGH_WATER_LINE},u}(St.EventTarget),sp=function(u,a,l){var n=u.masterPlaylistController_,_=n[(u.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(n);if(a.attributes){var C=a.attributes.RESOLUTION;this.width=C&&C.width,this.height=C&&C.height,this.bandwidth=a.attributes.BANDWIDTH,this.frameRate=a.attributes["FRAME-RATE"]}this.codecs=Xf(n.master(),a),this.playlist=a,this.id=l,this.enabled=function(u,a,l){return function(n){var o=u.master.playlists[a],h=Wg(o),_=qg(o);return typeof n>"u"?_:(n?delete o.disabled:o.disabled=!0,n!==_&&!h&&(l(),u.trigger(n?"renditionenabled":"renditiondisabled")),n)}}(u.playlists,a.id,_)},wm=["seeking","seeked","pause","playing","error"],op=function(){function g(a){var l=this;this.masterPlaylistController_=a.masterPlaylistController,this.tech_=a.tech,this.seekable=a.seekable,this.allowSeeksWithinUnsafeLiveWindow=a.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=a.liveRangeSafeTimeDelta,this.media=a.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=_l("PlaybackWatcher"),this.logger_("initialize");var n=function(){return l.monitorCurrentTime_()},o=function(){return l.monitorCurrentTime_()},h=function(){return l.techWaiting_()},_=function(){return l.cancelTimer_()},C=this.masterPlaylistController_,A=["main","subtitle","audio"],j={};A.forEach(function(Q){j[Q]={reset:function(){return l.resetSegmentDownloads_(Q)},updateend:function(){return l.checkSegmentDownloads_(Q)}},C[Q+"SegmentLoader_"].on("appendsdone",j[Q].updateend),C[Q+"SegmentLoader_"].on("playlistupdate",j[Q].reset),l.tech_.on(["seeked","seeking"],j[Q].reset)});var te=function(Se){["main","audio"].forEach(function(je){C[je+"SegmentLoader_"][Se]("appended",l.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){l.fixesBadSeeks_()&&(l.consecutiveUpdates=0,l.lastRecordedTime=l.tech_.currentTime(),te("off"))},this.clearSeekingAppendCheck_=function(){return te("off")},this.watchForBadSeeking_=function(){l.clearSeekingAppendCheck_(),te("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",h),this.tech_.on(wm,_),this.tech_.on("canplay",o),this.tech_.one("play",n),this.dispose=function(){l.clearSeekingAppendCheck_(),l.logger_("dispose"),l.tech_.off("waiting",h),l.tech_.off(wm,_),l.tech_.off("canplay",o),l.tech_.off("play",n),l.tech_.off("seeking",l.watchForBadSeeking_),l.tech_.off("seeked",l.clearSeekingAppendCheck_),A.forEach(function(Q){C[Q+"SegmentLoader_"].off("appendsdone",j[Q].updateend),C[Q+"SegmentLoader_"].off("playlistupdate",j[Q].reset),l.tech_.off(["seeked","seeking"],j[Q].reset)}),l.checkCurrentTimeTimeout_&&ce().clearTimeout(l.checkCurrentTimeTimeout_),l.cancelTimer_()}}var u=g.prototype;return u.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&ce().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=ce().setTimeout(this.monitorCurrentTime_.bind(this),250)},u.resetSegmentDownloads_=function(l){var n=this.masterPlaylistController_[l+"SegmentLoader_"];this[l+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+l+" loader"),this[l+"StalledDownloads_"]=0,this[l+"Buffered_"]=n.buffered_()},u.checkSegmentDownloads_=function(l){var n=this.masterPlaylistController_,o=n[l+"SegmentLoader_"],h=o.buffered_(),_=function(u,a){if(u===a)return!1;if(!u&&a||!a&&u||u.length!==a.length)return!0;for(var l=0;l<u.length;l++)if(u.start(l)!==a.start(l)||u.end(l)!==a.end(l))return!0;return!1}(this[l+"Buffered_"],h);this[l+"Buffered_"]=h,_?this.resetSegmentDownloads_(l):(this[l+"StalledDownloads_"]++,this.logger_("found #"+this[l+"StalledDownloads_"]+" "+l+" appends that did not increase buffer (possible stalled download)",{playlistId:o.playlist_&&o.playlist_.id,buffered:dn(h)}),!(this[l+"StalledDownloads_"]<10)&&(this.logger_(l+" loader stalled download exclusion"),this.resetSegmentDownloads_(l),this.tech_.trigger({type:"usage",name:"vhs-"+l+"-download-exclusion"}),"subtitle"!==l&&n.blacklistCurrentPlaylist({message:"Excessive "+l+" segment downloading detected."},1/0)))},u.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var l=this.tech_.currentTime(),n=this.tech_.buffered();if(this.lastRecordedTime===l&&(!n.length||l+w>=n.end(n.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&l===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):l===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=l)}},u.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},u.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var _,n=this.seekable(),o=this.tech_.currentTime();if(this.afterSeekableWindow_(n,o,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(_=n.end(n.length-1)),this.beforeSeekableWindow_(n,o)){var A=n.start(0);_=A+(A===n.end(0)?0:w)}if(typeof _<"u")return this.logger_("Trying to seek outside of seekable at time "+o+" with seekable range "+Je(n)+". Seeking to "+_+"."),this.tech_.setCurrentTime(_),!0;for(var j=this.masterPlaylistController_.sourceUpdater_,te=this.tech_.buffered(),Q=j.audioBuffer?j.audioBuffered():null,Se=j.videoBuffer?j.videoBuffered():null,je=this.media(),We=je.partTargetDuration?je.partTargetDuration:2*(je.targetDuration-fc),$e=[Q,Se],kt=0;kt<$e.length;kt++)if($e[kt]&&Wn($e[kt],o)<We)return!1;var jn=x(te,o);return 0!==jn.length&&(_=jn.start(0)+w,this.logger_("Buffered region starts ("+jn.start(0)+")  just beyond seek point ("+o+"). Seeking to "+_+"."),this.tech_.setCurrentTime(_),!0)},u.waiting_=function(){if(!this.techWaiting_()){var l=this.tech_.currentTime(),n=this.tech_.buffered(),o=b(n,l);if(o.length&&l+3<=o.end(0))return this.cancelTimer_(),this.tech_.setCurrentTime(l),this.logger_("Stopped at "+l+" while inside a buffered region ["+o.start(0)+" -> "+o.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})}},u.techWaiting_=function(){var l=this.seekable(),n=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(l,n)){var o=l.end(l.length-1);return this.logger_("Fell out of live window at time "+n+". Seeking to live point (seekable end) "+o),this.cancelTimer_(),this.tech_.setCurrentTime(o),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var h=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,_=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:h.audioBuffered(),videoBuffered:h.videoBuffered(),currentTime:n}))return this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var A=x(_,n);if(A.length>0){var j=A.start(0)-n;return this.logger_("Stopped at "+n+", setting timer for "+j+", seeking to "+A.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*j,n),!0}return!1},u.afterSeekableWindow_=function(l,n,o,h){if(void 0===h&&(h=!1),!l.length)return!1;var _=l.end(l.length-1)+w;return!o.endList&&h&&(_=l.end(l.length-1)+3*o.targetDuration),n>_},u.beforeSeekableWindow_=function(l,n){return!!(l.length&&l.start(0)>0&&n<l.start(0)-this.liveRangeSafeTimeDelta)},u.videoUnderflow_=function(l){var n=l.videoBuffered,o=l.audioBuffered,h=l.currentTime;if(n){var _;if(n.length&&o.length){var C=b(n,h-3),A=b(n,h),j=b(o,h);j.length&&!A.length&&C.length&&(_={start:C.end(0),end:j.end(0)})}else x(n,h).length||(_=this.gapFromVideoUnderflow_(n,h));return!!_&&(this.logger_("Encountered a gap in video from "+_.start+" to "+_.end+". Seeking to current time "+h),!0)}},u.skipTheGap_=function(l){var n=this.tech_.buffered(),o=this.tech_.currentTime(),h=x(n,o);this.cancelTimer_(),0!==h.length&&o===l&&(this.logger_("skipTheGap_:","currentTime:",o,"scheduled currentTime:",l,"nextRange start:",h.start(0)),this.tech_.setCurrentTime(h.start(0)+fc),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},u.gapFromVideoUnderflow_=function(l,n){for(var o=function(u){if(u.length<2)return St.createTimeRanges();for(var a=[],l=1;l<u.length;l++){var n=u.end(l-1),o=u.start(l);a.push([n,o])}return St.createTimeRanges(a)}(l),h=0;h<o.length;h++){var _=o.start(h),C=o.end(h);if(n-_<4&&n-_>2)return{start:_,end:C}}return null},g}(),ap={errorInterval:30,getSource:function(u){return u(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},Jy=function g(u,a){var l=0,n=0,o=St.mergeOptions(ap,a);u.ready(function(){u.trigger({type:"usage",name:"vhs-error-reload-initialized"}),u.trigger({type:"usage",name:"hls-error-reload-initialized"})});var h=function(){n&&u.currentTime(n)},_=function(Q){null!=Q&&(n=u.duration()!==1/0&&u.currentTime()||0,u.one("loadedmetadata",h),u.src(Q),u.trigger({type:"usage",name:"vhs-error-reload"}),u.trigger({type:"usage",name:"hls-error-reload"}),u.play())},C=function(){return Date.now()-l<1e3*o.errorInterval?(u.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void u.trigger({type:"usage",name:"hls-error-reload-canceled"})):o.getSource&&"function"==typeof o.getSource?(l=Date.now(),o.getSource.call(u,_)):void St.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},A=function te(){u.off("loadedmetadata",h),u.off("error",C),u.off("dispose",te)};u.on("error",C),u.on("dispose",A),u.reloadSourceOnError=function(Q){A(),g(u,Q)}},za={PlaylistLoader:Jd,Playlist:du,utils:zh,STANDARD_PLAYLIST_SELECTOR:cm,INITIAL_PLAYLIST_SELECTOR:function(){var u=this,a=this.playlists.master.playlists.filter(du.isEnabled);return Qh(a,function(n,o){return lm(n,o)}),a.filter(function(n){return!!Xf(u.playlists.master,n).video})[0]||null},lastBandwidthSelector:cm,movingAverageBandwidthSelector:function(u){var a=-1,l=-1;if(u<0||u>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var n=this.useDevicePixelRatio&&ce().devicePixelRatio||1;return a<0&&(a=this.systemBandwidth,l=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==l&&(a=u*this.systemBandwidth+(1-u)*a,l=this.systemBandwidth),Zc(this.playlists.master,a,parseInt(Jf(this.tech_.el(),"width"),10)*n,parseInt(Jf(this.tech_.el(),"height"),10)*n,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:lm,comparePlaylistResolution:function(u,a){var l,n;return u.attributes.RESOLUTION&&u.attributes.RESOLUTION.width&&(l=u.attributes.RESOLUTION.width),l=l||ce().Number.MAX_VALUE,a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width&&(n=a.attributes.RESOLUTION.width),l===(n=n||ce().Number.MAX_VALUE)&&u.attributes.BANDWIDTH&&a.attributes.BANDWIDTH?u.attributes.BANDWIDTH-a.attributes.BANDWIDTH:l-n},xhr:Py()};Object.keys(ko).forEach(function(g){Object.defineProperty(za,g,{get:function(){return St.log.warn("using Vhs."+g+" is UNSAFE be sure you know what you are doing"),ko[g]},set:function(a){St.log.warn("using Vhs."+g+" is UNSAFE be sure you know what you are doing"),"number"!=typeof a||a<0?St.log.warn("value of Vhs."+g+" must be greater than or equal to 0"):ko[g]=a}})});var J_="videojs-vhs",Cm=function(u,a){for(var l=a.media(),n=-1,o=0;o<u.length;o++)if(u[o].id===l.id){n=o;break}u.selectedIndex_=n,u.trigger({selectedIndex:n,type:"change"})};za.canPlaySource=function(){return St.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Ov=function(){if(!ce().localStorage)return null;var u=ce().localStorage.getItem(J_);if(!u)return null;try{return JSON.parse(u)}catch{return null}};za.supportsNativeHls=function(){if(!Ye()||!Ye().createElement)return!1;var g=Ye().createElement("video");return!!St.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(a){return/maybe|probably/i.test(g.canPlayType(a))})}(),za.supportsNativeDash=!!(Ye()&&Ye().createElement&&St.getTech("Html5").isSupported())&&/maybe|probably/i.test(Ye().createElement("video").canPlayType("application/dash+xml")),za.supportsTypeNatively=function(g){return"hls"===g?za.supportsNativeHls:"dash"===g&&za.supportsNativeDash},za.isSupported=function(){return St.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Rv=function(g){function u(l,n,o){var h;if(h=g.call(this,n,St.mergeOptions(o.hls,o.vhs))||this,o.hls&&Object.keys(o.hls).length&&St.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"==typeof o.initialBandwidth&&(h.options_.bandwidth=o.initialBandwidth),h.logger_=_l("VhsHandler"),n.options_&&n.options_.playerId){var _=St(n.options_.playerId);_.hasOwnProperty("hls")||Object.defineProperty(_,"hls",{get:function(){return St.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"hls-player-access"}),q(h)},configurable:!0}),_.hasOwnProperty("vhs")||Object.defineProperty(_,"vhs",{get:function(){return St.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"vhs-player-access"}),q(h)},configurable:!0}),_.hasOwnProperty("dash")||Object.defineProperty(_,"dash",{get:function(){return St.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),q(h)},configurable:!0}),h.player_=_}if(h.tech_=n,h.source_=l,h.stats={},h.ignoreNextSeekingEvent_=!1,h.setOptions_(),h.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(h.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return h.on(Ye(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(C){var A=Ye().fullscreenElement||Ye().webkitFullscreenElement||Ye().mozFullScreenElement||Ye().msFullscreenElement;A&&A.contains(h.tech_.el())?h.masterPlaylistController_.fastQualityChange_():h.masterPlaylistController_.checkABR_()}),h.on(h.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),h.on(h.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),h.on(h.tech_,"play",h.play),h}re(u,g);var a=u.prototype;return a.setOptions_=function(){var n=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var o=Ov();o&&o.bandwidth&&(this.options_.bandwidth=o.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),o&&o.throughput&&(this.options_.throughput=o.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=ko.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===ko.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(h){typeof n.source_[h]<"u"&&(n.options_[h]=n.source_[h])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},a.src=function(n,o){var h=this;if(n){this.setOptions_(),this.options_.src=function(u){return 0===u.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(u.substring(u.indexOf(",")+1)):u}(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=za,this.options_.sourceType=Kr(o),this.options_.seekTo=function(A){h.tech_.setCurrentTime(A)},this.options_.smoothQualityChange&&St.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new xv(this.options_);var _=St.mergeOptions({liveRangeSafeTimeDelta:w},this.options_,{seekable:function(){return h.seekable()},media:function(){return h.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new op(_),this.masterPlaylistController_.on("error",function(){var A=St.players[h.tech_.options_.playerId],j=h.masterPlaylistController_.error;"object"!=typeof j||j.code?"string"==typeof j&&(j={message:j,code:3}):j.code=3,A.error(j)});var C=this.options_.experimentalBufferBasedABR?za.movingAverageBandwidthSelector(.55):za.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):C.bind(this),this.masterPlaylistController_.selectInitialPlaylist=za.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(j){this.masterPlaylistController_.selectPlaylist=j.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(j){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=j,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var j=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,te=ce().navigator.connection||ce().navigator.mozConnection||ce().navigator.webkitConnection,Q=1e7;if(this.options_.useNetworkInformationApi&&te){var Se=1e3*te.downlink*1e3;j=Se>=Q&&j>=Q?Math.max(j,Se):Se}return j},set:function(j){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=j,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(this.throughput>0?1/this.throughput:0)))},set:function(){St.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return h.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return h.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return h.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return h.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return h.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return h.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return h.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return h.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return h.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return h.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return h.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return h.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return h.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return dn(h.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return h.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return h.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return h.tech_.name_},enumerable:!0},duration:{get:function(){return h.tech_.duration()},enumerable:!0},master:{get:function(){return h.playlists.master},enumerable:!0},playerDimensions:{get:function(){return h.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return dn(h.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return h.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){h.options_.useBandwidthFromLocalStorage&&function(u){if(!ce().localStorage)return!1;var a=Ov();a=a?St.mergeOptions(a,u):u;try{ce().localStorage.setItem(J_,JSON.stringify(a))}catch{return!1}}({bandwidth:h.bandwidth,throughput:Math.round(h.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(u){u.representations=function(){var a=u.masterPlaylistController_.master(),l=Up(a)?u.masterPlaylistController_.getAudioTrackPlaylists_():a.playlists;return l?l.filter(function(n){return!Wg(n)}).map(function(n,o){return new sp(u,n,n.id)}):[]}}(h)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){h.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=ce().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},a.createKeySessions_=function(){var n=this,o=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),function(u){var a=u.player,l=u.sourceKeySystems,n=u.audioMedia,o=u.mainPlaylists;if(!a.eme.initializeMediaKeys)return Promise.resolve();var _=function(u,a){return u.reduce(function(l,n){if(!n.contentProtection)return l;var o=a.reduce(function(h,_){var C=n.contentProtection[_];return C&&C.pssh&&(h[_]={pssh:C.pssh}),h},{});return Object.keys(o).length&&l.push(o),l},[])}(n?o.concat([n]):o,Object.keys(l)),C=[],A=[];return _.forEach(function(j){A.push(new Promise(function(te,Q){a.tech_.one("keysessioncreated",te)})),C.push(new Promise(function(te,Q){a.eme.initializeMediaKeys({keySystems:j},function(Se){Se?Q(Se):te()})}))}),Promise.race([Promise.all(C),Promise.race(A)])}({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:o&&o.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){n.logger_("created EME key session"),n.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(h){n.logger_("error while creating EME key session",h),n.player_.error({message:"Failed to initialize media keys for EME",code:3})})},a.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},a.setupEme_=function(){var n=this,o=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,h=function(u){var a=u.player,h=function(u,a,l){if(!u)return u;var n={};a&&a.attributes&&a.attributes.CODECS&&(n=Qp(_r(a.attributes.CODECS))),l&&l.attributes&&l.attributes.CODECS&&(n.audio=l.attributes.CODECS);var o=Rn(n.video),h=Rn(n.audio),_={};for(var C in u)_[C]={},h&&(_[C].audioContentType=h),o&&(_[C].videoContentType=o),a.contentProtection&&a.contentProtection[C]&&a.contentProtection[C].pssh&&(_[C].pssh=a.contentProtection[C].pssh),"string"==typeof u[C]&&(_[C].url=u[C]);return St.mergeOptions(u,_)}(u.sourceKeySystems,u.media,u.audioMedia);return!(!h||(a.currentSource().keySystems=h,h&&!a.eme&&(St.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))}({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:o&&o.media()});this.player_.tech_.on("keystatuschange",function(_){if("output-restricted"===_.status){var C=n.masterPlaylistController_.master();if(C&&C.playlists){var j,A=[];C.playlists.forEach(function(te){te&&te.attributes&&te.attributes.RESOLUTION&&te.attributes.RESOLUTION.height>=720&&(!te.excludeUntil||te.excludeUntil<1/0)&&(te.excludeUntil=1/0,A.push(te))}),A.length&&((j=St.log).warn.apply(j,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(A)),n.masterPlaylistController_.fastQualityChange_())}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==St.browser.IE_VERSION&&h?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},a.setupQualityLevels_=function(){var n=this,o=St.players[this.tech_.options_.playerId];!o||!o.qualityLevels||this.qualityLevels_||(this.qualityLevels_=o.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(u,a){a.representations().forEach(function(l){u.addQualityLevel(l)}),Cm(u,a.playlists)}(n.qualityLevels_,n)}),this.playlists.on("mediachange",function(){Cm(n.qualityLevels_,n.playlists)}))},u.version=function(){return{"@videojs/http-streaming":"2.16.2","mux.js":"6.0.1","mpd-parser":"0.22.1","m3u8-parser":"4.8.0","aes-decrypter":"3.1.3"}},a.version=function(){return this.constructor.version()},a.canChangeType=function(){return ip.canChangeType()},a.play=function(){this.masterPlaylistController_.play()},a.setCurrentTime=function(n){this.masterPlaylistController_.setCurrentTime(n)},a.duration=function(){return this.masterPlaylistController_.duration()},a.seekable=function(){return this.masterPlaylistController_.seekable()},a.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&ce().URL.revokeObjectURL&&(ce().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),g.prototype.dispose.call(this)},a.convertToProgramTime=function(n,o){return function(u){var a=u.playlist,l=u.time,n=void 0===l?void 0:l,o=u.callback;if(!o)throw new Error("getProgramTime: callback must be provided");if(!a||void 0===n)return o({message:"getProgramTime: playlist and time must be provided"});var h=function(u,a){if(!a||!a.segments||0===a.segments.length)return null;for(var n,l=0,o=0;o<a.segments.length&&!(u<=(l=(n=a.segments[o]).videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:l+n.duration));o++);var h=a.segments[a.segments.length-1];if(h.videoTimingInfo&&h.videoTimingInfo.transmuxedPresentationEnd<u)return null;if(u>l){if(u>l+.25*h.duration)return null;n=h}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:l-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}}(n,a);if(!h)return o({message:"valid programTime was not found"});if("estimate"===h.type)return o({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:h.estimatedStart});var _={mediaSeconds:n},C=function(u,a){if(!a.dateTimeObject)return null;var h=u-(a.videoTimingInfo.transmuxedPresentationStart+a.videoTimingInfo.transmuxerPrependedSeconds);return new Date(a.dateTimeObject.getTime()+1e3*h)}(n,h.segment);return C&&(_.programDateTime=C.toISOString()),o(null,_)}({playlist:this.masterPlaylistController_.media(),time:n,callback:o})},a.seekToProgramTime=function(n,o,h,_){return void 0===h&&(h=!0),void 0===_&&(_=2),lv({programTime:n,playlist:this.masterPlaylistController_.media(),retryCount:_,pauseAfterSeek:h,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:o})},u}(St.getComponent("Component")),ug={name:"videojs-http-streaming",VERSION:"2.16.2",canHandleSource:function(u,a){void 0===a&&(a={});var l=St.mergeOptions(St.options,a);return ug.canPlayType(u.type,l)},handleSource:function(u,a,l){void 0===l&&(l={});var n=St.mergeOptions(St.options,l);return a.vhs=new Rv(u,a,n),St.hasOwnProperty("hls")||Object.defineProperty(a,"hls",{get:function(){return St.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),a.vhs},configurable:!0}),a.vhs.xhr=Py(),a.vhs.src(u.src,u.type),a.vhs},canPlayType:function(u,a){var l=Kr(u);if(!l)return"";var n=ug.getOverrideNative(a);return!za.supportsTypeNatively(l)||n?"maybe":""},getOverrideNative:function(u){void 0===u&&(u={});var l=u.vhs,o=u.hls,C=(void 0===l?{}:l).overrideNative,j=(void 0===o?{}:o).overrideNative;return void 0!==j&&j||(void 0===C?!(St.browser.IS_ANY_SAFARI||St.browser.IS_IOS):C)}};Ei("avc1.4d400d,mp4a.40.2")&&St.getTech("Html5").registerSourceHandler(ug,0),St.VhsHandler=Rv,Object.defineProperty(St,"HlsHandler",{get:function(){return St.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Rv},configurable:!0}),St.VhsSourceHandler=ug,Object.defineProperty(St,"HlsSourceHandler",{get:function(){return St.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),ug},configurable:!0}),St.Vhs=za,Object.defineProperty(St,"Hls",{get:function(){return St.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),za},configurable:!0}),St.use||(St.registerComponent("Hls",za),St.registerComponent("Vhs",za)),St.options.vhs=St.options.vhs||{},St.options.hls=St.options.hls||{},St.getPlugin&&St.getPlugin("reloadSourceOnError")||(St.registerPlugin||St.plugin)("reloadSourceOnError",function(u){Jy(this,u)});const ql=St,lg=["videoPlayer"];let Nv=(()=>{class g{constructor(a){this.route=a}ngOnInit(){var a;this.player=ql(null===(a=this.target)||void 0===a?void 0:a.nativeElement),this.route.data.subscribe(l=>{var n;this.clip=l.clip,null===(n=this.player)||void 0===n||n.src({src:this.clip.url,type:"video/mp4"})})}}return g.\u0275fac=function(a){return new(a||g)(N.Y36(Be.gz))},g.\u0275cmp=N.Xpm({type:g,selectors:[["app-clip"]],viewQuery:function(a,l){if(1&a&&N.Gf(lg,7),2&a){let n;N.iGM(n=N.CRH())&&(l.target=n.first)}},features:[N._Bn([_e.uU])],decls:16,vars:6,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-2","text-3xl"],[1,"text-gray-400","mb-6"],[1,"relative","aspect-video","overflow-hidden"],["controls","","crossorigin","",1,"video-js","vjs-theme-forest","mx-auto"],["videoPlayer",""],[1,"container","mx-auto","my-8"],[1,"mt-6","text-2xl"],[3,"scrollable"]],template:function(a,l){1&a&&(N.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),N._uU(3),N.qZA(),N.TgZ(4,"div",3),N._uU(5),N.TgZ(6,"span"),N._uU(7),N.ALo(8,"fbTimestamp"),N.qZA()(),N.TgZ(9,"div",4),N._UZ(10,"video",5,6),N.qZA()()(),N.TgZ(12,"div",7)(13,"h2",8),N._uU(14,"More Clips"),N.qZA(),N._UZ(15,"app-clips-list",9),N.qZA()),2&a&&(N.xp6(3),N.hij(" ",null==l.clip?null:l.clip.title," "),N.xp6(2),N.hij(" Uploaded By ",null==l.clip?null:l.clip.displayName," on "),N.xp6(2),N.Oqu(N.lcZ(8,4,null==l.clip?null:l.clip.timestamp)),N.xp6(8),N.Q6J("scrollable",!1))},dependencies:[ye,He],styles:['@charset "UTF-8";.vjs-modal-dialog .vjs-modal-dialog-content,.video-js .vjs-modal-dialog,.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{text-align:center}@font-face{font-family:VideoJS;src:url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABDkAAsAAAAAG6gAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV3hY21hcAAAAYQAAADaAAADPv749/pnbHlmAAACYAAAC3AAABHQZg6OcWhlYWQAAA3QAAAAKwAAADYZw251aGhlYQAADfwAAAAdAAAAJA+RCLFobXR4AAAOHAAAABMAAACM744AAGxvY2EAAA4wAAAASAAAAEhF6kqubWF4cAAADngAAAAfAAAAIAE0AIFuYW1lAAAOmAAAASUAAAIK1cf1oHBvc3QAAA/AAAABJAAAAdPExYuNeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS7wTiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGJHcRdyA4RZgQRADK3CxEAAHic7dFZbsMgAEXRS0ycyZnnOeG7y+qC8pU1dHusIOXxuoxaOlwZYWQB0Aea4quIEN4E9LzKbKjzDeM6H/mua6Lmc/p8yhg0lvdYx15ZG8uOLQOGjMp3EzqmzJizYMmKNRu27Nhz4MiJMxeu3Ljz4Ekqm7T8P52G8PP3lnTOVk++Z6iN6QZzNN1F7ptuN7eGOjDUoaGODHVsuvU8MdTO9Hd5aqgzQ50b6sJQl4a6MtS1oW4MdWuoO0PdG+rBUI+GejLUs6FeDPVqqDdDvRvqw1CfhpqM9At0iFLaAAB4nJ1YDXBTVRZ+5/22TUlJ8we0pHlJm7RJf5O8F2j6EymlSPkpxaL8U2xpa3DKj0CBhc2IW4eWKSokIoLsuMqssM64f+jA4HSdWXXXscBq67IOs3FXZ1ZYWVyRFdo899yXtIBQZ90k7717zz3v3HPPOfd854YCCj9cL9dL0RQFOqCbGJnrHb5EayiKIWN8iA/hWBblo6hUWm8TtCDwE80WMJus/irwyxOdxeB0MDb14VNJHnXYoLLSl6FfCUYO9nYPTA8Epg9090LprfbBbZ2hY0UlJUXHQp3/vtWkS6EBv8+rPMq5u9692f/dNxJNiqwC1xPE9TCUgCsSdQWgE3XQD25lkG4CN2xmTcOXWBOyser6RN6KnGbKSbmQ3+d0OI1m2W8QzLLkI2sykrWAgJJEtA8vGGW/2Q+CmT3n8zS9wZwu2DCvtuZKZN3xkrLh36yCZuUomQSqGpY8t/25VfHVhw8z4ebGBtfLb0ya9PCaDc+8dGTvk2dsh6z7WzvowlXKUSWo9MJ15a3KrEP2loOr2Ojhw6iW6hf2BDdEccQvZGpaAy7YovSwq8kr7HGllxpd71rkS6G0Sf11sl9OvMK1+jwPPODxjUwkOim9CU3ix1wNjXDfmJSEn618Bs6lpWwUpU+8PCqLMY650zjq8VhCIP17NEKTx3eaLL+s5Pi6yJWaWjTHLR1jYzPSV9VF/6Ojdb/1kO3Mk3uhHC0x6gc1BjlKQ+nQFxTYdaJkZ7ySVxLBbhR1dsboNXp1tCYKW2LRaEzpYcIx2BKNxaL0ZaUnSqfFoiNhHKR/GkX6PWUSAaJelQaqZL1EpoHNsajSEyPSoJ9IjhIxTdjHLmwZvhRDOiFTY/YeQnvrVZmiTQtGncECXtFTBZLOVwwMRgoXHAkXzMzPn1nAJJ8jYSbMDaqN2waGLzNhih/bZynUBMpIWSg7VYi7DRx2m8ALkIdRCJwI6ArJx2EI8kaDWeTQKeAFk9fjl/1AvwktjQ1P7NjyMGQyfd4vjipX6M/i52D7Cq80kqlcxEcGXRr/FEcgs0u5uGgB4VWuMFfpdn2Re6Hi3PqzmxWKsz6+ae2Pn9hXXw/fqM859UiGC0oKYYILJBqJrsn1Z1E5qOs9rQCiUQRREjm8yJcbHF5cUJufX1vAHlefw0XgUoboS3ETfQlTxBC4SOtuE8VPRJTBSCQSjZCpk7Gqzu+masaZ2y7Zjehho4F3g82BNDkAHpORG4+OCS+f6JTPmtRn/PH1kch6d04sp7AQb25aQ/pqUyXeQ8vrebG8OYQdXOQ+585u0sdW9rqalzRURiJ+9F4MweRFrKUjl1GUYhH1A27WOHw5cTFSFPMo9EeUIGnQTZHIaJ7AHLaOKsOODaNF9jkBjYG2QEsQ2xjMUAx2bBEbeTBWMHwskBjngq56S/yfgkBnWBa4K9sqKtq2t1UI8S9He5XuBRbawAdatrQEAi30Aks2+LM8WeCbalVZkWNylvJ+dqJnzVb+OHlSoKW8nPCP7Rd+CcZ2DdWAGqJ2CBFOphgywFFCFBNtfAbGtNPBCwxvygHeYMZMY9ZboBqwq/pVrsbgN5tkv152ODlbMfiqwGMBgxa4Exz3QhovRIUp6acqZmQzRq0ypDXS2TPLT02YIkQETnOE445oOGxOmXAqUJNNG7XgupMjPq2ua9asrj5yY/yuKteO1Kx0YNJTufrirLe1mZnat7OL6rnUdCWenpW6I8mAnbsY8KWs1PuSovCW9A/Z25PQ24a7cNOqgmTkLmBMgh4THgc4b9k2IVv1/g/F5nGljwPLfOgHAzJzh45V/4+WenTzmMtR5Z7us2Tys909UHqrPY7KbckoxRvRHhmVc3cJGE97uml0R1S0jdULVl7EvZtDFVBF35N9cEdjpgmAiOlFZ+Dtoh93+D3zzHr8RRNZQhnCNMNbcegOvpEwZoL+06cJQ07h+th3fZ/7PVbVC6ngTAV/KoLFuO6+2KFcU651gEb5ugPSIb1D+Xp8V4+k3sEIGnw5mYe4If4k1lFYr6SCzmM2EQ8iWtmwjnBI9kTwe1TlfAmXh7H02by9fW2gsjKwtv0aaURKil4OdV7rDL1MXIFNrhdxohcZXYTnq47WisrKitaObbf5+yvkLi5J6lCNZZ+B6GC38VNBZBDidSS/+mSvh6s+srgC8pyKMvDtt+de3c9fU76ZPfuM8ud4Kv0fyP/LqfepMT/3oZxSqpZaTa1DaQYLY8TFsHYbWYsPoRhRWfL5eSSQbhUGgGC3YLbVMk6PitTFNGpAsNrC6D1VNBKgBHMejaiuRWEWGgsSDBTJjqWIl8kJLlsaLJ2tXDr6xGfT85bM2Q06a46x2HTgvdnV8z5YDy/27J4zt6x2VtkzjoYpkq36kaBr4eQSg7tyiVweWubXZugtadl58ydapfbORfKsDTuZ0OBgx4cfdjCf5tbWNITnL120fdOi1RV1C3uKGzNdwYLcMvZ3BxoPyTOCD1XvXTp7U10gWCVmTV9b3r2z0SkGWovb2hp9I89O8a2smlyaO8muMU+dRmtzp60IzAoFpjLr1n388boLyf0dRvxhsHZ0qbWqDkwqvvpkj4l0fY6EIXRi5sQSrAvsVYwXRy4qJ2EVtD1AN7a0HWth9ymvL1xc3WTUKK/TAHA/bXDVtVWfOMfuGxGZv4Ln/jVr9jc3j1yMv0tndmyt9Vq88Y9gH1wtLX3KWjot5++jWHgAoZZkQ14wGQ20Fli71UmKJAy4xKMSTGbVdybW7FDDAut9XpD5AzWrYO7zQ8qffqF8+Ynd/clrHcdyxGy3a/3+mfNnzC/cBsveTjnTvXf1o6vzOlZw7WtqtdmPK/Errz/6NNtD72zmNOZfbmYdTGHfoofqI79Oc+R2n1lrnL6pOm0Up7kwxhTW12Amm7WYkXR2qYrF2AmgmbAsxZjwy1xpg/m1Je2vrp8v/nz2xpmlBg4E9hrMU341wVpTOh/OfmGvAnra8q6uctr60ZQHV3Q+WMQJykMj8ZsWn2QBOmmHMB+m5pDIpTFonYigiaKAhGEiAHF7EliVnQkjoLVIMPtJpBKHYd3A8GYH9jJzrWwmHx5Qjp7vDAX0suGRym1vtm/9W1/HyR8vczfMs6Sk8DSv855/5dlX9oQq52hT8syyp2rx5Id17IAyAM3wIjQPMOHzytEB64q6D5zT91yNbnx3V/nqnd017S9Y0605k3izoXLpsxde2n38yoOV9s1LcjwzNjbdX6asnBVaBj/6/DwKwPkpcqbDG7BnsXoSqWnUAmottYF6jMSdVyYZh3zVXCjwTiwwHH6sGuRiEHQGzuRX6whZkp123oy1BWE2mEfJ/tvIRtM4ZM5bDXiMsPMaAKOTyc5uL57rqyyc5y5JE5pm1i2S2iUX0CcaQ6lC6Zog7JqSqZmYlosl2K6pwNA84zRnQW6SaALYZQGW5lhCtU/W34N6o+bKfZ8cf3/Cl/+iTX3wBzpOY4mRkeNf3rptycGSshQWgGbYt5jFc2e0+DglIrwl6DVWQ7BuwaJ3Xk1J4VL5urnLl/Wf+gHU/hZoZdKNym6lG+I34FaNeZKcSpJIo2IeCVvpdsDGfKvzJnAwmeD37Ow65ZWwSowpgwX5T69s/rB55dP5BcpgDKFV8p7q2sn/1uc93bVzT/w6UrCqDTWvfCq/oCD/qZXNoUj8BL5Kp6GU017frfNXkAtiiyf/SOCEeLqnd8R/Ql9GlCRfctS6k5chvIBuQ1zCCjoCHL2DHNHIXxMJ3kQeO8lbsUXONeSfA5EjcG6/E+KdhN4bP04vBhdi883+BFBzQbxFbvZzQeY9LNBZc0FNfn5NwfDn6rCTnTw6R8o+gfpf5hCom33cRuiTlss3KHmZjD+BPN+5gXuA2ziS/Q73mLxUkpbKN/eqwz5uK0X9F3h2d1V4nGNgZGBgAOJd776+iue3+crAzc4AAje5Bfcg0xz9YHEOBiYQBQA8FQlFAHicY2BkYGBnAAGOPgaG//85+hkYGVCBMgBGGwNYAAAAeJxjYGBgYB8EmKOPgQEAQ04BfgAAAAAAAA4AaAB+AMwA4AECAUIBbAGYAcICGAJYArQC4AMwA7AD3gQwBJYE3AUkBWYFigYgBmYGtAbqB1gIEghYCG4IhAi2COh4nGNgZGBgUGYoZWBnAAEmIOYCQgaG/2A+AwAYCQG2AHicXZBNaoNAGIZfE5PQCKFQ2lUps2oXBfOzzAESyDKBQJdGR2NQR3QSSE/QE/QEPUUPUHqsvsrXjTMw83zPvPMNCuAWP3DQDAejdm1GjzwS7pMmwi75XngAD4/CQ/oX4TFe4Qt7uMMbOzjuDc0EmXCP/C7cJ38Iu+RP4QEe8CU8pP8WHmOPX2EPz87TPo202ey2OjlnQSXV/6arOjWFmvszMWtd6CqwOlKHq6ovycLaWMWVydXKFFZnmVFlZU46tP7R2nI5ncbi/dDkfDtFBA2DDXbYkhKc+V0Bqs5Zt9JM1HQGBRTm/EezTmZNKtpcAMs9Yu6AK9caF76zoLWIWcfMGOSkVduvSWechqZsz040Ib2PY3urxBJTzriT95lipz+TN1fmAAAAeJxtkMl2wjAMRfOAhABlKm2h80C3+ajgCKKDY6cegP59TYBzukAL+z1Zsq8ctaJTTKPrsUQLbXQQI0EXKXroY4AbDDHCGBNMcYsZ7nCPB8yxwCOe8IwXvOIN7/jAJ76wxHfUqWX+OzgumWAjJMV17i0Ndlr6irLKO+qftdT7i6y4uFSUvCknay+lFYZIZaQcmfH/xIFdYn98bqhra1aKTM/6lWMnyaYirx1rFUQZFBkb2zJUtoXeJCeg0WnLtHeSFc3OtrnozNwqi0TkSpBMDB1nSde5oJXW23hTS2/T0LilglXX7dmFVxLnq5U0vYATHFk3zX3BOisoQHNDFDeZnqKDy9hRNawN7Vh727hFzcJ5c8TILrKZfH7tIPxAFP0BpLeJPA==) format("woff");font-weight:400;font-style:normal}.vjs-icon-play,.video-js .vjs-play-control .vjs-icon-placeholder,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play:before,.video-js .vjs-play-control .vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{content:"\\f101"}.vjs-icon-play-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play-circle:before{content:"\\f102"}.vjs-icon-pause,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pause:before,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before{content:"\\f103"}.vjs-icon-volume-mute,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mute:before,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before{content:"\\f104"}.vjs-icon-volume-low,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-low:before,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before{content:"\\f105"}.vjs-icon-volume-mid,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mid:before,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before{content:"\\f106"}.vjs-icon-volume-high,.video-js .vjs-mute-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-high:before,.video-js .vjs-mute-control .vjs-icon-placeholder:before{content:"\\f107"}.vjs-icon-fullscreen-enter,.video-js .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-enter:before,.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f108"}.vjs-icon-fullscreen-exit,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-exit:before,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f109"}.vjs-icon-square{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-square:before{content:"\\f10a"}.vjs-icon-spinner{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-spinner:before{content:"\\f10b"}.vjs-icon-subtitles,.video-js .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-subtitles-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-subtitles:before,.video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-subtitles-button .vjs-icon-placeholder:before{content:"\\f10c"}.vjs-icon-captions,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-captions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-captions:before,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-captions-button .vjs-icon-placeholder:before{content:"\\f10d"}.vjs-icon-chapters,.video-js .vjs-chapters-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-chapters:before,.video-js .vjs-chapters-button .vjs-icon-placeholder:before{content:"\\f10e"}.vjs-icon-share{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-share:before{content:"\\f10f"}.vjs-icon-cog{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cog:before{content:"\\f110"}.vjs-icon-circle,.vjs-seek-to-live-control .vjs-icon-placeholder,.video-js .vjs-volume-level,.video-js .vjs-play-progress{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle:before,.vjs-seek-to-live-control .vjs-icon-placeholder:before,.video-js .vjs-volume-level:before,.video-js .vjs-play-progress:before{content:"\\f111"}.vjs-icon-circle-outline{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-outline:before{content:"\\f112"}.vjs-icon-circle-inner-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-inner-circle:before{content:"\\f113"}.vjs-icon-hd{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-hd:before{content:"\\f114"}.vjs-icon-cancel,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cancel:before,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before{content:"\\f115"}.vjs-icon-replay,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-replay:before,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before{content:"\\f116"}.vjs-icon-facebook{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-facebook:before{content:"\\f117"}.vjs-icon-gplus{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-gplus:before{content:"\\f118"}.vjs-icon-linkedin{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-linkedin:before{content:"\\f119"}.vjs-icon-twitter{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-twitter:before{content:"\\f11a"}.vjs-icon-tumblr{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-tumblr:before{content:"\\f11b"}.vjs-icon-pinterest{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pinterest:before{content:"\\f11c"}.vjs-icon-audio-description,.video-js .vjs-descriptions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio-description:before,.video-js .vjs-descriptions-button .vjs-icon-placeholder:before{content:"\\f11d"}.vjs-icon-audio,.video-js .vjs-audio-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio:before,.video-js .vjs-audio-button .vjs-icon-placeholder:before{content:"\\f11e"}.vjs-icon-next-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-next-item:before{content:"\\f11f"}.vjs-icon-previous-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-previous-item:before{content:"\\f120"}.vjs-icon-picture-in-picture-enter,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-enter:before,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f121"}.vjs-icon-picture-in-picture-exit,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-exit:before,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f122"}.video-js{display:block;vertical-align:top;box-sizing:border-box;color:#fff;background-color:#000;position:relative;padding:0;font-size:10px;line-height:1;font-weight:400;font-style:normal;font-family:Arial,Helvetica,sans-serif;word-break:initial}.video-js:-moz-full-screen{position:absolute}.video-js:-webkit-full-screen{width:100%!important;height:100%!important}.video-js[tabindex="-1"]{outline:none}.video-js *,.video-js *:before,.video-js *:after{box-sizing:inherit}.video-js ul{font-family:inherit;font-size:inherit;line-height:inherit;list-style-position:outside;margin:0}.video-js.vjs-fluid,.video-js.vjs-16-9,.video-js.vjs-4-3,.video-js.vjs-9-16,.video-js.vjs-1-1{width:100%;max-width:100%}.video-js.vjs-fluid:not(.vjs-audio-only-mode),.video-js.vjs-16-9:not(.vjs-audio-only-mode),.video-js.vjs-4-3:not(.vjs-audio-only-mode),.video-js.vjs-9-16:not(.vjs-audio-only-mode),.video-js.vjs-1-1:not(.vjs-audio-only-mode){height:0}.video-js.vjs-16-9:not(.vjs-audio-only-mode){padding-top:56.25%}.video-js.vjs-4-3:not(.vjs-audio-only-mode){padding-top:75%}.video-js.vjs-9-16:not(.vjs-audio-only-mode){padding-top:177.7777777778%}.video-js.vjs-1-1:not(.vjs-audio-only-mode){padding-top:100%}.video-js.vjs-fill:not(.vjs-audio-only-mode){width:100%;height:100%}.video-js .vjs-tech{position:absolute;top:0;left:0;width:100%;height:100%}.video-js.vjs-audio-only-mode .vjs-tech{display:none}body.vjs-full-window{padding:0;margin:0;height:100%}.vjs-full-window .video-js.vjs-fullscreen{position:fixed;overflow:hidden;z-index:1000;inset:0}.video-js.vjs-fullscreen:not(.vjs-ios-native-fs){width:100%!important;height:100%!important;padding-top:0!important}.video-js.vjs-fullscreen.vjs-user-inactive{cursor:none}.vjs-hidden{display:none!important}.vjs-disabled{opacity:.5;cursor:default}.video-js .vjs-offscreen{height:1px;left:-9999px;position:absolute;top:0;width:1px}.vjs-lock-showing{display:block!important;opacity:1!important;visibility:visible!important}.vjs-no-js{padding:20px;color:#fff;background-color:#000;font-size:18px;font-family:Arial,Helvetica,sans-serif;text-align:center;width:300px;height:150px;margin:0 auto}.vjs-no-js a,.vjs-no-js a:visited{color:#66a8cc}.video-js .vjs-big-play-button{font-size:3em;line-height:1.5em;height:1.63332em;width:3em;display:block;position:absolute;top:10px;left:10px;padding:0;cursor:pointer;opacity:1;border:.06666em solid #fff;background-color:#2b333f;background-color:#2b333fb3;border-radius:.3em;transition:all .4s}.vjs-big-play-centered .vjs-big-play-button{top:50%;left:50%;margin-top:-.81666em;margin-left:-1.5em}.video-js:hover .vjs-big-play-button,.video-js .vjs-big-play-button:focus{border-color:#fff;background-color:#73859f;background-color:#73859f80;transition:all 0s}.vjs-controls-disabled .vjs-big-play-button,.vjs-has-started .vjs-big-play-button,.vjs-using-native-controls .vjs-big-play-button,.vjs-error .vjs-big-play-button{display:none}.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause .vjs-big-play-button{display:block}.video-js button{background:none;border:none;color:inherit;display:inline-block;font-size:inherit;line-height:inherit;text-transform:none;text-decoration:none;transition:none;-webkit-appearance:none;appearance:none}.vjs-control .vjs-button{width:100%;height:100%}.video-js .vjs-control.vjs-close-button{cursor:pointer;height:3em;position:absolute;right:0;top:.5em;z-index:2}.video-js .vjs-modal-dialog{background:rgba(0,0,0,.8);background:linear-gradient(180deg,rgba(0,0,0,.8),rgba(255,255,255,0));overflow:auto}.video-js .vjs-modal-dialog>*{box-sizing:border-box}.vjs-modal-dialog .vjs-modal-dialog-content{font-size:1.2em;line-height:1.5;padding:20px 24px;z-index:1}.vjs-menu-button{cursor:pointer}.vjs-menu-button.vjs-disabled{cursor:default}.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu{display:none}.vjs-menu .vjs-menu-content{display:block;padding:0;margin:0;font-family:Arial,Helvetica,sans-serif;overflow:auto}.vjs-menu .vjs-menu-content>*{box-sizing:border-box}.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu{display:none}.vjs-menu li{list-style:none;margin:0;padding:.2em 0;line-height:1.4em;font-size:1.2em;text-align:center;text-transform:lowercase}.vjs-menu li.vjs-menu-item:focus,.vjs-menu li.vjs-menu-item:hover,.js-focus-visible .vjs-menu li.vjs-menu-item:hover{background-color:#73859f;background-color:#73859f80}.vjs-menu li.vjs-selected,.vjs-menu li.vjs-selected:focus,.vjs-menu li.vjs-selected:hover,.js-focus-visible .vjs-menu li.vjs-selected:hover{background-color:#fff;color:#2b333f}.video-js .vjs-menu *:not(.vjs-selected):focus:not(:focus-visible),.js-focus-visible .vjs-menu *:not(.vjs-selected):focus:not(.focus-visible){background:none}.vjs-menu li.vjs-menu-title{text-align:center;text-transform:uppercase;font-size:1em;line-height:2em;padding:0;margin:0 0 .3em;font-weight:700;cursor:default}.vjs-menu-button-popup .vjs-menu{display:none;position:absolute;bottom:0;width:10em;left:-3em;height:0em;margin-bottom:1.5em;border-top-color:#2b333fb3}.vjs-menu-button-popup .vjs-menu .vjs-menu-content{background-color:#2b333f;background-color:#2b333fb3;position:absolute;width:100%;bottom:1.5em;max-height:15em}.vjs-layout-tiny .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:5em}.vjs-layout-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:10em}.vjs-layout-medium .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:14em}.vjs-layout-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-huge .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:25em}.vjs-workinghover .vjs-menu-button-popup.vjs-hover .vjs-menu,.vjs-menu-button-popup .vjs-menu.vjs-lock-showing{display:block}.video-js .vjs-menu-button-inline{transition:all .4s;overflow:hidden}.video-js .vjs-menu-button-inline:before{width:2.222222222em}.video-js .vjs-menu-button-inline:hover,.video-js .vjs-menu-button-inline:focus,.video-js .vjs-menu-button-inline.vjs-slider-active,.video-js.vjs-no-flex .vjs-menu-button-inline{width:12em}.vjs-menu-button-inline .vjs-menu{opacity:0;height:100%;width:auto;position:absolute;left:4em;top:0;padding:0;margin:0;transition:all .4s}.vjs-menu-button-inline:hover .vjs-menu,.vjs-menu-button-inline:focus .vjs-menu,.vjs-menu-button-inline.vjs-slider-active .vjs-menu{display:block;opacity:1}.vjs-no-flex .vjs-menu-button-inline .vjs-menu{display:block;opacity:1;position:relative;width:auto}.vjs-no-flex .vjs-menu-button-inline:hover .vjs-menu,.vjs-no-flex .vjs-menu-button-inline:focus .vjs-menu,.vjs-no-flex .vjs-menu-button-inline.vjs-slider-active .vjs-menu{width:auto}.vjs-menu-button-inline .vjs-menu-content{width:auto;height:100%;margin:0;overflow:hidden}.video-js .vjs-control-bar{display:none;width:100%;position:absolute;bottom:0;left:0;right:0;height:3em;background-color:#2b333f;background-color:#2b333fb3}.vjs-has-started .vjs-control-bar,.vjs-audio-only-mode .vjs-control-bar{display:flex;visibility:visible;opacity:1;transition:visibility .1s,opacity .1s}.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{visibility:visible;opacity:0;pointer-events:none;transition:visibility 1s,opacity 1s}.vjs-controls-disabled .vjs-control-bar,.vjs-using-native-controls .vjs-control-bar,.vjs-error .vjs-control-bar{display:none!important}.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar,.vjs-audio-only-mode.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{opacity:1;visibility:visible;pointer-events:auto}.vjs-has-started.vjs-no-flex .vjs-control-bar{display:table}.video-js .vjs-control{position:relative;text-align:center;margin:0;padding:0;height:100%;width:4em;flex:none}.video-js .vjs-control.vjs-visible-text{width:auto;padding-left:1em;padding-right:1em}.vjs-button>.vjs-icon-placeholder:before{font-size:1.8em;line-height:1.67}.vjs-button>.vjs-icon-placeholder{display:block}.video-js .vjs-control:focus:before,.video-js .vjs-control:hover:before,.video-js .vjs-control:focus{text-shadow:0em 0em 1em white}.video-js *:not(.vjs-visible-text)>.vjs-control-text{border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.vjs-no-flex .vjs-control{display:table-cell;vertical-align:middle}.video-js .vjs-custom-control-spacer{display:none}.video-js .vjs-progress-control{cursor:pointer;flex:auto;display:flex;align-items:center;min-width:4em;touch-action:none}.video-js .vjs-progress-control.disabled{cursor:default}.vjs-live .vjs-progress-control{display:none}.vjs-liveui .vjs-progress-control{display:flex;align-items:center}.vjs-no-flex .vjs-progress-control{width:auto}.video-js .vjs-progress-holder{flex:auto;transition:all .2s;height:.3em}.video-js .vjs-progress-control .vjs-progress-holder{margin:0 10px}.video-js .vjs-progress-control:hover .vjs-progress-holder{font-size:1.6666666667em}.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled{font-size:1em}.video-js .vjs-progress-holder .vjs-play-progress,.video-js .vjs-progress-holder .vjs-load-progress,.video-js .vjs-progress-holder .vjs-load-progress div{position:absolute;display:block;height:100%;margin:0;padding:0;width:0}.video-js .vjs-play-progress{background-color:#fff}.video-js .vjs-play-progress:before{font-size:.9em;position:absolute;right:-.5em;top:-.3333333333em;z-index:1}.video-js .vjs-load-progress{background:rgba(115,133,159,.5)}.video-js .vjs-load-progress div{background:rgba(115,133,159,.75)}.video-js .vjs-time-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-progress-holder:focus .vjs-time-tooltip{display:none}.video-js .vjs-progress-control:hover .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip{display:block;font-size:.6em;visibility:visible}.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip{font-size:1em}.video-js .vjs-progress-control .vjs-mouse-display{display:none;position:absolute;width:1px;height:100%;background-color:#000;z-index:1}.vjs-no-flex .vjs-progress-control .vjs-mouse-display{z-index:0}.video-js .vjs-progress-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-progress-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-time-tooltip{color:#fff;background-color:#000;background-color:#000c}.video-js .vjs-slider{position:relative;cursor:pointer;padding:0;margin:0 .45em;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;background-color:#73859f;background-color:#73859f80}.video-js .vjs-slider.disabled{cursor:default}.video-js .vjs-slider:focus{text-shadow:0em 0em 1em white;box-shadow:0 0 1em #fff}.video-js .vjs-mute-control{cursor:pointer;flex:none}.video-js .vjs-volume-control{cursor:pointer;margin-right:1em;display:flex}.video-js .vjs-volume-control.vjs-volume-horizontal{width:5em}.video-js .vjs-volume-panel .vjs-volume-control{visibility:visible;opacity:0;width:1px;height:1px;margin-left:-1px}.video-js .vjs-volume-panel{transition:width 1s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control,.video-js .vjs-volume-panel:active .vjs-volume-control,.video-js .vjs-volume-panel:focus .vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control:active,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active{visibility:visible;opacity:1;position:relative;transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal{width:5em;height:3em;margin-right:0}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-vertical{left:-3.5em;transition:left 0s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active{width:10em;transition:width .1s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only{width:4em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{height:8em;width:3em;left:-3000em;transition:visibility 1s,opacity 1s,height 1s 1s,width 1s 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{transition:visibility 1s,opacity 1s,height 1s 1s,width 1s,left 1s 1s,top 1s 1s}.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{width:5em;height:3em;visibility:visible;opacity:1;position:relative;transition:none}.video-js.vjs-no-flex .vjs-volume-control.vjs-volume-vertical,.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{position:absolute;bottom:3em;left:.5em}.video-js .vjs-volume-panel{display:flex}.video-js .vjs-volume-bar{margin:1.35em .45em}.vjs-volume-bar.vjs-slider-horizontal{width:5em;height:.3em}.vjs-volume-bar.vjs-slider-vertical{width:.3em;height:5em;margin:1.35em auto}.video-js .vjs-volume-level{position:absolute;bottom:0;left:0;background-color:#fff}.video-js .vjs-volume-level:before{position:absolute;font-size:.9em;z-index:1}.vjs-slider-vertical .vjs-volume-level{width:.3em}.vjs-slider-vertical .vjs-volume-level:before{top:-.5em;left:-.3em;z-index:1}.vjs-slider-horizontal .vjs-volume-level{height:.3em}.vjs-slider-horizontal .vjs-volume-level:before{top:-.3em;right:-.5em}.video-js .vjs-volume-panel.vjs-volume-panel-vertical{width:4em}.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level{height:100%}.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level{width:100%}.video-js .vjs-volume-vertical{width:3em;height:8em;bottom:8em;background-color:#2b333f;background-color:#2b333fb3}.video-js .vjs-volume-horizontal .vjs-menu{left:-2em}.video-js .vjs-volume-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-volume-control:hover .vjs-volume-tooltip,.video-js .vjs-volume-control:hover .vjs-progress-holder:focus .vjs-volume-tooltip{display:block;font-size:1em;visibility:visible}.video-js .vjs-volume-vertical:hover .vjs-volume-tooltip,.video-js .vjs-volume-vertical:hover .vjs-progress-holder:focus .vjs-volume-tooltip{left:1em;top:-12px}.video-js .vjs-volume-control.disabled:hover .vjs-volume-tooltip{font-size:1em}.video-js .vjs-volume-control .vjs-mouse-display{display:none;position:absolute;width:100%;height:1px;background-color:#000;z-index:1}.video-js .vjs-volume-horizontal .vjs-mouse-display{width:1px;height:100%}.vjs-no-flex .vjs-volume-control .vjs-mouse-display{z-index:0}.video-js .vjs-volume-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-volume-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-volume-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-volume-tooltip{color:#fff;background-color:#000;background-color:#000c}.vjs-poster{display:inline-block;vertical-align:middle;background-repeat:no-repeat;background-position:50% 50%;background-size:contain;background-color:#000;cursor:pointer;margin:0;padding:0;position:absolute;inset:0;height:100%}.vjs-has-started .vjs-poster,.vjs-using-native-controls .vjs-poster{display:none}.vjs-audio.vjs-has-started .vjs-poster,.vjs-has-started.vjs-audio-poster-mode .vjs-poster{display:block}.video-js .vjs-live-control{display:flex;align-items:flex-start;flex:auto;font-size:1em;line-height:3em}.vjs-no-flex .vjs-live-control{display:table-cell;width:auto;text-align:left}.video-js:not(.vjs-live) .vjs-live-control,.video-js.vjs-liveui .vjs-live-control{display:none}.video-js .vjs-seek-to-live-control{align-items:center;cursor:pointer;flex:none;display:inline-flex;height:100%;padding-left:.5em;padding-right:.5em;font-size:1em;line-height:3em;width:auto;min-width:4em}.vjs-no-flex .vjs-seek-to-live-control{display:table-cell;width:auto;text-align:left}.video-js.vjs-live:not(.vjs-liveui) .vjs-seek-to-live-control,.video-js:not(.vjs-live) .vjs-seek-to-live-control{display:none}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge{cursor:auto}.vjs-seek-to-live-control .vjs-icon-placeholder{margin-right:.5em;color:#888}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-icon-placeholder{color:red}.video-js .vjs-time-control{flex:none;font-size:1em;line-height:3em;min-width:2em;width:auto;padding-left:1em;padding-right:1em}.vjs-live .vjs-time-control,.video-js .vjs-current-time,.vjs-no-flex .vjs-current-time,.video-js .vjs-duration,.vjs-no-flex .vjs-duration{display:none}.vjs-time-divider{display:none;line-height:3em}.vjs-live .vjs-time-divider{display:none}.video-js .vjs-play-control{cursor:pointer}.video-js .vjs-play-control .vjs-icon-placeholder{flex:none}.vjs-text-track-display{position:absolute;inset:0 0 3em;pointer-events:none}.video-js.vjs-controls-disabled .vjs-text-track-display,.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display{bottom:1em}.video-js .vjs-text-track{font-size:1.4em;text-align:center;margin-bottom:.1em}.vjs-subtitles{color:#fff}.vjs-captions{color:#fc6}.vjs-tt-cue{display:block}video::-webkit-media-text-track-display{transform:translateY(-3em)}.video-js.vjs-controls-disabled video::-webkit-media-text-track-display,.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display{transform:translateY(-1.5em)}.video-js .vjs-picture-in-picture-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-picture-in-picture-control{display:none}.video-js .vjs-fullscreen-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-fullscreen-control{display:none}.vjs-playback-rate>.vjs-menu-button,.vjs-playback-rate .vjs-playback-rate-value{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-playback-rate .vjs-playback-rate-value{pointer-events:none;font-size:1.5em;line-height:2;text-align:center}.vjs-playback-rate .vjs-menu{width:4em;left:0}.vjs-error .vjs-error-display .vjs-modal-dialog-content{font-size:1.4em;text-align:center}.vjs-error .vjs-error-display:before{color:#fff;content:"X";font-family:Arial,Helvetica,sans-serif;font-size:4em;left:0;line-height:1;margin-top:-.5em;position:absolute;text-shadow:.05em .05em .1em #000;text-align:center;top:50%;vertical-align:middle;width:100%}.vjs-loading-spinner{display:none;position:absolute;top:50%;left:50%;margin:-25px 0 0 -25px;opacity:.85;text-align:left;border:6px solid rgba(43,51,63,.7);box-sizing:border-box;background-clip:padding-box;width:50px;height:50px;border-radius:25px;visibility:hidden}.vjs-seeking .vjs-loading-spinner,.vjs-waiting .vjs-loading-spinner{display:block;animation:vjs-spinner-show 0s linear .3s forwards}.vjs-loading-spinner:before,.vjs-loading-spinner:after{content:"";position:absolute;margin:-6px;box-sizing:inherit;width:inherit;height:inherit;border-radius:inherit;opacity:1;border:inherit;border-color:transparent;border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:before,.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:after{animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite}.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:before{border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:after{border-top-color:#fff;animation-delay:.44s}@keyframes vjs-spinner-show{to{visibility:visible}}@keyframes vjs-spinner-spin{to{transform:rotate(360deg)}}@keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}to{border-top-color:#73859f}}.video-js.vjs-audio-only-mode .vjs-captions-button{display:none}.vjs-chapters-button .vjs-menu ul{width:24em}.video-js.vjs-audio-only-mode .vjs-descriptions-button{display:none}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:"\\f10d";font-size:1.5em;line-height:inherit}.video-js.vjs-audio-only-mode .vjs-subs-caps-button{display:none}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:" \\f11d";font-size:1.5em;line-height:inherit}.video-js.vjs-layout-small .vjs-current-time,.video-js.vjs-layout-small .vjs-time-divider,.video-js.vjs-layout-small .vjs-duration,.video-js.vjs-layout-small .vjs-remaining-time,.video-js.vjs-layout-small .vjs-playback-rate,.video-js.vjs-layout-small .vjs-volume-control,.video-js.vjs-layout-x-small .vjs-current-time,.video-js.vjs-layout-x-small .vjs-time-divider,.video-js.vjs-layout-x-small .vjs-duration,.video-js.vjs-layout-x-small .vjs-remaining-time,.video-js.vjs-layout-x-small .vjs-playback-rate,.video-js.vjs-layout-x-small .vjs-volume-control,.video-js.vjs-layout-tiny .vjs-current-time,.video-js.vjs-layout-tiny .vjs-time-divider,.video-js.vjs-layout-tiny .vjs-duration,.video-js.vjs-layout-tiny .vjs-remaining-time,.video-js.vjs-layout-tiny .vjs-playback-rate,.video-js.vjs-layout-tiny .vjs-volume-control{display:none}.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover{width:auto;width:initial}.video-js.vjs-layout-x-small .vjs-progress-control,.video-js.vjs-layout-tiny .vjs-progress-control{display:none}.video-js.vjs-layout-x-small .vjs-custom-control-spacer{flex:auto;display:block}.video-js.vjs-layout-x-small.vjs-no-flex .vjs-custom-control-spacer{width:auto}.vjs-modal-dialog.vjs-text-track-settings{background-color:#2b333f;background-color:#2b333fbf;color:#fff;height:70%}.vjs-text-track-settings .vjs-modal-dialog-content{display:table}.vjs-text-track-settings .vjs-track-settings-colors,.vjs-text-track-settings .vjs-track-settings-font,.vjs-text-track-settings .vjs-track-settings-controls{display:table-cell}.vjs-text-track-settings .vjs-track-settings-controls{text-align:right;vertical-align:bottom}@supports (display: grid){.vjs-text-track-settings .vjs-modal-dialog-content{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr;padding:20px 24px 0}.vjs-track-settings-controls .vjs-default-button{margin-bottom:20px}.vjs-text-track-settings .vjs-track-settings-controls{grid-column:1/-1}.vjs-layout-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-x-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-tiny .vjs-text-track-settings .vjs-modal-dialog-content{grid-template-columns:1fr}}.vjs-track-setting>select{margin-right:1em;margin-bottom:.5em}.vjs-text-track-settings fieldset{margin:5px;padding:3px;border:none}.vjs-text-track-settings fieldset span{display:inline-block}.vjs-text-track-settings fieldset span>select{max-width:7.3em}.vjs-text-track-settings legend{color:#fff;margin:0 0 5px}.vjs-text-track-settings .vjs-label{position:absolute;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);display:block;margin:0 0 5px;padding:0;border:0;height:1px;width:1px;overflow:hidden}.vjs-track-settings-controls button:focus,.vjs-track-settings-controls button:active{outline-style:solid;outline-width:medium;background-image:linear-gradient(0deg,#fff 88%,#73859f 100%)}.vjs-track-settings-controls button:hover{color:#2b333fbf}.vjs-track-settings-controls button{background-color:#fff;background-image:linear-gradient(-180deg,#fff 88%,#73859f 100%);color:#2b333f;cursor:pointer;border-radius:2px}.vjs-track-settings-controls .vjs-default-button{margin-right:1em}@media print{.video-js>*:not(.vjs-tech):not(.vjs-poster){visibility:hidden}}.vjs-resize-manager{position:absolute;top:0;left:0;width:100%;height:100%;border:none;z-index:-1000}.js-focus-visible .video-js *:focus:not(.focus-visible){outline:none}.video-js *:focus:not(:focus-visible){outline:none}.vjs-theme-forest{--vjs-theme-forest--primary:#6fb04e;--vjs-theme-forest--secondary:#fff }.vjs-theme-forest.vjs-big-play-button:focus,.vjs-theme-forest:hover .vjs-big-play-button{background-color:transparent;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%236fb04e\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E")}.vjs-theme-forest .vjs-big-play-button{width:88px;height:88px;background:none;background-repeat:no-repeat;background-position:50%;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%23fff\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E");border:none;top:50%;left:50%;margin-top:-44px;margin-left:-44px;color:purple}.vjs-theme-forest .vjs-big-play-button .vjs-icon-placeholder{display:none}.vjs-theme-forest .vjs-button>.vjs-icon-placeholder:before{line-height:1.55}.vjs-theme-forest .vjs-control:not(.vjs-disabled):not(.vjs-time-control):hover{color:var(--vjs-theme-forest--primary);text-shadow:var(--vjs-theme-forest--secondary) 1px 0 10px}.vjs-theme-forest .vjs-control-bar{background:none;margin-bottom:1em;padding-left:1em;padding-right:1em}.vjs-theme-forest .vjs-play-control{font-size:.8em}.vjs-theme-forest .vjs-play-control .vjs-icon-placeholder:before{background-color:var(--vjs-theme-forest--secondary);height:1.5em;width:1.5em;margin-top:.2em;border-radius:1em;color:var(--vjs-theme-forest--primary)}.vjs-theme-forest .vjs-play-control:hover .vjs-icon-placeholder:before{background-color:var(--vjs-theme-forest--primary);color:var(--vjs-theme-forest--secondary)}.vjs-theme-forest .vjs-mute-control{display:none}.vjs-theme-forest .vjs-volume-panel{margin-left:.5em;margin-right:.5em;padding-top:.3em}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal,.vjs-theme-forest .vjs-volume-panel,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.vjs-theme-forest .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.vjs-theme-forest .vjs-volume-panel:hover,.vjs-theme-forest .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal{width:3em}.vjs-theme-forest .vjs-volume-level:before{font-size:1em}.vjs-theme-forest .vjs-volume-panel .vjs-volume-control{opacity:1;width:100%;height:100%}.vjs-theme-forest .vjs-volume-bar{background-color:transparent;margin:0}.vjs-theme-forest .vjs-slider-horizontal .vjs-volume-level{height:100%}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal{margin-top:0;margin-bottom:0;height:100%}.vjs-theme-forest .vjs-volume-bar:before{content:"";z-index:0;width:0;height:0;position:absolute;top:0;left:0;border-left:3em solid transparent;border-bottom:2em solid var(--vjs-theme-forest--primary);border-right:0 solid transparent;border-top:0 solid transparent}.vjs-theme-forest .vjs-volume-level{overflow:hidden;background-color:transparent}.vjs-theme-forest .vjs-volume-level:before{content:"";z-index:1;width:0;height:0;position:absolute;top:0;left:0;border-left:3em solid transparent;border-bottom:2em solid var(--vjs-theme-forest--secondary);border-right:0 solid transparent;border-top:0 solid transparent}.vjs-theme-forest .vjs-progress-control:hover .vjs-progress-holder{font-size:1em}.vjs-theme-forest .vjs-play-progress:before{display:none}.vjs-theme-forest .vjs-progress-holder{border-radius:.2em;height:.5em;margin:0}.vjs-theme-forest .vjs-load-progress,.vjs-theme-forest .vjs-load-progress div,.vjs-theme-forest .vjs-play-progress{border-radius:.2em}.vjs-theme-forest{--vjs-theme-forest--primary: rgb(129,140,248)}.vjs-theme-forest.vjs-big-play-button:focus,.vjs-theme-forest:hover .vjs-big-play-button{background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%23818cf8\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E")}.video-js{position:initial}.video-js .vjs-control-bar{height:6em}.vjs-button>.vjs-icon-placeholder:before{font-size:3.8em}.video-js .vjs-button{width:6em}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal,.vjs-theme-forest .vjs-volume-panel,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.vjs-theme-forest .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.vjs-theme-forest .vjs-volume-panel:hover,.vjs-theme-forest .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal{width:8em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal{width:8em;height:6em;margin-right:0}.vjs-theme-forest .vjs-volume-bar:before{border-left-width:8em;border-bottom-width:5em}.vjs-theme-forest .vjs-volume-level:before{border-left-width:8em;border-bottom-width:5em}.vjs-theme-forest .vjs-progress-holder{height:2em}.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-time-tooltip{font-size:2em}.video-js .vjs-time-tooltip{top:-2em}.video-js .vjs-time-control{font-size:2em}\n'],encapsulation:2}),g})(),i_=(()=>{class g{constructor(){}ngOnInit(){}}return g.\u0275fac=function(a){return new(a||g)},g.\u0275cmp=N.Xpm({type:g,selectors:[["app-not-found"]],decls:20,vars:0,consts:[[1,"relative","m-auto","left-0","right-0","z-10","w-36","h-52","border-indigo-400","border-4","top-32","ghost"],[1,"absolute","left-0","right-0","bottom-10","m-auto","text-center","text-4xl","font-bold"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","translate-x-6"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","-translate-x-6"],[1,"w-10","h-2","rounded-lg","absolute","left-0","right-0","mx-auto","mt-20","bg-indigo-400"],[1,"corner","border-indigo-400","border-4"],[1,"corner","two","border-indigo-400","border-4"],[1,"corner","three","border-indigo-400","border-4"],[1,"corner","four","border-indigo-400","border-4"],[1,"over"],[1,"over","two"],[1,"over","three"],[1,"over","four"],[1,"ghost-shadow","w-32","h-10","mx-auto","mt-56","rounded","bg-indigo-400","left-0","right-0","absolute"],[1,"container","mx-auto","text-center","mt-60"],[1,"text-4xl","font-bold","mb-4"]],template:function(a,l){1&a&&(N.TgZ(0,"div",0)(1,"span",1),N._uU(2,"404"),N.qZA(),N._UZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),N.qZA(),N.TgZ(15,"div",14)(16,"h2",15),N._uU(17,"Page not found"),N.qZA(),N.TgZ(18,"p"),N._uU(19," Looks like the page you're looking for is gone or doesn't exist. "),N.qZA()())}}),g})();const Lv=[{path:"",component:Ae},{path:"about",component:Fe},{path:"clip/:id",component:Nv,resolve:{clip:xe.Y}},{path:"",loadChildren:function(){var g=(0,fe.Z)(function*(){return(yield X.e(812).then(X.bind(X,5812))).VideoModule});return function(){return g.apply(this,arguments)}}()},{path:"**",component:i_}];let s_=(()=>{class g{}return g.\u0275fac=function(a){return new(a||g)},g.\u0275mod=N.oAB({type:g}),g.\u0275inj=N.cJS({imports:[Be.Bz.forRoot(Lv),Be.Bz]}),g})();var Dm=X(1086),up=X(4850),cg=X(353),o_=X(3489),dg=X(9312);class Am{constructor(u,a){this.delay=u,this.scheduler=a}call(u,a){return a.subscribe(new hg(u,this.delay,this.scheduler))}}class hg extends o_.L{constructor(u,a,l){super(u),this.delay=a,this.scheduler=l,this.queue=[],this.active=!1,this.errored=!1}static dispatch(u){const a=u.source,l=a.queue,n=u.scheduler,o=u.destination;for(;l.length>0&&l[0].time-n.now()<=0;)l.shift().notification.observe(o);if(l.length>0){const h=Math.max(0,l[0].time-n.now());this.schedule(u,h)}else this.unsubscribe(),a.active=!1}_schedule(u){this.active=!0,this.destination.add(u.schedule(hg.dispatch,this.delay,{source:this,destination:this.destination,scheduler:u}))}scheduleNotification(u){if(!0===this.errored)return;const a=this.scheduler,l=new bc(a.now()+this.delay,u);this.queue.push(l),!1===this.active&&this._schedule(a)}_next(u){this.scheduleNotification(dg.P.createNext(u))}_error(u){this.errored=!0,this.queue=[],this.destination.error(u),this.unsubscribe()}_complete(){this.scheduleNotification(dg.P.createComplete()),this.unsubscribe()}}class bc{constructor(u,a){this.time=u,this.notification=a}}var s0=X(2198),Fv=X(7545),ah=X(4941),Mm=X(1);let uh=(()=>{class g{constructor(a,l,n,o){this.auth=a,this.db=l,this.router=n,this.route=o,this.redirect=!1,this.usersCollection=l.collection("users"),this.isAuthenticated$=a.user.pipe((0,up.U)(h=>!!h)),this.isAuthenticatedWithDelay$=this.isAuthenticated$.pipe(function a_(g,u=cg.P){const l=function r0(g){return g instanceof Date&&!isNaN(+g)}(g)?+g-u.now():Math.abs(g);return n=>n.lift(new Am(l,u))}(1e3)),this.router.events.pipe((0,s0.h)(h=>h instanceof Be.m2),(0,up.U)(h=>this.route.firstChild),(0,Fv.w)(h=>{var _;return null!==(_=h?.data)&&void 0!==_?_:(0,Dm.of)({})})).subscribe(h=>{var _;this.redirect=null!==(_=h.authOnly)&&void 0!==_&&_})}createUser(a){var l=this;return(0,fe.Z)(function*(){if(!a.password)throw new Error("Password not provided!");const n=yield l.auth.createUserWithEmailAndPassword(a.email,a.password);if(!n.user)throw new Error("User can't be found");yield l.usersCollection.doc(n.user.uid).set({name:a.name,email:a.email,age:a.age,phoneNumber:a.phoneNumber}),yield n.user.updateProfile({displayName:a.name})})()}logout(a){var l=this;return(0,fe.Z)(function*(){a&&a.preventDefault(),yield l.auth.signOut(),l.redirect&&(yield l.router.navigateByUrl("/"))})()}}return g.\u0275fac=function(a){return new(a||g)(N.LFG(ah.zQ),N.LFG(Mm.ST),N.LFG(Be.F0),N.LFG(Be.gz))},g.\u0275prov=N.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();var jv=X(1609),u_=X(3446);const l_=["*"];let km=(()=>{class g{constructor(){this.tabTitle="",this.active=!1}ngOnInit(){}}return g.\u0275fac=function(a){return new(a||g)},g.\u0275cmp=N.Xpm({type:g,selectors:[["app-tab"]],inputs:{tabTitle:"tabTitle",active:"active"},ngContentSelectors:l_,decls:2,vars:2,template:function(a,l){1&a&&(N.F$t(),N.TgZ(0,"div"),N.Hsn(1),N.qZA()),2&a&&N.ekj("hidden",!l.active)}}),g})();const Kl=function(g,u){return{"hover:text-indigo-400":g,"hover:text-white text-white bg-indigo-400":u}};function cf(g,u){if(1&g){const a=N.EpF();N.TgZ(0,"li",2)(1,"a",3),N.NdJ("click",function(){const o=N.CHM(a).$implicit,h=N.oxw();return N.KtG(h.selectTab(o))}),N._uU(2),N.qZA()()}if(2&g){const a=u.$implicit;N.xp6(1),N.Q6J("ngClass",N.WLB(2,Kl,!a.active,a.active)),N.xp6(1),N.Oqu(a.tabTitle)}}const Pm=["*"];let c_=(()=>{class g{constructor(){this.tabs=new N.n_E}ngAfterContentInit(){var a;const l=null===(a=this.tabs)||void 0===a?void 0:a.filter(n=>n.active);(!l||0===l.length)&&this.selectTab(this.tabs.first)}selectTab(a){var l;return null===(l=this.tabs)||void 0===l||l.forEach(n=>{n.active=!1}),a.active=!0,!1}}return g.\u0275fac=function(a){return new(a||g)},g.\u0275cmp=N.Xpm({type:g,selectors:[["app-tabs-container"]],contentQueries:function(a,l,n){if(1&a&&N.Suo(n,km,4),2&a){let o;N.iGM(o=N.CRH())&&(l.tabs=o)}},ngContentSelectors:Pm,decls:3,vars:1,consts:[[1,"flex","flex-wrap","mb-4"],["class","flex-auto text-center",4,"ngFor","ngForOf"],[1,"flex-auto","text-center"],["href","#",1,"block","rounded","py-3","px-4","transition","hover:text-white","text-white","bg-indigo-400",3,"ngClass","click"]],template:function(a,l){1&a&&(N.F$t(),N.TgZ(0,"ul",0),N.YNc(1,cf,3,5,"li",1),N.qZA(),N.Hsn(2)),2&a&&(N.xp6(1),N.Q6J("ngForOf",l.tabs))},dependencies:[_e.mk,_e.sg]}),g})();var d_=X(8549),Xi=X(2142);function Uv(g,u){if(1&g&&(N.TgZ(0,"app-alert",11),N._uU(1),N.qZA()),2&g){const a=N.oxw();N.Q6J("color",a.alertColor),N.xp6(1),N.hij(" ",a.alertMsg,"\n")}}function o0(g,u){1&g&&(N.TgZ(0,"p",12),N._uU(1," Email is invalid "),N.qZA())}function Bv(g,u){1&g&&(N.TgZ(0,"p",12),N._uU(1," Password is invalid "),N.qZA())}let Vv=(()=>{class g{constructor(a){this.auth=a,this.credentials={email:"",password:""},this.showAlert=!1,this.alertMsg="Please wait! We are logging you in.",this.alertColor="blue",this.inSubmission=!1}ngOnInit(){}login(){var a=this;return(0,fe.Z)(function*(){a.showAlert=!0,a.alertMsg="Please wait! We are logging you in.",a.alertColor="blue",a.inSubmission=!0;try{yield a.auth.signInWithEmailAndPassword(a.credentials.email,a.credentials.password)}catch(l){return a.inSubmission=!1,a.alertMsg="An unexpected error occurred. Please try again later.",a.alertColor="red",void console.log(l)}a.alertMsg="Success! You are now logged in.",a.alertColor="green"})()}}return g.\u0275fac=function(a){return new(a||g)(N.Y36(ah.zQ))},g.\u0275cmp=N.Xpm({type:g,selectors:[["app-login"]],decls:17,vars:6,consts:[[3,"color",4,"ngIf"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","email","name","email","placeholder","Enter Email","required","","pattern","[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["email","ngModel"],["class","text-red-400",4,"ngIf"],["type","password","name","password","required","","placeholder","Password",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"],[1,"text-red-400"]],template:function(a,l){if(1&a&&(N.YNc(0,Uv,2,2,"app-alert",0),N.TgZ(1,"form",1,2),N.NdJ("ngSubmit",function(){return l.login()}),N.TgZ(3,"div",3)(4,"label",4),N._uU(5,"Email"),N.qZA(),N.TgZ(6,"input",5,6),N.NdJ("ngModelChange",function(o){return l.credentials.email=o}),N.qZA(),N.YNc(8,o0,2,0,"p",7),N.qZA(),N.TgZ(9,"div",3)(10,"label",4),N._uU(11,"Password"),N.qZA(),N.TgZ(12,"input",8,9),N.NdJ("ngModelChange",function(o){return l.credentials.password=o}),N.qZA(),N.YNc(14,Bv,2,0,"p",7),N.qZA(),N.TgZ(15,"button",10),N._uU(16," Submit "),N.qZA()()),2&a){const n=N.MAs(2),o=N.MAs(7),h=N.MAs(13);N.Q6J("ngIf",l.showAlert),N.xp6(6),N.Q6J("ngModel",l.credentials.email),N.xp6(2),N.Q6J("ngIf",o.errors&&o.touched&&o.dirty),N.xp6(4),N.Q6J("ngModel",l.credentials.password),N.xp6(2),N.Q6J("ngIf",h.errors&&h.touched&&h.dirty),N.xp6(1),N.Q6J("disabled",n.invalid||l.inSubmission)}},dependencies:[_e.O5,d_.w,Xi._Y,Xi.Fj,Xi.JJ,Xi.JL,Xi.Q7,Xi.c5,Xi.On,Xi.F]}),g})();class Hv{static match(u,a){return l=>{const n=l.get(u),o=l.get(a);if(!n||!o)return console.error("Form controls can not be found in the form group."),{controlNotFound:!1};const h=n.value===o.value?null:{noMatch:!0};return o.setErrors(h),h}}}let fg=(()=>{class g{constructor(a){this.auth=a,this.validate=l=>this.auth.fetchSignInMethodsForEmail(l.value).then(n=>n.length?{emailTaken:!0}:null)}}return g.\u0275fac=function(a){return new(a||g)(N.LFG(ah.zQ))},g.\u0275prov=N.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();var $v=X(235);function Gv(g,u){if(1&g&&(N.TgZ(0,"app-alert",11),N._uU(1),N.qZA()),2&g){const a=N.oxw();N.Q6J("color",a.alertColor),N.xp6(1),N.hij(" ",a.alertMsg,"\n")}}let Om=(()=>{class g{constructor(a,l){this.auth=a,this.emailTaken=l,this.inSubmission=!1,this.name=new Xi.NI("",[Xi.kI.required,Xi.kI.minLength(3)]),this.email=new Xi.NI("",[Xi.kI.required,Xi.kI.email],[this.emailTaken.validate]),this.age=new Xi.NI(null,[Xi.kI.required,Xi.kI.min(18),Xi.kI.max(120)]),this.password=new Xi.NI("",[Xi.kI.required,Xi.kI.pattern(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/gm)]),this.confirm_password=new Xi.NI("",[Xi.kI.required]),this.phoneNumber=new Xi.NI("",[Xi.kI.required,Xi.kI.minLength(13),Xi.kI.maxLength(13)]),this.showAlert=!1,this.alertMsg="Please wait! Your account is being created.",this.alertColor="blue",this.registerForm=new Xi.cw({name:this.name,email:this.email,age:this.age,password:this.password,confirm_password:this.confirm_password,phoneNumber:this.phoneNumber},[Hv.match("password","confirm_password")])}register(){var a=this;return(0,fe.Z)(function*(){a.showAlert=!0,a.alertMsg="Please wait! Your account is being created.",a.alertColor="blue",a.inSubmission=!0;try{yield a.auth.createUser(a.registerForm.value)}catch(l){return console.error(l),a.alertMsg="An unexpected error occurred. Please try again later",a.alertColor="red",void(a.inSubmission=!1)}a.alertMsg="Success! Your account has been created.",a.alertColor="green"})()}}return g.\u0275fac=function(a){return new(a||g)(N.Y36(uh),N.Y36(fg))},g.\u0275cmp=N.Xpm({type:g,selectors:[["app-register"]],decls:28,vars:9,consts:[[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"inline-block","mb-2"],["placeholder","Enter Name",3,"control"],["type","email","placeholder","Enter Email",3,"control"],["type","number","placeholder","Enter Age",3,"control"],["type","password","placeholder","Enter Password",3,"control"],["type","password","placeholder","Confirm Password",3,"control"],["format","(000)000-0000","placeholder","Enter Phone Number",3,"control"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"]],template:function(a,l){1&a&&(N.YNc(0,Gv,2,2,"app-alert",0),N.TgZ(1,"form",1),N.NdJ("ngSubmit",function(){return l.register()}),N.TgZ(2,"div",2)(3,"label",3),N._uU(4,"Name"),N.qZA(),N._UZ(5,"app-input",4),N.qZA(),N.TgZ(6,"div",2)(7,"label",3),N._uU(8,"Email"),N.qZA(),N._UZ(9,"app-input",5),N.qZA(),N.TgZ(10,"div",2)(11,"label",3),N._uU(12,"Age"),N.qZA(),N._UZ(13,"app-input",6),N.qZA(),N.TgZ(14,"div",2)(15,"label",3),N._uU(16,"Password"),N.qZA(),N._UZ(17,"app-input",7),N.qZA(),N.TgZ(18,"div",2)(19,"label",3),N._uU(20,"Confirm Password"),N.qZA(),N._UZ(21,"app-input",8),N.qZA(),N.TgZ(22,"div",2)(23,"label",3),N._uU(24,"Phone Number"),N.qZA(),N._UZ(25,"app-input",9),N.qZA(),N.TgZ(26,"button",10),N._uU(27," Submit "),N.qZA()()),2&a&&(N.Q6J("ngIf",l.showAlert),N.xp6(1),N.Q6J("formGroup",l.registerForm),N.xp6(4),N.Q6J("control",l.name),N.xp6(4),N.Q6J("control",l.email),N.xp6(4),N.Q6J("control",l.age),N.xp6(4),N.Q6J("control",l.password),N.xp6(4),N.Q6J("control",l.confirm_password),N.xp6(4),N.Q6J("control",l.phoneNumber),N.xp6(1),N.Q6J("disabled",l.registerForm.invalid||l.inSubmission))},dependencies:[_e.O5,$v.a,d_.w,Xi._Y,Xi.JL,Xi.sg]}),g})(),h_=(()=>{class g{constructor(a){this.modal=a}ngOnInit(){this.modal.register("auth")}ngOnDestroy(){this.modal.unregister("auth")}}return g.\u0275fac=function(a){return new(a||g)(N.Y36(jv.Z))},g.\u0275cmp=N.Xpm({type:g,selectors:[["app-auth-modal"]],decls:8,vars:0,consts:[["modalID","auth"],["heading","",1,"text-2xl","font-bold"],["tabTitle","Login"],["tabTitle","Register"]],template:function(a,l){1&a&&(N.TgZ(0,"app-modal",0)(1,"p",1),N._uU(2,"Your Account"),N.qZA(),N.TgZ(3,"app-tabs-container")(4,"app-tab",2),N._UZ(5,"app-login"),N.qZA(),N.TgZ(6,"app-tab",3),N._UZ(7,"app-register"),N.qZA()()())},dependencies:[u_.z,c_,km,Vv,Om]}),g})();function a0(g,u){if(1&g){const a=N.EpF();N.TgZ(0,"li")(1,"a",9),N.NdJ("click",function(n){N.CHM(a);const o=N.oxw();return N.KtG(o.openModal(n))}),N._uU(2," Login / Register "),N.qZA()()}}const lp=function(){return{exact:!0}},zv=function(){return{sort:"1"}};function L0(g,u){if(1&g){const a=N.EpF();N.TgZ(0,"li")(1,"a",10),N._uU(2," Manage "),N.qZA()(),N.TgZ(3,"li")(4,"a",11),N._uU(5," Upload "),N.qZA()(),N.TgZ(6,"li")(7,"a",9),N.NdJ("click",function(n){N.CHM(a);const o=N.oxw();return N.KtG(o.auth.logout(n))}),N._uU(8," Logout "),N.qZA()()}2&g&&(N.xp6(1),N.Q6J("routerLinkActiveOptions",N.DdM(3,lp))("queryParams",N.DdM(4,zv)),N.xp6(3),N.Q6J("routerLinkActiveOptions",N.DdM(5,lp)))}let Wv=(()=>{class g{constructor(a,l){this.modal=a,this.auth=l}ngOnInit(){}openModal(a){a.preventDefault(),this.modal.toggleModal("auth")}}return g.\u0275fac=function(a){return new(a||g)(N.Y36(jv.Z),N.Y36(uh))},g.\u0275cmp=N.Xpm({type:g,selectors:[["app-nav"]],decls:13,vars:4,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["routerLink","/",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authLinks",""],["routerLinkActive","text-indigo-400"],["routerLink","/about","routerLinkActive","text-indigo-400",1,"px-2"],["href","#",1,"px-2",3,"click"],["routerLink","/manage","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions","queryParams"],["routerLink","/upload","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions"]],template:function(a,l){if(1&a&&(N.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),N._uU(3,"Clips"),N.qZA(),N.TgZ(4,"div",3)(5,"ul",4),N.YNc(6,a0,3,0,"li",5),N.ALo(7,"async"),N.YNc(8,L0,9,6,"ng-template",null,6,N.W1O),N.TgZ(10,"li",7)(11,"a",8),N._uU(12," About "),N.qZA()()()()()()),2&a){const n=N.MAs(9);N.xp6(6),N.Q6J("ngIf",!N.lcZ(7,2,l.auth.isAuthenticated$))("ngIfElse",n)}},dependencies:[_e.O5,Be.rH,Be.Od,_e.Ov]}),g})();function qv(g,u){1&g&&N._UZ(0,"app-auth-modal")}let Kv=(()=>{class g{constructor(a){this.auth=a}}return g.\u0275fac=function(a){return new(a||g)(N.Y36(uh))},g.\u0275cmp=N.Xpm({type:g,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"]],template:function(a,l){1&a&&(N._UZ(0,"app-nav")(1,"router-outlet"),N.YNc(2,qv,1,0,"app-auth-modal",0),N.ALo(3,"async")),2&a&&(N.xp6(2),N.Q6J("ngIf",!N.lcZ(3,1,l.auth.isAuthenticatedWithDelay$)))},dependencies:[_e.O5,h_,Be.lC,Wv,_e.Ov]}),g})();var u0=X(4466);let pg=(()=>{class g{}return g.\u0275fac=function(a){return new(a||g)},g.\u0275mod=N.oAB({type:g}),g.\u0275inj=N.cJS({imports:[_e.ez,u0.m,Xi.UX,Xi.u5]}),g})();var l0=X(2011);const gg_firebase={apiKey:"AIzaSyASCxHgCSpmVnQwVbLCHATcns5fJQFdmpY",authDomain:"clips-36548.firebaseapp.com",projectId:"clips-36548",storageBucket:"clips-36548.appspot.com",appId:"1:798864185458:web:f93bd21de7f956bffc4aeb"};var Zv=X(3884);let lh=(()=>{class g{}return g.\u0275fac=function(a){return new(a||g)},g.\u0275mod=N.oAB({type:g,bootstrap:[Kv]}),g.\u0275inj=N.cJS({imports:[E.b2,pg,l0.hO.initializeApp(gg_firebase),ah.ww,Mm.yb,s_,Zv.TE]}),g})();var Yv=X(9260);X(8073),(0,N.G48)(),Yv.Z.initializeApp(gg_firebase);let f_=!1;Yv.Z.auth().onAuthStateChanged(()=>{f_||E.q6().bootstrapModule(lh).catch(g=>console.error(g)),f_=!0})},3992:(en,ut,X)=>{"use strict";var E=X(9226);en.exports=function(_e,xe){return void 0===xe&&(xe=!1),function(He,Re,Ue){if(He)_e(He);else if(Re.statusCode>=400&&Re.statusCode<=599){var ye=Ue;if(xe)if(E.TextDecoder){var Ae=function fe(Be){return void 0===Be&&(Be=""),Be.toLowerCase().split(";").reduce(function(_e,xe){var He=xe.split("="),Ue=He[1];return"charset"===He[0].trim()?Ue.trim():_e},"utf-8")}(Re.headers&&Re.headers["content-type"]);try{ye=new TextDecoder(Ae).decode(Ue)}catch{}}else ye=String.fromCharCode.apply(null,new Uint8Array(Ue));_e({cause:ye})}else _e(null,Ue)}}},745:(en,ut,X)=>{"use strict";var E=X(9226),N=X(434),fe=X(2703);Re.httpHandler=X(3992);var Be=function(rt){var ce={};return rt&&rt.trim().split("\n").forEach(function(wt){var Ye=wt.indexOf(":"),Ke=wt.slice(0,Ye).trim().toLowerCase(),Ze=wt.slice(Ye+1).trim();typeof ce[Ke]>"u"?ce[Ke]=Ze:Array.isArray(ce[Ke])?ce[Ke].push(Ze):ce[Ke]=[ce[Ke],Ze]}),ce};function He(Fe,rt,ce){var wt=Fe;return fe(rt)?(ce=rt,"string"==typeof Fe&&(wt={uri:Fe})):wt=N({},rt,{uri:Fe}),wt.callback=ce,wt}function Re(Fe,rt,ce){return Ue(rt=He(Fe,rt,ce))}function Ue(Fe){if(typeof Fe.callback>"u")throw new Error("callback argument missing");var rt=!1,ce=function(xt,Wt,Sn){rt||(rt=!0,Fe.callback(xt,Wt,Sn))};function Ye(){var Rt=void 0;if(Rt=lt.response?lt.response:lt.responseText||function ye(Fe){try{if("document"===Fe.responseType)return Fe.responseXML;if(""===Fe.responseType&&(!Fe.responseXML||"parsererror"!==Fe.responseXML.documentElement.nodeName))return Fe.responseXML}catch{}return null}(lt),Te)try{Rt=JSON.parse(Rt)}catch{}return Rt}function Ke(Rt){return clearTimeout(Xe),Rt instanceof Error||(Rt=new Error(""+(Rt||"Unknown XMLHttpRequest Error"))),Rt.statusCode=0,ce(Rt,ot)}function Ze(){if(!ge){var Rt;clearTimeout(Xe);var xt=ot,Wt=null;return 0!==(Rt=Fe.useXDR&&void 0===lt.status?200:1223===lt.status?204:lt.status)?(xt={body:Ye(),statusCode:Rt,method:Ct,headers:{},url:re,rawRequest:lt},lt.getAllResponseHeaders&&(xt.headers=Be(lt.getAllResponseHeaders()))):Wt=new Error("Internal XMLHttpRequest Error"),ce(Wt,xt,xt.body)}}var lt=Fe.xhr||null;lt||(lt=Fe.cors||Fe.useXDR?new Re.XDomainRequest:new Re.XMLHttpRequest);var q,ge,Xe,re=lt.url=Fe.uri||Fe.url,Ct=lt.method=Fe.method||"GET",bt=Fe.body||Fe.data,st=lt.headers=Fe.headers||{},Y=!!Fe.sync,Te=!1,ot={body:void 0,headers:{},statusCode:0,method:Ct,url:re,rawRequest:lt};if("json"in Fe&&!1!==Fe.json&&(Te=!0,st.accept||st.Accept||(st.Accept="application/json"),"GET"!==Ct&&"HEAD"!==Ct&&(st["content-type"]||st["Content-Type"]||(st["Content-Type"]="application/json"),bt=JSON.stringify(!0===Fe.json?bt:Fe.json))),lt.onreadystatechange=function wt(){4===lt.readyState&&setTimeout(Ze,0)},lt.onload=Ze,lt.onerror=Ke,lt.onprogress=function(){},lt.onabort=function(){ge=!0},lt.ontimeout=Ke,lt.open(Ct,re,!Y,Fe.username,Fe.password),Y||(lt.withCredentials=!!Fe.withCredentials),!Y&&Fe.timeout>0&&(Xe=setTimeout(function(){if(!ge){ge=!0,lt.abort("timeout");var Rt=new Error("XMLHttpRequest timeout");Rt.code="ETIMEDOUT",Ke(Rt)}},Fe.timeout)),lt.setRequestHeader)for(q in st)st.hasOwnProperty(q)&&lt.setRequestHeader(q,st[q]);else if(Fe.headers&&!function xe(Fe){for(var rt in Fe)if(Fe.hasOwnProperty(rt))return!1;return!0}(Fe.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in Fe&&(lt.responseType=Fe.responseType),"beforeSend"in Fe&&"function"==typeof Fe.beforeSend&&Fe.beforeSend(lt),lt.send(bt||null),lt}en.exports=Re,en.exports.default=Re,Re.XMLHttpRequest=E.XMLHttpRequest||function Ae(){},Re.XDomainRequest="withCredentials"in new Re.XMLHttpRequest?Re.XMLHttpRequest:E.XDomainRequest,function _e(Fe,rt){for(var ce=0;ce<Fe.length;ce++)rt(Fe[ce])}(["get","put","post","patch","head","delete"],function(Fe){Re["delete"===Fe?"del":Fe]=function(rt,ce,wt){return(ce=He(rt,ce,wt)).method=Fe.toUpperCase(),Ue(ce)}})},9401:(en,ut)=>{"use strict";function E(_e,xe){return void 0===xe&&(xe=Object),xe&&"function"==typeof xe.freeze?xe.freeze(_e):_e}var fe=E({HTML:"text/html",isHTML:function(_e){return _e===fe.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Be=E({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(_e){return _e===Be.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});ut.assign=function N(_e,xe){if(null===_e||"object"!=typeof _e)throw new TypeError("target is not an object");for(var He in xe)Object.prototype.hasOwnProperty.call(xe,He)&&(_e[He]=xe[He]);return _e},ut.find=function X(_e,xe,He){if(void 0===He&&(He=Array.prototype),_e&&"function"==typeof He.find)return He.find.call(_e,xe);for(var Re=0;Re<_e.length;Re++)if(Object.prototype.hasOwnProperty.call(_e,Re)){var Ue=_e[Re];if(xe.call(void 0,Ue,Re,_e))return Ue}},ut.freeze=E,ut.MIME_TYPE=fe,ut.NAMESPACE=Be},1991:(en,ut,X)=>{var N=X(9401),fe=X(6853),Be=X(4436),_e=X(8702),xe=fe.DOMImplementation,He=N.NAMESPACE,Re=_e.ParseError,Ue=_e.XMLReader;function ye(Ze){return Ze.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function Ae(Ze){this.options=Ze||{locator:{}}}function rt(){this.cdata=!1}function ce(Ze,lt){lt.lineNumber=Ze.lineNumber,lt.columnNumber=Ze.columnNumber}function wt(Ze){if(Ze)return"\n@"+(Ze.systemId||"")+"#[line:"+Ze.lineNumber+",col:"+Ze.columnNumber+"]"}function Ye(Ze,lt,q){return"string"==typeof Ze?Ze.substr(lt,q):Ze.length>=lt+q||lt?new java.lang.String(Ze,lt,q)+"":Ze}function Ke(Ze,lt){Ze.currentElement?Ze.currentElement.appendChild(lt):Ze.doc.appendChild(lt)}Ae.prototype.parseFromString=function(Ze,lt){var q=this.options,ge=new Ue,re=q.domBuilder||new rt,Ct=q.errorHandler,bt=q.locator,st=q.xmlns||{},Y=/\/x?html?$/.test(lt),Te=Y?Be.HTML_ENTITIES:Be.XML_ENTITIES;return bt&&re.setDocumentLocator(bt),ge.errorHandler=function Fe(Ze,lt,q){if(!Ze){if(lt instanceof rt)return lt;Ze=lt}var ge={},re=Ze instanceof Function;function Ct(bt){var st=Ze[bt];!st&&re&&(st=2==Ze.length?function(Y){Ze(bt,Y)}:Ze),ge[bt]=st&&function(Y){st("[xmldom "+bt+"]\t"+Y+wt(q))}||function(){}}return q=q||{},Ct("warning"),Ct("error"),Ct("fatalError"),ge}(Ct,re,bt),ge.domBuilder=q.domBuilder||re,Y&&(st[""]=He.HTML),st.xml=st.xml||He.XML,Ze&&"string"==typeof Ze?ge.parse((q.normalizeLineEndings||ye)(Ze),st,Te):ge.errorHandler.error("invalid doc source"),re.doc},rt.prototype={startDocument:function(){this.doc=(new xe).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(Ze,lt,q,ge){var re=this.doc,Ct=re.createElementNS(Ze,q||lt),bt=ge.length;Ke(this,Ct),this.currentElement=Ct,this.locator&&ce(this.locator,Ct);for(var st=0;st<bt;st++){Ze=ge.getURI(st);var Y=ge.getValue(st),Te=(q=ge.getQName(st),re.createAttributeNS(Ze,q));this.locator&&ce(ge.getLocator(st),Te),Te.value=Te.nodeValue=Y,Ct.setAttributeNode(Te)}},endElement:function(Ze,lt,q){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(Ze,lt){},endPrefixMapping:function(Ze){},processingInstruction:function(Ze,lt){var q=this.doc.createProcessingInstruction(Ze,lt);this.locator&&ce(this.locator,q),Ke(this,q)},ignorableWhitespace:function(Ze,lt,q){},characters:function(Ze,lt,q){if(Ze=Ye.apply(this,arguments)){if(this.cdata)var ge=this.doc.createCDATASection(Ze);else ge=this.doc.createTextNode(Ze);this.currentElement?this.currentElement.appendChild(ge):/^\s*$/.test(Ze)&&this.doc.appendChild(ge),this.locator&&ce(this.locator,ge)}},skippedEntity:function(Ze){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(Ze){(this.locator=Ze)&&(Ze.lineNumber=0)},comment:function(Ze,lt,q){Ze=Ye.apply(this,arguments);var ge=this.doc.createComment(Ze);this.locator&&ce(this.locator,ge),Ke(this,ge)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(Ze,lt,q){var ge=this.doc.implementation;if(ge&&ge.createDocumentType){var re=ge.createDocumentType(Ze,lt,q);this.locator&&ce(this.locator,re),Ke(this,re),this.doc.doctype=re}},warning:function(Ze){console.warn("[xmldom warning]\t"+Ze,wt(this.locator))},error:function(Ze){console.error("[xmldom error]\t"+Ze,wt(this.locator))},fatalError:function(Ze){throw new Re(Ze,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(Ze){rt.prototype[Ze]=function(){return null}}),ut.DOMParser=Ae},6853:(en,ut,X)=>{var E=X(9401),N=E.find,fe=E.NAMESPACE;function Be(me){return""!==me}function xe(me,Ee){return me.hasOwnProperty(Ee)||(me[Ee]=!0),me}function He(me){if(!me)return[];var Ee=function _e(me){return me?me.split(/[\t\n\f\r ]+/).filter(Be):[]}(me);return Object.keys(Ee.reduce(xe,{}))}function Ue(me,Ee){for(var qe in me)Object.prototype.hasOwnProperty.call(me,qe)&&(Ee[qe]=me[qe])}function ye(me,Ee){var qe=me.prototype;if(!(qe instanceof Ee)){let Gt=function(){};Gt.prototype=Ee.prototype,Gt=new Gt,Ue(qe,Gt),me.prototype=qe=Gt}qe.constructor!=me&&("function"!=typeof me&&console.error("unknown Class:"+me),qe.constructor=me)}var Ae={},Fe=Ae.ELEMENT_NODE=1,rt=Ae.ATTRIBUTE_NODE=2,ce=Ae.TEXT_NODE=3,wt=Ae.CDATA_SECTION_NODE=4,Ye=Ae.ENTITY_REFERENCE_NODE=5,Ke=Ae.ENTITY_NODE=6,Ze=Ae.PROCESSING_INSTRUCTION_NODE=7,lt=Ae.COMMENT_NODE=8,q=Ae.DOCUMENT_NODE=9,ge=Ae.DOCUMENT_TYPE_NODE=10,re=Ae.DOCUMENT_FRAGMENT_NODE=11,Ct=Ae.NOTATION_NODE=12,bt={},st={},Xe=(bt.INDEX_SIZE_ERR=(st[1]="Index size error",1),bt.DOMSTRING_SIZE_ERR=(st[2]="DOMString size error",2),bt.HIERARCHY_REQUEST_ERR=(st[3]="Hierarchy request error",3)),Sn=(bt.WRONG_DOCUMENT_ERR=(st[4]="Wrong document",4),bt.INVALID_CHARACTER_ERR=(st[5]="Invalid character",5),bt.NO_DATA_ALLOWED_ERR=(st[6]="No data allowed",6),bt.NO_MODIFICATION_ALLOWED_ERR=(st[7]="No modification allowed",7),bt.NOT_FOUND_ERR=(st[8]="Not found",8)),vn=(bt.NOT_SUPPORTED_ERR=(st[9]="Not supported",9),bt.INUSE_ATTRIBUTE_ERR=(st[10]="Attribute in use",10));function on(me,Ee){if(Ee instanceof Error)var qe=Ee;else qe=this,Error.call(this,st[me]),this.message=st[me],Error.captureStackTrace&&Error.captureStackTrace(this,on);return qe.code=me,Ee&&(this.message=this.message+": "+Ee),qe}function Jt(){}function Nn(me,Ee){this._node=me,this._refresh=Ee,Cn(this)}function Cn(me){var Ee=me._node._inc||me._node.ownerDocument._inc;if(me._inc!=Ee){var qe=me._refresh(me._node);nn(me,"length",qe.length),Ue(qe,me),me._inc=Ee}}function pr(){}function xr(me,Ee){for(var qe=me.length;qe--;)if(me[qe]===Ee)return qe}function kr(me,Ee,qe,ct){if(ct?Ee[xr(Ee,ct)]=qe:Ee[Ee.length++]=qe,me){qe.ownerElement=me;var Gt=me.ownerDocument;Gt&&(ct&&oi(Gt,me,ct),function Pi(me,Ee,qe){me&&me._inc++,qe.namespaceURI===fe.XMLNS&&(Ee._nsMap[qe.prefix?qe.localName:""]=qe.value)}(Gt,me,qe))}}function On(me,Ee,qe){var ct=xr(Ee,qe);if(!(ct>=0))throw new on(Sn,new Error(me.tagName+"@"+qe));for(var Gt=Ee.length-1;ct<Gt;)Ee[ct]=Ee[++ct];if(Ee.length=Gt,me){var ar=me.ownerDocument;ar&&(oi(ar,me,qe),qe.ownerElement=null)}}function Ai(){}function In(){}function Tr(me){return("<"==me?"&lt;":">"==me&&"&gt;")||"&"==me&&"&amp;"||'"'==me&&"&quot;"||"&#"+me.charCodeAt()+";"}function Rr(me,Ee){if(Ee(me))return!0;if(me=me.firstChild)do{if(Rr(me,Ee))return!0}while(me=me.nextSibling)}function ir(){this.ownerDocument=this}function oi(me,Ee,qe,ct){me&&me._inc++,qe.namespaceURI===fe.XMLNS&&delete Ee._nsMap[qe.prefix?qe.localName:""]}function _r(me,Ee,qe){if(me&&me._inc){me._inc++;var ct=Ee.childNodes;if(qe)ct[ct.length++]=qe;else{for(var Gt=Ee.firstChild,ar=0;Gt;)ct[ar++]=Gt,Gt=Gt.nextSibling;ct.length=ar,delete ct[ct.length]}}}function Ht(me,Ee){var qe=Ee.previousSibling,ct=Ee.nextSibling;return qe?qe.nextSibling=ct:me.firstChild=ct,ct?ct.previousSibling=qe:me.lastChild=qe,Ee.parentNode=null,Ee.previousSibling=null,Ee.nextSibling=null,_r(me.ownerDocument,me),Ee}function tn(me){return me&&me.nodeType===In.DOCUMENT_TYPE_NODE}function Rn(me){return me&&me.nodeType===In.ELEMENT_NODE}function Ei(me){return me&&me.nodeType===In.TEXT_NODE}function ai(me,Ee){var qe=me.childNodes||[];if(N(qe,Rn)||tn(Ee))return!1;var ct=N(qe,tn);return!(Ee&&ct&&qe.indexOf(ct)>qe.indexOf(Ee))}function Oi(me,Ee){var qe=me.childNodes||[];if(N(qe,function ct(ar){return Rn(ar)&&ar!==Ee}))return!1;var Gt=N(qe,tn);return!(Ee&&Gt&&qe.indexOf(Gt)>qe.indexOf(Ee))}function Sr(me,Ee,qe){var ct=me.childNodes||[],Gt=Ee.childNodes||[];if(Ee.nodeType===In.DOCUMENT_FRAGMENT_NODE){var ar=Gt.filter(Rn);if(ar.length>1||N(Gt,Ei))throw new on(Xe,"More than one element or text in fragment");if(1===ar.length&&!ai(me,qe))throw new on(Xe,"Element in fragment can not be inserted before doctype")}if(Rn(Ee)&&!ai(me,qe))throw new on(Xe,"Only one element can be added and only after doctype");if(tn(Ee)){if(N(ct,tn))throw new on(Xe,"Only one doctype is allowed");var Nr=N(ct,Rn);if(qe&&ct.indexOf(Nr)<ct.indexOf(qe))throw new on(Xe,"Doctype can only be inserted before an element");if(!qe&&Nr)throw new on(Xe,"Doctype can not be appended since element is present")}}function fo(me,Ee,qe){var ct=me.childNodes||[],Gt=Ee.childNodes||[];if(Ee.nodeType===In.DOCUMENT_FRAGMENT_NODE){var ar=Gt.filter(Rn);if(ar.length>1||N(Gt,Ei))throw new on(Xe,"More than one element or text in fragment");if(1===ar.length&&!Oi(me,qe))throw new on(Xe,"Element in fragment can not be inserted before doctype")}if(Rn(Ee)&&!Oi(me,qe))throw new on(Xe,"Only one element can be added and only after doctype");if(tn(Ee)){if(N(ct,function(yt){return tn(yt)&&yt!==qe}))throw new on(Xe,"Only one doctype is allowed");var Nr=N(ct,Rn);if(qe&&ct.indexOf(Nr)<ct.indexOf(qe))throw new on(Xe,"Doctype can only be inserted before an element")}}function Kr(me,Ee,qe,ct){(function cs(me,Ee,qe){if(!function sr(me){return me&&(me.nodeType===In.DOCUMENT_NODE||me.nodeType===In.DOCUMENT_FRAGMENT_NODE||me.nodeType===In.ELEMENT_NODE)}(me))throw new on(Xe,"Unexpected parent node type "+me.nodeType);if(qe&&qe.parentNode!==me)throw new on(Sn,"child not in parent");if(!function Hn(me){return me&&(Rn(me)||Ei(me)||tn(me)||me.nodeType===In.DOCUMENT_FRAGMENT_NODE||me.nodeType===In.COMMENT_NODE||me.nodeType===In.PROCESSING_INSTRUCTION_NODE)}(Ee)||tn(Ee)&&me.nodeType!==In.DOCUMENT_NODE)throw new on(Xe,"Unexpected node type "+Ee.nodeType+" for parent node type "+me.nodeType)})(me,Ee,qe),me.nodeType===In.DOCUMENT_NODE&&(ct||Sr)(me,Ee,qe);var Gt=Ee.parentNode;if(Gt&&Gt.removeChild(Ee),Ee.nodeType===re){var ar=Ee.firstChild;if(null==ar)return Ee;var Nr=Ee.lastChild}else ar=Nr=Ee;var ii=qe?qe.previousSibling:me.lastChild;ar.previousSibling=ii,Nr.nextSibling=qe,ii?ii.nextSibling=ar:me.firstChild=ar,null==qe?me.lastChild=Nr:qe.previousSibling=Nr;do{ar.parentNode=me}while(ar!==Nr&&(ar=ar.nextSibling));return _r(me.ownerDocument||me,me),Ee.nodeType==re&&(Ee.firstChild=Ee.lastChild=null),Ee}function Tn(){this._nsMap={}}function Vr(){}function Li(){}function Si(){}function Hr(){}function Mn(){}function $i(){}function Zi(){}function Ar(){}function ni(){}function ds(){}function Zr(){}function Vs(){}function tt(me,Ee){var qe=[],ct=9==this.nodeType&&this.documentElement||this,Gt=ct.prefix,ar=ct.namespaceURI;if(ar&&null==Gt&&null==(Gt=ct.lookupPrefix(ar)))var Nr=[{namespace:ar,prefix:null}];return be(this,qe,me,Ee,Nr),qe.join("")}function ve(me,Ee,qe){var ct=me.prefix||"",Gt=me.namespaceURI;if(!Gt||"xml"===ct&&Gt===fe.XML||Gt===fe.XMLNS)return!1;for(var ar=qe.length;ar--;){var Nr=qe[ar];if(Nr.prefix===ct)return Nr.namespace!==Gt}return!0}function Ce(me,Ee,qe){me.push(" ",Ee,'="',qe.replace(/[<>&"\t\n\r]/g,Tr),'"')}function be(me,Ee,qe,ct,Gt){if(Gt||(Gt=[]),ct){if(!(me=ct(me)))return;if("string"==typeof me)return void Ee.push(me)}switch(me.nodeType){case Fe:var ar=me.attributes,Nr=ar.length,Yr=me.firstChild,ii=me.tagName,Dt=ii;if(!(qe=fe.isHTML(me.namespaceURI)||qe)&&!me.prefix&&me.namespaceURI){for(var yt,Kt=0;Kt<ar.length;Kt++)if("xmlns"===ar.item(Kt).name){yt=ar.item(Kt).value;break}if(!yt)for(var er=Gt.length-1;er>=0;er--)if(""===(Qn=Gt[er]).prefix&&Qn.namespace===me.namespaceURI){yt=Qn.namespace;break}if(yt!==me.namespaceURI)for(er=Gt.length-1;er>=0;er--){var Qn;if((Qn=Gt[er]).namespace===me.namespaceURI){Qn.prefix&&(Dt=Qn.prefix+":"+ii);break}}}Ee.push("<",Dt);for(var cr=0;cr<Nr;cr++)"xmlns"==(yr=ar.item(cr)).prefix?Gt.push({prefix:yr.localName,namespace:yr.value}):"xmlns"==yr.nodeName&&Gt.push({prefix:"",namespace:yr.value});for(cr=0;cr<Nr;cr++){var yr,Fr,si;ve(yr=ar.item(cr),0,Gt)&&(Ce(Ee,(Fr=yr.prefix||"")?"xmlns:"+Fr:"xmlns",si=yr.namespaceURI),Gt.push({prefix:Fr,namespace:si})),be(yr,Ee,qe,ct,Gt)}if(ii===Dt&&ve(me,0,Gt)&&(Ce(Ee,(Fr=me.prefix||"")?"xmlns:"+Fr:"xmlns",si=me.namespaceURI),Gt.push({prefix:Fr,namespace:si})),Yr||qe&&!/^(?:meta|link|img|br|hr|input)$/i.test(ii)){if(Ee.push(">"),qe&&/^script$/i.test(ii))for(;Yr;)Yr.data?Ee.push(Yr.data):be(Yr,Ee,qe,ct,Gt.slice()),Yr=Yr.nextSibling;else for(;Yr;)be(Yr,Ee,qe,ct,Gt.slice()),Yr=Yr.nextSibling;Ee.push("</",Dt,">")}else Ee.push("/>");return;case q:case re:for(Yr=me.firstChild;Yr;)be(Yr,Ee,qe,ct,Gt.slice()),Yr=Yr.nextSibling;return;case rt:return Ce(Ee,me.name,me.value);case ce:return Ee.push(me.data.replace(/[<&>]/g,Tr));case wt:return Ee.push("<![CDATA[",me.data,"]]>");case lt:return Ee.push("\x3c!--",me.data,"--\x3e");case ge:var Ji=me.publicId,Fi=me.systemId;if(Ee.push("<!DOCTYPE ",me.name),Ji)Ee.push(" PUBLIC ",Ji),Fi&&"."!=Fi&&Ee.push(" ",Fi),Ee.push(">");else if(Fi&&"."!=Fi)Ee.push(" SYSTEM ",Fi,">");else{var po=me.internalSubset;po&&Ee.push(" [",po,"]"),Ee.push(">")}return;case Ze:return Ee.push("<?",me.target," ",me.data,"?>");case Ye:return Ee.push("&",me.nodeName,";");default:Ee.push("??",me.nodeName)}}function Oe(me,Ee,qe){var ct;switch(Ee.nodeType){case Fe:(ct=Ee.cloneNode(!1)).ownerDocument=me;case re:break;case rt:qe=!0}if(ct||(ct=Ee.cloneNode(!1)),ct.ownerDocument=me,ct.parentNode=null,qe)for(var Gt=Ee.firstChild;Gt;)ct.appendChild(Oe(me,Gt,qe)),Gt=Gt.nextSibling;return ct}function gt(me,Ee,qe){var ct=new Ee.constructor;for(var Gt in Ee)if(Object.prototype.hasOwnProperty.call(Ee,Gt)){var ar=Ee[Gt];"object"!=typeof ar&&ar!=ct[Gt]&&(ct[Gt]=ar)}switch(Ee.childNodes&&(ct.childNodes=new Jt),ct.ownerDocument=me,ct.nodeType){case Fe:var Nr=Ee.attributes,ii=ct.attributes=new pr,Dt=Nr.length;ii._ownerElement=ct;for(var yt=0;yt<Dt;yt++)ct.setAttributeNode(gt(me,Nr.item(yt),!0));break;case rt:qe=!0}if(qe)for(var Kt=Ee.firstChild;Kt;)ct.appendChild(gt(me,Kt,qe)),Kt=Kt.nextSibling;return ct}function nn(me,Ee,qe){me[Ee]=qe}bt.INVALID_STATE_ERR=(st[11]="Invalid state",11),bt.SYNTAX_ERR=(st[12]="Syntax error",12),bt.INVALID_MODIFICATION_ERR=(st[13]="Invalid modification",13),bt.NAMESPACE_ERR=(st[14]="Invalid namespace",14),bt.INVALID_ACCESS_ERR=(st[15]="Invalid access",15),on.prototype=Error.prototype,Ue(bt,on),Jt.prototype={length:0,item:function(me){return this[me]||null},toString:function(me,Ee){for(var qe=[],ct=0;ct<this.length;ct++)be(this[ct],qe,me,Ee);return qe.join("")},filter:function(me){return Array.prototype.filter.call(this,me)},indexOf:function(me){return Array.prototype.indexOf.call(this,me)}},Nn.prototype.item=function(me){return Cn(this),this[me]},ye(Nn,Jt),pr.prototype={length:0,item:Jt.prototype.item,getNamedItem:function(me){for(var Ee=this.length;Ee--;){var qe=this[Ee];if(qe.nodeName==me)return qe}},setNamedItem:function(me){var Ee=me.ownerElement;if(Ee&&Ee!=this._ownerElement)throw new on(vn);var qe=this.getNamedItem(me.nodeName);return kr(this._ownerElement,this,me,qe),qe},setNamedItemNS:function(me){var qe,Ee=me.ownerElement;if(Ee&&Ee!=this._ownerElement)throw new on(vn);return qe=this.getNamedItemNS(me.namespaceURI,me.localName),kr(this._ownerElement,this,me,qe),qe},removeNamedItem:function(me){var Ee=this.getNamedItem(me);return On(this._ownerElement,this,Ee),Ee},removeNamedItemNS:function(me,Ee){var qe=this.getNamedItemNS(me,Ee);return On(this._ownerElement,this,qe),qe},getNamedItemNS:function(me,Ee){for(var qe=this.length;qe--;){var ct=this[qe];if(ct.localName==Ee&&ct.namespaceURI==me)return ct}return null}},Ai.prototype={hasFeature:function(me,Ee){return!0},createDocument:function(me,Ee,qe){var ct=new ir;if(ct.implementation=this,ct.childNodes=new Jt,ct.doctype=qe||null,qe&&ct.appendChild(qe),Ee){var Gt=ct.createElementNS(me,Ee);ct.appendChild(Gt)}return ct},createDocumentType:function(me,Ee,qe){var ct=new $i;return ct.name=me,ct.nodeName=me,ct.publicId=Ee||"",ct.systemId=qe||"",ct}},In.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(me,Ee){return Kr(this,me,Ee)},replaceChild:function(me,Ee){Kr(this,me,Ee,fo),Ee&&this.removeChild(Ee)},removeChild:function(me){return Ht(this,me)},appendChild:function(me){return this.insertBefore(me,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(me){return gt(this.ownerDocument||this,this,me)},normalize:function(){for(var me=this.firstChild;me;){var Ee=me.nextSibling;Ee&&Ee.nodeType==ce&&me.nodeType==ce?(this.removeChild(Ee),me.appendData(Ee.data)):(me.normalize(),me=Ee)}},isSupported:function(me,Ee){return this.ownerDocument.implementation.hasFeature(me,Ee)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(me){for(var Ee=this;Ee;){var qe=Ee._nsMap;if(qe)for(var ct in qe)if(Object.prototype.hasOwnProperty.call(qe,ct)&&qe[ct]===me)return ct;Ee=Ee.nodeType==rt?Ee.ownerDocument:Ee.parentNode}return null},lookupNamespaceURI:function(me){for(var Ee=this;Ee;){var qe=Ee._nsMap;if(qe&&Object.prototype.hasOwnProperty.call(qe,me))return qe[me];Ee=Ee.nodeType==rt?Ee.ownerDocument:Ee.parentNode}return null},isDefaultNamespace:function(me){return null==this.lookupPrefix(me)}},Ue(Ae,In),Ue(Ae,In.prototype),ir.prototype={nodeName:"#document",nodeType:q,doctype:null,documentElement:null,_inc:1,insertBefore:function(me,Ee){if(me.nodeType==re){for(var qe=me.firstChild;qe;){var ct=qe.nextSibling;this.insertBefore(qe,Ee),qe=ct}return me}return Kr(this,me,Ee),me.ownerDocument=this,null===this.documentElement&&me.nodeType===Fe&&(this.documentElement=me),me},removeChild:function(me){return this.documentElement==me&&(this.documentElement=null),Ht(this,me)},replaceChild:function(me,Ee){Kr(this,me,Ee,fo),me.ownerDocument=this,Ee&&this.removeChild(Ee),Rn(me)&&(this.documentElement=me)},importNode:function(me,Ee){return Oe(this,me,Ee)},getElementById:function(me){var Ee=null;return Rr(this.documentElement,function(qe){if(qe.nodeType==Fe&&qe.getAttribute("id")==me)return Ee=qe,!0}),Ee},getElementsByClassName:function(me){var Ee=He(me);return new Nn(this,function(qe){var ct=[];return Ee.length>0&&Rr(qe.documentElement,function(Gt){if(Gt!==qe&&Gt.nodeType===Fe){var ar=Gt.getAttribute("class");if(ar){var Nr=me===ar;if(!Nr){var ii=He(ar);Nr=Ee.every(function Re(me){return function(Ee){return me&&-1!==me.indexOf(Ee)}}(ii))}Nr&&ct.push(Gt)}}}),ct})},createElement:function(me){var Ee=new Tn;return Ee.ownerDocument=this,Ee.nodeName=me,Ee.tagName=me,Ee.localName=me,Ee.childNodes=new Jt,(Ee.attributes=new pr)._ownerElement=Ee,Ee},createDocumentFragment:function(){var me=new ds;return me.ownerDocument=this,me.childNodes=new Jt,me},createTextNode:function(me){var Ee=new Si;return Ee.ownerDocument=this,Ee.appendData(me),Ee},createComment:function(me){var Ee=new Hr;return Ee.ownerDocument=this,Ee.appendData(me),Ee},createCDATASection:function(me){var Ee=new Mn;return Ee.ownerDocument=this,Ee.appendData(me),Ee},createProcessingInstruction:function(me,Ee){var qe=new Zr;return qe.ownerDocument=this,qe.tagName=qe.target=me,qe.nodeValue=qe.data=Ee,qe},createAttribute:function(me){var Ee=new Vr;return Ee.ownerDocument=this,Ee.name=me,Ee.nodeName=me,Ee.localName=me,Ee.specified=!0,Ee},createEntityReference:function(me){var Ee=new ni;return Ee.ownerDocument=this,Ee.nodeName=me,Ee},createElementNS:function(me,Ee){var qe=new Tn,ct=Ee.split(":"),Gt=qe.attributes=new pr;return qe.childNodes=new Jt,qe.ownerDocument=this,qe.nodeName=Ee,qe.tagName=Ee,qe.namespaceURI=me,2==ct.length?(qe.prefix=ct[0],qe.localName=ct[1]):qe.localName=Ee,Gt._ownerElement=qe,qe},createAttributeNS:function(me,Ee){var qe=new Vr,ct=Ee.split(":");return qe.ownerDocument=this,qe.nodeName=Ee,qe.name=Ee,qe.namespaceURI=me,qe.specified=!0,2==ct.length?(qe.prefix=ct[0],qe.localName=ct[1]):qe.localName=Ee,qe}},ye(ir,In),ir.prototype.getElementsByTagName=(Tn.prototype={nodeType:Fe,hasAttribute:function(me){return null!=this.getAttributeNode(me)},getAttribute:function(me){var Ee=this.getAttributeNode(me);return Ee&&Ee.value||""},getAttributeNode:function(me){return this.attributes.getNamedItem(me)},setAttribute:function(me,Ee){var qe=this.ownerDocument.createAttribute(me);qe.value=qe.nodeValue=""+Ee,this.setAttributeNode(qe)},removeAttribute:function(me){var Ee=this.getAttributeNode(me);Ee&&this.removeAttributeNode(Ee)},appendChild:function(me){return me.nodeType===re?this.insertBefore(me,null):function ms(me,Ee){return Ee.parentNode&&Ee.parentNode.removeChild(Ee),Ee.parentNode=me,Ee.previousSibling=me.lastChild,Ee.nextSibling=null,Ee.previousSibling?Ee.previousSibling.nextSibling=Ee:me.firstChild=Ee,me.lastChild=Ee,_r(me.ownerDocument,me,Ee),Ee}(this,me)},setAttributeNode:function(me){return this.attributes.setNamedItem(me)},setAttributeNodeNS:function(me){return this.attributes.setNamedItemNS(me)},removeAttributeNode:function(me){return this.attributes.removeNamedItem(me.nodeName)},removeAttributeNS:function(me,Ee){var qe=this.getAttributeNodeNS(me,Ee);qe&&this.removeAttributeNode(qe)},hasAttributeNS:function(me,Ee){return null!=this.getAttributeNodeNS(me,Ee)},getAttributeNS:function(me,Ee){var qe=this.getAttributeNodeNS(me,Ee);return qe&&qe.value||""},setAttributeNS:function(me,Ee,qe){var ct=this.ownerDocument.createAttributeNS(me,Ee);ct.value=ct.nodeValue=""+qe,this.setAttributeNode(ct)},getAttributeNodeNS:function(me,Ee){return this.attributes.getNamedItemNS(me,Ee)},getElementsByTagName:function(me){return new Nn(this,function(Ee){var qe=[];return Rr(Ee,function(ct){ct!==Ee&&ct.nodeType==Fe&&("*"===me||ct.tagName==me)&&qe.push(ct)}),qe})},getElementsByTagNameNS:function(me,Ee){return new Nn(this,function(qe){var ct=[];return Rr(qe,function(Gt){Gt!==qe&&Gt.nodeType===Fe&&("*"===me||Gt.namespaceURI===me)&&("*"===Ee||Gt.localName==Ee)&&ct.push(Gt)}),ct})}}).getElementsByTagName,ir.prototype.getElementsByTagNameNS=Tn.prototype.getElementsByTagNameNS,ye(Tn,In),Vr.prototype.nodeType=rt,ye(Vr,In),Li.prototype={data:"",substringData:function(me,Ee){return this.data.substring(me,me+Ee)},appendData:function(me){this.nodeValue=this.data=me=this.data+me,this.length=me.length},insertData:function(me,Ee){this.replaceData(me,0,Ee)},appendChild:function(me){throw new Error(st[Xe])},deleteData:function(me,Ee){this.replaceData(me,Ee,"")},replaceData:function(me,Ee,qe){var ct=this.data.substring(0,me),Gt=this.data.substring(me+Ee);this.nodeValue=this.data=qe=ct+qe+Gt,this.length=qe.length}},ye(Li,In),Si.prototype={nodeName:"#text",nodeType:ce,splitText:function(me){var Ee=this.data,qe=Ee.substring(me);Ee=Ee.substring(0,me),this.data=this.nodeValue=Ee,this.length=Ee.length;var ct=this.ownerDocument.createTextNode(qe);return this.parentNode&&this.parentNode.insertBefore(ct,this.nextSibling),ct}},ye(Si,Li),Hr.prototype={nodeName:"#comment",nodeType:lt},ye(Hr,Li),Mn.prototype={nodeName:"#cdata-section",nodeType:wt},ye(Mn,Li),$i.prototype.nodeType=ge,ye($i,In),Zi.prototype.nodeType=Ct,ye(Zi,In),Ar.prototype.nodeType=Ke,ye(Ar,In),ni.prototype.nodeType=Ye,ye(ni,In),ds.prototype.nodeName="#document-fragment",ds.prototype.nodeType=re,ye(ds,In),Zr.prototype.nodeType=Ze,ye(Zr,In),Vs.prototype.serializeToString=function(me,Ee,qe){return tt.call(me,Ee,qe)},In.prototype.toString=tt;try{if(Object.defineProperty){let me=function(Ee){switch(Ee.nodeType){case Fe:case re:var qe=[];for(Ee=Ee.firstChild;Ee;)7!==Ee.nodeType&&8!==Ee.nodeType&&qe.push(me(Ee)),Ee=Ee.nextSibling;return qe.join("");default:return Ee.nodeValue}};Object.defineProperty(Nn.prototype,"length",{get:function(){return Cn(this),this.$$length}}),Object.defineProperty(In.prototype,"textContent",{get:function(){return me(this)},set:function(Ee){switch(this.nodeType){case Fe:case re:for(;this.firstChild;)this.removeChild(this.firstChild);(Ee||String(Ee))&&this.appendChild(this.ownerDocument.createTextNode(Ee));break;default:this.data=Ee,this.value=Ee,this.nodeValue=Ee}}}),nn=function(Ee,qe,ct){Ee["$$"+qe]=ct}}}catch{}ut.DocumentType=$i,ut.DOMException=on,ut.DOMImplementation=Ai,ut.Element=Tn,ut.Node=In,ut.NodeList=Jt,ut.XMLSerializer=Vs},4436:(en,ut,X)=>{var E=X(9401).freeze;ut.XML_ENTITIES=E({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),ut.HTML_ENTITIES=E({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",times:"\xd7",divide:"\xf7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",int:"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",euro:"\u20ac",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),ut.entityMap=ut.HTML_ENTITIES},978:(en,ut,X)=>{X(6853);ut.DOMParser=X(1991).DOMParser},8702:(en,ut,X)=>{var E=X(9401).NAMESPACE,N=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,fe=new RegExp("[\\-\\.0-9"+N.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Be=new RegExp("^"+N.source+fe.source+"*(?::"+N.source+fe.source+"*)?$");function rt(Y,Te){this.message=Y,this.locator=Te,Error.captureStackTrace&&Error.captureStackTrace(this,rt)}function ce(){}function Ye(Y,Te){return Te.lineNumber=Y.lineNumber,Te.columnNumber=Y.columnNumber,Te}function Ke(Y,Te,Xe,ot,Rt,xt){function Wt(qt,En,on){Xe.attributeNames.hasOwnProperty(qt)&&xt.fatalError("Attribute "+qt+" redefined"),Xe.addValue(qt,En.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,Rt),on)}for(var Sn,vn=++Te,an=0;;){var Ut=Y.charAt(vn);switch(Ut){case"=":if(1===an)Sn=Y.slice(Te,vn),an=3;else{if(2!==an)throw new Error("attribute equal must after attrName");an=3}break;case"'":case'"':if(3===an||1===an){if(1===an&&(xt.warning('attribute value must after "="'),Sn=Y.slice(Te,vn)),!((vn=Y.indexOf(Ut,Te=vn+1))>0))throw new Error("attribute value no end '"+Ut+"' match");Wt(Sn,Yt=Y.slice(Te,vn),Te-1),an=5}else{if(4!=an)throw new Error('attribute value must after "="');Wt(Sn,Yt=Y.slice(Te,vn),Te),xt.warning('attribute "'+Sn+'" missed start quot('+Ut+")!!"),Te=vn+1,an=5}break;case"/":switch(an){case 0:Xe.setTagName(Y.slice(Te,vn));case 5:case 6:case 7:an=7,Xe.closed=!0;case 4:case 1:break;case 2:Xe.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return xt.error("unexpected end of input"),0==an&&Xe.setTagName(Y.slice(Te,vn)),vn;case">":switch(an){case 0:Xe.setTagName(Y.slice(Te,vn));case 5:case 6:case 7:break;case 4:case 1:"/"===(Yt=Y.slice(Te,vn)).slice(-1)&&(Xe.closed=!0,Yt=Yt.slice(0,-1));case 2:2===an&&(Yt=Sn),4==an?(xt.warning('attribute "'+Yt+'" missed quot(")!'),Wt(Sn,Yt,Te)):((!E.isHTML(ot[""])||!Yt.match(/^(?:disabled|checked|selected)$/i))&&xt.warning('attribute "'+Yt+'" missed value!! "'+Yt+'" instead!!'),Wt(Yt,Yt,Te));break;case 3:throw new Error("attribute value missed!!")}return vn;case"\x80":Ut=" ";default:if(Ut<=" ")switch(an){case 0:Xe.setTagName(Y.slice(Te,vn)),an=6;break;case 1:Sn=Y.slice(Te,vn),an=2;break;case 4:var Yt=Y.slice(Te,vn);xt.warning('attribute "'+Yt+'" missed quot(")!!'),Wt(Sn,Yt,Te);case 5:an=6}else switch(an){case 2:(!E.isHTML(ot[""])||!Sn.match(/^(?:disabled|checked|selected)$/i))&&xt.warning('attribute "'+Sn+'" missed value!! "'+Sn+'" instead2!!'),Wt(Sn,Sn,Te),Te=vn,an=1;break;case 5:xt.warning('attribute space is required"'+Sn+'"!!');case 6:an=1,Te=vn;break;case 3:an=4,Te=vn;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}vn++}}function Ze(Y,Te,Xe){for(var ot=Y.tagName,Rt=null,Ut=Y.length;Ut--;){var xt=Y[Ut],Wt=xt.qName,Sn=xt.value;if((Vt=Wt.indexOf(":"))>0)var Yt=xt.prefix=Wt.slice(0,Vt),vn=Wt.slice(Vt+1),an="xmlns"===Yt&&vn;else vn=Wt,Yt=null,an="xmlns"===Wt&&"";xt.localName=vn,!1!==an&&(null==Rt&&(Rt={},ge(Xe,Xe={})),Xe[an]=Rt[an]=Sn,xt.uri=E.XMLNS,Te.startPrefixMapping(an,Sn))}for(Ut=Y.length;Ut--;)(Yt=(xt=Y[Ut]).prefix)&&("xml"===Yt&&(xt.uri=E.XML),"xmlns"!==Yt&&(xt.uri=Xe[Yt||""]));var Vt;(Vt=ot.indexOf(":"))>0?(Yt=Y.prefix=ot.slice(0,Vt),vn=Y.localName=ot.slice(Vt+1)):(Yt=null,vn=Y.localName=ot);var qt=Y.uri=Xe[Yt||""];if(Te.startElement(qt,vn,ot,Y),!Y.closed)return Y.currentNSMap=Xe,Y.localNSMap=Rt,!0;if(Te.endElement(qt,vn,ot),Rt)for(Yt in Rt)Object.prototype.hasOwnProperty.call(Rt,Yt)&&Te.endPrefixMapping(Yt)}function lt(Y,Te,Xe,ot,Rt){if(/^(?:script|textarea)$/i.test(Xe)){var xt=Y.indexOf("</"+Xe+">",Te),Wt=Y.substring(Te+1,xt);if(/[&<]/.test(Wt))return/^script$/i.test(Xe)?(Rt.characters(Wt,0,Wt.length),xt):(Wt=Wt.replace(/&#?\w+;/g,ot),Rt.characters(Wt,0,Wt.length),xt)}return Te+1}function q(Y,Te,Xe,ot){var Rt=ot[Xe];return null==Rt&&((Rt=Y.lastIndexOf("</"+Xe+">"))<Te&&(Rt=Y.lastIndexOf("</"+Xe)),ot[Xe]=Rt),Rt<Te}function ge(Y,Te){for(var Xe in Y)Object.prototype.hasOwnProperty.call(Y,Xe)&&(Te[Xe]=Y[Xe])}function re(Y,Te,Xe,ot){if("-"===Y.charAt(Te+2))return"-"===Y.charAt(Te+3)?(xt=Y.indexOf("--\x3e",Te+4))>Te?(Xe.comment(Y,Te+4,xt-Te-4),xt+3):(ot.error("Unclosed comment"),-1):-1;if("CDATA["==Y.substr(Te+3,6)){var xt=Y.indexOf("]]>",Te+9);return Xe.startCDATA(),Xe.characters(Y,Te+9,xt-Te-9),Xe.endCDATA(),xt+3}var Wt=function st(Y,Te){var Xe,ot=[],Rt=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(Rt.lastIndex=Te,Rt.exec(Y);Xe=Rt.exec(Y);)if(ot.push(Xe),Xe[1])return ot}(Y,Te),Sn=Wt.length;if(Sn>1&&/!doctype/i.test(Wt[0][0])){var Yt=Wt[1][0],vn=!1,an=!1;Sn>3&&(/^public$/i.test(Wt[2][0])?(vn=Wt[3][0],an=Sn>4&&Wt[4][0]):/^system$/i.test(Wt[2][0])&&(an=Wt[3][0]));var Ut=Wt[Sn-1];return Xe.startDTD(Yt,vn,an),Xe.endDTD(),Ut.index+Ut[0].length}return-1}function Ct(Y,Te,Xe){var ot=Y.indexOf("?>",Te);if(ot){var Rt=Y.substring(Te,ot).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return Rt?(Xe.processingInstruction(Rt[1],Rt[2]),ot+2):-1}return-1}function bt(){this.attributeNames={}}(rt.prototype=new Error).name=rt.name,ce.prototype={parse:function(Y,Te,Xe){var ot=this.domBuilder;ot.startDocument(),ge(Te,Te={}),function wt(Y,Te,Xe,ot,Rt){function Wt(sr){var Hn=sr.slice(1,-1);return Object.hasOwnProperty.call(Xe,Hn)?Xe[Hn]:"#"===Hn.charAt(0)?function xt(sr){return sr>65535?(sr-=65536,String.fromCharCode(55296+(sr>>10),56320+(1023&sr))):String.fromCharCode(sr)}(parseInt(Hn.substr(1).replace("x","0x"))):(Rt.error("entity not found:"+sr),sr)}function Sn(sr){if(sr>on){var Hn=Y.substring(on,sr).replace(/&#?\w+;/g,Wt);Vt&&Yt(on),ot.characters(Hn,0,sr-on),on=sr}}function Yt(sr,Hn){for(;sr>=an&&(Hn=Ut.exec(Y));)an=(vn=Hn.index)+Hn[0].length,Vt.lineNumber++;Vt.columnNumber=sr-vn+1}for(var vn=0,an=0,Ut=/.*(?:\r\n?|\n)|.*$/g,Vt=ot.locator,qt=[{currentNSMap:Te}],En={},on=0;;){try{var Jt=Y.indexOf("<",on);if(Jt<0){if(!Y.substr(on).match(/^\s*$/)){var Nn=ot.doc,Cn=Nn.createTextNode(Y.substr(on));Nn.appendChild(Cn),ot.currentElement=Cn}return}switch(Jt>on&&Sn(Jt),Y.charAt(Jt+1)){case"/":var ir=Y.indexOf(">",Jt+3),pr=Y.substring(Jt+2,ir).replace(/[ \t\n\r]+$/g,""),xr=qt.pop();ir<0?(pr=Y.substring(Jt+2).replace(/[\s<].*/,""),Rt.error("end tag name: "+pr+" is not complete:"+xr.tagName),ir=Jt+1+pr.length):pr.match(/\s</)&&(pr=pr.replace(/[\s<].*/,""),Rt.error("end tag name: "+pr+" maybe not complete"),ir=Jt+1+pr.length);var kr=xr.localNSMap,On=xr.tagName==pr;if(On||xr.tagName&&xr.tagName.toLowerCase()==pr.toLowerCase()){if(ot.endElement(xr.uri,xr.localName,pr),kr)for(var In in kr)Object.prototype.hasOwnProperty.call(kr,In)&&ot.endPrefixMapping(In);On||Rt.fatalError("end tag name: "+pr+" is not match the current start tagName:"+xr.tagName)}else qt.push(xr);ir++;break;case"?":Vt&&Yt(Jt),ir=Ct(Y,Jt,ot);break;case"!":Vt&&Yt(Jt),ir=re(Y,Jt,ot,Rt);break;default:Vt&&Yt(Jt);var Tr=new bt,Rr=qt[qt.length-1].currentNSMap,Pi=(ir=Ke(Y,Jt,Tr,Rr,Wt,Rt),Tr.length);if(!Tr.closed&&q(Y,ir,Tr.tagName,En)&&(Tr.closed=!0,Xe.nbsp||Rt.warning("unclosed xml attribute")),Vt&&Pi){for(var oi=Ye(Vt,{}),_r=0;_r<Pi;_r++){var Ht=Tr[_r];Yt(Ht.offset),Ht.locator=Ye(Vt,{})}ot.locator=oi,Ze(Tr,ot,Rr)&&qt.push(Tr),ot.locator=Vt}else Ze(Tr,ot,Rr)&&qt.push(Tr);E.isHTML(Tr.uri)&&!Tr.closed?ir=lt(Y,ir,Tr.tagName,Wt,ot):ir++}}catch(sr){if(sr instanceof rt)throw sr;Rt.error("element parse error: "+sr),ir=-1}ir>on?on=ir:Sn(Math.max(Jt,on)+1)}}(Y,Te,Xe,ot,this.errorHandler),ot.endDocument()}},bt.prototype={setTagName:function(Y){if(!Be.test(Y))throw new Error("invalid tagName:"+Y);this.tagName=Y},addValue:function(Y,Te,Xe){if(!Be.test(Y))throw new Error("invalid attribute:"+Y);this.attributeNames[Y]=this.length,this[this.length++]={qName:Y,value:Te,offset:Xe}},length:0,getLocalName:function(Y){return this[Y].localName},getLocator:function(Y){return this[Y].locator},getQName:function(Y){return this[Y].qName},getURI:function(Y){return this[Y].uri},getValue:function(Y){return this[Y].value}},ut.XMLReader=ce,ut.ParseError=rt},1421:(en,ut,X)=>{var fe,E=typeof global<"u"?global:typeof window<"u"?window:{},N=X(5893);typeof document<"u"?fe=document:(fe=E["__GLOBAL_DOCUMENT_CACHE@4"])||(fe=E["__GLOBAL_DOCUMENT_CACHE@4"]=N),en.exports=fe},9226:en=>{var ut;ut=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},en.exports=ut},2703:en=>{en.exports=function X(E){if(!E)return!1;var N=ut.call(E);return"[object Function]"===N||"function"==typeof E&&"[object RegExp]"!==N||typeof window<"u"&&(E===window.setTimeout||E===window.alert||E===window.confirm||E===window.prompt)};var ut=Object.prototype.toString},1234:(en,ut)=>{function X(xe){if(xe&&"object"==typeof xe){var He=xe.which||xe.keyCode||xe.charCode;He&&(xe=He)}if("number"==typeof xe)return Be[xe];var Ue,Re=String(xe);return(Ue=E[Re.toLowerCase()])?Ue:(Ue=N[Re.toLowerCase()])||(1===Re.length?Re.charCodeAt(0):void 0)}X.isEventKey=function(He,Re){if(He&&"object"==typeof He){var Ue=He.which||He.keyCode||He.charCode;if(null==Ue)return!1;if("string"==typeof Re){var ye;if(ye=E[Re.toLowerCase()])return ye===Ue;if(ye=N[Re.toLowerCase()])return ye===Ue}else if("number"==typeof Re)return Re===Ue;return!1}};var E=(ut=en.exports=X).code=ut.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},N=ut.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(fe=97;fe<123;fe++)E[String.fromCharCode(fe)]=fe-32;for(var fe=48;fe<58;fe++)E[fe-48]=fe;for(fe=1;fe<13;fe++)E["f"+fe]=fe+111;for(fe=0;fe<10;fe++)E["numpad "+fe]=fe+96;var Be=ut.names=ut.title={};for(fe in E)Be[E[fe]]=fe;for(var _e in N)E[_e]=N[_e]},7459:(en,ut,X)=>{var E=X(3357).getUint64;en.exports=function(fe){var Be=new DataView(fe.buffer,fe.byteOffset,fe.byteLength),_e={version:fe[0],flags:new Uint8Array(fe.subarray(1,4)),references:[],referenceId:Be.getUint32(4),timescale:Be.getUint32(8)},xe=12;0===_e.version?(_e.earliestPresentationTime=Be.getUint32(xe),_e.firstOffset=Be.getUint32(xe+4),xe+=8):(_e.earliestPresentationTime=E(fe.subarray(xe)),_e.firstOffset=E(fe.subarray(xe+8)),xe+=16);var He=Be.getUint16(xe+=2);for(xe+=2;He>0;xe+=12,He--)_e.references.push({referenceType:(128&fe[xe])>>>7,referencedSize:2147483647&Be.getUint32(xe),subsegmentDuration:Be.getUint32(xe+4),startsWithSap:!!(128&fe[xe+8]),sapType:(112&fe[xe+8])>>>4,sapDeltaTime:268435455&Be.getUint32(xe+8)});return _e}},6277:en=>{var X,E,N,fe,Be,_e,xe;Be=function(He,Re){return X(fe(He,Re))},_e=function(He,Re){return E(N(He),Re)},xe=function(He,Re,Ue){return N(Ue?He:He-Re)},en.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:X=function(He){return 9e4*He},secondsToAudioTs:E=function(He,Re){return He*Re},videoTsToSeconds:N=function(He){return He/9e4},audioTsToSeconds:fe=function(He,Re){return He/Re},audioTsToVideoTs:Be,videoTsToAudioTs:_e,metadataTsToSeconds:xe}},3357:en=>{var ut=Math.pow(2,32);en.exports={getUint64:function(E){var fe,N=new DataView(E.buffer,E.byteOffset,E.byteLength);return N.getBigUint64?(fe=N.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(fe):fe:N.getUint32(0)*ut+N.getUint32(4)},MAX_UINT32:ut}},591:(en,ut,X)=>{"use strict";X.d(ut,{X:()=>fe});var E=X(8929),N=X(5279);class fe extends E.xQ{constructor(_e){super(),this._value=_e}get value(){return this.getValue()}_subscribe(_e){const xe=super._subscribe(_e);return xe&&!xe.closed&&_e.next(this._value),xe}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new N.N;return this._value}next(_e){super.next(this._value=_e)}}},9312:(en,ut,X)=>{"use strict";X.d(ut,{P:()=>_e});var E=X(8896),N=X(1086),fe=X(1737);class _e{constructor(He,Re,Ue){this.kind=He,this.value=Re,this.error=Ue,this.hasValue="N"===He}observe(He){switch(this.kind){case"N":return He.next&&He.next(this.value);case"E":return He.error&&He.error(this.error);case"C":return He.complete&&He.complete()}}do(He,Re,Ue){switch(this.kind){case"N":return He&&He(this.value);case"E":return Re&&Re(this.error);case"C":return Ue&&Ue()}}accept(He,Re,Ue){return He&&"function"==typeof He.next?this.observe(He):this.do(He,Re,Ue)}toObservable(){switch(this.kind){case"N":return(0,N.of)(this.value);case"E":return(0,fe._)(this.error);case"C":return(0,E.c)()}throw new Error("unexpected notification kind value")}static createNext(He){return typeof He<"u"?new _e("N",He):_e.undefinedValueNotification}static createError(He){return new _e("E",void 0,He)}static createComplete(){return _e.completeNotification}}_e.completeNotification=new _e("C"),_e.undefinedValueNotification=new _e("N",void 0)},6498:(en,ut,X)=>{"use strict";X.d(ut,{y:()=>Ue});var E=X(3489),fe=X(7668),Be=X(3292),xe=X(3821),He=X(4843),Re=X(2830);let Ue=(()=>{class Ae{constructor(rt){this._isScalar=!1,rt&&(this._subscribe=rt)}lift(rt){const ce=new Ae;return ce.source=this,ce.operator=rt,ce}subscribe(rt,ce,wt){const{operator:Ye}=this,Ke=function _e(Ae,Fe,rt){if(Ae){if(Ae instanceof E.L)return Ae;if(Ae[fe.b])return Ae[fe.b]()}return Ae||Fe||rt?new E.L(Ae,Fe,rt):new E.L(Be.c)}(rt,ce,wt);if(Ke.add(Ye?Ye.call(Ke,this.source):this.source||Re.config.useDeprecatedSynchronousErrorHandling&&!Ke.syncErrorThrowable?this._subscribe(Ke):this._trySubscribe(Ke)),Re.config.useDeprecatedSynchronousErrorHandling&&Ke.syncErrorThrowable&&(Ke.syncErrorThrowable=!1,Ke.syncErrorThrown))throw Ke.syncErrorValue;return Ke}_trySubscribe(rt){try{return this._subscribe(rt)}catch(ce){Re.config.useDeprecatedSynchronousErrorHandling&&(rt.syncErrorThrown=!0,rt.syncErrorValue=ce),function N(Ae){for(;Ae;){const{closed:Fe,destination:rt,isStopped:ce}=Ae;if(Fe||ce)return!1;Ae=rt&&rt instanceof E.L?rt:null}return!0}(rt)?rt.error(ce):console.warn(ce)}}forEach(rt,ce){return new(ce=ye(ce))((wt,Ye)=>{let Ke;Ke=this.subscribe(Ze=>{try{rt(Ze)}catch(lt){Ye(lt),Ke&&Ke.unsubscribe()}},Ye,wt)})}_subscribe(rt){const{source:ce}=this;return ce&&ce.subscribe(rt)}[xe.L](){return this}pipe(...rt){return 0===rt.length?this:(0,He.U)(rt)(this)}toPromise(rt){return new(rt=ye(rt))((ce,wt)=>{let Ye;this.subscribe(Ke=>Ye=Ke,Ke=>wt(Ke),()=>ce(Ye))})}}return Ae.create=Fe=>new Ae(Fe),Ae})();function ye(Ae){if(Ae||(Ae=Re.config.Promise||Promise),!Ae)throw new Error("no Promise impl found");return Ae}},3292:(en,ut,X)=>{"use strict";X.d(ut,{c:()=>fe});var E=X(2830),N=X(2782);const fe={closed:!0,next(Be){},error(Be){if(E.config.useDeprecatedSynchronousErrorHandling)throw Be;(0,N.z)(Be)},complete(){}}},8929:(en,ut,X)=>{"use strict";X.d(ut,{Yc:()=>He,xQ:()=>Re});var E=X(6498),N=X(3489),fe=X(2654),Be=X(5279),_e=X(5283),xe=X(7668);class He extends N.L{constructor(Ae){super(Ae),this.destination=Ae}}let Re=(()=>{class ye extends E.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[xe.b](){return new He(this)}lift(Fe){const rt=new Ue(this,this);return rt.operator=Fe,rt}next(Fe){if(this.closed)throw new Be.N;if(!this.isStopped){const{observers:rt}=this,ce=rt.length,wt=rt.slice();for(let Ye=0;Ye<ce;Ye++)wt[Ye].next(Fe)}}error(Fe){if(this.closed)throw new Be.N;this.hasError=!0,this.thrownError=Fe,this.isStopped=!0;const{observers:rt}=this,ce=rt.length,wt=rt.slice();for(let Ye=0;Ye<ce;Ye++)wt[Ye].error(Fe);this.observers.length=0}complete(){if(this.closed)throw new Be.N;this.isStopped=!0;const{observers:Fe}=this,rt=Fe.length,ce=Fe.slice();for(let wt=0;wt<rt;wt++)ce[wt].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(Fe){if(this.closed)throw new Be.N;return super._trySubscribe(Fe)}_subscribe(Fe){if(this.closed)throw new Be.N;return this.hasError?(Fe.error(this.thrownError),fe.w.EMPTY):this.isStopped?(Fe.complete(),fe.w.EMPTY):(this.observers.push(Fe),new _e.W(this,Fe))}asObservable(){const Fe=new E.y;return Fe.source=this,Fe}}return ye.create=(Ae,Fe)=>new Ue(Ae,Fe),ye})();class Ue extends Re{constructor(Ae,Fe){super(),this.destination=Ae,this.source=Fe}next(Ae){const{destination:Fe}=this;Fe&&Fe.next&&Fe.next(Ae)}error(Ae){const{destination:Fe}=this;Fe&&Fe.error&&this.destination.error(Ae)}complete(){const{destination:Ae}=this;Ae&&Ae.complete&&this.destination.complete()}_subscribe(Ae){const{source:Fe}=this;return Fe?this.source.subscribe(Ae):fe.w.EMPTY}}},5283:(en,ut,X)=>{"use strict";X.d(ut,{W:()=>N});var E=X(2654);class N extends E.w{constructor(Be,_e){super(),this.subject=Be,this.subscriber=_e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const Be=this.subject,_e=Be.observers;if(this.subject=null,!_e||0===_e.length||Be.isStopped||Be.closed)return;const xe=_e.indexOf(this.subscriber);-1!==xe&&_e.splice(xe,1)}}},3489:(en,ut,X)=>{"use strict";X.d(ut,{L:()=>He});var E=X(7043),N=X(3292),fe=X(2654),Be=X(7668),_e=X(2830),xe=X(2782);class He extends fe.w{constructor(ye,Ae,Fe){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=N.c;break;case 1:if(!ye){this.destination=N.c;break}if("object"==typeof ye){ye instanceof He?(this.syncErrorThrowable=ye.syncErrorThrowable,this.destination=ye,ye.add(this)):(this.syncErrorThrowable=!0,this.destination=new Re(this,ye));break}default:this.syncErrorThrowable=!0,this.destination=new Re(this,ye,Ae,Fe)}}[Be.b](){return this}static create(ye,Ae,Fe){const rt=new He(ye,Ae,Fe);return rt.syncErrorThrowable=!1,rt}next(ye){this.isStopped||this._next(ye)}error(ye){this.isStopped||(this.isStopped=!0,this._error(ye))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(ye){this.destination.next(ye)}_error(ye){this.destination.error(ye),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:ye}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=ye,this}}class Re extends He{constructor(ye,Ae,Fe,rt){super(),this._parentSubscriber=ye;let ce,wt=this;(0,E.m)(Ae)?ce=Ae:Ae&&(ce=Ae.next,Fe=Ae.error,rt=Ae.complete,Ae!==N.c&&(wt=Object.create(Ae),(0,E.m)(wt.unsubscribe)&&this.add(wt.unsubscribe.bind(wt)),wt.unsubscribe=this.unsubscribe.bind(this))),this._context=wt,this._next=ce,this._error=Fe,this._complete=rt}next(ye){if(!this.isStopped&&this._next){const{_parentSubscriber:Ae}=this;_e.config.useDeprecatedSynchronousErrorHandling&&Ae.syncErrorThrowable?this.__tryOrSetError(Ae,this._next,ye)&&this.unsubscribe():this.__tryOrUnsub(this._next,ye)}}error(ye){if(!this.isStopped){const{_parentSubscriber:Ae}=this,{useDeprecatedSynchronousErrorHandling:Fe}=_e.config;if(this._error)Fe&&Ae.syncErrorThrowable?(this.__tryOrSetError(Ae,this._error,ye),this.unsubscribe()):(this.__tryOrUnsub(this._error,ye),this.unsubscribe());else if(Ae.syncErrorThrowable)Fe?(Ae.syncErrorValue=ye,Ae.syncErrorThrown=!0):(0,xe.z)(ye),this.unsubscribe();else{if(this.unsubscribe(),Fe)throw ye;(0,xe.z)(ye)}}}complete(){if(!this.isStopped){const{_parentSubscriber:ye}=this;if(this._complete){const Ae=()=>this._complete.call(this._context);_e.config.useDeprecatedSynchronousErrorHandling&&ye.syncErrorThrowable?(this.__tryOrSetError(ye,Ae),this.unsubscribe()):(this.__tryOrUnsub(Ae),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(ye,Ae){try{ye.call(this._context,Ae)}catch(Fe){if(this.unsubscribe(),_e.config.useDeprecatedSynchronousErrorHandling)throw Fe;(0,xe.z)(Fe)}}__tryOrSetError(ye,Ae,Fe){if(!_e.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{Ae.call(this._context,Fe)}catch(rt){return _e.config.useDeprecatedSynchronousErrorHandling?(ye.syncErrorValue=rt,ye.syncErrorThrown=!0,!0):((0,xe.z)(rt),!0)}return!1}_unsubscribe(){const{_parentSubscriber:ye}=this;this._context=null,this._parentSubscriber=null,ye.unsubscribe()}}},2654:(en,ut,X)=>{"use strict";X.d(ut,{w:()=>xe});var E=X(6688),N=X(7830),fe=X(7043);const _e=(()=>{function Re(Ue){return Error.call(this),this.message=Ue?`${Ue.length} errors occurred during unsubscription:\n${Ue.map((ye,Ae)=>`${Ae+1}) ${ye.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ue,this}return Re.prototype=Object.create(Error.prototype),Re})();class xe{constructor(Ue){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,Ue&&(this._ctorUnsubscribe=!0,this._unsubscribe=Ue)}unsubscribe(){let Ue;if(this.closed)return;let{_parentOrParents:ye,_ctorUnsubscribe:Ae,_unsubscribe:Fe,_subscriptions:rt}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,ye instanceof xe)ye.remove(this);else if(null!==ye)for(let ce=0;ce<ye.length;++ce)ye[ce].remove(this);if((0,fe.m)(Fe)){Ae&&(this._unsubscribe=void 0);try{Fe.call(this)}catch(ce){Ue=ce instanceof _e?He(ce.errors):[ce]}}if((0,E.k)(rt)){let ce=-1,wt=rt.length;for(;++ce<wt;){const Ye=rt[ce];if((0,N.K)(Ye))try{Ye.unsubscribe()}catch(Ke){Ue=Ue||[],Ke instanceof _e?Ue=Ue.concat(He(Ke.errors)):Ue.push(Ke)}}}if(Ue)throw new _e(Ue)}add(Ue){let ye=Ue;if(!Ue)return xe.EMPTY;switch(typeof Ue){case"function":ye=new xe(Ue);case"object":if(ye===this||ye.closed||"function"!=typeof ye.unsubscribe)return ye;if(this.closed)return ye.unsubscribe(),ye;if(!(ye instanceof xe)){const rt=ye;ye=new xe,ye._subscriptions=[rt]}break;default:throw new Error("unrecognized teardown "+Ue+" added to Subscription.")}let{_parentOrParents:Ae}=ye;if(null===Ae)ye._parentOrParents=this;else if(Ae instanceof xe){if(Ae===this)return ye;ye._parentOrParents=[Ae,this]}else{if(-1!==Ae.indexOf(this))return ye;Ae.push(this)}const Fe=this._subscriptions;return null===Fe?this._subscriptions=[ye]:Fe.push(ye),ye}remove(Ue){const ye=this._subscriptions;if(ye){const Ae=ye.indexOf(Ue);-1!==Ae&&ye.splice(Ae,1)}}}var Re;function He(Re){return Re.reduce((Ue,ye)=>Ue.concat(ye instanceof _e?ye.errors:ye),[])}xe.EMPTY=((Re=new xe).closed=!0,Re)},2830:(en,ut,X)=>{"use strict";X.d(ut,{config:()=>N});let E=!1;const N={Promise:void 0,set useDeprecatedSynchronousErrorHandling(fe){if(fe){const Be=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Be.stack)}else E&&console.log("RxJS: Back to a better error behavior. Thank you. <3");E=fe},get useDeprecatedSynchronousErrorHandling(){return E}}},1177:(en,ut,X)=>{"use strict";X.d(ut,{Ds:()=>xe,IY:()=>Be,ft:()=>Re});var E=X(3489),N=X(6498),fe=X(9249);class Be extends E.L{constructor(ye){super(),this.parent=ye}_next(ye){this.parent.notifyNext(ye)}_error(ye){this.parent.notifyError(ye),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class xe extends E.L{notifyNext(ye){this.destination.next(ye)}notifyError(ye){this.destination.error(ye)}notifyComplete(){this.destination.complete()}}function Re(Ue,ye){if(ye.closed)return;if(Ue instanceof N.y)return Ue.subscribe(ye);let Ae;try{Ae=(0,fe.s)(Ue)(ye)}catch(Fe){ye.error(Fe)}return Ae}},1762:(en,ut,X)=>{"use strict";X.d(ut,{N:()=>xe,c:()=>_e});var E=X(8929),N=X(6498),fe=X(2654),Be=X(4327);class _e extends N.y{constructor(Ae,Fe){super(),this.source=Ae,this.subjectFactory=Fe,this._refCount=0,this._isComplete=!1}_subscribe(Ae){return this.getSubject().subscribe(Ae)}getSubject(){const Ae=this._subject;return(!Ae||Ae.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let Ae=this._connection;return Ae||(this._isComplete=!1,Ae=this._connection=new fe.w,Ae.add(this.source.subscribe(new He(this.getSubject(),this))),Ae.closed&&(this._connection=null,Ae=fe.w.EMPTY)),Ae}refCount(){return(0,Be.x)()(this)}}const xe=(()=>{const ye=_e.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ye._subscribe},_isComplete:{value:ye._isComplete,writable:!0},getSubject:{value:ye.getSubject},connect:{value:ye.connect},refCount:{value:ye.refCount}}})();class He extends E.Yc{constructor(Ae,Fe){super(Ae),this.connectable=Fe}_error(Ae){this._unsubscribe(),super._error(Ae)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const Ae=this.connectable;if(Ae){this.connectable=null;const Fe=Ae._connection;Ae._refCount=0,Ae._subject=null,Ae._connection=null,Fe&&Fe.unsubscribe()}}}},3426:(en,ut,X)=>{"use strict";X.d(ut,{aj:()=>Ae});var E=X(2866),N=X(6688),fe=X(3489);class Be extends fe.L{notifyNext(wt,Ye,Ke,Ze,lt){this.destination.next(Ye)}notifyError(wt,Ye){this.destination.error(wt)}notifyComplete(wt){this.destination.complete()}}class _e extends fe.L{constructor(wt,Ye,Ke){super(),this.parent=wt,this.outerValue=Ye,this.outerIndex=Ke,this.index=0}_next(wt){this.parent.notifyNext(this.outerValue,wt,this.outerIndex,this.index++,this)}_error(wt){this.parent.notifyError(wt,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var xe=X(9249),He=X(6498);function Re(ce,wt,Ye,Ke,Ze=new _e(ce,Ye,Ke)){if(!Ze.closed)return wt instanceof He.y?wt.subscribe(Ze):(0,xe.s)(wt)(Ze)}var Ue=X(3009);const ye={};function Ae(...ce){let wt,Ye;return(0,E.K)(ce[ce.length-1])&&(Ye=ce.pop()),"function"==typeof ce[ce.length-1]&&(wt=ce.pop()),1===ce.length&&(0,N.k)(ce[0])&&(ce=ce[0]),(0,Ue.n)(ce,Ye).lift(new Fe(wt))}class Fe{constructor(wt){this.resultSelector=wt}call(wt,Ye){return Ye.subscribe(new rt(wt,this.resultSelector))}}class rt extends Be{constructor(wt,Ye){super(wt),this.resultSelector=Ye,this.active=0,this.values=[],this.observables=[]}_next(wt){this.values.push(ye),this.observables.push(wt)}_complete(){const wt=this.observables,Ye=wt.length;if(0===Ye)this.destination.complete();else{this.active=Ye,this.toRespond=Ye;for(let Ke=0;Ke<Ye;Ke++)this.add(Re(this,wt[Ke],void 0,Ke))}}notifyComplete(wt){0==(this.active-=1)&&this.destination.complete()}notifyNext(wt,Ye,Ke){const Ze=this.values,q=this.toRespond?Ze[Ke]===ye?--this.toRespond:this.toRespond:0;Ze[Ke]=Ye,0===q&&(this.resultSelector?this._tryResultSelector(Ze):this.destination.next(Ze.slice()))}_tryResultSelector(wt){let Ye;try{Ye=this.resultSelector.apply(this,wt)}catch(Ke){return void this.destination.error(Ke)}this.destination.next(Ye)}}},1221:(en,ut,X)=>{"use strict";X.d(ut,{z:()=>Be});var E=X(1086),N=X(9146);function Be(..._e){return function fe(){return(0,N.J)(1)}()((0,E.of)(..._e))}},8896:(en,ut,X)=>{"use strict";X.d(ut,{E:()=>N,c:()=>fe});var E=X(6498);const N=new E.y(_e=>_e.complete());function fe(_e){return _e?function Be(_e){return new E.y(xe=>_e.schedule(()=>xe.complete()))}(_e):N}},567:(en,ut,X)=>{"use strict";X.d(ut,{D:()=>xe});var E=X(6498),N=X(6688),fe=X(4850),Be=X(7830),_e=X(5254);function xe(...Re){if(1===Re.length){const Ue=Re[0];if((0,N.k)(Ue))return He(Ue,null);if((0,Be.K)(Ue)&&Object.getPrototypeOf(Ue)===Object.prototype){const ye=Object.keys(Ue);return He(ye.map(Ae=>Ue[Ae]),ye)}}if("function"==typeof Re[Re.length-1]){const Ue=Re.pop();return He(Re=1===Re.length&&(0,N.k)(Re[0])?Re[0]:Re,null).pipe((0,fe.U)(ye=>Ue(...ye)))}return He(Re,null)}function He(Re,Ue){return new E.y(ye=>{const Ae=Re.length;if(0===Ae)return void ye.complete();const Fe=new Array(Ae);let rt=0,ce=0;for(let wt=0;wt<Ae;wt++){const Ye=(0,_e.D)(Re[wt]);let Ke=!1;ye.add(Ye.subscribe({next:Ze=>{Ke||(Ke=!0,ce++),Fe[wt]=Ze},error:Ze=>ye.error(Ze),complete:()=>{rt++,(rt===Ae||!Ke)&&(ce===Ae&&ye.next(Ue?Ue.reduce((Ze,lt,q)=>(Ze[lt]=Fe[q],Ze),{}):Fe),ye.complete())}}))}})}},5254:(en,ut,X)=>{"use strict";X.d(ut,{D:()=>wt});var E=X(6498),N=X(9249),fe=X(2654),Be=X(3821),He=X(6454),Re=X(5430),Ae=X(8955),Fe=X(8515);function wt(Ye,Ke){return Ke?function ce(Ye,Ke){if(null!=Ye){if(function ye(Ye){return Ye&&"function"==typeof Ye[Be.L]}(Ye))return function _e(Ye,Ke){return new E.y(Ze=>{const lt=new fe.w;return lt.add(Ke.schedule(()=>{const q=Ye[Be.L]();lt.add(q.subscribe({next(ge){lt.add(Ke.schedule(()=>Ze.next(ge)))},error(ge){lt.add(Ke.schedule(()=>Ze.error(ge)))},complete(){lt.add(Ke.schedule(()=>Ze.complete()))}}))})),lt})}(Ye,Ke);if((0,Ae.t)(Ye))return function xe(Ye,Ke){return new E.y(Ze=>{const lt=new fe.w;return lt.add(Ke.schedule(()=>Ye.then(q=>{lt.add(Ke.schedule(()=>{Ze.next(q),lt.add(Ke.schedule(()=>Ze.complete()))}))},q=>{lt.add(Ke.schedule(()=>Ze.error(q)))}))),lt})}(Ye,Ke);if((0,Fe.z)(Ye))return(0,He.r)(Ye,Ke);if(function rt(Ye){return Ye&&"function"==typeof Ye[Re.hZ]}(Ye)||"string"==typeof Ye)return function Ue(Ye,Ke){if(!Ye)throw new Error("Iterable cannot be null");return new E.y(Ze=>{const lt=new fe.w;let q;return lt.add(()=>{q&&"function"==typeof q.return&&q.return()}),lt.add(Ke.schedule(()=>{q=Ye[Re.hZ](),lt.add(Ke.schedule(function(){if(Ze.closed)return;let ge,re;try{const Ct=q.next();ge=Ct.value,re=Ct.done}catch(Ct){return void Ze.error(Ct)}re?Ze.complete():(Ze.next(ge),this.schedule())}))})),lt})}(Ye,Ke)}throw new TypeError((null!==Ye&&typeof Ye||Ye)+" is not observable")}(Ye,Ke):Ye instanceof E.y?Ye:new E.y((0,N.s)(Ye))}},3009:(en,ut,X)=>{"use strict";X.d(ut,{n:()=>Be});var E=X(6498),N=X(3650),fe=X(6454);function Be(_e,xe){return xe?(0,fe.r)(_e,xe):new E.y((0,N.V)(_e))}},6787:(en,ut,X)=>{"use strict";X.d(ut,{T:()=>_e});var E=X(6498),N=X(2866),fe=X(9146),Be=X(3009);function _e(...xe){let He=Number.POSITIVE_INFINITY,Re=null,Ue=xe[xe.length-1];return(0,N.K)(Ue)?(Re=xe.pop(),xe.length>1&&"number"==typeof xe[xe.length-1]&&(He=xe.pop())):"number"==typeof Ue&&(He=xe.pop()),null===Re&&1===xe.length&&xe[0]instanceof E.y?xe[0]:(0,fe.J)(He)((0,Be.n)(xe,Re))}},1086:(en,ut,X)=>{"use strict";X.d(ut,{of:()=>Be});var E=X(2866),N=X(3009),fe=X(6454);function Be(..._e){let xe=_e[_e.length-1];return(0,E.K)(xe)?(_e.pop(),(0,fe.r)(_e,xe)):(0,N.n)(_e)}},1737:(en,ut,X)=>{"use strict";X.d(ut,{_:()=>N});var E=X(6498);function N(Be,_e){return new E.y(_e?xe=>_e.schedule(fe,0,{error:Be,subscriber:xe}):xe=>xe.error(Be))}function fe({error:Be,subscriber:_e}){_e.error(Be)}},7314:(en,ut,X)=>{"use strict";X.d(ut,{d:()=>N});var E=X(3489);function N(_e=null){return xe=>xe.lift(new fe(_e))}class fe{constructor(xe){this.defaultValue=xe}call(xe,He){return He.subscribe(new Be(xe,this.defaultValue))}}class Be extends E.L{constructor(xe,He){super(xe),this.defaultValue=He,this.isEmpty=!0}_next(xe){this.isEmpty=!1,this.destination.next(xe)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},2198:(en,ut,X)=>{"use strict";X.d(ut,{h:()=>N});var E=X(3489);function N(_e,xe){return function(Re){return Re.lift(new fe(_e,xe))}}class fe{constructor(xe,He){this.predicate=xe,this.thisArg=He}call(xe,He){return He.subscribe(new Be(xe,this.predicate,this.thisArg))}}class Be extends E.L{constructor(xe,He,Re){super(xe),this.predicate=He,this.thisArg=Re,this.count=0}_next(xe){let He;try{He=this.predicate.call(this.thisArg,xe,this.count++)}catch(Re){return void this.destination.error(Re)}He&&this.destination.next(xe)}}},7224:(en,ut,X)=>{"use strict";X.d(ut,{P:()=>He});var E=X(4450),N=X(2198),fe=X(2986),Be=X(7314),_e=X(4907),xe=X(5379);function He(Re,Ue){const ye=arguments.length>=2;return Ae=>Ae.pipe(Re?(0,N.h)((Fe,rt)=>Re(Fe,rt,Ae)):xe.y,(0,fe.q)(1),ye?(0,Be.d)(Ue):(0,_e.T)(()=>new E.K))}},4850:(en,ut,X)=>{"use strict";X.d(ut,{U:()=>N});var E=X(3489);function N(_e,xe){return function(Re){if("function"!=typeof _e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return Re.lift(new fe(_e,xe))}}class fe{constructor(xe,He){this.project=xe,this.thisArg=He}call(xe,He){return He.subscribe(new Be(xe,this.project,this.thisArg))}}class Be extends E.L{constructor(xe,He,Re){super(xe),this.project=He,this.count=0,this.thisArg=Re||this}_next(xe){let He;try{He=this.project.call(this.thisArg,xe,this.count++)}catch(Re){return void this.destination.error(Re)}this.destination.next(He)}}},9146:(en,ut,X)=>{"use strict";X.d(ut,{J:()=>fe});var E=X(1709),N=X(5379);function fe(Be=Number.POSITIVE_INFINITY){return(0,E.zg)(N.y,Be)}},1709:(en,ut,X)=>{"use strict";X.d(ut,{zg:()=>Be});var E=X(4850),N=X(5254),fe=X(1177);function Be(Re,Ue,ye=Number.POSITIVE_INFINITY){return"function"==typeof Ue?Ae=>Ae.pipe(Be((Fe,rt)=>(0,N.D)(Re(Fe,rt)).pipe((0,E.U)((ce,wt)=>Ue(Fe,ce,rt,wt))),ye)):("number"==typeof Ue&&(ye=Ue),Ae=>Ae.lift(new _e(Re,ye)))}class _e{constructor(Ue,ye=Number.POSITIVE_INFINITY){this.project=Ue,this.concurrent=ye}call(Ue,ye){return ye.subscribe(new xe(Ue,this.project,this.concurrent))}}class xe extends fe.Ds{constructor(Ue,ye,Ae=Number.POSITIVE_INFINITY){super(Ue),this.project=ye,this.concurrent=Ae,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(Ue){this.active<this.concurrent?this._tryNext(Ue):this.buffer.push(Ue)}_tryNext(Ue){let ye;const Ae=this.index++;try{ye=this.project(Ue,Ae)}catch(Fe){return void this.destination.error(Fe)}this.active++,this._innerSub(ye)}_innerSub(Ue){const ye=new fe.IY(this),Ae=this.destination;Ae.add(ye);const Fe=(0,fe.ft)(Ue,ye);Fe!==ye&&Ae.add(Fe)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(Ue){this.destination.next(Ue)}notifyComplete(){const Ue=this.buffer;this.active--,Ue.length>0?this._next(Ue.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},7770:(en,ut,X)=>{"use strict";X.d(ut,{QV:()=>fe,ht:()=>_e});var E=X(3489),N=X(9312);function fe(He,Re=0){return function(ye){return ye.lift(new Be(He,Re))}}class Be{constructor(Re,Ue=0){this.scheduler=Re,this.delay=Ue}call(Re,Ue){return Ue.subscribe(new _e(Re,this.scheduler,this.delay))}}class _e extends E.L{constructor(Re,Ue,ye=0){super(Re),this.scheduler=Ue,this.delay=ye}static dispatch(Re){const{notification:Ue,destination:ye}=Re;Ue.observe(ye),this.unsubscribe()}scheduleMessage(Re){this.destination.add(this.scheduler.schedule(_e.dispatch,this.delay,new xe(Re,this.destination)))}_next(Re){this.scheduleMessage(N.P.createNext(Re))}_error(Re){this.scheduleMessage(N.P.createError(Re)),this.unsubscribe()}_complete(){this.scheduleMessage(N.P.createComplete()),this.unsubscribe()}}class xe{constructor(Re,Ue){this.notification=Re,this.destination=Ue}}},4327:(en,ut,X)=>{"use strict";X.d(ut,{x:()=>N});var E=X(3489);function N(){return function(xe){return xe.lift(new fe(xe))}}class fe{constructor(xe){this.connectable=xe}call(xe,He){const{connectable:Re}=this;Re._refCount++;const Ue=new Be(xe,Re),ye=He.subscribe(Ue);return Ue.closed||(Ue.connection=Re.connect()),ye}}class Be extends E.L{constructor(xe,He){super(xe),this.connectable=He}_unsubscribe(){const{connectable:xe}=this;if(!xe)return void(this.connection=null);this.connectable=null;const He=xe._refCount;if(He<=0)return void(this.connection=null);if(xe._refCount=He-1,He>1)return void(this.connection=null);const{connection:Re}=this,Ue=xe._connection;this.connection=null,Ue&&(!Re||Ue===Re)&&Ue.unsubscribe()}}},2014:(en,ut,X)=>{"use strict";X.d(ut,{R:()=>N});var E=X(3489);function N(_e,xe){let He=!1;return arguments.length>=2&&(He=!0),function(Ue){return Ue.lift(new fe(_e,xe,He))}}class fe{constructor(xe,He,Re=!1){this.accumulator=xe,this.seed=He,this.hasSeed=Re}call(xe,He){return He.subscribe(new Be(xe,this.accumulator,this.seed,this.hasSeed))}}class Be extends E.L{constructor(xe,He,Re,Ue){super(xe),this.accumulator=He,this._seed=Re,this.hasSeed=Ue,this.index=0}get seed(){return this._seed}set seed(xe){this.hasSeed=!0,this._seed=xe}_next(xe){if(this.hasSeed)return this._tryNext(xe);this.seed=xe,this.destination.next(xe)}_tryNext(xe){const He=this.index++;let Re;try{Re=this.accumulator(this.seed,xe,He)}catch(Ue){this.destination.error(Ue)}this.seed=Re,this.destination.next(Re)}}},1059:(en,ut,X)=>{"use strict";X.d(ut,{O:()=>fe});var E=X(1221),N=X(2866);function fe(...Be){const _e=Be[Be.length-1];return(0,N.K)(_e)?(Be.pop(),xe=>(0,E.z)(Be,xe,_e)):xe=>(0,E.z)(Be,xe)}},8915:(en,ut,X)=>{"use strict";X.d(ut,{R:()=>Ke});var E=X(6498);let N=1;const fe=Promise.resolve(),Be={};function _e(lt){return lt in Be&&(delete Be[lt],!0)}const xe={setImmediate(lt){const q=N++;return Be[q]=!0,fe.then(()=>_e(q)&&lt()),q},clearImmediate(lt){_e(lt)}};var Re=X(6686),ye=X(2268);const rt=new class Ae extends ye.v{flush(q){this.active=!0,this.scheduled=void 0;const{actions:ge}=this;let re,Ct=-1,bt=ge.length;q=q||ge.shift();do{if(re=q.execute(q.state,q.delay))break}while(++Ct<bt&&(q=ge.shift()));if(this.active=!1,re){for(;++Ct<bt&&(q=ge.shift());)q.unsubscribe();throw re}}}(class Ue extends Re.o{constructor(q,ge){super(q,ge),this.scheduler=q,this.work=ge}requestAsyncId(q,ge,re=0){return null!==re&&re>0?super.requestAsyncId(q,ge,re):(q.actions.push(this),q.scheduled||(q.scheduled=xe.setImmediate(q.flush.bind(q,null))))}recycleAsyncId(q,ge,re=0){if(null!==re&&re>0||null===re&&this.delay>0)return super.recycleAsyncId(q,ge,re);0===q.actions.length&&(xe.clearImmediate(ge),q.scheduled=void 0)}});var ce=X(6688);class Ye extends E.y{constructor(q,ge=0,re=rt){super(),this.source=q,this.delayTime=ge,this.scheduler=re,(!function wt(lt){return!(0,ce.k)(lt)&&lt-parseFloat(lt)+1>=0}(ge)||ge<0)&&(this.delayTime=0),(!re||"function"!=typeof re.schedule)&&(this.scheduler=rt)}static create(q,ge=0,re=rt){return new Ye(q,ge,re)}static dispatch(q){const{source:ge,subscriber:re}=q;return this.add(ge.subscribe(re))}_subscribe(q){return this.scheduler.schedule(Ye.dispatch,this.delayTime,{source:this.source,subscriber:q})}}function Ke(lt,q=0){return function(re){return re.lift(new Ze(lt,q))}}class Ze{constructor(q,ge){this.scheduler=q,this.delay=ge}call(q,ge){return new Ye(ge,this.delay,this.scheduler).subscribe(q)}}},7545:(en,ut,X)=>{"use strict";X.d(ut,{w:()=>Be});var E=X(4850),N=X(5254),fe=X(1177);function Be(He,Re){return"function"==typeof Re?Ue=>Ue.pipe(Be((ye,Ae)=>(0,N.D)(He(ye,Ae)).pipe((0,E.U)((Fe,rt)=>Re(ye,Fe,Ae,rt))))):Ue=>Ue.lift(new _e(He))}class _e{constructor(Re){this.project=Re}call(Re,Ue){return Ue.subscribe(new xe(Re,this.project))}}class xe extends fe.Ds{constructor(Re,Ue){super(Re),this.project=Ue,this.index=0}_next(Re){let Ue;const ye=this.index++;try{Ue=this.project(Re,ye)}catch(Ae){return void this.destination.error(Ae)}this._innerSub(Ue)}_innerSub(Re){const Ue=this.innerSubscription;Ue&&Ue.unsubscribe();const ye=new fe.IY(this),Ae=this.destination;Ae.add(ye),this.innerSubscription=(0,fe.ft)(Re,ye),this.innerSubscription!==ye&&Ae.add(this.innerSubscription)}_complete(){const{innerSubscription:Re}=this;(!Re||Re.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(Re){this.destination.next(Re)}}},2986:(en,ut,X)=>{"use strict";X.d(ut,{q:()=>Be});var E=X(3489),N=X(4231),fe=X(8896);function Be(He){return Re=>0===He?(0,fe.c)():Re.lift(new _e(He))}class _e{constructor(Re){if(this.total=Re,this.total<0)throw new N.W}call(Re,Ue){return Ue.subscribe(new xe(Re,this.total))}}class xe extends E.L{constructor(Re,Ue){super(Re),this.total=Ue,this.count=0}_next(Re){const Ue=this.total,ye=++this.count;ye<=Ue&&(this.destination.next(Re),ye===Ue&&(this.destination.complete(),this.unsubscribe()))}}},2868:(en,ut,X)=>{"use strict";X.d(ut,{b:()=>Be});var E=X(3489);function N(){}var fe=X(7043);function Be(He,Re,Ue){return function(Ae){return Ae.lift(new _e(He,Re,Ue))}}class _e{constructor(Re,Ue,ye){this.nextOrObserver=Re,this.error=Ue,this.complete=ye}call(Re,Ue){return Ue.subscribe(new xe(Re,this.nextOrObserver,this.error,this.complete))}}class xe extends E.L{constructor(Re,Ue,ye,Ae){super(Re),this._tapNext=N,this._tapError=N,this._tapComplete=N,this._tapError=ye||N,this._tapComplete=Ae||N,(0,fe.m)(Ue)?(this._context=this,this._tapNext=Ue):Ue&&(this._context=Ue,this._tapNext=Ue.next||N,this._tapError=Ue.error||N,this._tapComplete=Ue.complete||N)}_next(Re){try{this._tapNext.call(this._context,Re)}catch(Ue){return void this.destination.error(Ue)}this.destination.next(Re)}_error(Re){try{this._tapError.call(this._context,Re)}catch(Ue){return void this.destination.error(Ue)}this.destination.error(Re)}_complete(){try{this._tapComplete.call(this._context)}catch(Re){return void this.destination.error(Re)}return this.destination.complete()}}},4907:(en,ut,X)=>{"use strict";X.d(ut,{T:()=>fe});var E=X(4450),N=X(3489);function fe(He=xe){return Re=>Re.lift(new Be(He))}class Be{constructor(Re){this.errorFactory=Re}call(Re,Ue){return Ue.subscribe(new _e(Re,this.errorFactory))}}class _e extends N.L{constructor(Re,Ue){super(Re),this.errorFactory=Ue,this.hasValue=!1}_next(Re){this.hasValue=!0,this.destination.next(Re)}_complete(){if(this.hasValue)return this.destination.complete();{let Re;try{Re=this.errorFactory()}catch(Ue){Re=Ue}this.destination.error(Re)}}}function xe(){return new E.K}},6454:(en,ut,X)=>{"use strict";X.d(ut,{r:()=>fe});var E=X(6498),N=X(2654);function fe(Be,_e){return new E.y(xe=>{const He=new N.w;let Re=0;return He.add(_e.schedule(function(){Re!==Be.length?(xe.next(Be[Re++]),xe.closed||He.add(this.schedule())):xe.complete()})),He})}},6686:(en,ut,X)=>{"use strict";X.d(ut,{o:()=>fe});var E=X(2654);class N extends E.w{constructor(_e,xe){super()}schedule(_e,xe=0){return this}}class fe extends N{constructor(_e,xe){super(_e,xe),this.scheduler=_e,this.work=xe,this.pending=!1}schedule(_e,xe=0){if(this.closed)return this;this.state=_e;const He=this.id,Re=this.scheduler;return null!=He&&(this.id=this.recycleAsyncId(Re,He,xe)),this.pending=!0,this.delay=xe,this.id=this.id||this.requestAsyncId(Re,this.id,xe),this}requestAsyncId(_e,xe,He=0){return setInterval(_e.flush.bind(_e,this),He)}recycleAsyncId(_e,xe,He=0){if(null!==He&&this.delay===He&&!1===this.pending)return xe;clearInterval(xe)}execute(_e,xe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const He=this._execute(_e,xe);if(He)return He;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(_e,xe){let Re,He=!1;try{this.work(_e)}catch(Ue){He=!0,Re=!!Ue&&Ue||new Error(Ue)}if(He)return this.unsubscribe(),Re}_unsubscribe(){const _e=this.id,xe=this.scheduler,He=xe.actions,Re=He.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==Re&&He.splice(Re,1),null!=_e&&(this.id=this.recycleAsyncId(xe,_e,null)),this.delay=null}}},2268:(en,ut,X)=>{"use strict";X.d(ut,{v:()=>N});let E=(()=>{class fe{constructor(_e,xe=fe.now){this.SchedulerAction=_e,this.now=xe}schedule(_e,xe=0,He){return new this.SchedulerAction(this,_e).schedule(He,xe)}}return fe.now=()=>Date.now(),fe})();class N extends E{constructor(Be,_e=E.now){super(Be,()=>N.delegate&&N.delegate!==this?N.delegate.now():_e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(Be,_e=0,xe){return N.delegate&&N.delegate!==this?N.delegate.schedule(Be,_e,xe):super.schedule(Be,_e,xe)}flush(Be){const{actions:_e}=this;if(this.active)return void _e.push(Be);let xe;this.active=!0;do{if(xe=Be.execute(Be.state,Be.delay))break}while(Be=_e.shift());if(this.active=!1,xe){for(;Be=_e.shift();)Be.unsubscribe();throw xe}}}},353:(en,ut,X)=>{"use strict";X.d(ut,{P:()=>Be,z:()=>fe});var E=X(6686);const fe=new(X(2268).v)(E.o),Be=fe},341:(en,ut,X)=>{"use strict";X.d(ut,{c:()=>xe,N:()=>_e});var E=X(6686),fe=X(2268);const _e=new class Be extends fe.v{}(class N extends E.o{constructor(Re,Ue){super(Re,Ue),this.scheduler=Re,this.work=Ue}schedule(Re,Ue=0){return Ue>0?super.schedule(Re,Ue):(this.delay=Ue,this.state=Re,this.scheduler.flush(this),this)}execute(Re,Ue){return Ue>0||this.closed?super.execute(Re,Ue):this._execute(Re,Ue)}requestAsyncId(Re,Ue,ye=0){return null!==ye&&ye>0||null===ye&&this.delay>0?super.requestAsyncId(Re,Ue,ye):Re.flush(this)}}),xe=_e},5430:(en,ut,X)=>{"use strict";X.d(ut,{hZ:()=>N});const N=function E(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3821:(en,ut,X)=>{"use strict";X.d(ut,{L:()=>E});const E="function"==typeof Symbol&&Symbol.observable||"@@observable"},7668:(en,ut,X)=>{"use strict";X.d(ut,{b:()=>E});const E="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},4231:(en,ut,X)=>{"use strict";X.d(ut,{W:()=>N});const N=(()=>{function fe(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return fe.prototype=Object.create(Error.prototype),fe})()},4450:(en,ut,X)=>{"use strict";X.d(ut,{K:()=>N});const N=(()=>{function fe(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return fe.prototype=Object.create(Error.prototype),fe})()},5279:(en,ut,X)=>{"use strict";X.d(ut,{N:()=>N});const N=(()=>{function fe(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return fe.prototype=Object.create(Error.prototype),fe})()},2782:(en,ut,X)=>{"use strict";function E(N){setTimeout(()=>{throw N},0)}X.d(ut,{z:()=>E})},5379:(en,ut,X)=>{"use strict";function E(N){return N}X.d(ut,{y:()=>E})},6688:(en,ut,X)=>{"use strict";X.d(ut,{k:()=>E});const E=Array.isArray||(N=>N&&"number"==typeof N.length)},8515:(en,ut,X)=>{"use strict";X.d(ut,{z:()=>E});const E=N=>N&&"number"==typeof N.length&&"function"!=typeof N},7043:(en,ut,X)=>{"use strict";function E(N){return"function"==typeof N}X.d(ut,{m:()=>E})},7830:(en,ut,X)=>{"use strict";function E(N){return null!==N&&"object"==typeof N}X.d(ut,{K:()=>E})},8955:(en,ut,X)=>{"use strict";function E(N){return!!N&&"function"!=typeof N.subscribe&&"function"==typeof N.then}X.d(ut,{t:()=>E})},2866:(en,ut,X)=>{"use strict";function E(N){return N&&"function"==typeof N.schedule}X.d(ut,{K:()=>E})},4843:(en,ut,X)=>{"use strict";X.d(ut,{U:()=>fe,z:()=>N});var E=X(5379);function N(...Be){return fe(Be)}function fe(Be){return 0===Be.length?E.y:1===Be.length?Be[0]:function(xe){return Be.reduce((He,Re)=>Re(He),xe)}}},9249:(en,ut,X)=>{"use strict";X.d(ut,{s:()=>Ae});var E=X(3650),N=X(2782),Be=X(5430),xe=X(3821),Re=X(8515),Ue=X(8955),ye=X(7830);const Ae=Fe=>{if(Fe&&"function"==typeof Fe[xe.L])return(Fe=>rt=>{const ce=Fe[xe.L]();if("function"!=typeof ce.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return ce.subscribe(rt)})(Fe);if((0,Re.z)(Fe))return(0,E.V)(Fe);if((0,Ue.t)(Fe))return(Fe=>rt=>(Fe.then(ce=>{rt.closed||(rt.next(ce),rt.complete())},ce=>rt.error(ce)).then(null,N.z),rt))(Fe);if(Fe&&"function"==typeof Fe[Be.hZ])return(Fe=>rt=>{const ce=Fe[Be.hZ]();for(;;){let wt;try{wt=ce.next()}catch(Ye){return rt.error(Ye),rt}if(wt.done){rt.complete();break}if(rt.next(wt.value),rt.closed)break}return"function"==typeof ce.return&&rt.add(()=>{ce.return&&ce.return()}),rt})(Fe);{const ce=`You provided ${(0,ye.K)(Fe)?"an invalid object":`'${Fe}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(ce)}}},3650:(en,ut,X)=>{"use strict";X.d(ut,{V:()=>E});const E=N=>fe=>{for(let Be=0,_e=N.length;Be<_e&&!fe.closed;Be++)fe.next(N[Be]);fe.complete()}},8099:en=>{en.exports=function ut(X,E){var N,fe=null;try{N=JSON.parse(X,E)}catch(Be){fe=Be}return[fe,N]}},3871:function(en){var X,E,N,fe,Be;X=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,E=/^(?=([^\/?#]*))\1([^]*)$/,N=/(?:\/|^)\.(?=\/)/g,fe=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,en.exports=Be={buildAbsoluteURL:function(_e,xe,He){if(He=He||{},_e=_e.trim(),!(xe=xe.trim())){if(!He.alwaysNormalize)return _e;var Re=Be.parseURL(_e);if(!Re)throw new Error("Error trying to parse base URL.");return Re.path=Be.normalizePath(Re.path),Be.buildURLFromParts(Re)}var Ue=Be.parseURL(xe);if(!Ue)throw new Error("Error trying to parse relative URL.");if(Ue.scheme)return He.alwaysNormalize?(Ue.path=Be.normalizePath(Ue.path),Be.buildURLFromParts(Ue)):xe;var ye=Be.parseURL(_e);if(!ye)throw new Error("Error trying to parse base URL.");if(!ye.netLoc&&ye.path&&"/"!==ye.path[0]){var Ae=E.exec(ye.path);ye.netLoc=Ae[1],ye.path=Ae[2]}ye.netLoc&&!ye.path&&(ye.path="/");var Fe={scheme:ye.scheme,netLoc:Ue.netLoc,path:null,params:Ue.params,query:Ue.query,fragment:Ue.fragment};if(!Ue.netLoc&&(Fe.netLoc=ye.netLoc,"/"!==Ue.path[0]))if(Ue.path){var rt=ye.path,ce=rt.substring(0,rt.lastIndexOf("/")+1)+Ue.path;Fe.path=Be.normalizePath(ce)}else Fe.path=ye.path,Ue.params||(Fe.params=ye.params,Ue.query||(Fe.query=ye.query));return null===Fe.path&&(Fe.path=He.alwaysNormalize?Be.normalizePath(Ue.path):Ue.path),Be.buildURLFromParts(Fe)},parseURL:function(_e){var xe=X.exec(_e);return xe?{scheme:xe[1]||"",netLoc:xe[2]||"",path:xe[3]||"",params:xe[4]||"",query:xe[5]||"",fragment:xe[6]||""}:null},normalizePath:function(_e){for(_e=_e.split("").reverse().join("").replace(N,"");_e.length!==(_e=_e.replace(fe,"")).length;);return _e.split("").reverse().join("")},buildURLFromParts:function(_e){return _e.scheme+_e.netLoc+_e.path+_e.params+_e.query+_e.fragment}}},3629:(en,ut,X)=>{var E=X(9226),N=en.exports={WebVTT:X(8318),VTTCue:X(5713),VTTRegion:X(3872)};E.vttjs=N,E.WebVTT=N.WebVTT;var fe=N.VTTCue,Be=N.VTTRegion,_e=E.VTTCue,xe=E.VTTRegion;N.shim=function(){E.VTTCue=fe,E.VTTRegion=Be},N.restore=function(){E.VTTCue=_e,E.VTTRegion=xe},E.VTTCue||N.shim()},8318:(en,ut,X)=>{var E=X(1421),N=Object.create||function(){function Y(){}return function(Te){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return Y.prototype=Te,new Y}}();function fe(Y,Te){this.name="ParsingError",this.code=Y.code,this.message=Te||Y.message}function Be(Y){function Te(ot,Rt,xt,Wt){return 3600*(0|ot)+60*(0|Rt)+(0|xt)+(0|Wt)/1e3}var Xe=Y.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return Xe?Xe[3]?Te(Xe[1],Xe[2],Xe[3].replace(":",""),Xe[4]):Xe[1]>59?Te(Xe[1],Xe[2],0,Xe[4]):Te(0,Xe[1],Xe[2],Xe[4]):null}function _e(){this.values=N(null)}function xe(Y,Te,Xe,ot){var Rt=ot?Y.split(ot):[Y];for(var xt in Rt)if("string"==typeof Rt[xt]){var Wt=Rt[xt].split(Xe);2===Wt.length&&Te(Wt[0].trim(),Wt[1].trim())}}function He(Y,Te,Xe){var ot=Y;function Rt(){var Sn=Be(Y);if(null===Sn)throw new fe(fe.Errors.BadTimeStamp,"Malformed timestamp: "+ot);return Y=Y.replace(/^[^\sa-zA-Z-]+/,""),Sn}function Wt(){Y=Y.replace(/^\s+/,"")}if(Wt(),Te.startTime=Rt(),Wt(),"--\x3e"!==Y.substr(0,3))throw new fe(fe.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+ot);Y=Y.substr(3),Wt(),Te.endTime=Rt(),Wt(),function xt(Sn,Yt){var vn=new _e;xe(Sn,function(an,Ut){switch(an){case"region":for(var Vt=Xe.length-1;Vt>=0;Vt--)if(Xe[Vt].id===Ut){vn.set(an,Xe[Vt].region);break}break;case"vertical":vn.alt(an,Ut,["rl","lr"]);break;case"line":var qt=Ut.split(","),En=qt[0];vn.integer(an,En),vn.percent(an,En)&&vn.set("snapToLines",!1),vn.alt(an,En,["auto"]),2===qt.length&&vn.alt("lineAlign",qt[1],["start","center","end"]);break;case"position":qt=Ut.split(","),vn.percent(an,qt[0]),2===qt.length&&vn.alt("positionAlign",qt[1],["start","center","end"]);break;case"size":vn.percent(an,Ut);break;case"align":vn.alt(an,Ut,["start","center","end","left","right"])}},/:/,/\s/),Yt.region=vn.get("region",null),Yt.vertical=vn.get("vertical","");try{Yt.line=vn.get("line","auto")}catch{}Yt.lineAlign=vn.get("lineAlign","start"),Yt.snapToLines=vn.get("snapToLines",!0),Yt.size=vn.get("size",100);try{Yt.align=vn.get("align","center")}catch{Yt.align=vn.get("align","middle")}try{Yt.position=vn.get("position","auto")}catch{Yt.position=vn.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},Yt.align)}Yt.positionAlign=vn.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},Yt.align)}(Y,Te)}(fe.prototype=N(Error.prototype)).constructor=fe,fe.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},_e.prototype={set:function(Y,Te){!this.get(Y)&&""!==Te&&(this.values[Y]=Te)},get:function(Y,Te,Xe){return Xe?this.has(Y)?this.values[Y]:Te[Xe]:this.has(Y)?this.values[Y]:Te},has:function(Y){return Y in this.values},alt:function(Y,Te,Xe){for(var ot=0;ot<Xe.length;++ot)if(Te===Xe[ot]){this.set(Y,Te);break}},integer:function(Y,Te){/^-?\d+$/.test(Te)&&this.set(Y,parseInt(Te,10))},percent:function(Y,Te){return!!(Te.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(Te=parseFloat(Te),Te>=0&&Te<=100))&&(this.set(Y,Te),!0)}};var Re=E.createElement&&E.createElement("textarea"),Ue={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},ye={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Ae={v:"title",lang:"lang"},Fe={rt:"ruby"};function rt(Y,Te){function Xe(){if(!Te)return null;var on=Te.match(/^([^<]*)(<[^>]*>?)?/);return function En(Jt){return Te=Te.substr(Jt.length),Jt}(on[1]?on[1]:on[2])}function ot(En){return Re.innerHTML=En,En=Re.textContent,Re.textContent="",En}function xt(En,on){var Jt=Ue[En];if(!Jt)return null;var Nn=Y.document.createElement(Jt),Cn=Ae[En];return Cn&&on&&(Nn[Cn]=on.trim()),Nn}for(var Yt,Wt=Y.document.createElement("div"),Sn=Wt,vn=[];null!==(Yt=Xe());)if("<"!==Yt[0])Sn.appendChild(Y.document.createTextNode(ot(Yt)));else{if("/"===Yt[1]){vn.length&&vn[vn.length-1]===Yt.substr(2).replace(">","")&&(vn.pop(),Sn=Sn.parentNode);continue}var Ut,an=Be(Yt.substr(1,Yt.length-2));if(an){Ut=Y.document.createProcessingInstruction("timestamp",an),Sn.appendChild(Ut);continue}var Vt=Yt.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!Vt||!(Ut=xt(Vt[1],Vt[3]))||Fe[(on=Ut).localName]&&Fe[on.localName]!==Sn.localName)continue;if(Vt[2]){var qt=Vt[2].split(".");qt.forEach(function(En){var on=/^bg_/.test(En),Jt=on?En.slice(3):En;ye.hasOwnProperty(Jt)&&(Ut.style[on?"background-color":"color"]=ye[Jt])}),Ut.className=qt.join(" ")}vn.push(Vt[1]),Sn.appendChild(Ut),Sn=Ut}var on;return Wt}var ce=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function wt(Y){for(var Te=0;Te<ce.length;Te++){var Xe=ce[Te];if(Y>=Xe[0]&&Y<=Xe[1])return!0}return!1}function Ye(Y){var Te=[],Xe="";if(!Y||!Y.childNodes)return"ltr";function Rt(Sn,Yt){for(var vn=Yt.childNodes.length-1;vn>=0;vn--)Sn.push(Yt.childNodes[vn])}function xt(Sn){if(!Sn||!Sn.length)return null;var Yt=Sn.pop(),vn=Yt.textContent||Yt.innerText;if(vn){var an=vn.match(/^.*(\n|\r)/);return an?(Sn.length=0,an[0]):vn}return"ruby"===Yt.tagName?xt(Sn):Yt.childNodes?(Rt(Sn,Yt),xt(Sn)):void 0}for(Rt(Te,Y);Xe=xt(Te);)for(var Wt=0;Wt<Xe.length;Wt++)if(wt(Xe.charCodeAt(Wt)))return"rtl";return"ltr"}function Ze(){}function lt(Y,Te,Xe){Ze.call(this),this.cue=Te,this.cueDiv=rt(Y,Te.text);var ot={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===Te.vertical?"horizontal-tb":"lr"===Te.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(ot,this.cueDiv),this.div=Y.document.createElement("div"),ot={direction:Ye(this.cueDiv),writingMode:""===Te.vertical?"horizontal-tb":"lr"===Te.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===Te.align?"center":Te.align,font:Xe.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(ot),this.div.appendChild(this.cueDiv);var Rt=0;switch(Te.positionAlign){case"start":Rt=Te.position;break;case"center":Rt=Te.position-Te.size/2;break;case"end":Rt=Te.position-Te.size}this.applyStyles(""===Te.vertical?{left:this.formatStyle(Rt,"%"),width:this.formatStyle(Te.size,"%")}:{top:this.formatStyle(Rt,"%"),height:this.formatStyle(Te.size,"%")}),this.move=function(xt){this.applyStyles({top:this.formatStyle(xt.top,"px"),bottom:this.formatStyle(xt.bottom,"px"),left:this.formatStyle(xt.left,"px"),right:this.formatStyle(xt.right,"px"),height:this.formatStyle(xt.height,"px"),width:this.formatStyle(xt.width,"px")})}}function q(Y){var Te,Xe,ot,Rt;if(Y.div){Xe=Y.div.offsetHeight,ot=Y.div.offsetWidth,Rt=Y.div.offsetTop;var xt=(xt=Y.div.childNodes)&&(xt=xt[0])&&xt.getClientRects&&xt.getClientRects();Y=Y.div.getBoundingClientRect(),Te=xt?Math.max(xt[0]&&xt[0].height||0,Y.height/xt.length):0}this.left=Y.left,this.right=Y.right,this.top=Y.top||Rt,this.height=Y.height||Xe,this.bottom=Y.bottom||Rt+(Y.height||Xe),this.width=Y.width||ot,this.lineHeight=void 0!==Te?Te:Y.lineHeight}function ge(Y,Te,Xe,ot){var xt=new q(Te),Wt=Te.cue,Sn=function Ke(Y){if("number"==typeof Y.line&&(Y.snapToLines||Y.line>=0&&Y.line<=100))return Y.line;if(!Y.track||!Y.track.textTrackList||!Y.track.textTrackList.mediaElement)return-1;for(var Te=Y.track,Xe=Te.textTrackList,ot=0,Rt=0;Rt<Xe.length&&Xe[Rt]!==Te;Rt++)"showing"===Xe[Rt].mode&&ot++;return-1*++ot}(Wt),Yt=[];if(Wt.snapToLines){var vn;switch(Wt.vertical){case"":Yt=["+y","-y"],vn="height";break;case"rl":Yt=["+x","-x"],vn="width";break;case"lr":Yt=["-x","+x"],vn="width"}var an=xt.lineHeight,Ut=an*Math.round(Sn),Vt=Xe[vn]+an,qt=Yt[0];Math.abs(Ut)>Vt&&(Ut=Ut<0?-1:1,Ut*=Math.ceil(Vt/an)*an),Sn<0&&(Ut+=""===Wt.vertical?Xe.height:Xe.width,Yt=Yt.reverse()),xt.move(qt,Ut)}else{var En=xt.lineHeight/Xe.height*100;switch(Wt.lineAlign){case"center":Sn-=En/2;break;case"end":Sn-=En}switch(Wt.vertical){case"":Te.applyStyles({top:Te.formatStyle(Sn,"%")});break;case"rl":Te.applyStyles({left:Te.formatStyle(Sn,"%")});break;case"lr":Te.applyStyles({right:Te.formatStyle(Sn,"%")})}Yt=["+y","-x","+x","-y"],xt=new q(Te)}var on=function Rt(Jt,Nn){for(var Cn,pr=new q(Jt),xr=1,kr=0;kr<Nn.length;kr++){for(;Jt.overlapsOppositeAxis(Xe,Nn[kr])||Jt.within(Xe)&&Jt.overlapsAny(ot);)Jt.move(Nn[kr]);if(Jt.within(Xe))return Jt;var On=Jt.intersectPercentage(Xe);xr>On&&(Cn=new q(Jt),xr=On),Jt=new q(pr)}return Cn||pr}(xt,Yt);Te.move(on.toCSSCompatValues(Xe))}function re(){}Ze.prototype.applyStyles=function(Y,Te){for(var Xe in Te=Te||this.div,Y)Y.hasOwnProperty(Xe)&&(Te.style[Xe]=Y[Xe])},Ze.prototype.formatStyle=function(Y,Te){return 0===Y?0:Y+Te},(lt.prototype=N(Ze.prototype)).constructor=lt,q.prototype.move=function(Y,Te){switch(Te=void 0!==Te?Te:this.lineHeight,Y){case"+x":this.left+=Te,this.right+=Te;break;case"-x":this.left-=Te,this.right-=Te;break;case"+y":this.top+=Te,this.bottom+=Te;break;case"-y":this.top-=Te,this.bottom-=Te}},q.prototype.overlaps=function(Y){return this.left<Y.right&&this.right>Y.left&&this.top<Y.bottom&&this.bottom>Y.top},q.prototype.overlapsAny=function(Y){for(var Te=0;Te<Y.length;Te++)if(this.overlaps(Y[Te]))return!0;return!1},q.prototype.within=function(Y){return this.top>=Y.top&&this.bottom<=Y.bottom&&this.left>=Y.left&&this.right<=Y.right},q.prototype.overlapsOppositeAxis=function(Y,Te){switch(Te){case"+x":return this.left<Y.left;case"-x":return this.right>Y.right;case"+y":return this.top<Y.top;case"-y":return this.bottom>Y.bottom}},q.prototype.intersectPercentage=function(Y){return Math.max(0,Math.min(this.right,Y.right)-Math.max(this.left,Y.left))*Math.max(0,Math.min(this.bottom,Y.bottom)-Math.max(this.top,Y.top))/(this.height*this.width)},q.prototype.toCSSCompatValues=function(Y){return{top:this.top-Y.top,bottom:Y.bottom-this.bottom,left:this.left-Y.left,right:Y.right-this.right,height:this.height,width:this.width}},q.getSimpleBoxPosition=function(Y){var Te=Y.div?Y.div.offsetHeight:Y.tagName?Y.offsetHeight:0,Xe=Y.div?Y.div.offsetWidth:Y.tagName?Y.offsetWidth:0,ot=Y.div?Y.div.offsetTop:Y.tagName?Y.offsetTop:0;return{left:(Y=Y.div?Y.div.getBoundingClientRect():Y.tagName?Y.getBoundingClientRect():Y).left,right:Y.right,top:Y.top||ot,height:Y.height||Te,bottom:Y.bottom||ot+(Y.height||Te),width:Y.width||Xe}},re.StringDecoder=function(){return{decode:function(Y){if(!Y)return"";if("string"!=typeof Y)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(Y))}}},re.convertCueToDOMTree=function(Y,Te){return Y&&Te?rt(Y,Te):null},re.processCues=function(Y,Te,Xe){if(!Y||!Te||!Xe)return null;for(;Xe.firstChild;)Xe.removeChild(Xe.firstChild);var ot=Y.document.createElement("div");if(ot.style.position="absolute",ot.style.left="0",ot.style.right="0",ot.style.top="0",ot.style.bottom="0",ot.style.margin="1.5%",Xe.appendChild(ot),function Rt(an){for(var Ut=0;Ut<an.length;Ut++)if(an[Ut].hasBeenReset||!an[Ut].displayState)return!0;return!1}(Te)){var Wt=[],Sn=q.getSimpleBoxPosition(ot),vn={font:Math.round(.05*Sn.height*100)/100+"px sans-serif"};!function(){for(var an,Ut,Vt=0;Vt<Te.length;Vt++)an=new lt(Y,Ut=Te[Vt],vn),ot.appendChild(an.div),ge(0,an,Sn,Wt),Ut.displayState=an.div,Wt.push(q.getSimpleBoxPosition(an))}()}else for(var xt=0;xt<Te.length;xt++)ot.appendChild(Te[xt].displayState)},(re.Parser=function(Y,Te,Xe){Xe||(Xe=Te,Te={}),Te||(Te={}),this.window=Y,this.vttjs=Te,this.state="INITIAL",this.buffer="",this.decoder=Xe||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(Y){if(!(Y instanceof fe))throw Y;this.onparsingerror&&this.onparsingerror(Y)},parse:function(Y){var an,Te=this;function Xe(){for(var an=Te.buffer,Ut=0;Ut<an.length&&"\r"!==an[Ut]&&"\n"!==an[Ut];)++Ut;var Vt=an.substr(0,Ut);return"\r"===an[Ut]&&++Ut,"\n"===an[Ut]&&++Ut,Te.buffer=an.substr(Ut),Vt}Y&&(Te.buffer+=Te.decoder.decode(Y,{stream:!0}));try{var Wt;if("INITIAL"===Te.state){if(!/\r\n|\n/.test(Te.buffer))return this;var Sn=(Wt=Xe()).match(/^WEBVTT([ \t].*)?$/);if(!Sn||!Sn[0])throw new fe(fe.Errors.BadSignature);Te.state="HEADER"}for(var Yt=!1;Te.buffer;){if(!/\r\n|\n/.test(Te.buffer))return this;switch(Yt?Yt=!1:Wt=Xe(),Te.state){case"HEADER":/:/.test(Wt)?(an=Wt).match(/X-TIMESTAMP-MAP/)?xe(an,function(Ut,Vt){"X-TIMESTAMP-MAP"===Ut&&function Rt(an){var Ut=new _e;xe(an,function(Vt,qt){switch(Vt){case"MPEGT":Ut.integer(Vt+"S",qt);break;case"LOCA":Ut.set(Vt+"L",Be(qt))}},/[^\d]:/,/,/),Te.ontimestampmap&&Te.ontimestampmap({MPEGTS:Ut.get("MPEGTS"),LOCAL:Ut.get("LOCAL")})}(Vt)},/=/):xe(an,function(Ut,Vt){"Region"===Ut&&function ot(an){var Ut=new _e;if(xe(an,function(qt,En){switch(qt){case"id":Ut.set(qt,En);break;case"width":Ut.percent(qt,En);break;case"lines":Ut.integer(qt,En);break;case"regionanchor":case"viewportanchor":var on=En.split(",");if(2!==on.length)break;var Jt=new _e;if(Jt.percent("x",on[0]),Jt.percent("y",on[1]),!Jt.has("x")||!Jt.has("y"))break;Ut.set(qt+"X",Jt.get("x")),Ut.set(qt+"Y",Jt.get("y"));break;case"scroll":Ut.alt(qt,En,["up"])}},/=/,/\s/),Ut.has("id")){var Vt=new(Te.vttjs.VTTRegion||Te.window.VTTRegion);Vt.width=Ut.get("width",100),Vt.lines=Ut.get("lines",3),Vt.regionAnchorX=Ut.get("regionanchorX",0),Vt.regionAnchorY=Ut.get("regionanchorY",100),Vt.viewportAnchorX=Ut.get("viewportanchorX",0),Vt.viewportAnchorY=Ut.get("viewportanchorY",100),Vt.scroll=Ut.get("scroll",""),Te.onregion&&Te.onregion(Vt),Te.regionList.push({id:Ut.get("id"),region:Vt})}}(Vt)},/:/):Wt||(Te.state="ID");continue;case"NOTE":Wt||(Te.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(Wt)){Te.state="NOTE";break}if(!Wt)continue;Te.cue=new(Te.vttjs.VTTCue||Te.window.VTTCue)(0,0,"");try{Te.cue.align="center"}catch{Te.cue.align="middle"}if(Te.state="CUE",-1===Wt.indexOf("--\x3e")){Te.cue.id=Wt;continue}case"CUE":try{He(Wt,Te.cue,Te.regionList)}catch(an){Te.reportOrThrowError(an),Te.cue=null,Te.state="BADCUE";continue}Te.state="CUETEXT";continue;case"CUETEXT":var vn=-1!==Wt.indexOf("--\x3e");if(!Wt||vn&&(Yt=!0)){Te.oncue&&Te.oncue(Te.cue),Te.cue=null,Te.state="ID";continue}Te.cue.text&&(Te.cue.text+="\n"),Te.cue.text+=Wt.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":Wt||(Te.state="ID");continue}}}catch(an){Te.reportOrThrowError(an),"CUETEXT"===Te.state&&Te.cue&&Te.oncue&&Te.oncue(Te.cue),Te.cue=null,Te.state="INITIAL"===Te.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var Y=this;try{if(Y.buffer+=Y.decoder.decode(),(Y.cue||"HEADER"===Y.state)&&(Y.buffer+="\n\n",Y.parse()),"INITIAL"===Y.state)throw new fe(fe.Errors.BadSignature)}catch(Te){Y.reportOrThrowError(Te)}return Y.onflush&&Y.onflush(),this}},en.exports=re},5713:en=>{var X={"":1,lr:1,rl:1},E={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function fe(_e){return"string"==typeof _e&&!!E[_e.toLowerCase()]&&_e.toLowerCase()}function Be(_e,xe,He){this.hasBeenReset=!1;var Re="",Ue=!1,ye=_e,Ae=xe,Fe=He,rt=null,ce="",wt=!0,Ye="auto",Ke="start",Ze="auto",lt="auto",q=100,ge="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return Re},set:function(re){Re=""+re}},pauseOnExit:{enumerable:!0,get:function(){return Ue},set:function(re){Ue=!!re}},startTime:{enumerable:!0,get:function(){return ye},set:function(re){if("number"!=typeof re)throw new TypeError("Start time must be set to a number.");ye=re,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return Ae},set:function(re){if("number"!=typeof re)throw new TypeError("End time must be set to a number.");Ae=re,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return Fe},set:function(re){Fe=""+re,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return rt},set:function(re){rt=re,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return ce},set:function(re){var Ct=function N(_e){return"string"==typeof _e&&!!X[_e.toLowerCase()]&&_e.toLowerCase()}(re);if(!1===Ct)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");ce=Ct,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return wt},set:function(re){wt=!!re,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return Ye},set:function(re){if("number"!=typeof re&&"auto"!==re)throw new SyntaxError("Line: an invalid number or illegal string was specified.");Ye=re,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return Ke},set:function(re){var Ct=fe(re);Ct?(Ke=Ct,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return Ze},set:function(re){if(re<0||re>100)throw new Error("Position must be between 0 and 100.");Ze=re,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return lt},set:function(re){var Ct=fe(re);Ct?(lt=Ct,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return q},set:function(re){if(re<0||re>100)throw new Error("Size must be between 0 and 100.");q=re,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return ge},set:function(re){var Ct=fe(re);if(!Ct)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");ge=Ct,this.hasBeenReset=!0}}}),this.displayState=void 0}Be.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},en.exports=Be},3872:en=>{var ut={"":!0,up:!0};function E(fe){return"number"==typeof fe&&fe>=0&&fe<=100}en.exports=function N(){var fe=100,Be=3,_e=0,xe=100,He=0,Re=100,Ue="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return fe},set:function(ye){if(!E(ye))throw new Error("Width must be between 0 and 100.");fe=ye}},lines:{enumerable:!0,get:function(){return Be},set:function(ye){if("number"!=typeof ye)throw new TypeError("Lines must be set to a number.");Be=ye}},regionAnchorY:{enumerable:!0,get:function(){return xe},set:function(ye){if(!E(ye))throw new Error("RegionAnchorX must be between 0 and 100.");xe=ye}},regionAnchorX:{enumerable:!0,get:function(){return _e},set:function(ye){if(!E(ye))throw new Error("RegionAnchorY must be between 0 and 100.");_e=ye}},viewportAnchorY:{enumerable:!0,get:function(){return Re},set:function(ye){if(!E(ye))throw new Error("ViewportAnchorY must be between 0 and 100.");Re=ye}},viewportAnchorX:{enumerable:!0,get:function(){return He},set:function(ye){if(!E(ye))throw new Error("ViewportAnchorX must be between 0 and 100.");He=ye}},scroll:{enumerable:!0,get:function(){return Ue},set:function(ye){var Ae=function X(fe){return"string"==typeof fe&&!!ut[fe.toLowerCase()]&&fe.toLowerCase()}(ye);!1===Ae?console.warn("Scroll: an invalid or illegal string was specified."):Ue=Ae}}})}},5893:()=>{},434:en=>{function ut(){return en.exports=ut=Object.assign?Object.assign.bind():function(X){for(var E=1;E<arguments.length;E++){var N=arguments[E];for(var fe in N)Object.prototype.hasOwnProperty.call(N,fe)&&(X[fe]=N[fe])}return X},en.exports.__esModule=!0,en.exports.default=en.exports,ut.apply(this,arguments)}en.exports=ut,en.exports.__esModule=!0,en.exports.default=en.exports},4755:(en,ut,X)=>{"use strict";X.d(ut,{Do:()=>Ye,EM:()=>ao,HT:()=>Be,JF:()=>Bo,K0:()=>xe,Mx:()=>Ji,O5:()=>so,Ov:()=>xs,PM:()=>qo,S$:()=>rt,V_:()=>Re,Ye:()=>Ke,Zx:()=>Dr,b0:()=>wt,bD:()=>hs,ez:()=>vo,mk:()=>go,q:()=>fe,sg:()=>Hs,uU:()=>$n,w_:()=>_e});var E=X(6547);let N=null;function fe(){return N}function Be(B){N||(N=B)}class _e{}const xe=new E.OlP("DocumentToken");let He=(()=>{class B{historyGo(z){throw new Error("Not implemented")}}return B.\u0275fac=function(z){return new(z||B)},B.\u0275prov=E.Yz7({token:B,factory:function(){return(0,E.f3M)(Ue)},providedIn:"platform"}),B})();const Re=new E.OlP("Location Initialized");let Ue=(()=>{class B extends He{constructor(){super(),this._doc=(0,E.f3M)(xe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return fe().getBaseHref(this._doc)}onPopState(z){const Ie=fe().getGlobalEventTarget(this._doc,"window");return Ie.addEventListener("popstate",z,!1),()=>Ie.removeEventListener("popstate",z)}onHashChange(z){const Ie=fe().getGlobalEventTarget(this._doc,"window");return Ie.addEventListener("hashchange",z,!1),()=>Ie.removeEventListener("hashchange",z)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(z){this._location.pathname=z}pushState(z,Ie,Ge){this._history.pushState(z,Ie,Ge)}replaceState(z,Ie,Ge){this._history.replaceState(z,Ie,Ge)}forward(){this._history.forward()}back(){this._history.back()}historyGo(z=0){this._history.go(z)}getState(){return this._history.state}}return B.\u0275fac=function(z){return new(z||B)},B.\u0275prov=E.Yz7({token:B,factory:function(){return new B},providedIn:"platform"}),B})();function ye(B,he){if(0==B.length)return he;if(0==he.length)return B;let z=0;return B.endsWith("/")&&z++,he.startsWith("/")&&z++,2==z?B+he.substring(1):1==z?B+he:B+"/"+he}function Ae(B){const he=B.match(/#|\?|$/),z=he&&he.index||B.length;return B.slice(0,z-("/"===B[z-1]?1:0))+B.slice(z)}function Fe(B){return B&&"?"!==B[0]?"?"+B:B}let rt=(()=>{class B{historyGo(z){throw new Error("Not implemented")}}return B.\u0275fac=function(z){return new(z||B)},B.\u0275prov=E.Yz7({token:B,factory:function(){return(0,E.f3M)(wt)},providedIn:"root"}),B})();const ce=new E.OlP("appBaseHref");let wt=(()=>{class B extends rt{constructor(z,Ie){super(),this._platformLocation=z,this._removeListenerFns=[],this._baseHref=Ie??this._platformLocation.getBaseHrefFromDOM()??(0,E.f3M)(xe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(z){this._removeListenerFns.push(this._platformLocation.onPopState(z),this._platformLocation.onHashChange(z))}getBaseHref(){return this._baseHref}prepareExternalUrl(z){return ye(this._baseHref,z)}path(z=!1){const Ie=this._platformLocation.pathname+Fe(this._platformLocation.search),Ge=this._platformLocation.hash;return Ge&&z?`${Ie}${Ge}`:Ie}pushState(z,Ie,Ge,Lt){const zt=this.prepareExternalUrl(Ge+Fe(Lt));this._platformLocation.pushState(z,Ie,zt)}replaceState(z,Ie,Ge,Lt){const zt=this.prepareExternalUrl(Ge+Fe(Lt));this._platformLocation.replaceState(z,Ie,zt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(z=0){this._platformLocation.historyGo?.(z)}}return B.\u0275fac=function(z){return new(z||B)(E.LFG(He),E.LFG(ce,8))},B.\u0275prov=E.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})(),Ye=(()=>{class B extends rt{constructor(z,Ie){super(),this._platformLocation=z,this._baseHref="",this._removeListenerFns=[],null!=Ie&&(this._baseHref=Ie)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(z){this._removeListenerFns.push(this._platformLocation.onPopState(z),this._platformLocation.onHashChange(z))}getBaseHref(){return this._baseHref}path(z=!1){let Ie=this._platformLocation.hash;return null==Ie&&(Ie="#"),Ie.length>0?Ie.substring(1):Ie}prepareExternalUrl(z){const Ie=ye(this._baseHref,z);return Ie.length>0?"#"+Ie:Ie}pushState(z,Ie,Ge,Lt){let zt=this.prepareExternalUrl(Ge+Fe(Lt));0==zt.length&&(zt=this._platformLocation.pathname),this._platformLocation.pushState(z,Ie,zt)}replaceState(z,Ie,Ge,Lt){let zt=this.prepareExternalUrl(Ge+Fe(Lt));0==zt.length&&(zt=this._platformLocation.pathname),this._platformLocation.replaceState(z,Ie,zt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(z=0){this._platformLocation.historyGo?.(z)}}return B.\u0275fac=function(z){return new(z||B)(E.LFG(He),E.LFG(ce,8))},B.\u0275prov=E.Yz7({token:B,factory:B.\u0275fac}),B})(),Ke=(()=>{class B{constructor(z){this._subject=new E.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=z;const Ie=this._locationStrategy.getBaseHref();this._basePath=function ge(B){if(new RegExp("^(https?:)?//").test(B)){const[,z]=B.split(/\/\/[^\/]+/);return z}return B}(Ae(q(Ie))),this._locationStrategy.onPopState(Ge=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ge.state,type:Ge.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(z=!1){return this.normalize(this._locationStrategy.path(z))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(z,Ie=""){return this.path()==this.normalize(z+Fe(Ie))}normalize(z){return B.stripTrailingSlash(function lt(B,he){if(!B||!he.startsWith(B))return he;const z=he.substring(B.length);return""===z||["/",";","?","#"].includes(z[0])?z:he}(this._basePath,q(z)))}prepareExternalUrl(z){return z&&"/"!==z[0]&&(z="/"+z),this._locationStrategy.prepareExternalUrl(z)}go(z,Ie="",Ge=null){this._locationStrategy.pushState(Ge,"",z,Ie),this._notifyUrlChangeListeners(this.prepareExternalUrl(z+Fe(Ie)),Ge)}replaceState(z,Ie="",Ge=null){this._locationStrategy.replaceState(Ge,"",z,Ie),this._notifyUrlChangeListeners(this.prepareExternalUrl(z+Fe(Ie)),Ge)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(z=0){this._locationStrategy.historyGo?.(z)}onUrlChange(z){return this._urlChangeListeners.push(z),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Ie=>{this._notifyUrlChangeListeners(Ie.url,Ie.state)})),()=>{const Ie=this._urlChangeListeners.indexOf(z);this._urlChangeListeners.splice(Ie,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(z="",Ie){this._urlChangeListeners.forEach(Ge=>Ge(z,Ie))}subscribe(z,Ie,Ge){return this._subject.subscribe({next:z,error:Ie,complete:Ge})}}return B.normalizeQueryParams=Fe,B.joinWithSlash=ye,B.stripTrailingSlash=Ae,B.\u0275fac=function(z){return new(z||B)(E.LFG(rt))},B.\u0275prov=E.Yz7({token:B,factory:function(){return function Ze(){return new Ke((0,E.LFG)(rt))}()},providedIn:"root"}),B})();function q(B){return B.replace(/\/index.html$/,"")}var Ct=(()=>((Ct=Ct||{})[Ct.Decimal=0]="Decimal",Ct[Ct.Percent=1]="Percent",Ct[Ct.Currency=2]="Currency",Ct[Ct.Scientific=3]="Scientific",Ct))(),st=(()=>((st=st||{})[st.Format=0]="Format",st[st.Standalone=1]="Standalone",st))(),Y=(()=>((Y=Y||{})[Y.Narrow=0]="Narrow",Y[Y.Abbreviated=1]="Abbreviated",Y[Y.Wide=2]="Wide",Y[Y.Short=3]="Short",Y))(),Te=(()=>((Te=Te||{})[Te.Short=0]="Short",Te[Te.Medium=1]="Medium",Te[Te.Long=2]="Long",Te[Te.Full=3]="Full",Te))(),Xe=(()=>((Xe=Xe||{})[Xe.Decimal=0]="Decimal",Xe[Xe.Group=1]="Group",Xe[Xe.List=2]="List",Xe[Xe.PercentSign=3]="PercentSign",Xe[Xe.PlusSign=4]="PlusSign",Xe[Xe.MinusSign=5]="MinusSign",Xe[Xe.Exponential=6]="Exponential",Xe[Xe.SuperscriptingExponent=7]="SuperscriptingExponent",Xe[Xe.PerMille=8]="PerMille",Xe[Xe.Infinity=9]="Infinity",Xe[Xe.NaN=10]="NaN",Xe[Xe.TimeSeparator=11]="TimeSeparator",Xe[Xe.CurrencyDecimal=12]="CurrencyDecimal",Xe[Xe.CurrencyGroup=13]="CurrencyGroup",Xe))();function Ut(B,he){return Tr((0,E.cg1)(B)[E.wAp.DateFormat],he)}function Vt(B,he){return Tr((0,E.cg1)(B)[E.wAp.TimeFormat],he)}function qt(B,he){return Tr((0,E.cg1)(B)[E.wAp.DateTimeFormat],he)}function En(B,he){const z=(0,E.cg1)(B),Ie=z[E.wAp.NumberSymbols][he];if(typeof Ie>"u"){if(he===Xe.CurrencyDecimal)return z[E.wAp.NumberSymbols][Xe.Decimal];if(he===Xe.CurrencyGroup)return z[E.wAp.NumberSymbols][Xe.Group]}return Ie}function kr(B){if(!B[E.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${B[E.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Tr(B,he){for(let z=he;z>-1;z--)if(typeof B[z]<"u")return B[z];throw new Error("Locale data API: locale data undefined")}function Rr(B){const[he,z]=B.split(":");return{hours:+he,minutes:+z}}const _r=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ht={},sr=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Hn=(()=>((Hn=Hn||{})[Hn.Short=0]="Short",Hn[Hn.ShortGMT=1]="ShortGMT",Hn[Hn.Long=2]="Long",Hn[Hn.Extended=3]="Extended",Hn))(),tn=(()=>((tn=tn||{})[tn.FullYear=0]="FullYear",tn[tn.Month=1]="Month",tn[tn.Date=2]="Date",tn[tn.Hours=3]="Hours",tn[tn.Minutes=4]="Minutes",tn[tn.Seconds=5]="Seconds",tn[tn.FractionalSeconds=6]="FractionalSeconds",tn[tn.Day=7]="Day",tn))(),Rn=(()=>((Rn=Rn||{})[Rn.DayPeriods=0]="DayPeriods",Rn[Rn.Days=1]="Days",Rn[Rn.Months=2]="Months",Rn[Rn.Eras=3]="Eras",Rn))();function Ei(B,he,z,Ie){let Ge=function ve(B){if(be(B))return B;if("number"==typeof B&&!isNaN(B))return new Date(B);if("string"==typeof B){if(B=B.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(B)){const[Ge,Lt=1,zt=1]=B.split("-").map(ur=>+ur);return ai(Ge,Lt-1,zt)}const z=parseFloat(B);if(!isNaN(B-z))return new Date(z);let Ie;if(Ie=B.match(_r))return function Ce(B){const he=new Date(0);let z=0,Ie=0;const Ge=B[8]?he.setUTCFullYear:he.setFullYear,Lt=B[8]?he.setUTCHours:he.setHours;B[9]&&(z=Number(B[9]+B[10]),Ie=Number(B[9]+B[11])),Ge.call(he,Number(B[1]),Number(B[2])-1,Number(B[3]));const zt=Number(B[4]||0)-z,ur=Number(B[5]||0)-Ie,ti=Number(B[6]||0),mi=Math.floor(1e3*parseFloat("0."+(B[7]||0)));return Lt.call(he,zt,ur,ti,mi),he}(Ie)}const he=new Date(B);if(!be(he))throw new Error(`Unable to convert "${B}" into a date`);return he}(B);he=Oi(z,he)||he;let ur,zt=[];for(;he;){if(ur=sr.exec(he),!ur){zt.push(he);break}{zt=zt.concat(ur.slice(1));const hi=zt.pop();if(!hi)break;he=hi}}let ti=Ge.getTimezoneOffset();Ie&&(ti=Zr(Ie,ti),Ge=function tt(B,he,z){const Ie=z?-1:1,Ge=B.getTimezoneOffset();return function Vs(B,he){return(B=new Date(B.getTime())).setMinutes(B.getMinutes()+he),B}(B,Ie*(Zr(he,Ge)-Ge))}(Ge,Ie,!0));let mi="";return zt.forEach(hi=>{const mr=function ds(B){if(ni[B])return ni[B];let he;switch(B){case"G":case"GG":case"GGG":he=Tn(Rn.Eras,Y.Abbreviated);break;case"GGGG":he=Tn(Rn.Eras,Y.Wide);break;case"GGGGG":he=Tn(Rn.Eras,Y.Narrow);break;case"y":he=Kr(tn.FullYear,1,0,!1,!0);break;case"yy":he=Kr(tn.FullYear,2,0,!0,!0);break;case"yyy":he=Kr(tn.FullYear,3,0,!1,!0);break;case"yyyy":he=Kr(tn.FullYear,4,0,!1,!0);break;case"Y":he=Ar(1);break;case"YY":he=Ar(2,!0);break;case"YYY":he=Ar(3);break;case"YYYY":he=Ar(4);break;case"M":case"L":he=Kr(tn.Month,1,1);break;case"MM":case"LL":he=Kr(tn.Month,2,1);break;case"MMM":he=Tn(Rn.Months,Y.Abbreviated);break;case"MMMM":he=Tn(Rn.Months,Y.Wide);break;case"MMMMM":he=Tn(Rn.Months,Y.Narrow);break;case"LLL":he=Tn(Rn.Months,Y.Abbreviated,st.Standalone);break;case"LLLL":he=Tn(Rn.Months,Y.Wide,st.Standalone);break;case"LLLLL":he=Tn(Rn.Months,Y.Narrow,st.Standalone);break;case"w":he=Zi(1);break;case"ww":he=Zi(2);break;case"W":he=Zi(1,!0);break;case"d":he=Kr(tn.Date,1);break;case"dd":he=Kr(tn.Date,2);break;case"c":case"cc":he=Kr(tn.Day,1);break;case"ccc":he=Tn(Rn.Days,Y.Abbreviated,st.Standalone);break;case"cccc":he=Tn(Rn.Days,Y.Wide,st.Standalone);break;case"ccccc":he=Tn(Rn.Days,Y.Narrow,st.Standalone);break;case"cccccc":he=Tn(Rn.Days,Y.Short,st.Standalone);break;case"E":case"EE":case"EEE":he=Tn(Rn.Days,Y.Abbreviated);break;case"EEEE":he=Tn(Rn.Days,Y.Wide);break;case"EEEEE":he=Tn(Rn.Days,Y.Narrow);break;case"EEEEEE":he=Tn(Rn.Days,Y.Short);break;case"a":case"aa":case"aaa":he=Tn(Rn.DayPeriods,Y.Abbreviated);break;case"aaaa":he=Tn(Rn.DayPeriods,Y.Wide);break;case"aaaaa":he=Tn(Rn.DayPeriods,Y.Narrow);break;case"b":case"bb":case"bbb":he=Tn(Rn.DayPeriods,Y.Abbreviated,st.Standalone,!0);break;case"bbbb":he=Tn(Rn.DayPeriods,Y.Wide,st.Standalone,!0);break;case"bbbbb":he=Tn(Rn.DayPeriods,Y.Narrow,st.Standalone,!0);break;case"B":case"BB":case"BBB":he=Tn(Rn.DayPeriods,Y.Abbreviated,st.Format,!0);break;case"BBBB":he=Tn(Rn.DayPeriods,Y.Wide,st.Format,!0);break;case"BBBBB":he=Tn(Rn.DayPeriods,Y.Narrow,st.Format,!0);break;case"h":he=Kr(tn.Hours,1,-12);break;case"hh":he=Kr(tn.Hours,2,-12);break;case"H":he=Kr(tn.Hours,1);break;case"HH":he=Kr(tn.Hours,2);break;case"m":he=Kr(tn.Minutes,1);break;case"mm":he=Kr(tn.Minutes,2);break;case"s":he=Kr(tn.Seconds,1);break;case"ss":he=Kr(tn.Seconds,2);break;case"S":he=Kr(tn.FractionalSeconds,1);break;case"SS":he=Kr(tn.FractionalSeconds,2);break;case"SSS":he=Kr(tn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":he=Li(Hn.Short);break;case"ZZZZZ":he=Li(Hn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":he=Li(Hn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":he=Li(Hn.Long);break;default:return null}return ni[B]=he,he}(hi);mi+=mr?mr(Ge,z,ti):"''"===hi?"'":hi.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),mi}function ai(B,he,z){const Ie=new Date(0);return Ie.setFullYear(B,he,z),Ie.setHours(0,0,0),Ie}function Oi(B,he){const z=function Rt(B){return(0,E.cg1)(B)[E.wAp.LocaleId]}(B);if(Ht[z]=Ht[z]||{},Ht[z][he])return Ht[z][he];let Ie="";switch(he){case"shortDate":Ie=Ut(B,Te.Short);break;case"mediumDate":Ie=Ut(B,Te.Medium);break;case"longDate":Ie=Ut(B,Te.Long);break;case"fullDate":Ie=Ut(B,Te.Full);break;case"shortTime":Ie=Vt(B,Te.Short);break;case"mediumTime":Ie=Vt(B,Te.Medium);break;case"longTime":Ie=Vt(B,Te.Long);break;case"fullTime":Ie=Vt(B,Te.Full);break;case"short":const Ge=Oi(B,"shortTime"),Lt=Oi(B,"shortDate");Ie=cs(qt(B,Te.Short),[Ge,Lt]);break;case"medium":const zt=Oi(B,"mediumTime"),ur=Oi(B,"mediumDate");Ie=cs(qt(B,Te.Medium),[zt,ur]);break;case"long":const ti=Oi(B,"longTime"),mi=Oi(B,"longDate");Ie=cs(qt(B,Te.Long),[ti,mi]);break;case"full":const hi=Oi(B,"fullTime"),mr=Oi(B,"fullDate");Ie=cs(qt(B,Te.Full),[hi,mr])}return Ie&&(Ht[z][he]=Ie),Ie}function cs(B,he){return he&&(B=B.replace(/\{([^}]+)}/g,function(z,Ie){return null!=he&&Ie in he?he[Ie]:z})),B}function Sr(B,he,z="-",Ie,Ge){let Lt="";(B<0||Ge&&B<=0)&&(Ge?B=1-B:(B=-B,Lt=z));let zt=String(B);for(;zt.length<he;)zt="0"+zt;return Ie&&(zt=zt.slice(zt.length-he)),Lt+zt}function Kr(B,he,z=0,Ie=!1,Ge=!1){return function(Lt,zt){let ur=function ms(B,he){switch(B){case tn.FullYear:return he.getFullYear();case tn.Month:return he.getMonth();case tn.Date:return he.getDate();case tn.Hours:return he.getHours();case tn.Minutes:return he.getMinutes();case tn.Seconds:return he.getSeconds();case tn.FractionalSeconds:return he.getMilliseconds();case tn.Day:return he.getDay();default:throw new Error(`Unknown DateType value "${B}".`)}}(B,Lt);if((z>0||ur>-z)&&(ur+=z),B===tn.Hours)0===ur&&-12===z&&(ur=12);else if(B===tn.FractionalSeconds)return function fo(B,he){return Sr(B,3).substring(0,he)}(ur,he);const ti=En(zt,Xe.MinusSign);return Sr(ur,he,ti,Ie,Ge)}}function Tn(B,he,z=st.Format,Ie=!1){return function(Ge,Lt){return function Vr(B,he,z,Ie,Ge,Lt){switch(z){case Rn.Months:return function Sn(B,he,z){const Ie=(0,E.cg1)(B),Lt=Tr([Ie[E.wAp.MonthsFormat],Ie[E.wAp.MonthsStandalone]],he);return Tr(Lt,z)}(he,Ge,Ie)[B.getMonth()];case Rn.Days:return function Wt(B,he,z){const Ie=(0,E.cg1)(B),Lt=Tr([Ie[E.wAp.DaysFormat],Ie[E.wAp.DaysStandalone]],he);return Tr(Lt,z)}(he,Ge,Ie)[B.getDay()];case Rn.DayPeriods:const zt=B.getHours(),ur=B.getMinutes();if(Lt){const mi=function On(B){const he=(0,E.cg1)(B);return kr(he),(he[E.wAp.ExtraData][2]||[]).map(Ie=>"string"==typeof Ie?Rr(Ie):[Rr(Ie[0]),Rr(Ie[1])])}(he),hi=function Ai(B,he,z){const Ie=(0,E.cg1)(B);kr(Ie);const Lt=Tr([Ie[E.wAp.ExtraData][0],Ie[E.wAp.ExtraData][1]],he)||[];return Tr(Lt,z)||[]}(he,Ge,Ie),mr=mi.findIndex(us=>{if(Array.isArray(us)){const[fi,Gi]=us,Jn=zt>=fi.hours&&ur>=fi.minutes,xo=zt<Gi.hours||zt===Gi.hours&&ur<Gi.minutes;if(fi.hours<Gi.hours){if(Jn&&xo)return!0}else if(Jn||xo)return!0}else if(us.hours===zt&&us.minutes===ur)return!0;return!1});if(-1!==mr)return hi[mr]}return function xt(B,he,z){const Ie=(0,E.cg1)(B),Lt=Tr([Ie[E.wAp.DayPeriodsFormat],Ie[E.wAp.DayPeriodsStandalone]],he);return Tr(Lt,z)}(he,Ge,Ie)[zt<12?0:1];case Rn.Eras:return function Yt(B,he){return Tr((0,E.cg1)(B)[E.wAp.Eras],he)}(he,Ie)[B.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${z}`)}}(Ge,Lt,B,he,z,Ie)}}function Li(B){return function(he,z,Ie){const Ge=-1*Ie,Lt=En(z,Xe.MinusSign),zt=Ge>0?Math.floor(Ge/60):Math.ceil(Ge/60);switch(B){case Hn.Short:return(Ge>=0?"+":"")+Sr(zt,2,Lt)+Sr(Math.abs(Ge%60),2,Lt);case Hn.ShortGMT:return"GMT"+(Ge>=0?"+":"")+Sr(zt,1,Lt);case Hn.Long:return"GMT"+(Ge>=0?"+":"")+Sr(zt,2,Lt)+":"+Sr(Math.abs(Ge%60),2,Lt);case Hn.Extended:return 0===Ie?"Z":(Ge>=0?"+":"")+Sr(zt,2,Lt)+":"+Sr(Math.abs(Ge%60),2,Lt);default:throw new Error(`Unknown zone width "${B}"`)}}}const Si=0,Hr=4;function $i(B){return ai(B.getFullYear(),B.getMonth(),B.getDate()+(Hr-B.getDay()))}function Zi(B,he=!1){return function(z,Ie){let Ge;if(he){const Lt=new Date(z.getFullYear(),z.getMonth(),1).getDay()-1,zt=z.getDate();Ge=1+Math.floor((zt+Lt)/7)}else{const Lt=$i(z),zt=function Mn(B){const he=ai(B,Si,1).getDay();return ai(B,0,1+(he<=Hr?Hr:Hr+7)-he)}(Lt.getFullYear()),ur=Lt.getTime()-zt.getTime();Ge=1+Math.round(ur/6048e5)}return Sr(Ge,B,En(Ie,Xe.MinusSign))}}function Ar(B,he=!1){return function(z,Ie){return Sr($i(z).getFullYear(),B,En(Ie,Xe.MinusSign),he)}}const ni={};function Zr(B,he){B=B.replace(/:/g,"");const z=Date.parse("Jan 01, 1970 00:00:00 "+B)/6e4;return isNaN(z)?he:z}function be(B){return B instanceof Date&&!isNaN(B.valueOf())}const Oe=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function cr(B){const he=parseInt(B);if(isNaN(he))throw new Error("Invalid integer literal when parsing "+B);return he}function Ji(B,he){he=encodeURIComponent(he);for(const z of B.split(";")){const Ie=z.indexOf("="),[Ge,Lt]=-1==Ie?[z,""]:[z.slice(0,Ie),z.slice(Ie+1)];if(Ge.trim()===he)return decodeURIComponent(Lt)}return null}const Fi=/\s+/,po=[];let go=(()=>{class B{constructor(z,Ie,Ge,Lt){this._iterableDiffers=z,this._keyValueDiffers=Ie,this._ngEl=Ge,this._renderer=Lt,this.initialClasses=po,this.stateMap=new Map}set klass(z){this.initialClasses=null!=z?z.trim().split(Fi):po}set ngClass(z){this.rawClass="string"==typeof z?z.trim().split(Fi):z}ngDoCheck(){for(const Ie of this.initialClasses)this._updateState(Ie,!0);const z=this.rawClass;if(Array.isArray(z)||z instanceof Set)for(const Ie of z)this._updateState(Ie,!0);else if(null!=z)for(const Ie of Object.keys(z))this._updateState(Ie,!!z[Ie]);this._applyStateDiff()}_updateState(z,Ie){const Ge=this.stateMap.get(z);void 0!==Ge?(Ge.enabled!==Ie&&(Ge.changed=!0,Ge.enabled=Ie),Ge.touched=!0):this.stateMap.set(z,{enabled:Ie,changed:!0,touched:!0})}_applyStateDiff(){for(const z of this.stateMap){const Ie=z[0],Ge=z[1];Ge.changed?(this._toggleClass(Ie,Ge.enabled),Ge.changed=!1):Ge.touched||(Ge.enabled&&this._toggleClass(Ie,!1),this.stateMap.delete(Ie)),Ge.touched=!1}}_toggleClass(z,Ie){(z=z.trim()).length>0&&z.split(Fi).forEach(Ge=>{Ie?this._renderer.addClass(this._ngEl.nativeElement,Ge):this._renderer.removeClass(this._ngEl.nativeElement,Ge)})}}return B.\u0275fac=function(z){return new(z||B)(E.Y36(E.ZZ4),E.Y36(E.aQg),E.Y36(E.SBq),E.Y36(E.Qsj))},B.\u0275dir=E.lG2({type:B,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),B})();class Oa{constructor(he,z,Ie,Ge){this.$implicit=he,this.ngForOf=z,this.index=Ie,this.count=Ge}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Hs=(()=>{class B{set ngForOf(z){this._ngForOf=z,this._ngForOfDirty=!0}set ngForTrackBy(z){this._trackByFn=z}get ngForTrackBy(){return this._trackByFn}constructor(z,Ie,Ge){this._viewContainer=z,this._template=Ie,this._differs=Ge,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(z){z&&(this._template=z)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const z=this._ngForOf;!this._differ&&z&&(this._differ=this._differs.find(z).create(this.ngForTrackBy))}if(this._differ){const z=this._differ.diff(this._ngForOf);z&&this._applyChanges(z)}}_applyChanges(z){const Ie=this._viewContainer;z.forEachOperation((Ge,Lt,zt)=>{if(null==Ge.previousIndex)Ie.createEmbeddedView(this._template,new Oa(Ge.item,this._ngForOf,-1,-1),null===zt?void 0:zt);else if(null==zt)Ie.remove(null===Lt?void 0:Lt);else if(null!==Lt){const ur=Ie.get(Lt);Ie.move(ur,zt),Lo(ur,Ge)}});for(let Ge=0,Lt=Ie.length;Ge<Lt;Ge++){const ur=Ie.get(Ge).context;ur.index=Ge,ur.count=Lt,ur.ngForOf=this._ngForOf}z.forEachIdentityChange(Ge=>{Lo(Ie.get(Ge.currentIndex),Ge)})}static ngTemplateContextGuard(z,Ie){return!0}}return B.\u0275fac=function(z){return new(z||B)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(E.ZZ4))},B.\u0275dir=E.lG2({type:B,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),B})();function Lo(B,he){B.context.$implicit=he.item}let so=(()=>{class B{constructor(z,Ie){this._viewContainer=z,this._context=new $s,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Ie}set ngIf(z){this._context.$implicit=this._context.ngIf=z,this._updateView()}set ngIfThen(z){sa("ngIfThen",z),this._thenTemplateRef=z,this._thenViewRef=null,this._updateView()}set ngIfElse(z){sa("ngIfElse",z),this._elseTemplateRef=z,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(z,Ie){return!0}}return B.\u0275fac=function(z){return new(z||B)(E.Y36(E.s_b),E.Y36(E.Rgc))},B.\u0275dir=E.lG2({type:B,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),B})();class $s{constructor(){this.$implicit=null,this.ngIf=null}}function sa(B,he){if(he&&!he.createEmbeddedView)throw new Error(`${B} must be a TemplateRef, but received '${(0,E.AaK)(he)}'.`)}function Is(B,he){return new E.vHH(2100,!1)}class wr{createSubscription(he,z){return he.subscribe({next:z,error:Ie=>{throw Ie}})}dispose(he){he.unsubscribe()}}class gi{createSubscription(he,z){return he.then(z,Ie=>{throw Ie})}dispose(he){}}const wi=new gi,aa=new wr;let xs=(()=>{class B{constructor(z){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=z}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(z){return this._obj?z!==this._obj?(this._dispose(),this.transform(z)):this._latestValue:(z&&this._subscribe(z),this._latestValue)}_subscribe(z){this._obj=z,this._strategy=this._selectStrategy(z),this._subscription=this._strategy.createSubscription(z,Ie=>this._updateLatestValue(z,Ie))}_selectStrategy(z){if((0,E.QGY)(z))return wi;if((0,E.F4k)(z))return aa;throw Is()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(z,Ie){z===this._obj&&(this._latestValue=Ie,this._ref.markForCheck())}}return B.\u0275fac=function(z){return new(z||B)(E.Y36(E.sBO,16))},B.\u0275pipe=E.Yjl({name:"async",type:B,pure:!1,standalone:!0}),B})();const Gn=new E.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),cn=new E.OlP("DATE_PIPE_DEFAULT_OPTIONS");let $n=(()=>{class B{constructor(z,Ie,Ge){this.locale=z,this.defaultTimezone=Ie,this.defaultOptions=Ge}transform(z,Ie,Ge,Lt){if(null==z||""===z||z!=z)return null;try{return Ei(z,Ie??this.defaultOptions?.dateFormat??"mediumDate",Lt||this.locale,Ge??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(zt){throw Is()}}}return B.\u0275fac=function(z){return new(z||B)(E.Y36(E.soG,16),E.Y36(Gn,24),E.Y36(cn,24))},B.\u0275pipe=E.Yjl({name:"date",type:B,pure:!0,standalone:!0}),B})(),Dr=(()=>{class B{constructor(z){this._locale=z}transform(z,Ie,Ge){if(!function Qo(B){return!(null==B||""===B||B!=B)}(z))return null;Ge=Ge||this._locale;try{return function ii(B,he,z){return function ar(B,he,z,Ie,Ge,Lt,zt=!1){let ur="",ti=!1;if(isFinite(B)){let mi=function er(B){let Ie,Ge,Lt,zt,ur,he=Math.abs(B)+"",z=0;for((Ge=he.indexOf("."))>-1&&(he=he.replace(".","")),(Lt=he.search(/e/i))>0?(Ge<0&&(Ge=Lt),Ge+=+he.slice(Lt+1),he=he.substring(0,Lt)):Ge<0&&(Ge=he.length),Lt=0;"0"===he.charAt(Lt);Lt++);if(Lt===(ur=he.length))Ie=[0],Ge=1;else{for(ur--;"0"===he.charAt(ur);)ur--;for(Ge-=Lt,Ie=[],zt=0;Lt<=ur;Lt++,zt++)Ie[zt]=Number(he.charAt(Lt))}return Ge>22&&(Ie=Ie.splice(0,21),z=Ge-1,Ge=1),{digits:Ie,exponent:z,integerLen:Ge}}(B);zt&&(mi=function Kt(B){if(0===B.digits[0])return B;const he=B.digits.length-B.integerLen;return B.exponent?B.exponent+=2:(0===he?B.digits.push(0,0):1===he&&B.digits.push(0),B.integerLen+=2),B}(mi));let hi=he.minInt,mr=he.minFrac,us=he.maxFrac;if(Lt){const Js=Lt.match(Oe);if(null===Js)throw new Error(`${Lt} is not a valid digit info`);const is=Js[1],tu=Js[3],jr=Js[5];null!=is&&(hi=cr(is)),null!=tu&&(mr=cr(tu)),null!=jr?us=cr(jr):null!=tu&&mr>us&&(us=mr)}!function Qn(B,he,z){if(he>z)throw new Error(`The minimum number of digits after fraction (${he}) is higher than the maximum (${z}).`);let Ie=B.digits,Ge=Ie.length-B.integerLen;const Lt=Math.min(Math.max(he,Ge),z);let zt=Lt+B.integerLen,ur=Ie[zt];if(zt>0){Ie.splice(Math.max(B.integerLen,zt));for(let mr=zt;mr<Ie.length;mr++)Ie[mr]=0}else{Ge=Math.max(0,Ge),B.integerLen=1,Ie.length=Math.max(1,zt=Lt+1),Ie[0]=0;for(let mr=1;mr<zt;mr++)Ie[mr]=0}if(ur>=5)if(zt-1<0){for(let mr=0;mr>zt;mr--)Ie.unshift(0),B.integerLen++;Ie.unshift(1),B.integerLen++}else Ie[zt-1]++;for(;Ge<Math.max(0,Lt);Ge++)Ie.push(0);let ti=0!==Lt;const mi=he+B.integerLen,hi=Ie.reduceRight(function(mr,us,fi,Gi){return Gi[fi]=(us+=mr)<10?us:us-10,ti&&(0===Gi[fi]&&fi>=mi?Gi.pop():ti=!1),us>=10?1:0},0);hi&&(Ie.unshift(hi),B.integerLen++)}(mi,mr,us);let fi=mi.digits,Gi=mi.integerLen;const Jn=mi.exponent;let xo=[];for(ti=fi.every(Js=>!Js);Gi<hi;Gi++)fi.unshift(0);for(;Gi<0;Gi++)fi.unshift(0);Gi>0?xo=fi.splice(Gi,fi.length):(xo=fi,fi=[0]);const Do=[];for(fi.length>=he.lgSize&&Do.unshift(fi.splice(-he.lgSize,fi.length).join(""));fi.length>he.gSize;)Do.unshift(fi.splice(-he.gSize,fi.length).join(""));fi.length&&Do.unshift(fi.join("")),ur=Do.join(En(z,Ie)),xo.length&&(ur+=En(z,Ge)+xo.join("")),Jn&&(ur+=En(z,Xe.Exponential)+"+"+Jn)}else ur=En(z,Xe.Infinity);return ur=B<0&&!ti?he.negPre+ur+he.negSuf:he.posPre+ur+he.posSuf,ur}(B,function yt(B,he="-"){const z={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},Ie=B.split(";"),Ge=Ie[0],Lt=Ie[1],zt=-1!==Ge.indexOf(".")?Ge.split("."):[Ge.substring(0,Ge.lastIndexOf("0")+1),Ge.substring(Ge.lastIndexOf("0")+1)],ur=zt[0],ti=zt[1]||"";z.posPre=ur.substring(0,ur.indexOf("#"));for(let hi=0;hi<ti.length;hi++){const mr=ti.charAt(hi);"0"===mr?z.minFrac=z.maxFrac=hi+1:"#"===mr?z.maxFrac=hi+1:z.posSuf+=mr}const mi=ur.split(",");if(z.gSize=mi[1]?mi[1].length:0,z.lgSize=mi[2]||mi[1]?(mi[2]||mi[1]).length:0,Lt){const hi=Ge.length-z.posPre.length-z.posSuf.length,mr=Lt.indexOf("#");z.negPre=Lt.substring(0,mr).replace(/'/g,""),z.negSuf=Lt.slice(mr+hi).replace(/'/g,"")}else z.negPre=he+z.posPre,z.negSuf=z.posSuf;return z}(function on(B,he){return(0,E.cg1)(B)[E.wAp.NumberFormats][he]}(he,Ct.Percent),En(he,Xe.MinusSign)),he,Xe.Group,Xe.Decimal,z,!0).replace(new RegExp("%","g"),En(he,Xe.PercentSign))}(function oo(B){if("string"==typeof B&&!isNaN(Number(B)-parseFloat(B)))return Number(B);if("number"!=typeof B)throw new Error(`${B} is not a number`);return B}(z),Ge,Ie)}catch(Lt){throw Is()}}}return B.\u0275fac=function(z){return new(z||B)(E.Y36(E.soG,16))},B.\u0275pipe=E.Yjl({name:"percent",type:B,pure:!0,standalone:!0}),B})();let vo=(()=>{class B{}return B.\u0275fac=function(z){return new(z||B)},B.\u0275mod=E.oAB({type:B}),B.\u0275inj=E.cJS({}),B})();const hs="browser",Fo="server";function qo(B){return B===Fo}let ao=(()=>{class B{}return B.\u0275prov=(0,E.Yz7)({token:B,providedIn:"root",factory:()=>new La((0,E.LFG)(xe),window)}),B})();class La{constructor(he,z){this.document=he,this.window=z,this.offset=()=>[0,0]}setOffset(he){this.offset=Array.isArray(he)?()=>he:he}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(he){this.supportsScrolling()&&this.window.scrollTo(he[0],he[1])}scrollToAnchor(he){if(!this.supportsScrolling())return;const z=function Uo(B,he){const z=B.getElementById(he)||B.getElementsByName(he)[0];if(z)return z;if("function"==typeof B.createTreeWalker&&B.body&&"function"==typeof B.body.attachShadow){const Ie=B.createTreeWalker(B.body,NodeFilter.SHOW_ELEMENT);let Ge=Ie.currentNode;for(;Ge;){const Lt=Ge.shadowRoot;if(Lt){const zt=Lt.getElementById(he)||Lt.querySelector(`[name="${he}"]`);if(zt)return zt}Ge=Ie.nextNode()}}return null}(this.document,he);z&&(this.scrollToElement(z),z.focus())}setHistoryScrollRestoration(he){if(this.supportScrollRestoration()){const z=this.window.history;z&&z.scrollRestoration&&(z.scrollRestoration=he)}}scrollToElement(he){const z=he.getBoundingClientRect(),Ie=z.left+this.window.pageXOffset,Ge=z.top+this.window.pageYOffset,Lt=this.offset();this.window.scrollTo(Ie-Lt[0],Ge-Lt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const he=vs(this.window.history)||vs(Object.getPrototypeOf(this.window.history));return!(!he||!he.writable&&!he.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function vs(B){return Object.getOwnPropertyDescriptor(B,"scrollRestoration")}class Bo{}},6547:(en,ut,X)=>{"use strict";X.d(ut,{tb:()=>Db,AFp:()=>dv,ip1:()=>tE,hGG:()=>wC,z2F:()=>F_,Ojb:()=>Wp,sBO:()=>uC,Sil:()=>Uw,EJc:()=>Fw,Xts:()=>zh,SBq:()=>tp,lqb:()=>Dd,qLn:()=>sh,vpe:()=>Sp,XFs:()=>tn,OlP:()=>ps,zs3:()=>yc,ZZ4:()=>Rb,aQg:()=>Nb,soG:()=>Z0,YKP:()=>tT,h0i:()=>R_,PXZ:()=>Xw,R0b:()=>Xl,FiY:()=>Of,Lbi:()=>nm,g9A:()=>tm,n_E:()=>z0,Qsj:()=>hm,FYo:()=>dm,JOm:()=>lu,q3G:()=>va,tp0:()=>Oc,Rgc:()=>R0,dDg:()=>Kw,eoX:()=>hE,q4F:()=>tg,GfV:()=>pm,s_b:()=>q0,ifc:()=>Ee,MMx:()=>rT,Lck:()=>CS,eFA:()=>mE,G48:()=>aC,Gpc:()=>Ye,f3M:()=>tt,X6Q:()=>oC,$WT:()=>aa,MR2:()=>Gp,_c5:()=>SC,qFp:()=>NC,c2e:()=>nE,zSh:()=>Jg,HDt:()=>UE,wAp:()=>R,vHH:()=>re,lri:()=>cE,rWj:()=>dE,JZr:()=>ge,EiD:()=>zc,mCW:()=>du,qzn:()=>mc,JVY:()=>Wg,pB0:()=>Iy,eBb:()=>Cy,L6k:()=>qg,LAX:()=>j_,D6c:()=>OC,cg1:()=>Ty,kL8:()=>we,dqk:()=>Sr,Z0I:()=>Rr,eJc:()=>vb,QGY:()=>_f,F4k:()=>ty,RDi:()=>Wn,AaK:()=>rt,z3N:()=>gc,qOj:()=>lh,TTD:()=>Cu,_Bn:()=>eT,jDz:()=>iT,xp6:()=>ym,uIk:()=>ln,ekj:()=>vh,Suo:()=>OT,Xpm:()=>ya,lG2:()=>ba,Yz7:()=>On,cJS:()=>In,oAB:()=>Wa,Yjl:()=>Is,Y36:()=>af,_UZ:()=>wl,BQk:()=>fp,ynx:()=>fh,qZA:()=>gf,TgZ:()=>jm,EpF:()=>ey,n5z:()=>Ul,LFG:()=>Zr,$8M:()=>Bl,$Z:()=>wv,NdJ:()=>ph,CRH:()=>RT,kcU:()=>Ps,O4$:()=>pi,oxw:()=>Cg,ALo:()=>_T,lcZ:()=>bT,Hsn:()=>v0,F$t:()=>Vm,Q6J:()=>hh,DdM:()=>dT,VKq:()=>hT,WLB:()=>fT,iGM:()=>kT,MAs:()=>hp,KtG:()=>nl,CHM:()=>Cc,LSH:()=>Gh,P3R:()=>Hp,YNc:()=>Sl,W1O:()=>jT,_uU:()=>I_,Oqu:()=>If,hij:()=>dy,AsE:()=>D_,Gf:()=>PT});var E=X(8929),N=X(2654),fe=X(6498),Be=X(6787),_e=X(1762);class He{constructor(s,d){this.subjectFactory=s,this.selector=d}call(s,d){const{selector:p}=this,m=this.subjectFactory(),T=p(m).subscribe(s);return T.add(d.subscribe(m)),T}}var Re=X(4327);function Ue(){return new E.xQ}function Ae(r){for(let s in r)if(r[s]===Ae)return s;throw Error("Could not find renamed property on target object.")}function Fe(r,s){for(const d in s)s.hasOwnProperty(d)&&!r.hasOwnProperty(d)&&(r[d]=s[d])}function rt(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(rt).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const s=r.toString();if(null==s)return""+s;const d=s.indexOf("\n");return-1===d?s:s.substring(0,d)}function ce(r,s){return null==r||""===r?null===s?"":s:null==s||""===s?r:r+" "+s}const wt=Ae({__forward_ref__:Ae});function Ye(r){return r.__forward_ref__=Ye,r.toString=function(){return rt(this())},r}function Ke(r){return Ze(r)?r():r}function Ze(r){return"function"==typeof r&&r.hasOwnProperty(wt)&&r.__forward_ref__===Ye}function lt(r){return r&&!!r.\u0275providers}const ge="https://g.co/ng/security#xss";class re extends Error{constructor(s,d){super(function Ct(r,s){return`NG0${Math.abs(r)}${s?": "+s:""}`}(s,d)),this.code=s}}function bt(r){return"string"==typeof r?r:null==r?"":String(r)}function ot(r,s){throw new re(-201,!1)}function Nn(r,s){null==r&&function Cn(r,s,d,p){throw new Error(`ASSERTION ERROR: ${r}`+(null==p?"":` [Expected=> ${d} ${p} ${s} <=Actual]`))}(s,r,null,"!=")}function On(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function In(r){return{providers:r.providers||[],imports:r.imports||[]}}function Tr(r){return ir(r,_r)||ir(r,sr)}function Rr(r){return null!==Tr(r)}function ir(r,s){return r.hasOwnProperty(s)?r[s]:null}function oi(r){return r&&(r.hasOwnProperty(Ht)||r.hasOwnProperty(Hn))?r[Ht]:null}const _r=Ae({\u0275prov:Ae}),Ht=Ae({\u0275inj:Ae}),sr=Ae({ngInjectableDef:Ae}),Hn=Ae({ngInjectorDef:Ae});var tn=(()=>((tn=tn||{})[tn.Default=0]="Default",tn[tn.Host=1]="Host",tn[tn.Self=2]="Self",tn[tn.SkipSelf=4]="SkipSelf",tn[tn.Optional=8]="Optional",tn))();let Rn;function ai(r){const s=Rn;return Rn=r,s}function Oi(r,s,d){const p=Tr(r);return p&&"root"==p.providedIn?void 0===p.value?p.value=p.factory():p.value:d&tn.Optional?null:void 0!==s?s:void ot(rt(r))}const Sr=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Tn={},Vr="__NG_DI_FLAG__",Li="ngTempTokenPath",Hr=/\n/gm,$i="__source";let Zi;function ni(r){const s=Zi;return Zi=r,s}function ds(r,s=tn.Default){if(void 0===Zi)throw new re(-203,!1);return null===Zi?Oi(r,void 0,s):Zi.get(r,s&tn.Optional?null:void 0,s)}function Zr(r,s=tn.Default){return(function Ei(){return Rn}()||ds)(Ke(r),s)}function tt(r,s=tn.Default){return Zr(r,ve(s))}function ve(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function Ce(r){const s=[];for(let d=0;d<r.length;d++){const p=Ke(r[d]);if(Array.isArray(p)){if(0===p.length)throw new re(900,!1);let m,T=tn.Default;for(let I=0;I<p.length;I++){const P=p[I],V=Oe(P);"number"==typeof V?-1===V?m=P.token:T|=V:m=P}s.push(Zr(m,T))}else s.push(Zr(p))}return s}function be(r,s){return r[Vr]=s,r.prototype[Vr]=s,r}function Oe(r){return r[Vr]}function gn(r){return{toString:r}.toString()}var me=(()=>((me=me||{})[me.OnPush=0]="OnPush",me[me.Default=1]="Default",me))(),Ee=(()=>{return(r=Ee||(Ee={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",Ee;var r})();const qe={},ct=[],Gt=Ae({\u0275cmp:Ae}),ar=Ae({\u0275dir:Ae}),Nr=Ae({\u0275pipe:Ae}),ii=Ae({\u0275mod:Ae}),Dt=Ae({\u0275fac:Ae}),yt=Ae({__NG_ELEMENT_ID__:Ae}),Kt=Ae({__NG_ENV_ID__:Ae});function er(r,s,d){let p=r.length;for(;;){const m=r.indexOf(s,d);if(-1===m)return m;if(0===m||r.charCodeAt(m-1)<=32){const T=s.length;if(m+T===p||r.charCodeAt(m+T)<=32)return m}d=m+1}}function Qn(r,s,d){let p=0;for(;p<d.length;){const m=d[p];if("number"==typeof m){if(0!==m)break;p++;const T=d[p++],I=d[p++],P=d[p++];r.setAttribute(s,I,P,T)}else{const T=m,I=d[++p];yr(T)?r.setProperty(s,T,I):r.setAttribute(s,T,I),p++}}return p}function cr(r){return 3===r||4===r||6===r}function yr(r){return 64===r.charCodeAt(0)}function Fr(r,s){if(null!==s&&0!==s.length)if(null===r||0===r.length)r=s.slice();else{let d=-1;for(let p=0;p<s.length;p++){const m=s[p];"number"==typeof m?d=m:0===d||si(r,d,m,null,-1===d||2===d?s[++p]:null)}}return r}function si(r,s,d,p,m){let T=0,I=r.length;if(-1===s)I=-1;else for(;T<r.length;){const P=r[T++];if("number"==typeof P){if(P===s){I=-1;break}if(P>s){I=T-1;break}}}for(;T<r.length;){const P=r[T];if("number"==typeof P)break;if(P===d){if(null===p)return void(null!==m&&(r[T+1]=m));if(p===r[T+1])return void(r[T+2]=m)}T++,null!==p&&T++,null!==m&&T++}-1!==I&&(r.splice(I,0,s),T=I+1),r.splice(T++,0,d),null!==p&&r.splice(T++,0,p),null!==m&&r.splice(T++,0,m)}const Yr="ng-template";function Ji(r,s,d){let p=0,m=!0;for(;p<r.length;){let T=r[p++];if("string"==typeof T&&m){const I=r[p++];if(d&&"class"===T&&-1!==er(I.toLowerCase(),s,0))return!0}else{if(1===T){for(;p<r.length&&"string"==typeof(T=r[p++]);)if(T.toLowerCase()===s)return!0;return!1}"number"==typeof T&&(m=!1)}}return!1}function Fi(r){return 4===r.type&&r.value!==Yr}function po(r,s,d){return s===(4!==r.type||d?r.value:Yr)}function go(r,s,d){let p=4;const m=r.attrs||[],T=function Lo(r){for(let s=0;s<r.length;s++)if(cr(r[s]))return s;return r.length}(m);let I=!1;for(let P=0;P<s.length;P++){const V=s[P];if("number"!=typeof V){if(!I)if(4&p){if(p=2|1&p,""!==V&&!po(r,V,d)||""===V&&1===s.length){if(Fs(p))return!1;I=!0}}else{const se=8&p?V:s[++P];if(8&p&&null!==r.attrs){if(!Ji(r.attrs,se,d)){if(Fs(p))return!1;I=!0}continue}const Qe=Zs(8&p?"class":V,m,Fi(r),d);if(-1===Qe){if(Fs(p))return!1;I=!0;continue}if(""!==se){let Et;Et=Qe>T?"":m[Qe+1].toLowerCase();const Mt=8&p?Et:null;if(Mt&&-1!==er(Mt,se,0)||2&p&&se!==Et){if(Fs(p))return!1;I=!0}}}}else{if(!I&&!Fs(p)&&!Fs(V))return!1;if(I&&Fs(V))continue;I=!1,p=V|1&p}}return Fs(p)||I}function Fs(r){return 0==(1&r)}function Zs(r,s,d,p){if(null===s)return-1;let m=0;if(p||!d){let T=!1;for(;m<s.length;){const I=s[m];if(I===r)return m;if(3===I||6===I)T=!0;else{if(1===I||2===I){let P=s[++m];for(;"string"==typeof P;)P=s[++m];continue}if(4===I)break;if(0===I){m+=4;continue}}m+=T?1:2}return-1}return function Ra(r,s){let d=r.indexOf(4);if(d>-1)for(d++;d<r.length;){const p=r[d];if("number"==typeof p)return-1;if(p===s)return d;d++}return-1}(s,r)}function Oa(r,s,d=!1){for(let p=0;p<s.length;p++)if(go(r,s[p],d))return!0;return!1}function so(r,s){e:for(let d=0;d<s.length;d++){const p=s[d];if(r.length===p.length){for(let m=0;m<r.length;m++)if(r[m]!==p[m])continue e;return!0}}return!1}function $s(r,s){return r?":not("+s.trim()+")":s}function sa(r){let s=r[0],d=1,p=2,m="",T=!1;for(;d<r.length;){let I=r[d];if("string"==typeof I)if(2&p){const P=r[++d];m+="["+I+(P.length>0?'="'+P+'"':"")+"]"}else 8&p?m+="."+I:4&p&&(m+=" "+I);else""!==m&&!Fs(I)&&(s+=$s(T,m),m=""),p=I,T=T||!Fs(p);d++}return""!==m&&(s+=$s(T,m)),s}function ya(r){return gn(()=>{const s=vt(r),d={...s,decls:r.decls,vars:r.vars,template:r.template,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,onPush:r.changeDetection===me.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&r.dependencies||null,getStandaloneInjector:null,data:r.data||{},encapsulation:r.encapsulation||Ee.Emulated,styles:r.styles||ct,_:null,schemas:r.schemas||null,tView:null,id:""};ft(d);const p=r.dependencies;return d.directiveDefs=At(p,!1),d.pipeDefs=At(p,!0),d.id=function kn(r){let s=0;const d=JSON.stringify([r.selectors,r.ngContentSelectors,r.hostVars,r.hostAttrs,r.consts,r.vars,r.decls,r.encapsulation,r.standalone,r.exportAs,r.inputs,r.outputs,Object.getOwnPropertyNames(r.type.prototype),!!r.contentQueries,!!r.viewQuery]);for(const m of d)s=Math.imul(31,s)+m.charCodeAt(0)<<0;return s+=2147483648,"c"+s}(d),d})}function es(r){return wr(r)||gi(r)}function oa(r){return null!==r}function Wa(r){return gn(()=>({type:r.type,bootstrap:r.bootstrap||ct,declarations:r.declarations||ct,imports:r.imports||ct,exports:r.exports||ct,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function mu(r,s){if(null==r)return qe;const d={};for(const p in r)if(r.hasOwnProperty(p)){let m=r[p],T=m;Array.isArray(m)&&(T=m[1],m=m[0]),d[m]=p,s&&(s[m]=T)}return d}function ba(r){return gn(()=>{const s=vt(r);return ft(s),s})}function Is(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function wr(r){return r[Gt]||null}function gi(r){return r[ar]||null}function wi(r){return r[Nr]||null}function aa(r){const s=wr(r)||gi(r)||wi(r);return null!==s&&s.standalone}function xs(r,s){const d=r[ii]||null;if(!d&&!0===s)throw new Error(`Type ${rt(r)} does not have '\u0275mod' property.`);return d}function vt(r){const s={};return{type:r.type,providersResolver:null,factory:null,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:s,exportAs:r.exportAs||null,standalone:!0===r.standalone,selectors:r.selectors||ct,viewQuery:r.viewQuery||null,features:r.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:mu(r.inputs,s),outputs:mu(r.outputs)}}function ft(r){r.features?.forEach(s=>s(r))}function At(r,s){if(!r)return null;const d=s?wi:es;return()=>("function"==typeof r?r():r).map(p=>d(p)).filter(oa)}const Gn=0,cn=1,$n=2,fr=3,Er=4,$r=5,Ci=6,Wo=7,Ri=8,js=9,Bi=10,Dr=11,wo=12,Qo=13,oo=14,ji=15,Xo=16,vo=17,hs=18,Fo=19,jo=20,Ds=21,Jo=22,qo=23,Na=24,Wr=25,ao=1,La=2,vs=7,Uo=8,Ii=9,As=11;function ea(r){return Array.isArray(r)&&"object"==typeof r[ao]}function yo(r){return Array.isArray(r)&&!0===r[ao]}function Ko(r){return 0!=(4&r.flags)}function Ys(r){return r.componentOffset>-1}function Qs(r){return 1==(1&r.flags)}function Xs(r){return!!r.template}function Xr(r){return 0!=(512&r[$n])}function oe(r,s){return r.hasOwnProperty(Dt)?r[Dt]:null}let Qt=Sr.WeakRef??class Nt{constructor(s){this.ref=s}deref(){return this.ref}},Pr=0,Mr=null,Ui=!1;function Gr(r){const s=Mr;return Mr=r,s}class ui{constructor(){this.id=Pr++,this.ref=function tr(r){return new Qt(r)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[s,d]of this.producers){const p=d.producerNode.deref();if(void 0!==p&&d.atTrackingVersion===this.trackingVersion){if(p.producerPollStatus(d.seenValueVersion))return!0}else this.producers.delete(s),p?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const s=Ui;Ui=!0;try{for(const[d,p]of this.consumers){const m=p.consumerNode.deref();void 0!==m&&m.trackingVersion===p.atTrackingVersion?m.onConsumerDependencyMayHaveChanged():(this.consumers.delete(d),m?.producers.delete(this.id))}}finally{Ui=s}}producerAccessed(){if(Ui)throw new Error("");if(null===Mr)return;let s=Mr.producers.get(this.id);void 0===s?(s={consumerNode:Mr.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Mr.trackingVersion},Mr.producers.set(this.id,s),this.consumers.set(Mr.id,s)):(s.seenValueVersion=this.valueVersion,s.atTrackingVersion=Mr.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Mr?.consumerAllowSignalWrites}producerPollStatus(s){return this.valueVersion!==s||(this.onProducerUpdateValueVersion(),this.valueVersion!==s)}}let Ki=null;const vu=()=>{};class ei extends ui{constructor(s,d,p){super(),this.watch=s,this.schedule=d,this.dirty=!1,this.cleanupFn=vu,this.registerOnCleanup=m=>{this.cleanupFn=m},this.consumerAllowSignalWrites=p}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const s=Gr(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=vu,this.watch(this.registerOnCleanup)}finally{Gr(s)}}cleanup(){this.cleanupFn()}}class kl{constructor(s,d,p){this.previousValue=s,this.currentValue=d,this.firstChange=p}isFirstChange(){return this.firstChange}}function Cu(){return Ya}function Ya(r){return r.type.prototype.ngOnChanges&&(r.setInput=yu),Qa}function Qa(){const r=Ea(this),s=r?.current;if(s){const d=r.previous;if(d===qe)r.previous=s;else for(let p in s)d[p]=s[p];r.current=null,this.ngOnChanges(s)}}function yu(r,s,d,p){const m=this.declaredInputs[d],T=Ea(r)||function Io(r,s){return r[as]=s}(r,{previous:qe,current:null}),I=T.current||(T.current={}),P=T.previous,V=P[m];I[m]=new kl(V&&V.currentValue,s,P===qe),r[p]=s}Cu.ngInherit=!0;const as="__ngSimpleChanges__";function Ea(r){return r[as]||null}const Xa=function(r,s,d){},Bu="svg";function li(r){for(;Array.isArray(r);)r=r[Gn];return r}function eu(r,s){return li(s[r])}function B(r,s){return li(s[r.index])}function z(r,s){return r.data[s]}function Ie(r,s){return r[s]}function Ge(r,s){const d=s[r];return ea(d)?d:d[Gn]}function zt(r){return 128==(128&r[$n])}function ti(r,s){return null==s?null:r[s]}function mi(r){r[vo]=0}function hi(r){1024&r[$n]||(r[$n]|=1024,us(r,1))}function mr(r){1024&r[$n]&&(r[$n]&=-1025,us(r,-1))}function us(r,s){let d=r[fr];if(null===d)return;d[$r]+=s;let p=d;for(d=d[fr];null!==d&&(1===s&&1===p[$r]||-1===s&&0===p[$r]);)d[$r]+=s,p=d,d=d[fr]}const Jn={lFrame:ca(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function jr(){return Jn.bindingsEnabled}function Sa(){return null!==Jn.skipHydrationRootTNode}function _n(){return Jn.lFrame.lView}function qr(){return Jn.lFrame.tView}function Cc(r){return Jn.lFrame.contextLView=r,r[Ri]}function nl(r){return Jn.lFrame.contextLView=null,r}function Us(){let r=nd();for(;null!==r&&64===r.type;)r=r.parent;return r}function nd(){return Jn.lFrame.currentTNode}function eo(r,s){const d=Jn.lFrame;d.currentTNode=r,d.isParent=s}function nu(){return Jn.lFrame.isParent}function rl(){Jn.lFrame.isParent=!1}function ys(){const r=Jn.lFrame;let s=r.bindingRootIndex;return-1===s&&(s=r.bindingRootIndex=r.tView.bindingStartIndex),s}function Ln(){return Jn.lFrame.bindingIndex++}function wa(r){const s=Jn.lFrame,d=s.bindingIndex;return s.bindingIndex=s.bindingIndex+r,d}function mn(r,s){const d=Jn.lFrame;d.bindingIndex=d.bindingRootIndex=r,Pl(s)}function Pl(r){Jn.lFrame.currentDirectiveIndex=r}function xc(){return Jn.lFrame.currentQueryIndex}function fl(r){Jn.lFrame.currentQueryIndex=r}function Th(r){const s=r[cn];return 2===s.type?s.declTNode:1===s.type?r[Ci]:null}function Ol(r,s,d){if(d&tn.SkipSelf){let m=s,T=r;for(;!(m=m.parent,null!==m||d&tn.Host||(m=Th(T),null===m||(T=T[oo],10&m.type))););if(null===m)return!1;s=m,r=T}const p=Jn.lFrame=rd();return p.currentTNode=s,p.lView=r,!0}function Ca(r){const s=rd(),d=r[cn];Jn.lFrame=s,s.currentTNode=d.firstChild,s.lView=r,s.tView=d,s.contextLView=r,s.bindingIndex=d.bindingStartIndex,s.inI18n=!1}function rd(){const r=Jn.lFrame,s=null===r?null:r.child;return null===s?ca(r):s}function ca(r){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=s),s}function id(){const r=Jn.lFrame;return Jn.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Dc=id;function Ir(){const r=id();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Ti(){return Jn.lFrame.selectedIndex}function Zn(r){Jn.lFrame.selectedIndex=r}function Qr(){const r=Jn.lFrame;return z(r.tView,r.selectedIndex)}function pi(){Jn.lFrame.currentNamespace=Bu}function Ps(){!function Yn(){Jn.lFrame.currentNamespace=null}()}let ss=!0;function k(){return ss}function F(r){ss=r}function H(r,s){for(let d=s.directiveStart,p=s.directiveEnd;d<p;d++){const T=r.data[d].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:P,ngAfterViewInit:V,ngAfterViewChecked:se,ngOnDestroy:De}=T;I&&(r.contentHooks??=[]).push(-d,I),P&&((r.contentHooks??=[]).push(d,P),(r.contentCheckHooks??=[]).push(d,P)),V&&(r.viewHooks??=[]).push(-d,V),se&&((r.viewHooks??=[]).push(d,se),(r.viewCheckHooks??=[]).push(d,se)),null!=De&&(r.destroyHooks??=[]).push(d,De)}}function ae(r,s,d){Tt(r,s,3,d)}function Pe(r,s,d,p){(3&r[$n])===d&&Tt(r,s,d,p)}function Le(r,s){let d=r[$n];(3&d)===s&&(d&=4095,d+=1,r[$n]=d)}function Tt(r,s,d,p){const T=p??-1,I=s.length-1;let P=0;for(let V=void 0!==p?65535&r[vo]:0;V<I;V++)if("number"==typeof s[V+1]){if(P=s[V],null!=p&&P>=p)break}else s[V]<0&&(r[vo]+=65536),(P<T||-1==T)&&(vr(r,d,s,V),r[vo]=(4294901760&r[vo])+V+2),V++}function wn(r,s){Xa(4,r,s);const d=Gr(null);try{s.call(r)}finally{Gr(d),Xa(5,r,s)}}function vr(r,s,d,p){const m=d[p]<0,T=d[p+1],P=r[m?-d[p]:d[p]];m?r[$n]>>12<r[vo]>>16&&(3&r[$n])===s&&(r[$n]+=4096,wn(P,T)):wn(P,T)}const hr=-1;class ci{constructor(s,d,p){this.factory=s,this.resolving=!1,this.canSeeViewProviders=d,this.injectImpl=p}}function Qi(r){return r!==hr}function su(r){return 32767&r}function sd(r,s){let d=function Ud(r){return r>>16}(r),p=s;for(;d>0;)p=p[oo],d--;return p}let Gu=!0;function fn(r){const s=Gu;return Gu=r,s}const Da=255,pl=5;let Mo=0;const zu={};function ha(r,s){const d=Ba(r,s);if(-1!==d)return d;const p=s[cn];p.firstCreatePass&&(r.injectorIndex=s.length,Rl(p.data,r),Rl(s,null),Rl(p.blueprint,null));const m=Nl(r,s),T=r.injectorIndex;if(Qi(m)){const I=su(m),P=sd(m,s),V=P[cn].data;for(let se=0;se<8;se++)s[T+se]=P[I+se]|V[I+se]}return s[T+8]=m,T}function Rl(r,s){r.push(0,0,0,0,0,0,0,0,s)}function Ba(r,s){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===s[r.injectorIndex+8]?-1:r.injectorIndex}function Nl(r,s){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let d=0,p=null,m=s;for(;null!==m;){if(p=Bd(m),null===p)return hr;if(d++,m=m[oo],-1!==p.injectorIndex)return p.injectorIndex|d<<16}return hr}function Mf(r,s,d){!function Aa(r,s,d){let p;"string"==typeof d?p=d.charCodeAt(0)||0:d.hasOwnProperty(yt)&&(p=d[yt]),null==p&&(p=d[yt]=Mo++);const m=p&Da;s.data[r+(m>>pl)]|=1<<m}(r,s,d)}function tc(r,s,d){if(d&tn.Optional||void 0!==r)return r;ot()}function Eh(r,s,d,p){if(d&tn.Optional&&void 0===p&&(p=null),!(d&(tn.Self|tn.Host))){const m=r[js],T=ai(void 0);try{return m?m.get(s,p,d&tn.Optional):Oi(s,p,d&tn.Optional)}finally{ai(T)}}return tc(p,0,d)}function Ll(r,s,d,p=tn.Default,m){if(null!==r){if(2048&s[$n]){const I=function wp(r,s,d,p,m){let T=r,I=s;for(;null!==T&&null!==I&&2048&I[$n]&&!(512&I[$n]);){const P=Mc(T,I,d,p|tn.Self,zu);if(P!==zu)return P;let V=T.parent;if(!V){const se=I[jo];if(se){const De=se.get(d,zu,p);if(De!==zu)return De}V=Bd(I),I=I[oo]}T=V}return m}(r,s,d,p,zu);if(I!==zu)return I}const T=Mc(r,s,d,p,zu);if(T!==zu)return T}return Eh(s,d,p,m)}function Mc(r,s,d,p,m){const T=function nc(r){if("string"==typeof r)return r.charCodeAt(0)||0;const s=r.hasOwnProperty(yt)?r[yt]:void 0;return"number"==typeof s?s>=0?s&Da:Pc:s}(d);if("function"==typeof T){if(!Ol(s,r,p))return p&tn.Host?tc(m,0,p):Eh(s,d,p,m);try{const I=T(p);if(null!=I||p&tn.Optional)return I;ot()}finally{Dc()}}else if("number"==typeof T){let I=null,P=Ba(r,s),V=hr,se=p&tn.Host?s[ji][Ci]:null;for((-1===P||p&tn.SkipSelf)&&(V=-1===P?Nl(r,s):s[P+8],V!==hr&&Sh(p,!1)?(I=s[cn],P=su(V),s=sd(V,s)):P=-1);-1!==P;){const De=s[cn];if(ad(T,P,De.data)){const Qe=kf(P,s,d,I,p,se);if(Qe!==zu)return Qe}V=s[P+8],V!==hr&&Sh(p,s[cn].data[P+8]===se)&&ad(T,P,s)?(I=De,P=su(V),s=sd(V,s)):P=-1}}return m}function kf(r,s,d,p,m,T){const I=s[cn],P=I.data[r+8],De=kc(P,I,d,null==p?Ys(P)&&Gu:p!=I&&0!=(3&P.type),m&tn.Host&&T===P);return null!==De?Fl(s,I,De,P):zu}function kc(r,s,d,p,m){const T=r.providerIndexes,I=s.data,P=1048575&T,V=r.directiveStart,De=T>>20,Et=m?P+De:r.directiveEnd;for(let Mt=p?P:P+De;Mt<Et;Mt++){const yn=I[Mt];if(Mt<V&&d===yn||Mt>=V&&yn.type===d)return Mt}if(m){const Mt=I[V];if(Mt&&Xs(Mt)&&Mt.type===d)return V}return null}function Fl(r,s,d,p){let m=r[d];const T=s.data;if(function Ks(r){return r instanceof ci}(m)){const I=m;I.resolving&&function Y(r,s){const d=s?`. Dependency path: ${s.join(" > ")} > ${r}`:"";throw new re(-200,`Circular dependency in DI detected for ${r}${d}`)}(function st(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():bt(r)}(T[d]));const P=fn(I.canSeeViewProviders);I.resolving=!0;const V=I.injectImpl?ai(I.injectImpl):null;Ol(r,p,tn.Default);try{m=r[d]=I.factory(void 0,T,r,p),s.firstCreatePass&&d>=p.directiveStart&&function D(r,s,d){const{ngOnChanges:p,ngOnInit:m,ngDoCheck:T}=s.type.prototype;if(p){const I=Ya(s);(d.preOrderHooks??=[]).push(r,I),(d.preOrderCheckHooks??=[]).push(r,I)}m&&(d.preOrderHooks??=[]).push(0-r,m),T&&((d.preOrderHooks??=[]).push(r,T),(d.preOrderCheckHooks??=[]).push(r,T))}(d,T[d],s)}finally{null!==V&&ai(V),fn(P),I.resolving=!1,Dc()}}return m}function ad(r,s,d){return!!(d[s+(r>>pl)]&1<<r)}function Sh(r,s){return!(r&tn.Self||r&tn.Host&&s)}class jl{constructor(s,d){this._tNode=s,this._lView=d}get(s,d,p){return Ll(this._tNode,this._lView,s,ve(p),d)}}function Pc(){return new jl(Us(),_n())}function Ul(r){return gn(()=>{const s=r.prototype.constructor,d=s[Dt]||rc(s),p=Object.prototype;let m=Object.getPrototypeOf(r.prototype).constructor;for(;m&&m!==p;){const T=m[Dt]||rc(m);if(T&&T!==d)return T;m=Object.getPrototypeOf(m)}return T=>new T})}function rc(r){return Ze(r)?()=>{const s=rc(Ke(r));return s&&s()}:oe(r)}function Bd(r){const s=r[cn],d=s.type;return 2===d?s.declTNode:1===d?r[Ci]:null}function Bl(r){return function jg(r,s){if("class"===s)return r.classes;if("style"===s)return r.styles;const d=r.attrs;if(d){const p=d.length;let m=0;for(;m<p;){const T=d[m];if(cr(T))break;if(0===T)m+=2;else if("number"==typeof T)for(m++;m<p&&"string"==typeof d[m];)m++;else{if(T===s)return d[m+1];m+=2}}}return null}(Us(),r)}const Au="__parameters__";function il(r,s,d){return gn(()=>{const p=function ou(r){return function(...d){if(r){const p=r(...d);for(const m in p)this[m]=p[m]}}}(s);function m(...T){if(this instanceof m)return p.apply(this,T),this;const I=new m(...T);return P.annotation=I,P;function P(V,se,De){const Qe=V.hasOwnProperty(Au)?V[Au]:Object.defineProperty(V,Au,{value:[]})[Au];for(;Qe.length<=De;)Qe.push(null);return(Qe[De]=Qe[De]||[]).push(I),V}}return d&&(m.prototype=Object.create(d.prototype)),m.prototype.ngMetadataName=r,m.annotationCls=m,m})}function Pu(r,s){r.forEach(d=>Array.isArray(d)?Pu(d,s):s(d))}function wh(r,s,d){s>=r.length?r.push(d):r.splice(s,0,d)}function O(r,s){return s>=r.length-1?r.pop():r.splice(s,1)[0]}function G(r,s){const d=[];for(let p=0;p<r;p++)d.push(s);return d}function Ft(r,s,d){let p=Fn(r,s);return p>=0?r[1|p]=d:(p=~p,function ht(r,s,d,p){let m=r.length;if(m==s)r.push(d,p);else if(1===m)r.push(p,r[0]),r[0]=d;else{for(m--,r.push(r[m-1],r[m]);m>s;)r[m]=r[m-2],m--;r[s]=d,r[s+1]=p}}(r,p,s,d)),p}function Kn(r,s){const d=Fn(r,s);if(d>=0)return r[1|d]}function Fn(r,s){return function Ur(r,s,d){let p=0,m=r.length>>d;for(;m!==p;){const T=p+(m-p>>1),I=r[T<<d];if(s===I)return T<<d;I>s?m=T:p=T+1}return~(m<<d)}(r,s,1)}const Of=be(il("Optional"),8),Oc=be(il("SkipSelf"),4);function pa(r){return 128==(128&r.flags)}var lu=(()=>((lu=lu||{})[lu.Important=1]="Important",lu[lu.DashCase=2]="DashCase",lu))();const Ph=/^>|^->|<!--|-->|--!>|<!-$/g,Oh=/(<|>)/,qu="\u200b$1\u200b";const lc=new Map;let Rh=0;const Nh="__ngContext__";function $o(r,s){ea(s)?(r[Nh]=s[Fo],function Ku(r){lc.set(r[Fo],r)}(s)):r[Nh]=s}let Lc;function cc(r,s){return Lc(r,s)}function jc(r){const s=r[fr];return yo(s)?s[fr]:s}function Ru(r){return Op(r[wo])}function jh(r){return Op(r[Er])}function Op(r){for(;null!==r&&!yo(r);)r=r[Er];return r}function Nu(r,s,d,p,m){if(null!=p){let T,I=!1;yo(p)?T=p:ea(p)&&(I=!0,p=p[Gn]);const P=li(p);0===r&&null!==d?null==m?Vf(s,d,P):Lu(s,d,P,m||null,!0):1===r&&null!==d?Lu(s,d,P,m||null,!0):2===r?function zl(r,s,d){const p=yi(r,s);p&&function Bh(r,s,d,p){r.removeChild(s,d,p)}(r,p,s,d)}(s,P,I):3===r&&s.destroyNode(P),null!=T&&function _l(r,s,d,p,m){const T=d[vs];T!==li(d)&&Nu(s,r,p,T,m);for(let P=As;P<d.length;P++){const V=d[P];Wl(V[cn],V,r,s,p,T)}}(s,r,T,d,m)}}function no(r,s){return r.createComment(function yd(r){return r.replace(Ph,s=>s.replace(Oh,qu))}(s))}function bd(r,s,d){return r.createElement(s,d)}function Ed(r,s){const d=r[Ii],p=d.indexOf(s);mr(s),d.splice(p,1)}function Zu(r,s){if(r.length<=As)return;const d=As+s,p=r[d];if(p){const m=p[Xo];null!==m&&m!==r&&Ed(m,p),s>0&&(r[d-1][Er]=p[Er]);const T=O(r,As+s);!function Kd(r,s){Wl(r,s,s[Dr],2,null,null),s[Gn]=null,s[Ci]=null}(p[cn],p);const I=T[hs];null!==I&&I.detachView(T[cn]),p[fr]=null,p[Er]=null,p[$n]&=-129}return p}function Uh(r,s){if(!(256&s[$n])){const d=s[Dr];s[qo]?.destroy(),s[Na]?.destroy(),d.destroyNode&&Wl(r,s,d,3,null,null),function Td(r){let s=r[wo];if(!s)return zn(r[cn],r);for(;s;){let d=null;if(ea(s))d=s[wo];else{const p=s[As];p&&(d=p)}if(!d){for(;s&&!s[Er]&&s!==r;)ea(s)&&zn(s[cn],s),s=s[fr];null===s&&(s=r),ea(s)&&zn(s[cn],s),d=s&&s[Er]}s=d}}(s)}}function zn(r,s){if(!(256&s[$n])){s[$n]&=-129,s[$n]|=256,function Uc(r,s){let d;if(null!=r&&null!=(d=r.destroyHooks))for(let p=0;p<d.length;p+=2){const m=s[d[p]];if(!(m instanceof ci)){const T=d[p+1];if(Array.isArray(T))for(let I=0;I<T.length;I+=2){const P=m[T[I]],V=T[I+1];Xa(4,P,V);try{V.call(P)}finally{Xa(5,P,V)}}else{Xa(4,m,T);try{T.call(m)}finally{Xa(5,m,T)}}}}}(r,s),function dc(r,s){const d=r.cleanup,p=s[Wo];if(null!==d)for(let T=0;T<d.length-1;T+=2)if("string"==typeof d[T]){const I=d[T+3];I>=0?p[I]():p[-I].unsubscribe(),T+=2}else d[T].call(p[d[T+1]]);null!==p&&(s[Wo]=null);const m=s[Ds];if(null!==m){for(let T=0;T<m.length;T++)(0,m[T])();s[Ds]=null}}(r,s),1===s[cn].type&&s[Dr].destroy();const d=s[Xo];if(null!==d&&yo(s[fr])){d!==s[fr]&&Ed(d,s);const p=s[hs];null!==p&&p.detachView(r)}!function cu(r){lc.delete(r[Fo])}(s)}}function Sd(r,s,d){return function Bc(r,s,d){let p=s;for(;null!==p&&40&p.type;)p=(s=p).parent;if(null===p)return d[Gn];{const{componentOffset:m}=p;if(m>-1){const{encapsulation:T}=r.data[p.directiveStart+m];if(T===Ee.None||T===Ee.Emulated)return null}return B(p,d)}}(r,s.parent,d)}function Lu(r,s,d,p,m){r.insertBefore(s,d,p,m)}function Vf(r,s,d){r.appendChild(s,d)}function Go(r,s,d,p,m){null!==p?Lu(r,s,d,p,m):Vf(r,s,d)}function yi(r,s){return r.parentNode(s)}function Zd(r,s,d){return Id(r,s,d)}let ra,x,Un,zi,Id=function Cd(r,s,d){return 40&r.type?B(r,d):null};function Vc(r,s,d,p){const m=Sd(r,p,s),T=s[Dr],P=Zd(p.parent||s[Ci],p,s);if(null!=m)if(Array.isArray(d))for(let V=0;V<d.length;V++)Go(T,m,d[V],P,!1);else Go(T,m,d,P,!1);void 0!==ra&&ra(T,p,s,d,m)}function Tu(r,s){if(null!==s){const d=s.type;if(3&d)return B(s,r);if(4&d)return yl(-1,r[s.index]);if(8&d){const p=s.child;if(null!==p)return Tu(r,p);{const m=r[s.index];return yo(m)?yl(-1,m):li(m)}}if(32&d)return cc(s,r)()||li(r[s.index]);{const p=Yu(r,s);return null!==p?Array.isArray(p)?p[0]:Tu(jc(r[ji]),p):Tu(r,s.next)}}return null}function Yu(r,s){return null!==s?r[ji][Ci].projection[s.projection]:null}function yl(r,s){const d=As+r+1;if(d<s.length){const p=s[d],m=p[cn].firstChild;if(null!==m)return Tu(p,m)}return s[vs]}function hc(r,s,d,p,m,T,I){for(;null!=d;){const P=p[d.index],V=d.type;if(I&&0===s&&(P&&$o(li(P),p),d.flags|=2),32!=(32&d.flags))if(8&V)hc(r,s,d.child,p,m,T,!1),Nu(s,r,m,P,T);else if(32&V){const se=cc(d,p);let De;for(;De=se();)Nu(s,r,m,De,T);Nu(s,r,m,P,T)}else 16&V?Yd(r,s,p,d,m,T):Nu(s,r,m,P,T);d=I?d.projectionNext:d.next}}function Wl(r,s,d,p,m,T){hc(d,p,r.firstChild,s,m,T,!1)}function Yd(r,s,d,p,m,T){const I=d[ji],V=I[Ci].projection[p.projection];if(Array.isArray(V))for(let se=0;se<V.length;se++)Nu(s,r,m,V[se],T);else{let se=V;const De=I[fr];pa(p)&&(se.flags|=128),hc(r,s,se,De,m,T,!0)}}function v(r,s,d){""===d?r.removeAttribute(s,"class"):r.setAttribute(s,"class",d)}function b(r,s,d){const{mergedAttrs:p,classes:m,styles:T}=d;null!==p&&Qn(r,s,p),null!==m&&v(r,s,m),null!==T&&function w(r,s,d){r.setAttribute(s,"style",d)}(r,s,T)}function le(r){return function K(){if(void 0===x&&(x=null,Sr.trustedTypes))try{x=Sr.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return x}()?.createHTML(r)||r}function Wn(r){Un=r}function bl(r){return function ma(){if(void 0===zi&&(zi=null,Sr.trustedTypes))try{zi=Sr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return zi}()?.createScriptURL(r)||r}class pc{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ge})`}}class $f extends pc{getTypeName(){return"HTML"}}class Fp extends pc{getTypeName(){return"Style"}}class jp extends pc{getTypeName(){return"Script"}}class Tl extends pc{getTypeName(){return"URL"}}class Vh extends pc{getTypeName(){return"ResourceURL"}}function gc(r){return r instanceof pc?r.changingThisBreaksApplicationSecurity:r}function mc(r,s){const d=function Gf(r){return r instanceof pc&&r.getTypeName()||null}(r);if(null!=d&&d!==s){if("ResourceURL"===d&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${d} (see ${ge})`)}return d===s}function Wg(r){return new $f(r)}function qg(r){return new Fp(r)}function Cy(r){return new jp(r)}function j_(r){return new Tl(r)}function Iy(r){return new Vh(r)}class Hc{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const d=(new window.DOMParser).parseFromString(le(s),"text/html").body;return null===d?this.inertDocumentHelper.getInertBodyElement(s):(d.removeChild(d.firstChild),d)}catch{return null}}}class Qd{constructor(s){this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(s){const d=this.inertDocument.createElement("template");return d.innerHTML=le(s),d}}const Up=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function du(r){return(r=String(r)).match(Up)?r:"unsafe:"+r}function hu(r){const s={};for(const d of r.split(","))s[d]=!0;return s}function Xd(...r){const s={};for(const d of r)for(const p in d)d.hasOwnProperty(p)&&(s[p]=!0);return s}const Dy=hu("area,br,col,hr,img,wbr"),ev=hu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),$c=hu("rp,rt"),$h=Xd(Dy,Xd(ev,hu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Xd($c,hu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Xd($c,ev)),Bp=hu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),tv=Xd(Bp,hu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),hu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),My=hu("script,style,template");class U_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let d=s.firstChild,p=!0;for(;d;)if(d.nodeType===Node.ELEMENT_NODE?p=this.startElement(d):d.nodeType===Node.TEXT_NODE?this.chars(d.nodeValue):this.sanitizedSomething=!0,p&&d.firstChild)d=d.firstChild;else for(;d;){d.nodeType===Node.ELEMENT_NODE&&this.endElement(d);let m=this.checkClobberedElement(d,d.nextSibling);if(m){d=m;break}d=this.checkClobberedElement(d,d.parentNode)}return this.buf.join("")}startElement(s){const d=s.nodeName.toLowerCase();if(!$h.hasOwnProperty(d))return this.sanitizedSomething=!0,!My.hasOwnProperty(d);this.buf.push("<"),this.buf.push(d);const p=s.attributes;for(let m=0;m<p.length;m++){const T=p.item(m),I=T.name,P=I.toLowerCase();if(!tv.hasOwnProperty(P)){this.sanitizedSomething=!0;continue}let V=T.value;Bp[P]&&(V=du(V)),this.buf.push(" ",I,'="',qf(V),'"')}return this.buf.push(">"),!0}endElement(s){const d=s.nodeName.toLowerCase();$h.hasOwnProperty(d)&&!Dy.hasOwnProperty(d)&&(this.buf.push("</"),this.buf.push(d),this.buf.push(">"))}chars(s){this.buf.push(qf(s))}checkClobberedElement(s,d){if(d&&(s.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return d}}const nv=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rv=/([^\#-~ |!])/g;function qf(r){return r.replace(/&/g,"&amp;").replace(nv,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(rv,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Gc;function zc(r,s){let d=null;try{Gc=Gc||function xy(r){const s=new Qd(r);return function Jm(){try{return!!(new window.DOMParser).parseFromString(le(""),"text/html")}catch{return!1}}()?new Hc(s):s}(r);let p=s?String(s):"";d=Gc.getInertBodyElement(p);let m=5,T=p;do{if(0===m)throw new Error("Failed to sanitize html because the input is unstable");m--,p=T,T=d.innerHTML,d=Gc.getInertBodyElement(p)}while(p!==T);return le((new U_).sanitizeChildren(Jd(d)||d))}finally{if(d){const p=Jd(d)||d;for(;p.firstChild;)p.removeChild(p.firstChild)}}}function Jd(r){return"content"in r&&function ky(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var va=(()=>((va=va||{})[va.NONE=0]="NONE",va[va.HTML=1]="HTML",va[va.STYLE=2]="STYLE",va[va.SCRIPT=3]="SCRIPT",va[va.URL=4]="URL",va[va.RESOURCE_URL=5]="RESOURCE_URL",va))();function Gh(r){const s=Kf();return s?s.sanitize(va.URL,r)||"":mc(r,"URL")?gc(r):du(bt(r))}function Wc(r){const s=Kf();if(s)return bl(s.sanitize(va.RESOURCE_URL,r)||"");if(mc(r,"ResourceURL"))return bl(gc(r));throw new re(904,!1)}function Hp(r,s,d){return function sv(r,s){return"src"===s&&("embed"===r||"frame"===r||"iframe"===r||"media"===r||"script"===r)||"href"===s&&("base"===r||"link"===r)?Wc:Gh}(s,d)(r)}function Kf(){const r=_n();return r&&r[Bi].sanitizer}class ps{constructor(s,d){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof d?this.__NG_ELEMENT_ID__=d:void 0!==d&&(this.\u0275prov=On({token:this,providedIn:d.providedIn||"root",factory:d.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const zh=new ps("ENVIRONMENT_INITIALIZER"),Kg=new ps("INJECTOR",-1),$p=new ps("INJECTOR_DEF_TYPES");class Ry{get(s,d=Tn){if(d===Tn){const p=new Error(`NullInjectorError: No provider for ${rt(s)}!`);throw p.name="NullInjectorError",p}return d}}function Gp(r){return{\u0275providers:r}}function Zg(...r){return{\u0275providers:Ny(0,r),\u0275fromNgModule:!0}}function Ny(r,...s){const d=[],p=new Set;let m;return Pu(s,T=>{const I=T;Wh(I,d,[],p)&&(m||=[],m.push(I))}),void 0!==m&&uv(m,d),d}function uv(r,s){for(let d=0;d<r.length;d++){const{providers:m}=r[d];xd(m,T=>{s.push(T)})}}function Wh(r,s,d,p){if(!(r=Ke(r)))return!1;let m=null,T=oi(r);const I=!T&&wr(r);if(T||I){if(I&&!I.standalone)return!1;m=r}else{const V=r.ngModule;if(T=oi(V),!T)return!1;m=V}const P=p.has(m);if(I){if(P)return!1;if(p.add(m),I.dependencies){const V="function"==typeof I.dependencies?I.dependencies():I.dependencies;for(const se of V)Wh(se,s,d,p)}}else{if(!T)return!1;{if(null!=T.imports&&!P){let se;p.add(m);try{Pu(T.imports,De=>{Wh(De,s,d,p)&&(se||=[],se.push(De))})}finally{}void 0!==se&&uv(se,s)}if(!P){const se=oe(m)||(()=>new m);s.push({provide:m,useFactory:se,deps:ct},{provide:$p,useValue:m,multi:!0},{provide:zh,useValue:()=>Zr(m),multi:!0})}const V=T.providers;null==V||P||xd(V,De=>{s.push(De)})}}return m!==r&&void 0!==r.providers}function xd(r,s){for(let d of r)lt(d)&&(d=d.\u0275providers),Array.isArray(d)?xd(d,s):s(d)}const Ly=Ae({provide:String,useValue:Ae});function Yg(r){return null!==r&&"object"==typeof r&&Ly in r}function qc(r){return"function"==typeof r}const Jg=new ps("Set Injector scope."),vc={},Zf={};let zp;function Kc(){return void 0===zp&&(zp=new Ry),zp}class Dd{}class ko extends Dd{get destroyed(){return this._destroyed}constructor(s,d,p,m){super(),this.parent=d,this.source=p,this.scopes=m,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Yf(s,I=>this.processProvider(I)),this.records.set(Kg,th(void 0,this)),m.has("environment")&&this.records.set(Dd,th(void 0,this));const T=this.records.get(Jg);null!=T&&"string"==typeof T.value&&this.scopes.add(T.value),this.injectorDefTypes=new Set(this.get($p.multi,ct,tn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){return this.assertNotDestroyed(),this._onDestroyHooks.push(s),()=>this.removeOnDestroy(s)}runInContext(s){this.assertNotDestroyed();const d=ni(this),p=ai(void 0);try{return s()}finally{ni(d),ai(p)}}get(s,d=Tn,p=tn.Default){if(this.assertNotDestroyed(),s.hasOwnProperty(Kt))return s[Kt](this);p=ve(p);const m=ni(this),T=ai(void 0);try{if(!(p&tn.SkipSelf)){let P=this.records.get(s);if(void 0===P){const V=function V_(r){return"function"==typeof r||"object"==typeof r&&r instanceof ps}(s)&&Tr(s);P=V&&this.injectableDefInScope(V)?th(em(s),vc):null,this.records.set(s,P)}if(null!=P)return this.hydrate(s,P)}return(p&tn.Self?Kc():this.parent).get(s,d=p&tn.Optional&&d===Tn?null:d)}catch(I){if("NullInjectorError"===I.name){if((I[Li]=I[Li]||[]).unshift(rt(s)),m)throw I;return function gt(r,s,d,p){const m=r[Li];throw s[$i]&&m.unshift(s[$i]),r.message=function nn(r,s,d,p=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let m=rt(s);if(Array.isArray(s))m=s.map(rt).join(" -> ");else if("object"==typeof s){let T=[];for(let I in s)if(s.hasOwnProperty(I)){let P=s[I];T.push(I+":"+("string"==typeof P?JSON.stringify(P):rt(P)))}m=`{${T.join(", ")}}`}return`${d}${p?"("+p+")":""}[${m}]: ${r.replace(Hr,"\n  ")}`}("\n"+r.message,m,d,p),r.ngTokenPath=m,r[Li]=null,r}(I,s,"R3InjectorError",this.source)}throw I}finally{ai(T),ni(m)}}resolveInjectorInitializers(){const s=ni(this),d=ai(void 0);try{const p=this.get(zh.multi,ct,tn.Self);for(const m of p)m()}finally{ni(s),ai(d)}}toString(){const s=[],d=this.records;for(const p of d.keys())s.push(rt(p));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new re(205,!1)}processProvider(s){let d=qc(s=Ke(s))?s:Ke(s&&s.provide);const p=function Fy(r){return Yg(r)?th(void 0,r.useValue):th(cv(r),vc)}(s);if(qc(s)||!0!==s.multi)this.records.get(d);else{let m=this.records.get(d);m||(m=th(void 0,vc,!0),m.factory=()=>Ce(m.multi),this.records.set(d,m)),d=s,m.multi.push(s)}this.records.set(d,p)}hydrate(s,d){return d.value===vc&&(d.value=Zf,d.value=d.factory()),"object"==typeof d.value&&d.value&&function Uy(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(d.value)&&this._ngOnDestroyHooks.add(d.value),d.value}injectableDefInScope(s){if(!s.providedIn)return!1;const d=Ke(s.providedIn);return"string"==typeof d?"any"===d||this.scopes.has(d):this.injectorDefTypes.has(d)}removeOnDestroy(s){const d=this._onDestroyHooks.indexOf(s);-1!==d&&this._onDestroyHooks.splice(d,1)}}function em(r){const s=Tr(r),d=null!==s?s.factory:oe(r);if(null!==d)return d;if(r instanceof ps)throw new re(204,!1);if(r instanceof Function)return function Ad(r){const s=r.length;if(s>0)throw G(s,"?"),new re(204,!1);const d=function Pi(r){return r&&(r[_r]||r[sr])||null}(r);return null!==d?()=>d.factory(r):()=>new r}(r);throw new re(204,!1)}function cv(r,s,d){let p;if(qc(r)){const m=Ke(r);return oe(m)||em(m)}if(Yg(r))p=()=>Ke(r.useValue);else if(function Qg(r){return!(!r||!r.useFactory)}(r))p=()=>r.useFactory(...Ce(r.deps||[]));else if(function fu(r){return!(!r||!r.useExisting)}(r))p=()=>Zr(Ke(r.useExisting));else{const m=Ke(r&&(r.useClass||r.provide));if(!function jy(r){return!!r.deps}(r))return oe(m)||em(m);p=()=>new m(...Ce(r.deps))}return p}function th(r,s,d=!1){return{factory:r,value:s,multi:d?[]:void 0}}function Yf(r,s){for(const d of r)Array.isArray(d)?Yf(d,s):d&&lt(d)?Yf(d.\u0275providers,s):s(d)}const dv=new ps("AppId",{providedIn:"root",factory:()=>H_}),H_="ng",tm=new ps("Platform Initializer"),nm=new ps("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Wp=new ps("CSP nonce",{providedIn:"root",factory:()=>function zr(){if(void 0!==Un)return Un;if(typeof document<"u")return document;throw new re(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Yp=(r,s)=>null;function am(r,s){return Yp(r,s)}class cm{}class Jp{}class z_{resolveComponentFactory(s){throw function zy(r){const s=Error(`No component factory found for ${rt(r)}.`);return s.ngComponent=r,s}(s)}}let ep=(()=>{class r{}return r.NULL=new z_,r})();function W_(){return ih(Us(),_n())}function ih(r,s){return new tp(B(r,s))}let tp=(()=>{class r{constructor(d){this.nativeElement=d}}return r.__NG_ELEMENT_ID__=W_,r})();function np(r){return r instanceof tp?r.nativeElement:r}class dm{}let hm=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function eg(){const r=_n(),d=Ge(Us().index,r);return(ea(d)?d:r)[Dr]}(),r})(),fm=(()=>{class r{}return r.\u0275prov=On({token:r,providedIn:"root",factory:()=>null}),r})();class pm{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const tg=new pm("16.0.1"),ng={};function Yc(r){for(;r;){r[$n]|=64;const s=jc(r);if(Xr(r)&&!s)return r;r=s}return null}function Md(r){return r.ngOriginalError}class sh{constructor(){this._console=console}handleError(s){const d=this._findOriginalError(s);this._console.error("ERROR",s),d&&this._console.error("ORIGINAL ERROR",d)}_findOriginalError(s){let d=s&&Md(s);for(;d&&Md(d);)d=Md(d);return d||null}}const pu=new ps("",{providedIn:"root",factory:()=>!1});function kd(r){return r instanceof Function?r():r}class Ga extends ui{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(s){this._lView=s}onConsumerDependencyMayHaveChanged(){Yc(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(s,d,p){const m=Gr(this);this.trackingVersion++;try{s(d,p)}finally{Gr(m)}}destroy(){this.trackingVersion++}}let ef=null;function ip(){return ef??=new Ga,ef}function tf(r,s){return r[s]??ip()}function rg(r,s){const d=ip();d.hasReadASignal&&(r[s]=ef,d.lView=r,ef=new Ga)}const _i={};function ym(r){_m(qr(),_n(),Ti()+r,!1)}function _m(r,s,d,p){if(!p)if(3==(3&s[$n])){const T=r.preOrderCheckHooks;null!==T&&ae(s,T,d)}else{const T=r.preOrderHooks;null!==T&&Pe(s,T,0,d)}Zn(d)}function sf(r,s=null,d=null,p){const m=Em(r,s,d,p);return m.resolveInjectorInitializers(),m}function Em(r,s=null,d=null,p,m=new Set){const T=[d||ct,Zg(r)];return p=p||("object"==typeof r?void 0:rt(r)),new ko(T,s||Kc(),p||null,m)}let yc=(()=>{class r{static create(d,p){if(Array.isArray(d))return sf({name:""},p,d,"");{const m=d.name??"";return sf({name:m},d.parent,d.providers,m)}}}return r.THROW_IF_NOT_FOUND=Tn,r.NULL=new Ry,r.\u0275prov=On({token:r,providedIn:"any",factory:()=>Zr(Kg)}),r.__NG_ELEMENT_ID__=-1,r})();function af(r,s=tn.Default){const d=_n();return null===d?Zr(r,s):Ll(Us(),d,Ke(r),s)}function wv(){throw new Error("invalid")}function Sm(r,s,d,p,m,T,I,P,V,se,De){const Qe=s.blueprint.slice();return Qe[Gn]=m,Qe[$n]=140|p,(null!==se||r&&2048&r[$n])&&(Qe[$n]|=2048),mi(Qe),Qe[fr]=Qe[oo]=r,Qe[Ri]=d,Qe[Bi]=I||r&&r[Bi],Qe[Dr]=P||r&&r[Dr],Qe[js]=V||r&&r[js]||null,Qe[Ci]=T,Qe[Fo]=function Mp(){return Rh++}(),Qe[Jo]=De,Qe[jo]=se,Qe[ji]=2==s.type?r[ji]:Qe,Qe}function oh(r,s,d,p,m){let T=r.data[s];if(null===T)T=function Cv(r,s,d,p,m){const T=nd(),I=nu(),V=r.data[s]=function Jy(r,s,d,p,m,T){let I=s?s.injectorIndex:-1,P=0;return Sa()&&(P|=128),{type:d,index:p,insertBeforeIndex:null,injectorIndex:I,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:P,providerIndexes:0,value:m,attrs:T,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?T:T&&T.parent,d,s,p,m);return null===r.firstChild&&(r.firstChild=V),null!==T&&(I?null==T.child&&null!==V.parent&&(T.child=V):null===T.next&&(T.next=V,V.prev=T)),V}(r,s,d,p,m),function Bn(){return Jn.lFrame.inI18n}()&&(T.flags|=32);else if(64&T.type){T.type=d,T.value=p,T.attrs=m;const I=function Ws(){const r=Jn.lFrame,s=r.currentTNode;return r.isParent?s:s.parent}();T.injectorIndex=null===I?-1:I.injectorIndex}return eo(T,!0),T}function uf(r,s,d,p){if(0===d)return-1;const m=s.length;for(let T=0;T<d;T++)s.push(p),r.blueprint.push(p),r.data.push(null);return m}function Xy(r,s,d,p,m){const T=tf(s,qo),I=Ti(),P=2&p;try{if(Zn(-1),P&&s.length>Wr&&_m(r,s,Wr,!1),Xa(P?2:0,m),P)T.runInContext(d,p,m);else{const se=Gr(null);try{d(p,m)}finally{Gr(se)}}}finally{P&&null===s[qo]&&rg(s,qo),Zn(I),Xa(P?3:1,m)}}function sg(r,s,d){if(Ko(s)){const p=Gr(null);try{const T=s.directiveEnd;for(let I=s.directiveStart;I<T;I++){const P=r.data[I];P.contentQueries&&P.contentQueries(1,d[I],I)}}finally{Gr(p)}}}function _c(r,s,d){jr()&&(function e_(r,s,d,p){const m=d.directiveStart,T=d.directiveEnd;Ys(d)&&function n0(r,s,d){const p=B(s,r),I=up(r,Sm(r,Iv(d),null,d.onPush?64:16,p,s,null,r[Bi].rendererFactory.createRenderer(p,d),null,null,null));r[s.index]=I}(s,d,r.data[m+d.componentOffset]),r.firstCreatePass||ha(d,s),$o(p,s);const I=d.initialInputs;for(let P=m;P<T;P++){const V=r.data[P],se=Fl(s,r,P,d);$o(se,s),null!==I&&Nv(0,P-m,se,V,0,I),Xs(V)&&(Ge(d.index,s)[Ri]=Fl(s,r,P,d))}}(r,s,d,B(d,s)),64==(64&d.flags)&&t_(r,s,d))}function og(r,s,d=B){const p=s.localNames;if(null!==p){let m=s.index+1;for(let T=0;T<p.length;T+=2){const I=p[T+1],P=-1===I?d(s,r):r[I];r[m++]=P}}}function Iv(r){const s=r.tView;return null===s||s.incompleteFirstPass?r.tView=ag(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts,r.id):s}function ag(r,s,d,p,m,T,I,P,V,se,De){const Qe=Wr+p,Et=Qe+m,Mt=function xv(r,s){const d=[];for(let p=0;p<s;p++)d.push(p<r?null:_i);return d}(Qe,Et),yn="function"==typeof se?se():se;return Mt[cn]={type:r,blueprint:Mt,template:d,queries:null,viewQuery:P,declTNode:s,data:Mt.slice().fill(null,Qe),bindingStartIndex:Qe,expandoStartIndex:Et,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof T?T():T,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:V,consts:yn,incompleteFirstPass:!1,ssrId:De}}let Pd=r=>null;function lf(r,s,d,p){for(let m in r)if(r.hasOwnProperty(m)){d=null===d?{}:d;const T=r[m];null===p?Av(d,s,m,T):p.hasOwnProperty(m)&&Av(d,s,p[m],T)}return d}function Av(r,s,d,p){r.hasOwnProperty(d)?r[d].push(s,p):r[d]=[s,p]}function Cm(r,s,d,p){if(jr()){const m=null===p?null:{"":-1},T=function n_(r,s){const d=r.directiveRegistry;let p=null,m=null;if(d)for(let T=0;T<d.length;T++){const I=d[T];if(Oa(s,I.selectors,!1))if(p||(p=[]),Xs(I))if(null!==I.findHostDirectiveDefs){const P=[];m=m||new Map,I.findHostDirectiveDefs(I,P,m),p.unshift(...P,I),xm(r,s,P.length)}else p.unshift(I),xm(r,s,0);else m=m||new Map,I.findHostDirectiveDefs?.(I,p,m),p.push(I)}return null===p?null:[p,m]}(r,d);let I,P;null===T?I=P=null:[I,P]=T,null!==I&&Im(r,s,d,I,m,P),m&&function r_(r,s,d){if(s){const p=r.localNames=[];for(let m=0;m<s.length;m+=2){const T=d[s[m+1]];if(null==T)throw new re(-301,!1);p.push(s[m],T)}}}(d,p,m)}d.mergedAttrs=Fr(d.mergedAttrs,d.attrs)}function Im(r,s,d,p,m,T){for(let se=0;se<p.length;se++)Mf(ha(d,s),r,p[se].type);!function ug(r,s,d){r.flags|=1,r.directiveStart=s,r.directiveEnd=s+d,r.providerIndexes=s}(d,r.data.length,p.length);for(let se=0;se<p.length;se++){const De=p[se];De.providersResolver&&De.providersResolver(De)}let I=!1,P=!1,V=uf(r,s,p.length,null);for(let se=0;se<p.length;se++){const De=p[se];d.mergedAttrs=Fr(d.mergedAttrs,De.hostAttrs),t0(r,d,s,V,De),Rv(V,De,m),null!==De.contentQueries&&(d.flags|=4),(null!==De.hostBindings||null!==De.hostAttrs||0!==De.hostVars)&&(d.flags|=64);const Qe=De.type.prototype;!I&&(Qe.ngOnChanges||Qe.ngOnInit||Qe.ngDoCheck)&&((r.preOrderHooks??=[]).push(d.index),I=!0),!P&&(Qe.ngOnChanges||Qe.ngDoCheck)&&((r.preOrderCheckHooks??=[]).push(d.index),P=!0),V++}!function X_(r,s,d){const m=s.directiveEnd,T=r.data,I=s.attrs,P=[];let V=null,se=null;for(let De=s.directiveStart;De<m;De++){const Qe=T[De],Et=d?d.get(Qe):null,yn=Et?Et.outputs:null;V=lf(Qe.inputs,De,V,Et?Et.inputs:null),se=lf(Qe.outputs,De,se,yn);const Vn=null===V||null===I||Fi(s)?null:Lv(V,De,I);P.push(Vn)}null!==V&&(V.hasOwnProperty("class")&&(s.flags|=8),V.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=P,s.inputs=V,s.outputs=se}(r,d,T)}function t_(r,s,d){const p=d.directiveStart,m=d.directiveEnd,T=d.index,I=function Ao(){return Jn.lFrame.currentDirectiveIndex}();try{Zn(T);for(let P=p;P<m;P++){const V=r.data[P],se=s[P];Pl(P),(null!==V.hostBindings||0!==V.hostVars||null!==V.hostAttrs)&&Ov(V,se)}}finally{Zn(-1),Pl(I)}}function Ov(r,s){null!==r.hostBindings&&r.hostBindings(1,s)}function xm(r,s,d){s.componentOffset=d,(r.components??=[]).push(s.index)}function Rv(r,s,d){if(d){if(s.exportAs)for(let p=0;p<s.exportAs.length;p++)d[s.exportAs[p]]=r;Xs(s)&&(d[""]=r)}}function t0(r,s,d,p,m){r.data[p]=m;const T=m.factory||(m.factory=oe(m.type)),I=new ci(T,Xs(m),af);r.blueprint[p]=I,d[p]=I,function Pv(r,s,d,p,m){const T=m.hostBindings;if(T){let I=r.hostBindingOpCodes;null===I&&(I=r.hostBindingOpCodes=[]);const P=~s.index;(function e0(r){let s=r.length;for(;s>0;){const d=r[--s];if("number"==typeof d&&d<0)return d}return 0})(I)!=P&&I.push(P),I.push(d,p,T)}}(r,s,p,uf(r,d,m.hostVars,_i),m)}function ql(r,s,d,p,m,T){const I=B(r,s);!function lg(r,s,d,p,m,T,I){if(null==T)r.removeAttribute(s,m,d);else{const P=null==I?bt(T):I(T,p||"",m);r.setAttribute(s,m,P,d)}}(s[Dr],I,T,r.value,d,p,m)}function Nv(r,s,d,p,m,T){const I=T[s];if(null!==I)for(let P=0;P<I.length;)i_(p,d,I[P++],I[P++],I[P++])}function i_(r,s,d,p,m){const T=Gr(null);try{null!==r.setInput?r.setInput(s,m,d,p):s[p]=m}finally{Gr(T)}}function Lv(r,s,d){let p=null,m=0;for(;m<d.length;){const T=d[m];if(0!==T)if(5!==T){if("number"==typeof T)break;if(r.hasOwnProperty(T)){null===p&&(p=[]);const I=r[T];for(let P=0;P<I.length;P+=2)if(I[P]===s){p.push(T,I[P+1],d[m+1]);break}}m+=2}else m+=2;else m+=4}return p}function s_(r,s,d,p){return[r,!0,!1,s,null,0,p,d,null,null,null]}function Dm(r,s){const d=r.contentQueries;if(null!==d)for(let p=0;p<d.length;p+=2){const T=d[p+1];if(-1!==T){const I=r.data[T];fl(d[p]),I.contentQueries(2,s[T],T)}}}function up(r,s){return r[wo]?r[Qo][Er]=s:r[wo]=s,r[Qo]=s,s}function cg(r,s,d){fl(0);const p=Gr(null);try{s(r,d)}finally{Gr(p)}}function o_(r){return r[Wo]||(r[Wo]=[])}function dg(r){return r.cleanup||(r.cleanup=[])}function Am(r,s){const d=r[js],p=d?d.get(sh,null):null;p&&p.handleError(s)}function hg(r,s,d,p,m){for(let T=0;T<d.length;){const I=d[T++],P=d[T++];i_(r.data[I],s[I],p,P,m)}}function bc(r,s,d){const p=eu(s,r);!function Rp(r,s,d){r.setValue(s,d)}(r[Dr],p,d)}function s0(r,s){const d=Ge(s,r),p=d[cn];!function Fv(r,s){for(let d=s.length;d<r.blueprint.length;d++)s.push(r.blueprint[d])}(p,d);const m=d[Gn];null!==m&&null===d[Jo]&&(d[Jo]=am(m,d[js])),ah(p,d,d[Ri])}function ah(r,s,d){Ca(s);try{const p=r.viewQuery;null!==p&&cg(1,p,d);const m=r.template;null!==m&&Xy(r,s,m,1,d),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Dm(r,s),r.staticViewQueries&&cg(2,r.viewQuery,d);const T=r.components;null!==T&&function Mm(r,s){for(let d=0;d<s.length;d++)s0(r,s[d])}(s,T)}catch(p){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),p}finally{s[$n]&=-5,Ir()}}let l_=(()=>{class r{constructor(){this.all=new Set,this.queue=new Map}create(d,p,m){const T=typeof Zone>"u"?null:Zone.current,I=new ei(d,se=>{this.all.has(se)&&this.queue.set(se,T)},m);let P;this.all.add(I),I.notify();const V=()=>{I.cleanup(),P?.(),this.all.delete(I),this.queue.delete(I)};return P=p?.onDestroy(V),{destroy:V}}flush(){if(0!==this.queue.size)for(const[d,p]of this.queue)this.queue.delete(d),p?p.run(()=>d.run()):d.run()}get isQueueEmpty(){return 0===this.queue.size}}return r.\u0275prov=On({token:r,providedIn:"root",factory:()=>new r}),r})();function Kl(r,s,d){let p=d?r.styles:null,m=d?r.classes:null,T=0;if(null!==s)for(let I=0;I<s.length;I++){const P=s[I];"number"==typeof P?T=P:1==T?m=ce(m,P):2==T&&(p=ce(p,P+": "+s[++I]+";"))}d?r.styles=p:r.stylesWithoutHost=p,d?r.classes=m:r.classesWithoutHost=m}function cf(r,s,d,p,m=!1){for(;null!==d;){const T=s[d.index];if(null!==T&&p.push(li(T)),yo(T)){for(let P=As;P<T.length;P++){const V=T[P],se=V[cn].firstChild;null!==se&&cf(V[cn],V,se,p)}T[vs]!==T[Gn]&&p.push(T[vs])}const I=d.type;if(8&I)cf(r,s,d.child,p);else if(32&I){const P=cc(d,s);let V;for(;V=P();)p.push(V)}else if(16&I){const P=Yu(s,d);if(Array.isArray(P))p.push(...P);else{const V=jc(s[ji]);cf(V[cn],V,P,p,!0)}}d=m?d.projectionNext:d.next}return p}function Pm(r,s,d,p=!0){const m=s[Bi].rendererFactory;m.begin&&m.begin();try{Xi(r,s,r.template,d)}catch(I){throw p&&Am(s,I),I}finally{m.end&&m.end(),s[Bi].effectManager?.flush()}}function Xi(r,s,d,p){const m=s[$n];if(256!=(256&m)){s[Bi].effectManager?.flush(),Ca(s);try{mi(s),function Xn(r){return Jn.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==d&&Xy(r,s,d,2,p);const I=3==(3&m);if(I){const se=r.preOrderCheckHooks;null!==se&&ae(s,se,null)}else{const se=r.preOrderHooks;null!==se&&Pe(s,se,0,null),Le(s,0)}if(function o0(r){for(let s=Ru(r);null!==s;s=jh(s)){if(!s[La])continue;const d=s[Ii];for(let p=0;p<d.length;p++){hi(d[p])}}}(s),function Uv(r){for(let s=Ru(r);null!==s;s=jh(s))for(let d=As;d<s.length;d++){const p=s[d],m=p[cn];zt(p)&&Xi(m,p,m.template,p[Ri])}}(s),null!==r.contentQueries&&Dm(r,s),I){const se=r.contentCheckHooks;null!==se&&ae(s,se)}else{const se=r.contentHooks;null!==se&&Pe(s,se,1),Le(s,1)}!function Qy(r,s){const d=r.hostBindingOpCodes;if(null===d)return;const p=tf(s,Na);try{for(let m=0;m<d.length;m++){const T=d[m];if(T<0)Zn(~T);else{const I=T,P=d[++m],V=d[++m];mn(P,I),p.runInContext(V,2,s[I])}}}finally{null===s[Na]&&rg(s,Na),Zn(-1)}}(r,s);const P=r.components;null!==P&&function Hv(r,s){for(let d=0;d<s.length;d++)Bv(r,s[d])}(s,P);const V=r.viewQuery;if(null!==V&&cg(2,V,p),I){const se=r.viewCheckHooks;null!==se&&ae(s,se)}else{const se=r.viewHooks;null!==se&&Pe(s,se,2),Le(s,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),s[$n]&=-73,mr(s)}finally{Ir()}}}function Bv(r,s){const d=Ge(s,r);if(zt(d)){const p=d[cn];80&d[$n]?Xi(p,d,p.template,d[Ri]):d[$r]>0&&Vv(d)}}function Vv(r){for(let p=Ru(r);null!==p;p=jh(p))for(let m=As;m<p.length;m++){const T=p[m];if(zt(T))if(1024&T[$n]){const I=T[cn];Xi(I,T,I.template,T[Ri])}else T[$r]>0&&Vv(T)}const d=r[cn].components;if(null!==d)for(let p=0;p<d.length;p++){const m=Ge(d[p],r);zt(m)&&m[$r]>0&&Vv(m)}}class fg{get rootNodes(){const s=this._lView,d=s[cn];return cf(d,s,d.firstChild,[])}constructor(s,d){this._lView=s,this._cdRefInjectingView=d,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ri]}set context(s){this._lView[Ri]=s}get destroyed(){return 256==(256&this._lView[$n])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[fr];if(yo(s)){const d=s[Uo],p=d?d.indexOf(this):-1;p>-1&&(Zu(s,p),O(d,p))}this._attachedToViewContainer=!1}Uh(this._lView[cn],this._lView)}onDestroy(s){!function fi(r,s){if(256==(256&r[$n]))throw new re(911,!1);null===r[Ds]&&(r[Ds]=[]),r[Ds].push(s)}(this._lView,s)}markForCheck(){Yc(this._cdRefInjectingView||this._lView)}detach(){this._lView[$n]&=-129}reattach(){this._lView[$n]|=128}detectChanges(){Pm(this._lView[cn],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Np(r,s){Wl(r,s,s[Dr],2,null,null)}(this._lView[cn],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=s}}class $v extends fg{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Pm(s[cn],s,s[Ri],!1)}checkNoChanges(){}get context(){return null}}class Gv extends ep{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const d=wr(s);return new lp(d,this.ngModule)}}function Om(r){const s=[];for(let d in r)r.hasOwnProperty(d)&&s.push({propName:r[d],templateName:d});return s}class a0{constructor(s,d){this.injector=s,this.parentInjector=d}get(s,d,p){p=ve(p);const m=this.injector.get(s,ng,p);return m!==ng||d===ng?m:this.parentInjector.get(s,d,p)}}class lp extends Jp{get inputs(){return Om(this.componentDef.inputs)}get outputs(){return Om(this.componentDef.outputs)}constructor(s,d){super(),this.componentDef=s,this.ngModule=d,this.componentType=s.type,this.selector=function mo(r){return r.map(sa).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!d}create(s,d,p,m){let T=(m=m||this.ngModule)instanceof Dd?m:m?.injector;T&&null!==this.componentDef.getStandaloneInjector&&(T=this.componentDef.getStandaloneInjector(T)||T);const I=T?new a0(s,T):s,P=I.get(dm,null);if(null===P)throw new re(407,!1);const De={rendererFactory:P,sanitizer:I.get(fm,null),effectManager:I.get(l_,null)},Qe=P.createRenderer(null,this.componentDef),Et=this.componentDef.selectors[0][0]||"div",Mt=p?function Dv(r,s,d,p){const T=p.get(pu,!1)||d===Ee.ShadowDom,I=r.selectRootElement(s,T);return function sp(r){Pd(r)}(I),I}(Qe,p,this.componentDef.encapsulation,I):bd(Qe,Et,function h_(r){const s=r.toLowerCase();return"svg"===s?Bu:"math"===s?"math":null}(Et)),yn=this.componentDef.onPush?576:528,Vn=ag(0,null,null,1,0,null,null,null,null,null,null),lr=Sm(null,Vn,null,yn,null,null,De,Qe,I,null,null);let Lr,An;Ca(lr);try{const di=this.componentDef;let os,So=null;di.findHostDirectiveDefs?(os=[],So=new Map,di.findHostDirectiveDefs(di,os,So),os.push(di)):os=[di];const Df=function Wv(r,s){const d=r[cn],p=Wr;return r[p]=s,oh(d,p,2,"#host",null)}(lr,Mt),VE=function qv(r,s,d,p,m,T,I){const P=m[cn];!function Kv(r,s,d,p){for(const m of r)s.mergedAttrs=Fr(s.mergedAttrs,m.hostAttrs);null!==s.mergedAttrs&&(Kl(s,s.mergedAttrs,!0),null!==d&&b(p,d,s))}(p,r,s,I);let V=null;null!==s&&(V=am(s,m[js]));const se=T.rendererFactory.createRenderer(s,d),De=Sm(m,Iv(d),null,d.onPush?64:16,m[r.index],r,T,se,null,null,V);return P.firstCreatePass&&xm(P,r,p.length-1),up(m,De),m[r.index]=De}(Df,Mt,di,os,lr,De,Qe);An=z(Vn,Wr),Mt&&function pg(r,s,d,p){if(p)Qn(r,d,["ng-version",tg.full]);else{const{attrs:m,classes:T}=function Wi(r){const s=[],d=[];let p=1,m=2;for(;p<r.length;){let T=r[p];if("string"==typeof T)2===m?""!==T&&s.push(T,r[++p]):8===m&&d.push(T);else{if(!Fs(m))break;m=T}p++}return{attrs:s,classes:d}}(s.selectors[0]);m&&Qn(r,d,m),T&&T.length>0&&v(r,d,T.join(" "))}}(Qe,di,Mt,p),void 0!==d&&function l0(r,s,d){const p=r.projection=[];for(let m=0;m<s.length;m++){const T=d[m];p.push(null!=T?Array.from(T):null)}}(An,this.ngContentSelectors,d),Lr=function u0(r,s,d,p,m,T){const I=Us(),P=m[cn],V=B(I,m);Im(P,m,I,d,null,p);for(let De=0;De<d.length;De++)$o(Fl(m,P,I.directiveStart+De,I),m);t_(P,m,I),V&&$o(V,m);const se=Fl(m,P,I.directiveStart+I.componentOffset,I);if(r[Ri]=m[Ri]=se,null!==T)for(const De of T)De(se,s);return sg(P,I,r),se}(VE,di,os,So,lr,[gg]),ah(Vn,lr,null)}finally{Ir()}return new zv(this.componentType,Lr,ih(An,lr),lr,An)}}class zv extends cm{constructor(s,d,p,m,T){super(),this.location=p,this._rootLView=m,this._tNode=T,this.previousInputValues=null,this.instance=d,this.hostView=this.changeDetectorRef=new $v(m),this.componentType=s}setInput(s,d){const p=this._tNode.inputs;let m;if(null!==p&&(m=p[s])){if(this.previousInputValues??=new Map,this.previousInputValues.has(s)&&Object.is(this.previousInputValues.get(s),d))return;const T=this._rootLView;hg(T[cn],T,m,s,d),this.previousInputValues.set(s,d),Yc(Ge(this._tNode.index,T))}}get injector(){return new jl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function gg(){const r=Us();H(_n()[cn],r)}function lh(r){let s=function Zv(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),d=!0;const p=[r];for(;s;){let m;if(Xs(r))m=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new re(903,!1);m=s.\u0275dir}if(m){if(d){p.push(m);const I=r;I.inputs=mg(r.inputs),I.declaredInputs=mg(r.declaredInputs),I.outputs=mg(r.outputs);const P=m.hostBindings;P&&u(r,P);const V=m.viewQuery,se=m.contentQueries;if(V&&f_(r,V),se&&g(r,se),Fe(r.inputs,m.inputs),Fe(r.declaredInputs,m.declaredInputs),Fe(r.outputs,m.outputs),Xs(m)&&m.data.animation){const De=r.data;De.animation=(De.animation||[]).concat(m.data.animation)}}const T=m.features;if(T)for(let I=0;I<T.length;I++){const P=T[I];P&&P.ngInherit&&P(r),P===lh&&(d=!1)}}s=Object.getPrototypeOf(s)}!function Yv(r){let s=0,d=null;for(let p=r.length-1;p>=0;p--){const m=r[p];m.hostVars=s+=m.hostVars,m.hostAttrs=Fr(m.hostAttrs,d=Fr(d,m.hostAttrs))}}(p)}function mg(r){return r===qe?{}:r===ct?[]:r}function f_(r,s){const d=r.viewQuery;r.viewQuery=d?(p,m)=>{s(p,m),d(p,m)}:s}function g(r,s){const d=r.contentQueries;r.contentQueries=d?(p,m,T)=>{s(p,m,T),d(p,m,T)}:s}function u(r,s){const d=r.hostBindings;r.hostBindings=d?(p,m)=>{s(p,m),d(p,m)}:s}function Q(r){return!!We(r)&&(Array.isArray(r)||!(r instanceof Map)&&Symbol.iterator in r)}function We(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function kt(r,s,d){return r[s]=d}function jn(r,s,d){return!Object.is(r[s],d)&&(r[s]=d,!0)}function Zt(r,s,d,p){const m=jn(r,s,d);return jn(r,s+1,p)||m}function ln(r,s,d,p){const m=_n();return jn(m,Ln(),s)&&(qr(),ql(Qr(),m,r,s,d,p)),ln}function hn(r,s,d,p,m,T){const P=Zt(r,function xu(){return Jn.lFrame.bindingIndex}(),d,m);return wa(2),P?s+bt(d)+p+bt(m)+T:_i}function Sl(r,s,d,p,m,T,I,P){const V=_n(),se=qr(),De=r+Wr,Qe=se.firstCreatePass?function p0(r,s,d,p,m,T,I,P,V){const se=s.consts,De=oh(s,r,4,I||null,ti(se,P));Cm(s,d,De,ti(se,V)),H(s,De);const Qe=De.tView=ag(2,De,p,m,T,s.directiveRegistry,s.pipeRegistry,null,s.schemas,se,null);return null!==s.queries&&(s.queries.template(s,De),Qe.queries=s.queries.embeddedTView(De)),De}(De,se,V,s,d,p,m,T,I):se.data[De];eo(Qe,!1);const Et=Lm(se,V,Qe,r);k()&&Vc(se,V,Et,Qe),$o(Et,V),up(V,V[De]=s_(Et,V,Et,Qe)),Qs(Qe)&&_c(se,V,Qe),null!=I&&og(V,Qe,P)}let Lm=function Sg(r,s,d,p){return F(!0),s[Dr].createComment("")};function hp(r){return Ie(function ru(){return Jn.lFrame.contextLView}(),Wr+r)}function hh(r,s,d){const p=_n();return jn(p,Ln(),s)&&function Xu(r,s,d,p,m,T,I,P){const V=B(s,d);let De,se=s.inputs;!P&&null!=se&&(De=se[p])?(hg(r,d,De,p,m),Ys(s)&&function kv(r,s){const d=Ge(s,r);16&d[$n]||(d[$n]|=64)}(d,s.index)):3&s.type&&(p=function Mv(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(p),m=null!=I?I(m,s.value||"",p):m,T.setProperty(V,p,m))}(qr(),Qr(),p,r,s,p[Dr],d,!1),hh}function Eu(r,s,d,p,m){const I=m?"class":"style";hg(r,d,s.inputs[I],I,p)}function jm(r,s,d,p){const m=_n(),T=qr(),I=Wr+r,P=m[Dr],V=T.firstCreatePass?function m0(r,s,d,p,m,T){const I=s.consts,V=oh(s,r,2,p,ti(I,m));return Cm(s,d,V,ti(I,T)),null!==V.attrs&&Kl(V,V.attrs,!1),null!==V.mergedAttrs&&Kl(V,V.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,V),V}(I,T,m,s,d,p):T.data[I],se=mf(T,m,V,P,s,r);m[I]=se;const De=Qs(V);return eo(V,!0),b(P,se,V),32!=(32&V.flags)&&k()&&Vc(T,m,se,V),0===function Js(){return Jn.lFrame.elementDepthCount}()&&$o(se,m),function is(){Jn.lFrame.elementDepthCount++}(),De&&(_c(T,m,V),sg(T,V,m)),null!==p&&og(m,V),jm}function gf(){let r=Us();nu()?rl():(r=r.parent,eo(r,!1));const s=r;(function wc(r){return Jn.skipHydrationRootTNode===r})(s)&&function bu(){Jn.skipHydrationRootTNode=null}(),function tu(){Jn.lFrame.elementDepthCount--}();const d=qr();return d.firstCreatePass&&(H(d,r),Ko(r)&&d.queries.elementEnd(r)),null!=s.classesWithoutHost&&function Ac(r){return 0!=(8&r.flags)}(s)&&Eu(d,s,_n(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function iu(r){return 0!=(16&r.flags)}(s)&&Eu(d,s,_n(),s.stylesWithoutHost,!1),gf}function wl(r,s,d,p){return jm(r,s,d,p),gf(),wl}let mf=(r,s,d,p,m,T)=>(F(!0),bd(p,m,function Ia(){return Jn.lFrame.currentNamespace}()));function fh(r,s,d){const p=_n(),m=qr(),T=r+Wr,I=m.firstCreatePass?function wg(r,s,d,p,m){const T=s.consts,I=ti(T,p),P=oh(s,r,8,"ng-container",I);return null!==I&&Kl(P,I,!0),Cm(s,d,P,ti(T,m)),null!==s.queries&&s.queries.elementStart(s,P),P}(T,m,p,s,d):m.data[T];eo(I,!0);const P=zo(m,p,I,r);return p[T]=P,k()&&Vc(m,p,P,I),$o(P,p),Qs(I)&&(_c(m,p,I),sg(m,I,p)),null!=d&&og(p,I),fh}function fp(){let r=Us();const s=qr();return nu()?rl():(r=r.parent,eo(r,!1)),s.firstCreatePass&&(H(s,r),Ko(r)&&s.queries.elementEnd(r)),fp}let zo=(r,s,d,p)=>(F(!0),no(s[Dr],""));function ey(){return _n()}function _f(r){return!!r&&"function"==typeof r.then}function ty(r){return!!r&&"function"==typeof r.subscribe}function ph(r,s,d,p){const m=_n(),T=qr(),I=Us();return function bf(r,s,d,p,m,T,I){const P=Qs(p),se=r.firstCreatePass&&dg(r),De=s[Ri],Qe=o_(s);let Et=!0;if(3&p.type||I){const Vn=B(p,s),lr=I?I(Vn):Vn,Lr=Qe.length,An=I?os=>I(li(os[p.index])):p.index;let di=null;if(!I&&P&&(di=function Bm(r,s,d,p){const m=r.cleanup;if(null!=m)for(let T=0;T<m.length-1;T+=2){const I=m[T];if(I===d&&m[T+1]===p){const P=s[Wo],V=m[T+2];return P.length>V?P[V]:null}"string"==typeof I&&(T+=2)}return null}(r,s,m,p.index)),null!==di)(di.__ngLastListenerFn__||di).__ngNextListenerFn__=T,di.__ngLastListenerFn__=T,Et=!1;else{T=pp(p,s,De,T,!1);const os=d.listen(lr,m,T);Qe.push(T,os),se&&se.push(m,An,Lr,Lr+1)}}else T=pp(p,s,De,T,!1);const Mt=p.outputs;let yn;if(Et&&null!==Mt&&(yn=Mt[m])){const Vn=yn.length;if(Vn)for(let lr=0;lr<Vn;lr+=2){const So=s[yn[lr]][yn[lr+1]].subscribe(T),Df=Qe.length;Qe.push(T,So),se&&se.push(m,p.index,Df,-(Df+1))}}}(T,m,m[Dr],I,r,s,p),ph}function Yl(r,s,d,p){try{return Xa(6,s,d),!1!==d(p)}catch(m){return Am(r,m),!1}finally{Xa(7,s,d)}}function pp(r,s,d,p,m){return function T(I){if(I===Function)return p;Yc(r.componentOffset>-1?Ge(r.index,s):s);let V=Yl(s,d,p,I),se=T.__ngNextListenerFn__;for(;se;)V=Yl(s,d,se,I)&&V,se=se.__ngNextListenerFn__;return m&&!1===V&&(I.preventDefault(),I.returnValue=!1),V}}function Cg(r=1){return function Hu(r){return(Jn.lFrame.contextLView=function $u(r,s){for(;r>0;)s=s[oo],r--;return s}(r,Jn.lFrame.contextLView))[Ri]}(r)}function Tf(r,s){let d=null;const p=function Hs(r){const s=r.attrs;if(null!=s){const d=s.indexOf(5);if(!(1&d))return s[d+1]}return null}(r);for(let m=0;m<s.length;m++){const T=s[m];if("*"!==T){if(null===p?Oa(r,T,!0):so(p,T))return m}else d=m}return d}function Vm(r){const s=_n()[ji][Ci];if(!s.projection){const p=s.projection=G(r?r.length:1,null),m=p.slice();let T=s.child;for(;null!==T;){const I=r?Tf(T,r):0;null!==I&&(m[I]?m[I].projectionNext=T:p[I]=T,m[I]=T),T=T.next}}}function v0(r,s=0,d){const p=_n(),m=qr(),T=oh(m,Wr+r,16,null,d||null);null===T.projection&&(T.projection=s),rl(),(!p[Jo]||Sa())&&32!=(32&T.flags)&&function al(r,s,d){Yd(s[Dr],0,s,d,Sd(r,d,s),Zd(d.parent||s[Ci],d,s))}(m,p,T)}function wf(r,s){return r<<17|s<<2}function ed(r){return r>>17&32767}function Gm(r){return 2|r}function Tc(r){return(131068&r)>>2}function gh(r,s){return-131069&r|s<<2}function mp(r){return 1|r}function b_(r,s,d,p,m){const T=r[d+1],I=null===s;let P=p?ed(T):Tc(T),V=!1;for(;0!==P&&(!1===V||I);){const De=r[P+1];V0(r[P],s)&&(V=!0,r[P+1]=p?mp(De):Gm(De)),P=p?ed(De):Tc(De)}V&&(r[d+1]=p?Gm(T):mp(T))}function V0(r,s){return null===r||null==s||(Array.isArray(r)?r[1]:r)===s||!(!Array.isArray(r)||"string"!=typeof s)&&Fn(r,s)>=0}function vh(r,s){return function Ec(r,s,d,p){const m=_n(),T=qr(),I=wa(2);T.firstUpdatePass&&function S_(r,s,d,p){const m=r.data;if(null===m[d+1]){const T=m[Ti()],I=function E_(r,s){return s>=r.expandoStartIndex}(r,d);(function ly(r,s){return 0!=(r.flags&(s?8:16))})(T,p)&&null===s&&!I&&(s=!1),s=function E0(r,s,d,p){const m=function Ic(r){const s=Jn.lFrame.currentDirectiveIndex;return-1===s?null:r[s]}(r);let T=p?s.residualClasses:s.residualStyles;if(null===m)0===(p?s.classBindings:s.styleBindings)&&(d=Km(d=w_(null,r,s,d,p),s.attrs,p),T=null);else{const I=s.directiveStylingLast;if(-1===I||r[I]!==m)if(d=w_(m,r,s,d,p),null===T){let V=function qm(r,s,d){const p=d?s.classBindings:s.styleBindings;if(0!==Tc(p))return r[ed(p)]}(r,s,p);void 0!==V&&Array.isArray(V)&&(V=w_(null,r,s,V[1],p),V=Km(V,s.attrs,p),function H0(r,s,d,p){r[ed(d?s.classBindings:s.styleBindings)]=p}(r,s,p,V))}else T=function bp(r,s,d){let p;const m=s.directiveEnd;for(let T=1+s.directiveStylingLast;T<m;T++)p=Km(p,r[T].hostAttrs,d);return Km(p,s.attrs,d)}(r,s,p)}return void 0!==T&&(p?s.residualClasses=T:s.residualStyles=T),d}(m,T,s,p),function B0(r,s,d,p,m,T){let I=T?s.classBindings:s.styleBindings,P=ed(I),V=Tc(I);r[p]=d;let De,se=!1;if(Array.isArray(d)?(De=d[1],(null===De||Fn(d,De)>0)&&(se=!0)):De=d,m)if(0!==V){const Et=ed(r[P+1]);r[p+1]=wf(Et,P),0!==Et&&(r[Et+1]=gh(r[Et+1],p)),r[P+1]=function iy(r,s){return 131071&r|s<<17}(r[P+1],p)}else r[p+1]=wf(P,0),0!==P&&(r[P+1]=gh(r[P+1],p)),P=p;else r[p+1]=wf(V,0),0===P?P=p:r[V+1]=gh(r[V+1],p),V=p;se&&(r[p+1]=Gm(r[p+1])),b_(r,De,p,!0),b_(r,De,p,!1),function y0(r,s,d,p,m){const T=m?r.residualClasses:r.residualStyles;null!=T&&"string"==typeof s&&Fn(T,s)>=0&&(d[p+1]=mp(d[p+1]))}(s,De,r,p,T),I=wf(P,V),T?s.classBindings=I:s.styleBindings=I}(m,T,s,d,I,p)}}(T,r,I,p),s!==_i&&jn(m,I,s)&&function ay(r,s,d,p,m,T,I,P){if(!(3&s.type))return;const V=r.data,se=V[P+1],De=function zm(r){return 1==(1&r)}(se)?uy(V,s,d,m,Tc(se),I):void 0;Ql(De)||(Ql(T)||function ry(r){return 2==(2&r)}(se)&&(T=uy(V,null,d,m,P,I)),function fc(r,s,d,p,m){if(s)m?r.addClass(d,p):r.removeClass(d,p);else{let T=-1===p.indexOf("-")?void 0:lu.DashCase;null==m?r.removeStyle(d,p,T):("string"==typeof m&&m.endsWith("!important")&&(m=m.slice(0,-10),T|=lu.Important),r.setStyle(d,p,m,T))}}(p,I,eu(Ti(),d),m,T))}(T,T.data[Ti()],m,m[Dr],r,m[I+1]=function w0(r,s){return null==r||""===r||("string"==typeof s?r+=s:"object"==typeof r&&(r=rt(gc(r)))),r}(s,d),p,I)}(r,s,null,!0),vh}function w_(r,s,d,p,m){let T=null;const I=d.directiveEnd;let P=d.directiveStylingLast;for(-1===P?P=d.directiveStart:P++;P<I&&(T=s[P],p=Km(p,T.hostAttrs,m),T!==r);)P++;return null!==r&&(d.directiveStylingLast=P),p}function Km(r,s,d){const p=d?1:2;let m=-1;if(null!==s)for(let T=0;T<s.length;T++){const I=s[T];"number"==typeof I?m=I:m===p&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),Ft(r,I,!!d||s[++T]))}return void 0===r?null:r}function uy(r,s,d,p,m,T){const I=null===s;let P;for(;m>0;){const V=r[m],se=Array.isArray(V),De=se?V[1]:V,Qe=null===De;let Et=d[m+1];Et===_i&&(Et=Qe?ct:void 0);let Mt=Qe?Kn(Et,p):De===p?Et:void 0;if(se&&!Ql(Mt)&&(Mt=Kn(V,p)),Ql(Mt)&&(P=Mt,I))return P;const yn=r[m+1];m=I?ed(yn):Tc(yn)}if(null!==s){let V=T?s.residualClasses:s.residualStyles;null!=V&&(P=Kn(V,p))}return P}function Ql(r){return void 0!==r}function I_(r,s=""){const d=_n(),p=qr(),m=r+Wr,T=p.firstCreatePass?oh(p,m,1,s,null):p.data[m],I=cy(p,d,T,s,r);d[m]=I,k()&&Vc(p,d,I,T),eo(T,!1)}let cy=(r,s,d,p,m)=>(F(!0),function Uf(r,s){return r.createText(s)}(s[Dr],p));function If(r){return dy("",r,""),If}function dy(r,s,d){const p=_n(),m=function Dn(r,s,d,p){return jn(r,Ln(),d)?s+bt(d)+p:_i}(p,r,s,d);return m!==_i&&bc(p,Ti(),m),dy}function D_(r,s,d,p,m){const T=_n(),I=hn(T,r,s,d,p,m);return I!==_i&&bc(T,Ti(),I),D_}const bh=void 0;var by=["en",[["a","p"],["AM","PM"],bh],[["AM","PM"],bh,bh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bh,"{1} 'at' {0}",bh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function x0(r){const d=Math.floor(Math.abs(r)),p=r.toString().replace(/^[^.]*\.?/,"").length;return 1===d&&0===p?1:5}];let jd={};function Ty(r){const s=function $(r){return r.toLowerCase().replace(/_/g,"-")}(r);let d=M(s);if(d)return d;const p=s.split("-")[0];if(d=M(p),d)return d;if("en"===p)return by;throw new re(701,!1)}function we(r){return Ty(r)[R.PluralCase]}function M(r){return r in jd||(jd[r]=Sr.ng&&Sr.ng.common&&Sr.ng.common.locales&&Sr.ng.common.locales[r]),jd[r]}var R=(()=>((R=R||{})[R.LocaleId=0]="LocaleId",R[R.DayPeriodsFormat=1]="DayPeriodsFormat",R[R.DayPeriodsStandalone=2]="DayPeriodsStandalone",R[R.DaysFormat=3]="DaysFormat",R[R.DaysStandalone=4]="DaysStandalone",R[R.MonthsFormat=5]="MonthsFormat",R[R.MonthsStandalone=6]="MonthsStandalone",R[R.Eras=7]="Eras",R[R.FirstDayOfWeek=8]="FirstDayOfWeek",R[R.WeekendRange=9]="WeekendRange",R[R.DateFormat=10]="DateFormat",R[R.TimeFormat=11]="TimeFormat",R[R.DateTimeFormat=12]="DateTimeFormat",R[R.NumberSymbols=13]="NumberSymbols",R[R.NumberFormats=14]="NumberFormats",R[R.CurrencyCode=15]="CurrencyCode",R[R.CurrencySymbol=16]="CurrencySymbol",R[R.CurrencyName=17]="CurrencyName",R[R.Currencies=18]="Currencies",R[R.Directionality=19]="Directionality",R[R.PluralCase=20]="PluralCase",R[R.ExtraData=21]="ExtraData",R))();const Ve="en-US";let e=Ve;function nb(r,s,d,p,m){if(r=Ke(r),Array.isArray(r))for(let T=0;T<r.length;T++)nb(r[T],s,d,p,m);else{const T=qr(),I=_n();let P=qc(r)?r:Ke(r.provide),V=cv(r);const se=Us(),De=1048575&se.providerIndexes,Qe=se.directiveStart,Et=se.providerIndexes>>20;if(qc(r)||!r.multi){const Mt=new ci(V,m,af),yn=ib(P,s,m?De:De+Et,Qe);-1===yn?(Mf(ha(se,I),T,P),rb(T,r,s.length),s.push(P),se.directiveStart++,se.directiveEnd++,m&&(se.providerIndexes+=1048576),d.push(Mt),I.push(Mt)):(d[yn]=Mt,I[yn]=Mt)}else{const Mt=ib(P,s,De+Et,Qe),yn=ib(P,s,De,De+Et),lr=yn>=0&&d[yn];if(m&&!lr||!m&&!(Mt>=0&&d[Mt])){Mf(ha(se,I),T,P);const Lr=function wS(r,s,d,p,m){const T=new ci(r,d,af);return T.multi=[],T.index=s,T.componentProviders=0,Jb(T,m,p&&!d),T}(m?SS:ES,d.length,m,p,V);!m&&lr&&(d[yn].providerFactory=Lr),rb(T,r,s.length,0),s.push(P),se.directiveStart++,se.directiveEnd++,m&&(se.providerIndexes+=1048576),d.push(Lr),I.push(Lr)}else rb(T,r,Mt>-1?Mt:yn,Jb(d[m?yn:Mt],V,!m&&p));!m&&p&&lr&&d[yn].componentProviders++}}}function rb(r,s,d,p){const m=qc(s),T=function Xg(r){return!!r.useClass}(s);if(m||T){const V=(T?Ke(s.useClass):s).prototype.ngOnDestroy;if(V){const se=r.destroyHooks||(r.destroyHooks=[]);if(!m&&s.multi){const De=se.indexOf(d);-1===De?se.push(d,[p,V]):se[De+1].push(p,V)}else se.push(d,V)}}}function Jb(r,s,d){return d&&r.componentProviders++,r.multi.push(s)-1}function ib(r,s,d,p){for(let m=d;m<p;m++)if(s[m]===r)return m;return-1}function ES(r,s,d,p){return sb(this.multi,[])}function SS(r,s,d,p){const m=this.multi;let T;if(this.providerFactory){const I=this.providerFactory.componentProviders,P=Fl(d,d[cn],this.providerFactory.index,p);T=P.slice(0,I),sb(m,T);for(let V=I;V<P.length;V++)T.push(P[V])}else T=[],sb(m,T);return T}function sb(r,s){for(let d=0;d<r.length;d++)s.push((0,r[d])());return s}function eT(r,s=[]){return d=>{d.providersResolver=(p,m)=>function TS(r,s,d){const p=qr();if(p.firstCreatePass){const m=Xs(r);nb(d,p.data,p.blueprint,m,!0),nb(s,p.data,p.blueprint,m,!1)}}(p,m?m(r):r,s)}}class R_{}class tT{}function CS(r,s){return new ob(r,s??null,[])}class ob extends R_{constructor(s,d,p){super(),this._parent=d,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Gv(this);const m=xs(s);this._bootstrapComponents=kd(m.bootstrap),this._r3Injector=Em(s,d,[{provide:R_,useValue:this},{provide:ep,useValue:this.componentFactoryResolver},...p],rt(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(d=>d()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class ab extends tT{constructor(s){super(),this.moduleType=s}create(s){return new ob(this.moduleType,s,[])}}class nT extends R_{constructor(s){super(),this.componentFactoryResolver=new Gv(this),this.instance=null;const d=new ko([...s.providers,{provide:R_,useValue:this},{provide:ep,useValue:this.componentFactoryResolver}],s.parent||Kc(),s.debugName,new Set(["environment"]));this.injector=d,s.runEnvironmentInitializers&&d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function rT(r,s,d=null){return new nT({providers:r,parent:s,debugName:d,runEnvironmentInitializers:!0}).injector}let xS=(()=>{class r{constructor(d){this._injector=d,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(d){if(!d.standalone)return null;if(!this.cachedInjectors.has(d.id)){const p=Ny(0,d.type),m=p.length>0?rT([p],this._injector,`Standalone[${d.type.name}]`):null;this.cachedInjectors.set(d.id,m)}return this.cachedInjectors.get(d.id)}ngOnDestroy(){try{for(const d of this.cachedInjectors.values())null!==d&&d.destroy()}finally{this.cachedInjectors.clear()}}}return r.\u0275prov=On({token:r,providedIn:"environment",factory:()=>new r(Zr(Dd))}),r})();function iT(r){r.getStandaloneInjector=s=>s.get(xS).getOrCreateStandaloneInjector(r)}function dT(r,s,d){const p=ys()+r,m=_n();return m[p]===_i?kt(m,p,d?s.call(d):s()):function pn(r,s){return r[s]}(m,p)}function hT(r,s,d,p){return pT(_n(),ys(),r,s,d,p)}function fT(r,s,d,p,m){return function gT(r,s,d,p,m,T,I){const P=s+d;return Zt(r,P,m,T)?kt(r,P+2,I?p.call(I,m,T):p(m,T)):P0(r,P+2)}(_n(),ys(),r,s,d,p,m)}function P0(r,s){const d=r[s];return d===_i?void 0:d}function pT(r,s,d,p,m,T){const I=s+d;return jn(r,I,m)?kt(r,I+1,T?p.call(T,m):p(m)):P0(r,I+1)}function _T(r,s){const d=qr();let p;const m=r+Wr;d.firstCreatePass?(p=function $S(r,s){if(s)for(let d=s.length-1;d>=0;d--){const p=s[d];if(r===p.name)return p}}(s,d.pipeRegistry),d.data[m]=p,p.onDestroy&&(d.destroyHooks??=[]).push(m,p.onDestroy)):p=d.data[m];const T=p.factory||(p.factory=oe(p.type)),I=ai(af);try{const P=fn(!1),V=T();return fn(P),function Fm(r,s,d,p){d>=r.data.length&&(r.data[d]=null,r.blueprint[d]=null),s[d]=p}(d,_n(),m,V),V}finally{ai(I)}}function bT(r,s,d){const p=r+Wr,m=_n(),T=Ie(m,p);return function O0(r,s){return r[cn].data[s].pure}(m,p)?pT(m,ys(),s,T.transform,d,T):T.transform(d)}function lb(r){return s=>{setTimeout(r,void 0,s)}}const Sp=class KS extends E.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,d,p){let m=s,T=d||(()=>null),I=p;if(s&&"object"==typeof s){const V=s;m=V.next?.bind(V),T=V.error?.bind(V),I=V.complete?.bind(V)}this.__isAsync&&(T=lb(T),m&&(m=lb(m)),I&&(I=lb(I)));const P=super.subscribe({next:m,error:T,complete:I});return s instanceof N.w&&s.add(P),P}};function ZS(){return this._results[Symbol.iterator]()}class z0{get changes(){return this._changes||(this._changes=new Sp)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const d=z0.prototype;d[Symbol.iterator]||(d[Symbol.iterator]=ZS)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,d){return this._results.reduce(s,d)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,d){const p=this;p.dirty=!1;const m=function fa(r){return r.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function ku(r,s,d){if(r.length!==s.length)return!1;for(let p=0;p<r.length;p++){let m=r[p],T=s[p];if(d&&(m=d(m),T=d(T)),T!==m)return!1}return!0}(p._results,m,d))&&(p._results=m,p.length=m.length,p.last=m[this.length-1],p.first=m[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let R0=(()=>{class r{}return r.__NG_ELEMENT_ID__=XS,r})();const YS=R0,QS=class extends YS{constructor(s,d,p){super(),this._declarationLView=s,this._declarationTContainer=d,this.elementRef=p}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(s,d){return this.createEmbeddedViewImpl(s,d,null)}createEmbeddedViewImpl(s,d,p){const m=this._declarationTContainer.tView,T=Sm(this._declarationLView,m,s,16,null,m.declTNode,null,null,null,d||null,p||null);T[Xo]=this._declarationLView[this._declarationTContainer.index];const P=this._declarationLView[hs];return null!==P&&(T[hs]=P.createEmbeddedView(m)),ah(m,T,s),new fg(T)}};function XS(){return W0(Us(),_n())}function W0(r,s){return 4&r.type?new QS(s,r,ih(r,s)):null}let q0=(()=>{class r{}return r.__NG_ELEMENT_ID__=sw,r})();function sw(){return IT(Us(),_n())}const ow=q0,wT=class extends ow{constructor(s,d,p){super(),this._lContainer=s,this._hostTNode=d,this._hostLView=p}get element(){return ih(this._hostTNode,this._hostLView)}get injector(){return new jl(this._hostTNode,this._hostLView)}get parentInjector(){const s=Nl(this._hostTNode,this._hostLView);if(Qi(s)){const d=sd(s,this._hostLView),p=su(s);return new jl(d[cn].data[p+8],d)}return new jl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const d=CT(this._lContainer);return null!==d&&d[s]||null}get length(){return this._lContainer.length-As}createEmbeddedView(s,d,p){let m,T;"number"==typeof p?m=p:null!=p&&(m=p.index,T=p.injector);const P=s.createEmbeddedViewImpl(d||{},T,null);return this.insertImpl(P,m,false),P}createComponent(s,d,p,m,T){const I=s&&!function xi(r){return"function"==typeof r}(s);let P;if(I)P=d;else{const Vn=d||{};P=Vn.index,p=Vn.injector,m=Vn.projectableNodes,T=Vn.environmentInjector||Vn.ngModuleRef}const V=I?s:new lp(wr(s)),se=p||this.parentInjector;if(!T&&null==V.ngModule){const lr=(I?se:this.parentInjector).get(Dd,null);lr&&(T=lr)}wr(V.componentType??{});const Mt=V.create(se,m,null,T);return this.insertImpl(Mt.hostView,P,false),Mt}insert(s,d){return this.insertImpl(s,d,!1)}insertImpl(s,d,p){const m=s._lView,T=m[cn];if(function ur(r){return yo(r[fr])}(m)){const V=this.indexOf(s);if(-1!==V)this.detach(V);else{const se=m[fr],De=new wT(se,se[Ci],se[fr]);De.detach(De.indexOf(s))}}const I=this._adjustIndex(d),P=this._lContainer;if(function Bf(r,s,d,p){const m=As+p,T=d.length;p>0&&(d[m-1][Er]=s),p<T-As?(s[Er]=d[m],wh(d,As+p,s)):(d.push(s),s[Er]=null),s[fr]=d;const I=s[Xo];null!==I&&d!==I&&function Lp(r,s){const d=r[Ii];s[ji]!==s[fr][fr][ji]&&(r[La]=!0),null===d?r[Ii]=[s]:d.push(s)}(I,s);const P=s[hs];null!==P&&P.insertView(r),s[$n]|=128}(T,m,P,I),!p){const V=yl(I,P),se=m[Dr],De=yi(se,P[vs]);null!==De&&function zg(r,s,d,p,m,T){p[Gn]=m,p[Ci]=s,Wl(r,p,d,1,m,T)}(T,P[Ci],se,m,De,V)}return s.attachToViewContainerRef(),wh(db(P),I,s),s}move(s,d){return this.insert(s,d)}indexOf(s){const d=CT(this._lContainer);return null!==d?d.indexOf(s):-1}remove(s){const d=this._adjustIndex(s,-1),p=Zu(this._lContainer,d);p&&(O(db(this._lContainer),d),Uh(p[cn],p))}detach(s){const d=this._adjustIndex(s,-1),p=Zu(this._lContainer,d);return p&&null!=O(db(this._lContainer),d)?new fg(p):null}_adjustIndex(s,d=0){return s??this.length+d}};function CT(r){return r[Uo]}function db(r){return r[Uo]||(r[Uo]=[])}function IT(r,s){let d;const p=s[r.index];return yo(p)?d=p:(d=s_(p,s,null,r),s[r.index]=d,up(s,d)),xT(d,s,r,p),new wT(d,r,s)}let xT=function DT(r,s,d,p){if(r[vs])return;let m;m=8&d.type?li(p):function aw(r,s){const d=r[Dr],p=d.createComment(""),m=B(s,r);return Lu(d,yi(d,m),p,function wd(r,s){return r.nextSibling(s)}(d,m),!1),p}(s,d),r[vs]=m};class hb{constructor(s){this.queryList=s,this.matches=null}clone(){return new hb(this.queryList)}setDirty(){this.queryList.setDirty()}}class fb{constructor(s=[]){this.queries=s}createEmbeddedView(s){const d=s.queries;if(null!==d){const p=null!==s.contentQueries?s.contentQueries[0]:d.length,m=[];for(let T=0;T<p;T++){const I=d.getByIndex(T);m.push(this.queries[I.indexInDeclarationView].clone())}return new fb(m)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let d=0;d<this.queries.length;d++)null!==FT(s,d).matches&&this.queries[d].setDirty()}}class AT{constructor(s,d,p=null){this.predicate=s,this.flags=d,this.read=p}}class pb{constructor(s=[]){this.queries=s}elementStart(s,d){for(let p=0;p<this.queries.length;p++)this.queries[p].elementStart(s,d)}elementEnd(s){for(let d=0;d<this.queries.length;d++)this.queries[d].elementEnd(s)}embeddedTView(s){let d=null;for(let p=0;p<this.length;p++){const m=null!==d?d.length:0,T=this.getByIndex(p).embeddedTView(s,m);T&&(T.indexInDeclarationView=p,null!==d?d.push(T):d=[T])}return null!==d?new pb(d):null}template(s,d){for(let p=0;p<this.queries.length;p++)this.queries[p].template(s,d)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class gb{constructor(s,d=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=d}elementStart(s,d){this.isApplyingToNode(d)&&this.matchTNode(s,d)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,d){this.elementStart(s,d)}embeddedTView(s,d){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,d),new gb(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const d=this._declarationNodeIndex;let p=s.parent;for(;null!==p&&8&p.type&&p.index!==d;)p=p.parent;return d===(null!==p?p.index:-1)}return this._appliesToNextNode}matchTNode(s,d){const p=this.metadata.predicate;if(Array.isArray(p))for(let m=0;m<p.length;m++){const T=p[m];this.matchTNodeWithReadOption(s,d,cw(d,T)),this.matchTNodeWithReadOption(s,d,kc(d,s,T,!1,!1))}else p===R0?4&d.type&&this.matchTNodeWithReadOption(s,d,-1):this.matchTNodeWithReadOption(s,d,kc(d,s,p,!1,!1))}matchTNodeWithReadOption(s,d,p){if(null!==p){const m=this.metadata.read;if(null!==m)if(m===tp||m===q0||m===R0&&4&d.type)this.addMatch(d.index,-2);else{const T=kc(d,s,m,!1,!1);null!==T&&this.addMatch(d.index,T)}else this.addMatch(d.index,p)}}addMatch(s,d){null===this.matches?this.matches=[s,d]:this.matches.push(s,d)}}function cw(r,s){const d=r.localNames;if(null!==d)for(let p=0;p<d.length;p+=2)if(d[p]===s)return d[p+1];return null}function hw(r,s,d,p){return-1===d?function dw(r,s){return 11&r.type?ih(r,s):4&r.type?W0(r,s):null}(s,r):-2===d?function fw(r,s,d){return d===tp?ih(s,r):d===R0?W0(s,r):d===q0?IT(s,r):void 0}(r,s,p):Fl(r,r[cn],d,s)}function MT(r,s,d,p){const m=s[hs].queries[p];if(null===m.matches){const T=r.data,I=d.matches,P=[];for(let V=0;V<I.length;V+=2){const se=I[V];P.push(se<0?null:hw(s,T[se],I[V+1],d.metadata.read))}m.matches=P}return m.matches}function mb(r,s,d,p){const m=r.queries.getByIndex(d),T=m.matches;if(null!==T){const I=MT(r,s,m,d);for(let P=0;P<T.length;P+=2){const V=T[P];if(V>0)p.push(I[P/2]);else{const se=T[P+1],De=s[-V];for(let Qe=As;Qe<De.length;Qe++){const Et=De[Qe];Et[Xo]===Et[fr]&&mb(Et[cn],Et,se,p)}if(null!==De[Ii]){const Qe=De[Ii];for(let Et=0;Et<Qe.length;Et++){const Mt=Qe[Et];mb(Mt[cn],Mt,se,p)}}}}}return p}function kT(r){const s=_n(),d=qr(),p=xc();fl(p+1);const m=FT(d,p);if(r.dirty&&function Lt(r){return 4==(4&r[$n])}(s)===(2==(2&m.metadata.flags))){if(null===m.matches)r.reset([]);else{const T=m.crossesNgTemplate?mb(d,s,p,[]):MT(d,s,m,p);r.reset(T,np),r.notifyOnChanges()}return!0}return!1}function PT(r,s,d){const p=qr();p.firstCreatePass&&(LT(p,new AT(r,s,d),-1),2==(2&s)&&(p.staticViewQueries=!0)),NT(p,_n(),s)}function OT(r,s,d,p){const m=qr();if(m.firstCreatePass){const T=Us();LT(m,new AT(s,d,p),T.index),function gw(r,s){const d=r.contentQueries||(r.contentQueries=[]);s!==(d.length?d[d.length-1]:-1)&&d.push(r.queries.length-1,s)}(m,r),2==(2&d)&&(m.staticContentQueries=!0)}NT(m,_n(),d)}function RT(){return function pw(r,s){return r[hs].queries[s].queryList}(_n(),xc())}function NT(r,s,d){const p=new z0(4==(4&d));(function ap(r,s,d,p){const m=o_(s);m.push(d),r.firstCreatePass&&dg(r).push(p,m.length-1)})(r,s,p,p.destroy),null===s[hs]&&(s[hs]=new fb),s[hs].queries.push(new hb(p))}function LT(r,s,d){null===r.queries&&(r.queries=new pb),r.queries.track(new gb(s,d))}function FT(r,s){return r.queries.getByIndex(s)}function jT(r,s){return W0(r,s)}function vb(r){return!!xs(r)}const tE=new ps("Application Initializer");let Eb=(()=>{class r{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,p)=>{this.resolve=d,this.reject=p}),this.appInits=tt(tE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const d=[];for(const m of this.appInits){const T=m();if(_f(T))d.push(T);else if(ty(T)){const I=new Promise((P,V)=>{T.subscribe({complete:P,error:V})});d.push(I)}}const p=()=>{this.done=!0,this.resolve()};Promise.all(d).then(()=>{p()}).catch(m=>{this.reject(m)}),0===d.length&&p(),this.initialized=!0}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275prov=On({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),nE=(()=>{class r{log(d){console.log(d)}warn(d){console.warn(d)}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275prov=On({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const Z0=new ps("LocaleId",{providedIn:"root",factory:()=>tt(Z0,tn.Optional|tn.SkipSelf)||function Lw(){return typeof $localize<"u"&&$localize.locale||Ve}()}),Fw=new ps("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class jw{constructor(s,d){this.ngModuleFactory=s,this.componentFactories=d}}let Uw=(()=>{class r{compileModuleSync(d){return new ab(d)}compileModuleAsync(d){return Promise.resolve(this.compileModuleSync(d))}compileModuleAndAllComponentsSync(d){const p=this.compileModuleSync(d),T=kd(xs(d).declarations).reduce((I,P)=>{const V=wr(P);return V&&I.push(new lp(V)),I},[]);return new jw(p,T)}compileModuleAndAllComponentsAsync(d){return Promise.resolve(this.compileModuleAndAllComponentsSync(d))}clearCache(){}clearCacheFor(d){}getModuleId(d){}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275prov=On({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Hw=(()=>Promise.resolve(0))();function Sb(r){typeof Zone>"u"?Hw.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}function sE(...r){}class Xl{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:d=!1,shouldCoalesceRunChangeDetection:p=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Sp(!1),this.onMicrotaskEmpty=new Sp(!1),this.onStable=new Sp(!1),this.onError=new Sp(!1),typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();const m=this;m._nesting=0,m._outer=m._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!p&&d,m.shouldCoalesceRunChangeDetection=p,m.lastRequestAnimationFrameId=-1,m.nativeRequestAnimationFrame=function $w(){let r=Sr.requestAnimationFrame,s=Sr.cancelAnimationFrame;if(typeof Zone<"u"&&r&&s){const d=r[Zone.__symbol__("OriginalDelegate")];d&&(r=d);const p=s[Zone.__symbol__("OriginalDelegate")];p&&(s=p)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Ww(r){const s=()=>{!function zw(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Sr,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,Cb(r),r.isCheckStableRunning=!0,wb(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),Cb(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(d,p,m,T,I,P)=>{try{return oE(r),d.invokeTask(m,T,I,P)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===T.type||r.shouldCoalesceRunChangeDetection)&&s(),aE(r)}},onInvoke:(d,p,m,T,I,P,V)=>{try{return oE(r),d.invoke(m,T,I,P,V)}finally{r.shouldCoalesceRunChangeDetection&&s(),aE(r)}},onHasTask:(d,p,m,T)=>{d.hasTask(m,T),p===m&&("microTask"==T.change?(r._hasPendingMicrotasks=T.microTask,Cb(r),wb(r)):"macroTask"==T.change&&(r.hasPendingMacrotasks=T.macroTask))},onHandleError:(d,p,m,T)=>(d.handleError(m,T),r.runOutsideAngular(()=>r.onError.emit(T)),!1)})}(m)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xl.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(Xl.isInAngularZone())throw new re(909,!1)}run(s,d,p){return this._inner.run(s,d,p)}runTask(s,d,p,m){const T=this._inner,I=T.scheduleEventTask("NgZoneEvent: "+m,s,Gw,sE,sE);try{return T.runTask(I,d,p)}finally{T.cancelTask(I)}}runGuarded(s,d,p){return this._inner.runGuarded(s,d,p)}runOutsideAngular(s){return this._outer.run(s)}}const Gw={};function wb(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function Cb(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function oE(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function aE(r){r._nesting--,wb(r)}class qw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Sp,this.onMicrotaskEmpty=new Sp,this.onStable=new Sp,this.onError=new Sp}run(s,d,p){return s.apply(d,p)}runGuarded(s,d,p){return s.apply(d,p)}runOutsideAngular(s){return s()}runTask(s,d,p,m){return s.apply(d,p)}}const uE=new ps("",{providedIn:"root",factory:lE});function lE(){const r=tt(Xl);let s=!0;const d=new fe.y(m=>{s=r.isStable&&!r.hasPendingMacrotasks&&!r.hasPendingMicrotasks,r.runOutsideAngular(()=>{m.next(s),m.complete()})}),p=new fe.y(m=>{let T;r.runOutsideAngular(()=>{T=r.onStable.subscribe(()=>{Xl.assertNotInAngularZone(),Sb(()=>{!s&&!r.hasPendingMacrotasks&&!r.hasPendingMicrotasks&&(s=!0,m.next(!0))})})});const I=r.onUnstable.subscribe(()=>{Xl.assertInAngularZone(),s&&(s=!1,r.runOutsideAngular(()=>{m.next(!1)}))});return()=>{T.unsubscribe(),I.unsubscribe()}});return(0,Be.T)(d,p.pipe(function ye(){return r=>(0,Re.x)()(function xe(r,s){return function(p){let m;if(m="function"==typeof r?r:function(){return r},"function"==typeof s)return p.lift(new He(m,s));const T=Object.create(p,_e.N);return T.source=p,T.subjectFactory=m,T}}(Ue)(r))}()))}const cE=new ps(""),dE=new ps("");let Ib,Kw=(()=>{class r{constructor(d,p,m){this._ngZone=d,this.registry=p,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ib||(function Zw(r){Ib=r}(m),m.addToWindow(p)),this._watchAngularEvents(),d.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xl.assertNotInAngularZone(),Sb(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Sb(()=>{for(;0!==this._callbacks.length;){let d=this._callbacks.pop();clearTimeout(d.timeoutId),d.doneCb(this._didWork)}this._didWork=!1});else{let d=this.getPendingTasks();this._callbacks=this._callbacks.filter(p=>!p.updateCb||!p.updateCb(d)||(clearTimeout(p.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(d=>({source:d.source,creationLocation:d.creationLocation,data:d.data})):[]}addCallback(d,p,m){let T=-1;p&&p>0&&(T=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==T),d(this._didWork,this.getPendingTasks())},p)),this._callbacks.push({doneCb:d,timeoutId:T,updateCb:m})}whenStable(d,p,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(d,p,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(d){this.registry.registerApplication(d,this)}unregisterApplication(d){this.registry.unregisterApplication(d)}findProviders(d,p,m){return[]}}return r.\u0275fac=function(d){return new(d||r)(Zr(Xl),Zr(hE),Zr(dE))},r.\u0275prov=On({token:r,factory:r.\u0275fac}),r})(),hE=(()=>{class r{constructor(){this._applications=new Map}registerApplication(d,p){this._applications.set(d,p)}unregisterApplication(d){this._applications.delete(d)}unregisterAllApplications(){this._applications.clear()}getTestability(d){return this._applications.get(d)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(d,p=!0){return Ib?.findTestabilityInTree(this,d,p)??null}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275prov=On({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),Qm=null;const fE=new ps("AllowMultipleToken"),xb=new ps("PlatformDestroyListeners"),Db=new ps("appBootstrapListener");class Xw{constructor(s,d){this.name=s,this.token=d}}function mE(r,s,d=[]){const p=`Platform: ${s}`,m=new ps(p);return(T=[])=>{let I=Ab();if(!I||I.injector.get(fE,!1)){const P=[...d,...T,{provide:m,useValue:!0}];r?r(P):function Jw(r){if(Qm&&!Qm.get(fE,!1))throw new re(400,!1);(function pE(){!function la(r){Ki=r}(()=>{throw new re(600,!1)})})(),Qm=r;const s=r.get(yE);(function gE(r){r.get(tm,null)?.forEach(d=>d())})(r)}(function vE(r=[],s){return yc.create({name:s,providers:[{provide:Jg,useValue:"platform"},{provide:xb,useValue:new Set([()=>Qm=null])},...r]})}(P,p))}return function tC(r){const s=Ab();if(!s)throw new re(401,!1);return s}()}}function Ab(){return Qm?.get(yE)??null}let yE=(()=>{class r{constructor(d){this._injector=d,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(d,p){const m=function nC(r="zone.js",s){return"noop"===r?new qw:"zone.js"===r?new Xl(s):r}(p?.ngZone,function _E(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:r?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:r?.runCoalescing??!1}}({eventCoalescing:p?.ngZoneEventCoalescing,runCoalescing:p?.ngZoneRunCoalescing}));return m.run(()=>{const T=function IS(r,s,d){return new ob(r,s,d)}(d.moduleType,this.injector,function wE(r){return[{provide:Xl,useFactory:r},{provide:zh,multi:!0,useFactory:()=>{const s=tt(iC,{optional:!0});return()=>s.initialize()}},{provide:SE,useFactory:rC},{provide:uE,useFactory:lE}]}(()=>m)),I=T.injector.get(sh,null);return m.runOutsideAngular(()=>{const P=m.onError.subscribe({next:V=>{I.handleError(V)}});T.onDestroy(()=>{Y0(this._modules,T),P.unsubscribe()})}),function bE(r,s,d){try{const p=d();return _f(p)?p.catch(m=>{throw s.runOutsideAngular(()=>r.handleError(m)),m}):p}catch(p){throw s.runOutsideAngular(()=>r.handleError(p)),p}}(I,m,()=>{const P=T.injector.get(Eb);return P.runInitializers(),P.donePromise.then(()=>(function t(r){Nn(r,"Expected localeId to be defined"),"string"==typeof r&&(e=r.toLowerCase().replace(/_/g,"-"))}(T.injector.get(Z0,Ve)||Ve),this._moduleDoBootstrap(T),T))})})}bootstrapModule(d,p=[]){const m=TE({},p);return function Yw(r,s,d){const p=new ab(d);return Promise.resolve(p)}(0,0,d).then(T=>this.bootstrapModuleFactory(T,m))}_moduleDoBootstrap(d){const p=d.injector.get(F_);if(d._bootstrapComponents.length>0)d._bootstrapComponents.forEach(m=>p.bootstrap(m));else{if(!d.instance.ngDoBootstrap)throw new re(-403,!1);d.instance.ngDoBootstrap(p)}this._modules.push(d)}onDestroy(d){this._destroyListeners.push(d)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new re(404,!1);this._modules.slice().forEach(p=>p.destroy()),this._destroyListeners.forEach(p=>p());const d=this._injector.get(xb,null);d&&(d.forEach(p=>p()),d.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(d){return new(d||r)(Zr(yc))},r.\u0275prov=On({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function TE(r,s){return Array.isArray(s)?s.reduce(TE,r):{...r,...s}}let F_=(()=>{class r{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=tt(SE),this.componentTypes=[],this.components=[],this.isStable=tt(uE),this._injector=tt(Dd)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(d,p){const m=d instanceof Jp;if(!this._injector.get(Eb).done)throw!m&&aa(d),new re(405,!1);let I;I=m?d:this._injector.get(ep).resolveComponentFactory(d),this.componentTypes.push(I.componentType);const P=function Qw(r){return r.isBoundToModule}(I)?void 0:this._injector.get(R_),se=I.create(yc.NULL,[],p||I.selector,P),De=se.location.nativeElement,Qe=se.injector.get(cE,null);return Qe?.registerApplication(De),se.onDestroy(()=>{this.detachView(se.hostView),Y0(this.components,se),Qe?.unregisterApplication(De)}),this._loadComponent(se),se}tick(){if(this._runningTick)throw new re(101,!1);try{this._runningTick=!0;for(let d of this._views)d.detectChanges()}catch(d){this.internalErrorHandler(d)}finally{this._runningTick=!1}}attachView(d){const p=d;this._views.push(p),p.attachToAppRef(this)}detachView(d){const p=d;Y0(this._views,p),p.detachFromAppRef()}_loadComponent(d){this.attachView(d.hostView),this.tick(),this.components.push(d);const p=this._injector.get(Db,[]);p.push(...this._bootstrapListeners),p.forEach(m=>m(d))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(d=>d()),this._views.slice().forEach(d=>d.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(d){return this._destroyListeners.push(d),()=>Y0(this._destroyListeners,d)}destroy(){if(this._destroyed)throw new re(406,!1);const d=this._injector;d.destroy&&!d.destroyed&&d.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275prov=On({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Y0(r,s){const d=r.indexOf(s);d>-1&&r.splice(d,1)}const SE=new ps("",{providedIn:"root",factory:()=>tt(sh).handleError.bind(void 0)});function rC(){const r=tt(Xl),s=tt(sh);return d=>r.runOutsideAngular(()=>s.handleError(d))}let iC=(()=>{class r{constructor(){this.zone=tt(Xl),this.applicationRef=tt(F_)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275prov=On({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function oC(){return!1}function aC(){}let uC=(()=>{class r{}return r.__NG_ELEMENT_ID__=lC,r})();function lC(r){return function cC(r,s,d){if(Ys(r)&&!d){const p=Ge(r.index,s);return new fg(p,p)}return 47&r.type?new fg(s[ji],s):null}(Us(),_n(),16==(16&r))}class DE{constructor(){}supports(s){return Q(s)}create(s){return new mC(s)}}const gC=(r,s)=>s;class mC{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||gC}forEachItem(s){let d;for(d=this._itHead;null!==d;d=d._next)s(d)}forEachOperation(s){let d=this._itHead,p=this._removalsHead,m=0,T=null;for(;d||p;){const I=!p||d&&d.currentIndex<ME(p,m,T)?d:p,P=ME(I,m,T),V=I.currentIndex;if(I===p)m--,p=p._nextRemoved;else if(d=d._next,null==I.previousIndex)m++;else{T||(T=[]);const se=P-m,De=V-m;if(se!=De){for(let Et=0;Et<se;Et++){const Mt=Et<T.length?T[Et]:T[Et]=0,yn=Mt+Et;De<=yn&&yn<se&&(T[Et]=Mt+1)}T[I.previousIndex]=De-se}}P!==V&&s(I,P,V)}}forEachPreviousItem(s){let d;for(d=this._previousItHead;null!==d;d=d._nextPrevious)s(d)}forEachAddedItem(s){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)s(d)}forEachMovedItem(s){let d;for(d=this._movesHead;null!==d;d=d._nextMoved)s(d)}forEachRemovedItem(s){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)s(d)}forEachIdentityChange(s){let d;for(d=this._identityChangesHead;null!==d;d=d._nextIdentityChange)s(d)}diff(s){if(null==s&&(s=[]),!Q(s))throw new re(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let m,T,I,d=this._itHead,p=!1;if(Array.isArray(s)){this.length=s.length;for(let P=0;P<this.length;P++)T=s[P],I=this._trackByFn(P,T),null!==d&&Object.is(d.trackById,I)?(p&&(d=this._verifyReinsertion(d,T,I,P)),Object.is(d.item,T)||this._addIdentityChange(d,T)):(d=this._mismatch(d,T,I,P),p=!0),d=d._next}else m=0,function je(r,s){if(Array.isArray(r))for(let d=0;d<r.length;d++)s(r[d]);else{const d=r[Symbol.iterator]();let p;for(;!(p=d.next()).done;)s(p.value)}}(s,P=>{I=this._trackByFn(m,P),null!==d&&Object.is(d.trackById,I)?(p&&(d=this._verifyReinsertion(d,P,I,m)),Object.is(d.item,P)||this._addIdentityChange(d,P)):(d=this._mismatch(d,P,I,m),p=!0),d=d._next,m++}),this.length=m;return this._truncate(d),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,d,p,m){let T;return null===s?T=this._itTail:(T=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(p,null))?(Object.is(s.item,d)||this._addIdentityChange(s,d),this._reinsertAfter(s,T,m)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(p,m))?(Object.is(s.item,d)||this._addIdentityChange(s,d),this._moveAfter(s,T,m)):s=this._addAfter(new vC(d,p),T,m),s}_verifyReinsertion(s,d,p,m){let T=null===this._unlinkedRecords?null:this._unlinkedRecords.get(p,null);return null!==T?s=this._reinsertAfter(T,s._prev,m):s.currentIndex!=m&&(s.currentIndex=m,this._addToMoves(s,m)),s}_truncate(s){for(;null!==s;){const d=s._next;this._addToRemovals(this._unlink(s)),s=d}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,d,p){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const m=s._prevRemoved,T=s._nextRemoved;return null===m?this._removalsHead=T:m._nextRemoved=T,null===T?this._removalsTail=m:T._prevRemoved=m,this._insertAfter(s,d,p),this._addToMoves(s,p),s}_moveAfter(s,d,p){return this._unlink(s),this._insertAfter(s,d,p),this._addToMoves(s,p),s}_addAfter(s,d,p){return this._insertAfter(s,d,p),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,d,p){const m=null===d?this._itHead:d._next;return s._next=m,s._prev=d,null===m?this._itTail=s:m._prev=s,null===d?this._itHead=s:d._next=s,null===this._linkedRecords&&(this._linkedRecords=new AE),this._linkedRecords.put(s),s.currentIndex=p,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const d=s._prev,p=s._next;return null===d?this._itHead=p:d._next=p,null===p?this._itTail=d:p._prev=d,s}_addToMoves(s,d){return s.previousIndex===d||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new AE),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,d){return s.item=d,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class vC{constructor(s,d){this.item=s,this.trackById=d,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class yC{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,d){let p;for(p=this._head;null!==p;p=p._nextDup)if((null===d||d<=p.currentIndex)&&Object.is(p.trackById,s))return p;return null}remove(s){const d=s._prevDup,p=s._nextDup;return null===d?this._head=p:d._nextDup=p,null===p?this._tail=d:p._prevDup=d,null===this._head}}class AE{constructor(){this.map=new Map}put(s){const d=s.trackById;let p=this.map.get(d);p||(p=new yC,this.map.set(d,p)),p.add(s)}get(s,d){const m=this.map.get(s);return m?m.get(s,d):null}remove(s){const d=s.trackById;return this.map.get(d).remove(s)&&this.map.delete(d),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ME(r,s,d){const p=r.previousIndex;if(null===p)return p;let m=0;return d&&p<d.length&&(m=d[p]),p+s+m}class kE{constructor(){}supports(s){return s instanceof Map||We(s)}create(){return new _C}}class _C{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let d;for(d=this._mapHead;null!==d;d=d._next)s(d)}forEachPreviousItem(s){let d;for(d=this._previousMapHead;null!==d;d=d._nextPrevious)s(d)}forEachChangedItem(s){let d;for(d=this._changesHead;null!==d;d=d._nextChanged)s(d)}forEachAddedItem(s){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)s(d)}forEachRemovedItem(s){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)s(d)}diff(s){if(s){if(!(s instanceof Map||We(s)))throw new re(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d=this._mapHead;if(this._appendAfter=null,this._forEach(s,(p,m)=>{if(d&&d.key===m)this._maybeAddToChanges(d,p),this._appendAfter=d,d=d._next;else{const T=this._getOrCreateRecordForKey(m,p);d=this._insertBeforeOrAppend(d,T)}}),d){d._prev&&(d._prev._next=null),this._removalsHead=d;for(let p=d;null!==p;p=p._nextRemoved)p===this._mapHead&&(this._mapHead=null),this._records.delete(p.key),p._nextRemoved=p._next,p.previousValue=p.currentValue,p.currentValue=null,p._prev=null,p._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,d){if(s){const p=s._prev;return d._next=s,d._prev=p,s._prev=d,p&&(p._next=d),s===this._mapHead&&(this._mapHead=d),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=d,d._prev=this._appendAfter):this._mapHead=d,this._appendAfter=d,null}_getOrCreateRecordForKey(s,d){if(this._records.has(s)){const m=this._records.get(s);this._maybeAddToChanges(m,d);const T=m._prev,I=m._next;return T&&(T._next=I),I&&(I._prev=T),m._next=null,m._prev=null,m}const p=new bC(s);return this._records.set(s,p),p.currentValue=d,this._addToAdditions(p),p}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,d){Object.is(d,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=d,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,d){s instanceof Map?s.forEach(d):Object.keys(s).forEach(p=>d(s[p],p))}}class bC{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function PE(){return new Rb([new DE])}let Rb=(()=>{class r{constructor(d){this.factories=d}static create(d,p){if(null!=p){const m=p.factories.slice();d=d.concat(m)}return new r(d)}static extend(d){return{provide:r,useFactory:p=>r.create(d,p||PE()),deps:[[r,new Oc,new Of]]}}find(d){const p=this.factories.find(m=>m.supports(d));if(null!=p)return p;throw new re(901,!1)}}return r.\u0275prov=On({token:r,providedIn:"root",factory:PE}),r})();function OE(){return new Nb([new kE])}let Nb=(()=>{class r{constructor(d){this.factories=d}static create(d,p){if(p){const m=p.factories.slice();d=d.concat(m)}return new r(d)}static extend(d){return{provide:r,useFactory:p=>r.create(d,p||OE()),deps:[[r,new Oc,new Of]]}}find(d){const p=this.factories.find(m=>m.supports(d));if(p)return p;throw new re(901,!1)}}return r.\u0275prov=On({token:r,providedIn:"root",factory:OE}),r})();const SC=mE(null,"core",[]);let wC=(()=>{class r{constructor(d){}}return r.\u0275fac=function(d){return new(d||r)(Zr(F_))},r.\u0275mod=Wa({type:r}),r.\u0275inj=In({}),r})(),UE=(()=>{class r{get whenAllTasksComplete(){return 0===this.collection.size&&this.complete(),this.promise}constructor(){this.taskId=0,this.collection=new Set,this.ngZone=tt(Xl),this.completed=!1,this.ngZone.runOutsideAngular(()=>{this.promise=new Promise(d=>{this.resolve=d})})}add(){if(this.completed)return-1;const d=this.taskId++;return this.collection.add(d),d}remove(d){this.completed||(this.collection.delete(d),0===this.collection.size&&this.complete())}ngOnDestroy(){this.complete(),this.collection.clear()}complete(){this.completed=!0,this.resolve()}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275prov=On({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function OC(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}function NC(r){const s=wr(r);if(!s)return null;const d=new lp(s);return{get selector(){return d.selector},get type(){return d.componentType},get inputs(){return d.inputs},get outputs(){return d.outputs},get ngContentSelectors(){return d.ngContentSelectors},get isStandalone(){return s.standalone}}}},2142:(en,ut,X)=>{"use strict";X.d(ut,{Cf:()=>Ke,F:()=>Lo,Fj:()=>ce,JJ:()=>ir,JL:()=>Pi,JU:()=>Re,Kr:()=>Jo,NI:()=>$s,On:()=>Is,Q7:()=>Bo,UX:()=>ts,YN:()=>Xo,_Y:()=>wr,c5:()=>Xr,cw:()=>ve,kI:()=>q,oH:()=>$n,sg:()=>Er,u5:()=>ta});var E=X(6547),N=X(4755),fe=X(5254),Be=X(567),_e=X(4850);let xe=(()=>{class ne{constructor(W,ke){this._renderer=W,this._elementRef=ke,this.onChange=$t=>{},this.onTouched=()=>{}}setProperty(W,ke){this._renderer.setProperty(this._elementRef.nativeElement,W,ke)}registerOnTouched(W){this.onTouched=W}registerOnChange(W){this.onChange=W}setDisabledState(W){this.setProperty("disabled",W)}}return ne.\u0275fac=function(W){return new(W||ne)(E.Y36(E.Qsj),E.Y36(E.SBq))},ne.\u0275dir=E.lG2({type:ne}),ne})(),He=(()=>{class ne extends xe{}return ne.\u0275fac=function(){let Z;return function(ke){return(Z||(Z=E.n5z(ne)))(ke||ne)}}(),ne.\u0275dir=E.lG2({type:ne,features:[E.qOj]}),ne})();const Re=new E.OlP("NgValueAccessor"),Ae={provide:Re,useExisting:(0,E.Gpc)(()=>ce),multi:!0},rt=new E.OlP("CompositionEventMode");let ce=(()=>{class ne extends xe{constructor(W,ke,$t){super(W,ke),this._compositionMode=$t,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Fe(){const ne=(0,N.q)()?(0,N.q)().getUserAgent():"";return/android (\d+)/.test(ne.toLowerCase())}())}writeValue(W){this.setProperty("value",W??"")}_handleInput(W){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(W)}_compositionStart(){this._composing=!0}_compositionEnd(W){this._composing=!1,this._compositionMode&&this.onChange(W)}}return ne.\u0275fac=function(W){return new(W||ne)(E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36(rt,8))},ne.\u0275dir=E.lG2({type:ne,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(W,ke){1&W&&E.NdJ("input",function(qn){return ke._handleInput(qn.target.value)})("blur",function(){return ke.onTouched()})("compositionstart",function(){return ke._compositionStart()})("compositionend",function(qn){return ke._compositionEnd(qn.target.value)})},features:[E._Bn([Ae]),E.qOj]}),ne})();function wt(ne){return null==ne||("string"==typeof ne||Array.isArray(ne))&&0===ne.length}function Ye(ne){return null!=ne&&"number"==typeof ne.length}const Ke=new E.OlP("NgValidators"),Ze=new E.OlP("NgAsyncValidators"),lt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class q{static min(Z){return function ge(ne){return Z=>{if(wt(Z.value)||wt(ne))return null;const W=parseFloat(Z.value);return!isNaN(W)&&W<ne?{min:{min:ne,actual:Z.value}}:null}}(Z)}static max(Z){return function re(ne){return Z=>{if(wt(Z.value)||wt(ne))return null;const W=parseFloat(Z.value);return!isNaN(W)&&W>ne?{max:{max:ne,actual:Z.value}}:null}}(Z)}static required(Z){return Ct(Z)}static requiredTrue(Z){return function bt(ne){return!0===ne.value?null:{required:!0}}(Z)}static email(Z){return function st(ne){return wt(ne.value)||lt.test(ne.value)?null:{email:!0}}(Z)}static minLength(Z){return function Y(ne){return Z=>wt(Z.value)||!Ye(Z.value)?null:Z.value.length<ne?{minlength:{requiredLength:ne,actualLength:Z.value.length}}:null}(Z)}static maxLength(Z){return function Te(ne){return Z=>Ye(Z.value)&&Z.value.length>ne?{maxlength:{requiredLength:ne,actualLength:Z.value.length}}:null}(Z)}static pattern(Z){return Xe(Z)}static nullValidator(Z){return null}static compose(Z){return an(Z)}static composeAsync(Z){return Vt(Z)}}function Ct(ne){return wt(ne.value)?{required:!0}:null}function Xe(ne){if(!ne)return ot;let Z,W;return"string"==typeof ne?(W="","^"!==ne.charAt(0)&&(W+="^"),W+=ne,"$"!==ne.charAt(ne.length-1)&&(W+="$"),Z=new RegExp(W)):(W=ne.toString(),Z=ne),ke=>{if(wt(ke.value))return null;const $t=ke.value;return Z.test($t)?null:{pattern:{requiredPattern:W,actualValue:$t}}}}function ot(ne){return null}function Rt(ne){return null!=ne}function xt(ne){return(0,E.QGY)(ne)?(0,fe.D)(ne):ne}function Wt(ne){let Z={};return ne.forEach(W=>{Z=null!=W?{...Z,...W}:Z}),0===Object.keys(Z).length?null:Z}function Sn(ne,Z){return Z.map(W=>W(ne))}function vn(ne){return ne.map(Z=>function Yt(ne){return!ne.validate}(Z)?Z:W=>Z.validate(W))}function an(ne){if(!ne)return null;const Z=ne.filter(Rt);return 0==Z.length?null:function(W){return Wt(Sn(W,Z))}}function Ut(ne){return null!=ne?an(vn(ne)):null}function Vt(ne){if(!ne)return null;const Z=ne.filter(Rt);return 0==Z.length?null:function(W){const ke=Sn(W,Z).map(xt);return(0,Be.D)(ke).pipe((0,_e.U)(Wt))}}function qt(ne){return null!=ne?Vt(vn(ne)):null}function En(ne,Z){return null===ne?[Z]:Array.isArray(ne)?[...ne,Z]:[ne,Z]}function on(ne){return ne._rawValidators}function Jt(ne){return ne._rawAsyncValidators}function Nn(ne){return ne?Array.isArray(ne)?ne:[ne]:[]}function Cn(ne,Z){return Array.isArray(ne)?ne.includes(Z):ne===Z}function pr(ne,Z){const W=Nn(Z);return Nn(ne).forEach($t=>{Cn(W,$t)||W.push($t)}),W}function xr(ne,Z){return Nn(Z).filter(W=>!Cn(ne,W))}class kr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(Z){this._rawValidators=Z||[],this._composedValidatorFn=Ut(this._rawValidators)}_setAsyncValidators(Z){this._rawAsyncValidators=Z||[],this._composedAsyncValidatorFn=qt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(Z){this._onDestroyCallbacks.push(Z)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(Z=>Z()),this._onDestroyCallbacks=[]}reset(Z=void 0){this.control&&this.control.reset(Z)}hasError(Z,W){return!!this.control&&this.control.hasError(Z,W)}getError(Z,W){return this.control?this.control.getError(Z,W):null}}class On extends kr{get formDirective(){return null}get path(){return null}}class Ai extends kr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class In{constructor(Z){this._cd=Z}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ir=(()=>{class ne extends In{constructor(W){super(W)}}return ne.\u0275fac=function(W){return new(W||ne)(E.Y36(Ai,2))},ne.\u0275dir=E.lG2({type:ne,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(W,ke){2&W&&E.ekj("ng-untouched",ke.isUntouched)("ng-touched",ke.isTouched)("ng-pristine",ke.isPristine)("ng-dirty",ke.isDirty)("ng-valid",ke.isValid)("ng-invalid",ke.isInvalid)("ng-pending",ke.isPending)},features:[E.qOj]}),ne})(),Pi=(()=>{class ne extends In{constructor(W){super(W)}}return ne.\u0275fac=function(W){return new(W||ne)(E.Y36(On,10))},ne.\u0275dir=E.lG2({type:ne,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(W,ke){2&W&&E.ekj("ng-untouched",ke.isUntouched)("ng-touched",ke.isTouched)("ng-pristine",ke.isPristine)("ng-dirty",ke.isDirty)("ng-valid",ke.isValid)("ng-invalid",ke.isInvalid)("ng-pending",ke.isPending)("ng-submitted",ke.isSubmitted)},features:[E.qOj]}),ne})();const Li="VALID",Si="INVALID",Hr="PENDING",Mn="DISABLED";function $i(ne){return(ds(ne)?ne.validators:ne)||null}function Ar(ne,Z){return(ds(Z)?Z.asyncValidators:ne)||null}function ds(ne){return null!=ne&&!Array.isArray(ne)&&"object"==typeof ne}class tt{constructor(Z,W){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(Z),this._assignAsyncValidators(W)}get validator(){return this._composedValidatorFn}set validator(Z){this._rawValidators=this._composedValidatorFn=Z}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(Z){this._rawAsyncValidators=this._composedAsyncValidatorFn=Z}get parent(){return this._parent}get valid(){return this.status===Li}get invalid(){return this.status===Si}get pending(){return this.status==Hr}get disabled(){return this.status===Mn}get enabled(){return this.status!==Mn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(Z){this._assignValidators(Z)}setAsyncValidators(Z){this._assignAsyncValidators(Z)}addValidators(Z){this.setValidators(pr(Z,this._rawValidators))}addAsyncValidators(Z){this.setAsyncValidators(pr(Z,this._rawAsyncValidators))}removeValidators(Z){this.setValidators(xr(Z,this._rawValidators))}removeAsyncValidators(Z){this.setAsyncValidators(xr(Z,this._rawAsyncValidators))}hasValidator(Z){return Cn(this._rawValidators,Z)}hasAsyncValidator(Z){return Cn(this._rawAsyncValidators,Z)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(Z={}){this.touched=!0,this._parent&&!Z.onlySelf&&this._parent.markAsTouched(Z)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(Z=>Z.markAllAsTouched())}markAsUntouched(Z={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(W=>{W.markAsUntouched({onlySelf:!0})}),this._parent&&!Z.onlySelf&&this._parent._updateTouched(Z)}markAsDirty(Z={}){this.pristine=!1,this._parent&&!Z.onlySelf&&this._parent.markAsDirty(Z)}markAsPristine(Z={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(W=>{W.markAsPristine({onlySelf:!0})}),this._parent&&!Z.onlySelf&&this._parent._updatePristine(Z)}markAsPending(Z={}){this.status=Hr,!1!==Z.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!Z.onlySelf&&this._parent.markAsPending(Z)}disable(Z={}){const W=this._parentMarkedDirty(Z.onlySelf);this.status=Mn,this.errors=null,this._forEachChild(ke=>{ke.disable({...Z,onlySelf:!0})}),this._updateValue(),!1!==Z.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...Z,skipPristineCheck:W}),this._onDisabledChange.forEach(ke=>ke(!0))}enable(Z={}){const W=this._parentMarkedDirty(Z.onlySelf);this.status=Li,this._forEachChild(ke=>{ke.enable({...Z,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:Z.emitEvent}),this._updateAncestors({...Z,skipPristineCheck:W}),this._onDisabledChange.forEach(ke=>ke(!1))}_updateAncestors(Z){this._parent&&!Z.onlySelf&&(this._parent.updateValueAndValidity(Z),Z.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(Z){this._parent=Z}getRawValue(){return this.value}updateValueAndValidity(Z={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Li||this.status===Hr)&&this._runAsyncValidator(Z.emitEvent)),!1!==Z.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!Z.onlySelf&&this._parent.updateValueAndValidity(Z)}_updateTreeValidity(Z={emitEvent:!0}){this._forEachChild(W=>W._updateTreeValidity(Z)),this.updateValueAndValidity({onlySelf:!0,emitEvent:Z.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mn:Li}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(Z){if(this.asyncValidator){this.status=Hr,this._hasOwnPendingAsyncValidator=!0;const W=xt(this.asyncValidator(this));this._asyncValidationSubscription=W.subscribe(ke=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ke,{emitEvent:Z})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(Z,W={}){this.errors=Z,this._updateControlsErrors(!1!==W.emitEvent)}get(Z){let W=Z;return null==W||(Array.isArray(W)||(W=W.split(".")),0===W.length)?null:W.reduce((ke,$t)=>ke&&ke._find($t),this)}getError(Z,W){const ke=W?this.get(W):this;return ke&&ke.errors?ke.errors[Z]:null}hasError(Z,W){return!!this.getError(Z,W)}get root(){let Z=this;for(;Z._parent;)Z=Z._parent;return Z}_updateControlsErrors(Z){this.status=this._calculateStatus(),Z&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(Z)}_initObservables(){this.valueChanges=new E.vpe,this.statusChanges=new E.vpe}_calculateStatus(){return this._allControlsDisabled()?Mn:this.errors?Si:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hr)?Hr:this._anyControlsHaveStatus(Si)?Si:Li}_anyControlsHaveStatus(Z){return this._anyControls(W=>W.status===Z)}_anyControlsDirty(){return this._anyControls(Z=>Z.dirty)}_anyControlsTouched(){return this._anyControls(Z=>Z.touched)}_updatePristine(Z={}){this.pristine=!this._anyControlsDirty(),this._parent&&!Z.onlySelf&&this._parent._updatePristine(Z)}_updateTouched(Z={}){this.touched=this._anyControlsTouched(),this._parent&&!Z.onlySelf&&this._parent._updateTouched(Z)}_registerOnCollectionChange(Z){this._onCollectionChange=Z}_setUpdateStrategy(Z){ds(Z)&&null!=Z.updateOn&&(this._updateOn=Z.updateOn)}_parentMarkedDirty(Z){return!Z&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(Z){return null}_assignValidators(Z){this._rawValidators=Array.isArray(Z)?Z.slice():Z,this._composedValidatorFn=function Zi(ne){return Array.isArray(ne)?Ut(ne):ne||null}(this._rawValidators)}_assignAsyncValidators(Z){this._rawAsyncValidators=Array.isArray(Z)?Z.slice():Z,this._composedAsyncValidatorFn=function ni(ne){return Array.isArray(ne)?qt(ne):ne||null}(this._rawAsyncValidators)}}class ve extends tt{constructor(Z,W,ke){super($i(W),Ar(ke,W)),this.controls=Z,this._initObservables(),this._setUpdateStrategy(W),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(Z,W){return this.controls[Z]?this.controls[Z]:(this.controls[Z]=W,W.setParent(this),W._registerOnCollectionChange(this._onCollectionChange),W)}addControl(Z,W,ke={}){this.registerControl(Z,W),this.updateValueAndValidity({emitEvent:ke.emitEvent}),this._onCollectionChange()}removeControl(Z,W={}){this.controls[Z]&&this.controls[Z]._registerOnCollectionChange(()=>{}),delete this.controls[Z],this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}setControl(Z,W,ke={}){this.controls[Z]&&this.controls[Z]._registerOnCollectionChange(()=>{}),delete this.controls[Z],W&&this.registerControl(Z,W),this.updateValueAndValidity({emitEvent:ke.emitEvent}),this._onCollectionChange()}contains(Z){return this.controls.hasOwnProperty(Z)&&this.controls[Z].enabled}setValue(Z,W={}){(function Vs(ne,Z,W){ne._forEachChild((ke,$t)=>{if(void 0===W[$t])throw new E.vHH(1002,"")})})(this,0,Z),Object.keys(Z).forEach(ke=>{(function Zr(ne,Z,W){const ke=ne.controls;if(!(Z?Object.keys(ke):ke).length)throw new E.vHH(1e3,"");if(!ke[W])throw new E.vHH(1001,"")})(this,!0,ke),this.controls[ke].setValue(Z[ke],{onlySelf:!0,emitEvent:W.emitEvent})}),this.updateValueAndValidity(W)}patchValue(Z,W={}){null!=Z&&(Object.keys(Z).forEach(ke=>{const $t=this.controls[ke];$t&&$t.patchValue(Z[ke],{onlySelf:!0,emitEvent:W.emitEvent})}),this.updateValueAndValidity(W))}reset(Z={},W={}){this._forEachChild((ke,$t)=>{ke.reset(Z[$t],{onlySelf:!0,emitEvent:W.emitEvent})}),this._updatePristine(W),this._updateTouched(W),this.updateValueAndValidity(W)}getRawValue(){return this._reduceChildren({},(Z,W,ke)=>(Z[ke]=W.getRawValue(),Z))}_syncPendingControls(){let Z=this._reduceChildren(!1,(W,ke)=>!!ke._syncPendingControls()||W);return Z&&this.updateValueAndValidity({onlySelf:!0}),Z}_forEachChild(Z){Object.keys(this.controls).forEach(W=>{const ke=this.controls[W];ke&&Z(ke,W)})}_setUpControls(){this._forEachChild(Z=>{Z.setParent(this),Z._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(Z){for(const[W,ke]of Object.entries(this.controls))if(this.contains(W)&&Z(ke))return!0;return!1}_reduceValue(){return this._reduceChildren({},(W,ke,$t)=>((ke.enabled||this.disabled)&&(W[$t]=ke.value),W))}_reduceChildren(Z,W){let ke=Z;return this._forEachChild(($t,qn)=>{ke=W(ke,$t,qn)}),ke}_allControlsDisabled(){for(const Z of Object.keys(this.controls))if(this.controls[Z].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(Z){return this.controls.hasOwnProperty(Z)?this.controls[Z]:null}}const nn=new E.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>gn}),gn="always";function Ee(ne,Z,W=gn){ar(ne,Z),Z.valueAccessor.writeValue(ne.value),(ne.disabled||"always"===W)&&Z.valueAccessor.setDisabledState?.(ne.disabled),function ii(ne,Z){Z.valueAccessor.registerOnChange(W=>{ne._pendingValue=W,ne._pendingChange=!0,ne._pendingDirty=!0,"change"===ne.updateOn&&yt(ne,Z)})}(ne,Z),function Kt(ne,Z){const W=(ke,$t)=>{Z.valueAccessor.writeValue(ke),$t&&Z.viewToModelUpdate(ke)};ne.registerOnChange(W),Z._registerOnDestroy(()=>{ne._unregisterOnChange(W)})}(ne,Z),function Dt(ne,Z){Z.valueAccessor.registerOnTouched(()=>{ne._pendingTouched=!0,"blur"===ne.updateOn&&ne._pendingChange&&yt(ne,Z),"submit"!==ne.updateOn&&ne.markAsTouched()})}(ne,Z),function Gt(ne,Z){if(Z.valueAccessor.setDisabledState){const W=ke=>{Z.valueAccessor.setDisabledState(ke)};ne.registerOnDisabledChange(W),Z._registerOnDestroy(()=>{ne._unregisterOnDisabledChange(W)})}}(ne,Z)}function qe(ne,Z,W=!0){const ke=()=>{};Z.valueAccessor&&(Z.valueAccessor.registerOnChange(ke),Z.valueAccessor.registerOnTouched(ke)),Nr(ne,Z),ne&&(Z._invokeOnDestroyCallbacks(),ne._registerOnCollectionChange(()=>{}))}function ct(ne,Z){ne.forEach(W=>{W.registerOnValidatorChange&&W.registerOnValidatorChange(Z)})}function ar(ne,Z){const W=on(ne);null!==Z.validator?ne.setValidators(En(W,Z.validator)):"function"==typeof W&&ne.setValidators([W]);const ke=Jt(ne);null!==Z.asyncValidator?ne.setAsyncValidators(En(ke,Z.asyncValidator)):"function"==typeof ke&&ne.setAsyncValidators([ke]);const $t=()=>ne.updateValueAndValidity();ct(Z._rawValidators,$t),ct(Z._rawAsyncValidators,$t)}function Nr(ne,Z){let W=!1;if(null!==ne){if(null!==Z.validator){const $t=on(ne);if(Array.isArray($t)&&$t.length>0){const qn=$t.filter(fs=>fs!==Z.validator);qn.length!==$t.length&&(W=!0,ne.setValidators(qn))}}if(null!==Z.asyncValidator){const $t=Jt(ne);if(Array.isArray($t)&&$t.length>0){const qn=$t.filter(fs=>fs!==Z.asyncValidator);qn.length!==$t.length&&(W=!0,ne.setAsyncValidators(qn))}}}const ke=()=>{};return ct(Z._rawValidators,ke),ct(Z._rawAsyncValidators,ke),W}function yt(ne,Z){ne._pendingDirty&&ne.markAsDirty(),ne.setValue(ne._pendingValue,{emitModelToViewChange:!1}),Z.viewToModelUpdate(ne._pendingValue),ne._pendingChange=!1}function er(ne,Z){ar(ne,Z)}function Ji(ne,Z){if(!ne.hasOwnProperty("model"))return!1;const W=ne.model;return!!W.isFirstChange()||!Object.is(Z,W.currentValue)}function po(ne,Z){ne._syncPendingControls(),Z.forEach(W=>{const ke=W.control;"submit"===ke.updateOn&&ke._pendingChange&&(W.viewToModelUpdate(ke._pendingValue),ke._pendingChange=!1)})}function go(ne,Z){if(!Z)return null;let W,ke,$t;return Array.isArray(Z),Z.forEach(qn=>{qn.constructor===ce?W=qn:function Fi(ne){return Object.getPrototypeOf(ne.constructor)===He}(qn)?ke=qn:$t=qn}),$t||ke||W||null}const Oa={provide:On,useExisting:(0,E.Gpc)(()=>Lo)},Hs=(()=>Promise.resolve())();let Lo=(()=>{class ne extends On{constructor(W,ke,$t){super(),this.callSetDisabledState=$t,this.submitted=!1,this._directives=new Set,this.ngSubmit=new E.vpe,this.form=new ve({},Ut(W),qt(ke))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(W){Hs.then(()=>{const ke=this._findContainer(W.path);W.control=ke.registerControl(W.name,W.control),Ee(W.control,W,this.callSetDisabledState),W.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(W)})}getControl(W){return this.form.get(W.path)}removeControl(W){Hs.then(()=>{const ke=this._findContainer(W.path);ke&&ke.removeControl(W.name),this._directives.delete(W)})}addFormGroup(W){Hs.then(()=>{const ke=this._findContainer(W.path),$t=new ve({});er($t,W),ke.registerControl(W.name,$t),$t.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(W){Hs.then(()=>{const ke=this._findContainer(W.path);ke&&ke.removeControl(W.name)})}getFormGroup(W){return this.form.get(W.path)}updateModel(W,ke){Hs.then(()=>{this.form.get(W.path).setValue(ke)})}setValue(W){this.control.setValue(W)}onSubmit(W){return this.submitted=!0,po(this.form,this._directives),this.ngSubmit.emit(W),"dialog"===W?.target?.method}onReset(){this.resetForm()}resetForm(W=void 0){this.form.reset(W),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(W){return W.pop(),W.length?this.form.get(W):this.form}}return ne.\u0275fac=function(W){return new(W||ne)(E.Y36(Ke,10),E.Y36(Ze,10),E.Y36(nn,8))},ne.\u0275dir=E.lG2({type:ne,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(W,ke){1&W&&E.NdJ("submit",function(qn){return ke.onSubmit(qn)})("reset",function(){return ke.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([Oa]),E.qOj]}),ne})();function Ra(ne,Z){const W=ne.indexOf(Z);W>-1&&ne.splice(W,1)}function so(ne){return"object"==typeof ne&&null!==ne&&2===Object.keys(ne).length&&"value"in ne&&"disabled"in ne}const $s=class extends tt{constructor(Z=null,W,ke){super($i(W),Ar(ke,W)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(Z),this._setUpdateStrategy(W),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ds(W)&&(W.nonNullable||W.initialValueIsDefault)&&(this.defaultValue=so(Z)?Z.value:Z)}setValue(Z,W={}){this.value=this._pendingValue=Z,this._onChange.length&&!1!==W.emitModelToViewChange&&this._onChange.forEach(ke=>ke(this.value,!1!==W.emitViewToModelChange)),this.updateValueAndValidity(W)}patchValue(Z,W={}){this.setValue(Z,W)}reset(Z=this.defaultValue,W={}){this._applyFormState(Z),this.markAsPristine(W),this.markAsUntouched(W),this.setValue(this.value,W),this._pendingChange=!1}_updateValue(){}_anyControls(Z){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(Z){this._onChange.push(Z)}_unregisterOnChange(Z){Ra(this._onChange,Z)}registerOnDisabledChange(Z){this._onDisabledChange.push(Z)}_unregisterOnDisabledChange(Z){Ra(this._onDisabledChange,Z)}_forEachChild(Z){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(Z){so(Z)?(this.value=this._pendingValue=Z.value,Z.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=Z}},mu={provide:Ai,useExisting:(0,E.Gpc)(()=>Is)},ba=(()=>Promise.resolve())();let Is=(()=>{class ne extends Ai{constructor(W,ke,$t,qn,fs,oe){super(),this._changeDetectorRef=fs,this.callSetDisabledState=oe,this.control=new $s,this._registered=!1,this.name="",this.update=new E.vpe,this._parent=W,this._setValidators(ke),this._setAsyncValidators($t),this.valueAccessor=go(0,qn)}ngOnChanges(W){if(this._checkForErrors(),!this._registered||"name"in W){if(this._registered&&(this._checkName(),this.formDirective)){const ke=W.name.previousValue;this.formDirective.removeControl({name:ke,path:this._getPath(ke)})}this._setUpControl()}"isDisabled"in W&&this._updateDisabled(W),Ji(W,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(W){this.viewModel=W,this.update.emit(W)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ee(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(W){ba.then(()=>{this.control.setValue(W,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(W){const ke=W.isDisabled.currentValue,$t=0!==ke&&(0,E.D6c)(ke);ba.then(()=>{$t&&!this.control.disabled?this.control.disable():!$t&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(W){return this._parent?function me(ne,Z){return[...Z.path,ne]}(W,this._parent):[W]}}return ne.\u0275fac=function(W){return new(W||ne)(E.Y36(On,9),E.Y36(Ke,10),E.Y36(Ze,10),E.Y36(Re,10),E.Y36(E.sBO,8),E.Y36(nn,8))},ne.\u0275dir=E.lG2({type:ne,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[E._Bn([mu]),E.qOj,E.TTD]}),ne})(),wr=(()=>{class ne{}return ne.\u0275fac=function(W){return new(W||ne)},ne.\u0275dir=E.lG2({type:ne,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),ne})(),vt=(()=>{class ne{}return ne.\u0275fac=function(W){return new(W||ne)},ne.\u0275mod=E.oAB({type:ne}),ne.\u0275inj=E.cJS({}),ne})();const Gn=new E.OlP("NgModelWithFormControlWarning"),cn={provide:Ai,useExisting:(0,E.Gpc)(()=>$n)};let $n=(()=>{class ne extends Ai{set isDisabled(W){}constructor(W,ke,$t,qn,fs){super(),this._ngModelWarningConfig=qn,this.callSetDisabledState=fs,this.update=new E.vpe,this._ngModelWarningSent=!1,this._setValidators(W),this._setAsyncValidators(ke),this.valueAccessor=go(0,$t)}ngOnChanges(W){if(this._isControlChanged(W)){const ke=W.form.previousValue;ke&&qe(ke,this,!1),Ee(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Ji(W,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&qe(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(W){this.viewModel=W,this.update.emit(W)}_isControlChanged(W){return W.hasOwnProperty("form")}}return ne._ngModelWarningSentOnce=!1,ne.\u0275fac=function(W){return new(W||ne)(E.Y36(Ke,10),E.Y36(Ze,10),E.Y36(Re,10),E.Y36(Gn,8),E.Y36(nn,8))},ne.\u0275dir=E.lG2({type:ne,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[E._Bn([cn]),E.qOj,E.TTD]}),ne})();const fr={provide:On,useExisting:(0,E.Gpc)(()=>Er)};let Er=(()=>{class ne extends On{constructor(W,ke,$t){super(),this.callSetDisabledState=$t,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new E.vpe,this._setValidators(W),this._setAsyncValidators(ke)}ngOnChanges(W){this._checkFormPresent(),W.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Nr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(W){const ke=this.form.get(W.path);return Ee(ke,W,this.callSetDisabledState),ke.updateValueAndValidity({emitEvent:!1}),this.directives.push(W),ke}getControl(W){return this.form.get(W.path)}removeControl(W){qe(W.control||null,W,!1),function Fs(ne,Z){const W=ne.indexOf(Z);W>-1&&ne.splice(W,1)}(this.directives,W)}addFormGroup(W){this._setUpFormContainer(W)}removeFormGroup(W){this._cleanUpFormContainer(W)}getFormGroup(W){return this.form.get(W.path)}addFormArray(W){this._setUpFormContainer(W)}removeFormArray(W){this._cleanUpFormContainer(W)}getFormArray(W){return this.form.get(W.path)}updateModel(W,ke){this.form.get(W.path).setValue(ke)}onSubmit(W){return this.submitted=!0,po(this.form,this.directives),this.ngSubmit.emit(W),"dialog"===W?.target?.method}onReset(){this.resetForm()}resetForm(W=void 0){this.form.reset(W),this.submitted=!1}_updateDomValue(){this.directives.forEach(W=>{const ke=W.control,$t=this.form.get(W.path);ke!==$t&&(qe(ke||null,W),(ne=>ne instanceof $s)($t)&&(Ee($t,W,this.callSetDisabledState),W.control=$t))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(W){const ke=this.form.get(W.path);er(ke,W),ke.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(W){if(this.form){const ke=this.form.get(W.path);ke&&function Qn(ne,Z){return Nr(ne,Z)}(ke,W)&&ke.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ar(this.form,this),this._oldForm&&Nr(this._oldForm,this)}_checkFormPresent(){}}return ne.\u0275fac=function(W){return new(W||ne)(E.Y36(Ke,10),E.Y36(Ze,10),E.Y36(nn,8))},ne.\u0275dir=E.lG2({type:ne,selectors:[["","formGroup",""]],hostBindings:function(W,ke){1&W&&E.NdJ("submit",function(qn){return ke.onSubmit(qn)})("reset",function(){return ke.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([fr]),E.qOj,E.TTD]}),ne})();const wo={provide:Re,useExisting:(0,E.Gpc)(()=>ji),multi:!0};function Qo(ne,Z){return null==ne?`${Z}`:(Z&&"object"==typeof Z&&(Z="Object"),`${ne}: ${Z}`.slice(0,50))}let ji=(()=>{class ne extends He{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(W){this._compareWith=W}writeValue(W){this.value=W;const $t=Qo(this._getOptionId(W),W);this.setProperty("value",$t)}registerOnChange(W){this.onChange=ke=>{this.value=this._getOptionValue(ke),W(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(W){for(const ke of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(ke),W))return ke;return null}_getOptionValue(W){const ke=function oo(ne){return ne.split(":")[0]}(W);return this._optionMap.has(ke)?this._optionMap.get(ke):W}}return ne.\u0275fac=function(){let Z;return function(ke){return(Z||(Z=E.n5z(ne)))(ke||ne)}}(),ne.\u0275dir=E.lG2({type:ne,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(W,ke){1&W&&E.NdJ("change",function(qn){return ke.onChange(qn.target.value)})("blur",function(){return ke.onTouched()})},inputs:{compareWith:"compareWith"},features:[E._Bn([wo]),E.qOj]}),ne})(),Xo=(()=>{class ne{constructor(W,ke,$t){this._element=W,this._renderer=ke,this._select=$t,this._select&&(this.id=this._select._registerOption())}set ngValue(W){null!=this._select&&(this._select._optionMap.set(this.id,W),this._setElementValue(Qo(this.id,W)),this._select.writeValue(this._select.value))}set value(W){this._setElementValue(W),this._select&&this._select.writeValue(this._select.value)}_setElementValue(W){this._renderer.setProperty(this._element.nativeElement,"value",W)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return ne.\u0275fac=function(W){return new(W||ne)(E.Y36(E.SBq),E.Y36(E.Qsj),E.Y36(ji,9))},ne.\u0275dir=E.lG2({type:ne,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),ne})();const vo={provide:Re,useExisting:(0,E.Gpc)(()=>Ds),multi:!0};function hs(ne,Z){return null==ne?`${Z}`:("string"==typeof Z&&(Z=`'${Z}'`),Z&&"object"==typeof Z&&(Z="Object"),`${ne}: ${Z}`.slice(0,50))}let Ds=(()=>{class ne extends He{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(W){this._compareWith=W}writeValue(W){let ke;if(this.value=W,Array.isArray(W)){const $t=W.map(qn=>this._getOptionId(qn));ke=(qn,fs)=>{qn._setSelected($t.indexOf(fs.toString())>-1)}}else ke=($t,qn)=>{$t._setSelected(!1)};this._optionMap.forEach(ke)}registerOnChange(W){this.onChange=ke=>{const $t=[],qn=ke.selectedOptions;if(void 0!==qn){const fs=qn;for(let oe=0;oe<fs.length;oe++){const Ne=this._getOptionValue(fs[oe].value);$t.push(Ne)}}else{const fs=ke.options;for(let oe=0;oe<fs.length;oe++){const ee=fs[oe];if(ee.selected){const Ne=this._getOptionValue(ee.value);$t.push(Ne)}}}this.value=$t,W($t)}}_registerOption(W){const ke=(this._idCounter++).toString();return this._optionMap.set(ke,W),ke}_getOptionId(W){for(const ke of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(ke)._value,W))return ke;return null}_getOptionValue(W){const ke=function Fo(ne){return ne.split(":")[0]}(W);return this._optionMap.has(ke)?this._optionMap.get(ke)._value:W}}return ne.\u0275fac=function(){let Z;return function(ke){return(Z||(Z=E.n5z(ne)))(ke||ne)}}(),ne.\u0275dir=E.lG2({type:ne,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(W,ke){1&W&&E.NdJ("change",function(qn){return ke.onChange(qn.target)})("blur",function(){return ke.onTouched()})},inputs:{compareWith:"compareWith"},features:[E._Bn([vo]),E.qOj]}),ne})(),Jo=(()=>{class ne{constructor(W,ke,$t){this._element=W,this._renderer=ke,this._select=$t,this._select&&(this.id=this._select._registerOption(this))}set ngValue(W){null!=this._select&&(this._value=W,this._setElementValue(hs(this.id,W)),this._select.writeValue(this._select.value))}set value(W){this._select?(this._value=W,this._setElementValue(hs(this.id,W)),this._select.writeValue(this._select.value)):this._setElementValue(W)}_setElementValue(W){this._renderer.setProperty(this._element.nativeElement,"value",W)}_setSelected(W){this._renderer.setProperty(this._element.nativeElement,"selected",W)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return ne.\u0275fac=function(W){return new(W||ne)(E.Y36(E.SBq),E.Y36(E.Qsj),E.Y36(Ds,9))},ne.\u0275dir=E.lG2({type:ne,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),ne})(),Wr=(()=>{class ne{constructor(){this._validator=ot}ngOnChanges(W){if(this.inputName in W){const ke=this.normalizeInput(W[this.inputName].currentValue);this._enabled=this.enabled(ke),this._validator=this._enabled?this.createValidator(ke):ot,this._onChange&&this._onChange()}}validate(W){return this._validator(W)}registerOnValidatorChange(W){this._onChange=W}enabled(W){return null!=W}}return ne.\u0275fac=function(W){return new(W||ne)},ne.\u0275dir=E.lG2({type:ne,features:[E.TTD]}),ne})();const Uo={provide:Ke,useExisting:(0,E.Gpc)(()=>Bo),multi:!0};let Bo=(()=>{class ne extends Wr{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=E.D6c,this.createValidator=W=>Ct}enabled(W){return W}}return ne.\u0275fac=function(){let Z;return function(ke){return(Z||(Z=E.n5z(ne)))(ke||ne)}}(),ne.\u0275dir=E.lG2({type:ne,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(W,ke){2&W&&E.uIk("required",ke._enabled?"":null)},inputs:{required:"required"},features:[E._Bn([Uo]),E.qOj]}),ne})();const Xs={provide:Ke,useExisting:(0,E.Gpc)(()=>Xr),multi:!0};let Xr=(()=>{class ne extends Wr{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=W=>W,this.createValidator=W=>Xe(W)}}return ne.\u0275fac=function(){let Z;return function(ke){return(Z||(Z=E.n5z(ne)))(ke||ne)}}(),ne.\u0275dir=E.lG2({type:ne,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(W,ke){2&W&&E.uIk("pattern",ke._enabled?ke.pattern:null)},inputs:{pattern:"pattern"},features:[E._Bn([Xs]),E.qOj]}),ne})(),Su=(()=>{class ne{}return ne.\u0275fac=function(W){return new(W||ne)},ne.\u0275mod=E.oAB({type:ne}),ne.\u0275inj=E.cJS({imports:[vt]}),ne})(),ta=(()=>{class ne{static withConfig(W){return{ngModule:ne,providers:[{provide:nn,useValue:W.callSetDisabledState??gn}]}}}return ne.\u0275fac=function(W){return new(W||ne)},ne.\u0275mod=E.oAB({type:ne}),ne.\u0275inj=E.cJS({imports:[Su]}),ne})(),ts=(()=>{class ne{static withConfig(W){return{ngModule:ne,providers:[{provide:Gn,useValue:W.warnOnNgModelWithFormControl??"always"},{provide:nn,useValue:W.callSetDisabledState??gn}]}}}return ne.\u0275fac=function(W){return new(W||ne)},ne.\u0275mod=E.oAB({type:ne}),ne.\u0275inj=E.cJS({imports:[Su]}),ne})()},6550:(en,ut,X)=>{"use strict";X.d(ut,{Dx:()=>_r,H7:()=>Si,b2:()=>Tr,q6:()=>kr});var E=X(6547),N=X(4755);class fe extends N.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Be extends fe{static makeCurrent(){(0,N.HT)(new Be)}onAndCancel(Ce,be,Oe){return Ce.addEventListener(be,Oe),()=>{Ce.removeEventListener(be,Oe)}}dispatchEvent(Ce,be){Ce.dispatchEvent(be)}remove(Ce){Ce.parentNode&&Ce.parentNode.removeChild(Ce)}createElement(Ce,be){return(be=be||this.getDefaultDocument()).createElement(Ce)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ce){return Ce.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ce){return Ce instanceof DocumentFragment}getGlobalEventTarget(Ce,be){return"window"===be?window:"document"===be?Ce:"body"===be?Ce.body:null}getBaseHref(Ce){const be=function xe(){return _e=_e||document.querySelector("base"),_e?_e.getAttribute("href"):null}();return null==be?null:function Re(ve){He=He||document.createElement("a"),He.setAttribute("href",ve);const Ce=He.pathname;return"/"===Ce.charAt(0)?Ce:`/${Ce}`}(be)}resetBaseElement(){_e=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ce){return(0,N.Mx)(document.cookie,Ce)}}let He,_e=null,ye=(()=>{class ve{build(){return new XMLHttpRequest}}return ve.\u0275fac=function(be){return new(be||ve)},ve.\u0275prov=E.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const Ae=new E.OlP("EventManagerPlugins");let Fe=(()=>{class ve{constructor(be,Oe){this._zone=Oe,this._eventNameToPlugin=new Map,be.forEach(gt=>{gt.manager=this}),this._plugins=be.slice().reverse()}addEventListener(be,Oe,gt){return this._findPluginFor(Oe).addEventListener(be,Oe,gt)}getZone(){return this._zone}_findPluginFor(be){let Oe=this._eventNameToPlugin.get(be);if(Oe)return Oe;if(Oe=this._plugins.find(nn=>nn.supports(be)),!Oe)throw new E.vHH(5101,!1);return this._eventNameToPlugin.set(be,Oe),Oe}}return ve.\u0275fac=function(be){return new(be||ve)(E.LFG(Ae),E.LFG(E.R0b))},ve.\u0275prov=E.Yz7({token:ve,factory:ve.\u0275fac}),ve})();class rt{constructor(Ce){this._doc=Ce}}const ce="ng-app-id";let wt=(()=>{class ve{constructor(be,Oe,gt,nn={}){this.doc=be,this.appId=Oe,this.nonce=gt,this.platformId=nn,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,N.PM)(nn),this.resetHostNodes()}addStyles(be){for(const Oe of be)1===this.changeUsageCount(Oe,1)&&this.onStyleAdded(Oe)}removeStyles(be){for(const Oe of be)this.changeUsageCount(Oe,-1)<=0&&this.onStyleRemoved(Oe)}ngOnDestroy(){const be=this.styleNodesInDOM;be&&(be.forEach(Oe=>Oe.remove()),be.clear());for(const Oe of this.getAllStyles())this.onStyleRemoved(Oe);this.resetHostNodes()}addHost(be){this.hostNodes.add(be);for(const Oe of this.getAllStyles())this.addStyleToHost(be,Oe)}removeHost(be){this.hostNodes.delete(be)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(be){for(const Oe of this.hostNodes)this.addStyleToHost(Oe,be)}onStyleRemoved(be){const Oe=this.styleRef;Oe.get(be)?.elements?.forEach(gt=>gt.remove()),Oe.delete(be)}collectServerRenderedStyles(){const be=this.doc.head?.querySelectorAll(`style[${ce}="${this.appId}"]`);if(be?.length){const Oe=new Map;return be.forEach(gt=>{null!=gt.textContent&&Oe.set(gt.textContent,gt)}),Oe}return null}changeUsageCount(be,Oe){const gt=this.styleRef;if(gt.has(be)){const nn=gt.get(be);return nn.usage+=Oe,nn.usage}return gt.set(be,{usage:Oe,elements:[]}),Oe}getStyleElement(be,Oe){const gt=this.styleNodesInDOM,nn=gt?.get(Oe);if(nn?.parentNode===be)return gt.delete(Oe),nn.removeAttribute(ce),nn;{const gn=this.doc.createElement("style");return this.nonce&&gn.setAttribute("nonce",this.nonce),gn.textContent=Oe,this.platformIsServer&&gn.setAttribute(ce,this.appId),gn}}addStyleToHost(be,Oe){const gt=this.getStyleElement(be,Oe);be.appendChild(gt);const nn=this.styleRef,gn=nn.get(Oe)?.elements;gn?gn.push(gt):nn.set(Oe,{elements:[gt],usage:1})}resetHostNodes(){const be=this.hostNodes;be.clear(),be.add(this.doc.head)}}return ve.\u0275fac=function(be){return new(be||ve)(E.LFG(N.K0),E.LFG(E.AFp),E.LFG(E.Ojb,8),E.LFG(E.Lbi))},ve.\u0275prov=E.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const Ye={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ke=/%COMP%/g,re=new E.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function st(ve,Ce){return Ce.map(be=>be.replace(Ke,ve))}let Y=(()=>{class ve{constructor(be,Oe,gt,nn,gn,me,Ee,qe=null){this.eventManager=be,this.sharedStylesHost=Oe,this.appId=gt,this.removeStylesOnCompDestory=nn,this.doc=gn,this.platformId=me,this.ngZone=Ee,this.nonce=qe,this.rendererByCompId=new Map,this.platformIsServer=(0,N.PM)(me),this.defaultRenderer=new Te(be,gn,Ee,this.platformIsServer)}createRenderer(be,Oe){if(!be||!Oe)return this.defaultRenderer;this.platformIsServer&&Oe.encapsulation===E.ifc.ShadowDom&&(Oe={...Oe,encapsulation:E.ifc.Emulated});const gt=this.getOrCreateRenderer(be,Oe);return gt instanceof Sn?gt.applyToHost(be):gt instanceof Wt&&gt.applyStyles(),gt}getOrCreateRenderer(be,Oe){const gt=this.rendererByCompId;let nn=gt.get(Oe.id);if(!nn){const gn=this.doc,me=this.ngZone,Ee=this.eventManager,qe=this.sharedStylesHost,ct=this.removeStylesOnCompDestory,Gt=this.platformIsServer;switch(Oe.encapsulation){case E.ifc.Emulated:nn=new Sn(Ee,qe,Oe,this.appId,ct,gn,me,Gt);break;case E.ifc.ShadowDom:return new xt(Ee,qe,be,Oe,gn,me,this.nonce,Gt);default:nn=new Wt(Ee,qe,Oe,ct,gn,me,Gt)}nn.onDestroy=()=>gt.delete(Oe.id),gt.set(Oe.id,nn)}return nn}ngOnDestroy(){this.rendererByCompId.clear()}}return ve.\u0275fac=function(be){return new(be||ve)(E.LFG(Fe),E.LFG(wt),E.LFG(E.AFp),E.LFG(re),E.LFG(N.K0),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(E.Ojb))},ve.\u0275prov=E.Yz7({token:ve,factory:ve.\u0275fac}),ve})();class Te{constructor(Ce,be,Oe,gt){this.eventManager=Ce,this.doc=be,this.ngZone=Oe,this.platformIsServer=gt,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ce,be){return be?this.doc.createElementNS(Ye[be]||be,Ce):this.doc.createElement(Ce)}createComment(Ce){return this.doc.createComment(Ce)}createText(Ce){return this.doc.createTextNode(Ce)}appendChild(Ce,be){(Rt(Ce)?Ce.content:Ce).appendChild(be)}insertBefore(Ce,be,Oe){Ce&&(Rt(Ce)?Ce.content:Ce).insertBefore(be,Oe)}removeChild(Ce,be){Ce&&Ce.removeChild(be)}selectRootElement(Ce,be){let Oe="string"==typeof Ce?this.doc.querySelector(Ce):Ce;if(!Oe)throw new E.vHH(5104,!1);return be||(Oe.textContent=""),Oe}parentNode(Ce){return Ce.parentNode}nextSibling(Ce){return Ce.nextSibling}setAttribute(Ce,be,Oe,gt){if(gt){be=gt+":"+be;const nn=Ye[gt];nn?Ce.setAttributeNS(nn,be,Oe):Ce.setAttribute(be,Oe)}else Ce.setAttribute(be,Oe)}removeAttribute(Ce,be,Oe){if(Oe){const gt=Ye[Oe];gt?Ce.removeAttributeNS(gt,be):Ce.removeAttribute(`${Oe}:${be}`)}else Ce.removeAttribute(be)}addClass(Ce,be){Ce.classList.add(be)}removeClass(Ce,be){Ce.classList.remove(be)}setStyle(Ce,be,Oe,gt){gt&(E.JOm.DashCase|E.JOm.Important)?Ce.style.setProperty(be,Oe,gt&E.JOm.Important?"important":""):Ce.style[be]=Oe}removeStyle(Ce,be,Oe){Oe&E.JOm.DashCase?Ce.style.removeProperty(be):Ce.style[be]=""}setProperty(Ce,be,Oe){Ce[be]=Oe}setValue(Ce,be){Ce.nodeValue=be}listen(Ce,be,Oe){if("string"==typeof Ce&&!(Ce=(0,N.q)().getGlobalEventTarget(this.doc,Ce)))throw new Error(`Unsupported event target ${Ce} for event ${be}`);return this.eventManager.addEventListener(Ce,be,this.decoratePreventDefault(Oe))}decoratePreventDefault(Ce){return be=>{if("__ngUnwrap__"===be)return Ce;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>Ce(be)):Ce(be))&&(be.preventDefault(),be.returnValue=!1)}}}function Rt(ve){return"TEMPLATE"===ve.tagName&&void 0!==ve.content}class xt extends Te{constructor(Ce,be,Oe,gt,nn,gn,me,Ee){super(Ce,nn,gn,Ee),this.sharedStylesHost=be,this.hostEl=Oe,this.shadowRoot=Oe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const qe=st(gt.id,gt.styles);for(const ct of qe){const Gt=document.createElement("style");me&&Gt.setAttribute("nonce",me),Gt.textContent=ct,this.shadowRoot.appendChild(Gt)}}nodeOrShadowRoot(Ce){return Ce===this.hostEl?this.shadowRoot:Ce}appendChild(Ce,be){return super.appendChild(this.nodeOrShadowRoot(Ce),be)}insertBefore(Ce,be,Oe){return super.insertBefore(this.nodeOrShadowRoot(Ce),be,Oe)}removeChild(Ce,be){return super.removeChild(this.nodeOrShadowRoot(Ce),be)}parentNode(Ce){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ce)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Wt extends Te{constructor(Ce,be,Oe,gt,nn,gn,me,Ee){super(Ce,nn,gn,me),this.sharedStylesHost=be,this.removeStylesOnCompDestory=gt,this.rendererUsageCount=0,this.styles=Ee?st(Ee,Oe.styles):Oe.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Sn extends Wt{constructor(Ce,be,Oe,gt,nn,gn,me,Ee){const qe=gt+"-"+Oe.id;super(Ce,be,Oe,nn,gn,me,Ee,qe),this.contentAttr=function Ct(ve){return"_ngcontent-%COMP%".replace(Ke,ve)}(qe),this.hostAttr=function bt(ve){return"_nghost-%COMP%".replace(Ke,ve)}(qe)}applyToHost(Ce){this.applyStyles(),this.setAttribute(Ce,this.hostAttr,"")}createElement(Ce,be){const Oe=super.createElement(Ce,be);return super.setAttribute(Oe,this.contentAttr,""),Oe}}let Yt=(()=>{class ve extends rt{constructor(be){super(be)}supports(be){return!0}addEventListener(be,Oe,gt){return be.addEventListener(Oe,gt,!1),()=>this.removeEventListener(be,Oe,gt)}removeEventListener(be,Oe,gt){return be.removeEventListener(Oe,gt)}}return ve.\u0275fac=function(be){return new(be||ve)(E.LFG(N.K0))},ve.\u0275prov=E.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const vn=["alt","control","meta","shift"],an={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ut={alt:ve=>ve.altKey,control:ve=>ve.ctrlKey,meta:ve=>ve.metaKey,shift:ve=>ve.shiftKey};let Vt=(()=>{class ve extends rt{constructor(be){super(be)}supports(be){return null!=ve.parseEventName(be)}addEventListener(be,Oe,gt){const nn=ve.parseEventName(Oe),gn=ve.eventCallback(nn.fullKey,gt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,N.q)().onAndCancel(be,nn.domEventName,gn))}static parseEventName(be){const Oe=be.toLowerCase().split("."),gt=Oe.shift();if(0===Oe.length||"keydown"!==gt&&"keyup"!==gt)return null;const nn=ve._normalizeKey(Oe.pop());let gn="",me=Oe.indexOf("code");if(me>-1&&(Oe.splice(me,1),gn="code."),vn.forEach(qe=>{const ct=Oe.indexOf(qe);ct>-1&&(Oe.splice(ct,1),gn+=qe+".")}),gn+=nn,0!=Oe.length||0===nn.length)return null;const Ee={};return Ee.domEventName=gt,Ee.fullKey=gn,Ee}static matchEventFullKeyCode(be,Oe){let gt=an[be.key]||be.key,nn="";return Oe.indexOf("code.")>-1&&(gt=be.code,nn="code."),!(null==gt||!gt)&&(gt=gt.toLowerCase()," "===gt?gt="space":"."===gt&&(gt="dot"),vn.forEach(gn=>{gn!==gt&&(0,Ut[gn])(be)&&(nn+=gn+".")}),nn+=gt,nn===Oe)}static eventCallback(be,Oe,gt){return nn=>{ve.matchEventFullKeyCode(nn,be)&&gt.runGuarded(()=>Oe(nn))}}static _normalizeKey(be){return"esc"===be?"escape":be}}return ve.\u0275fac=function(be){return new(be||ve)(E.LFG(N.K0))},ve.\u0275prov=E.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const kr=(0,E.eFA)(E._c5,"browser",[{provide:E.Lbi,useValue:N.bD},{provide:E.g9A,useValue:function Nn(){Be.makeCurrent()},multi:!0},{provide:N.K0,useFactory:function pr(){return(0,E.RDi)(document),document},deps:[]}]),On=new E.OlP(""),Ai=[{provide:E.rWj,useClass:class Ue{addToWindow(Ce){E.dqk.getAngularTestability=(Oe,gt=!0)=>{const nn=Ce.findTestabilityInTree(Oe,gt);if(null==nn)throw new E.vHH(5103,!1);return nn},E.dqk.getAllAngularTestabilities=()=>Ce.getAllTestabilities(),E.dqk.getAllAngularRootElements=()=>Ce.getAllRootElements(),E.dqk.frameworkStabilizers||(E.dqk.frameworkStabilizers=[]),E.dqk.frameworkStabilizers.push(Oe=>{const gt=E.dqk.getAllAngularTestabilities();let nn=gt.length,gn=!1;const me=function(Ee){gn=gn||Ee,nn--,0==nn&&Oe(gn)};gt.forEach(function(Ee){Ee.whenStable(me)})})}findTestabilityInTree(Ce,be,Oe){return null==be?null:Ce.getTestability(be)??(Oe?(0,N.q)().isShadowRoot(be)?this.findTestabilityInTree(Ce,be.host,!0):this.findTestabilityInTree(Ce,be.parentElement,!0):null)}},deps:[]},{provide:E.lri,useClass:E.dDg,deps:[E.R0b,E.eoX,E.rWj]},{provide:E.dDg,useClass:E.dDg,deps:[E.R0b,E.eoX,E.rWj]}],In=[{provide:E.zSh,useValue:"root"},{provide:E.qLn,useFactory:function Cn(){return new E.qLn},deps:[]},{provide:Ae,useClass:Yt,multi:!0,deps:[N.K0,E.R0b,E.Lbi]},{provide:Ae,useClass:Vt,multi:!0,deps:[N.K0]},Y,wt,Fe,{provide:E.FYo,useExisting:Y},{provide:N.JF,useClass:ye,deps:[]},[]];let Tr=(()=>{class ve{constructor(be){}static withServerTransition(be){return{ngModule:ve,providers:[{provide:E.AFp,useValue:be.appId}]}}}return ve.\u0275fac=function(be){return new(be||ve)(E.LFG(On,12))},ve.\u0275mod=E.oAB({type:ve}),ve.\u0275inj=E.cJS({providers:[...In,...Ai],imports:[N.ez,E.hGG]}),ve})(),_r=(()=>{class ve{constructor(be){this._doc=be}getTitle(){return this._doc.title}setTitle(be){this._doc.title=be||""}}return ve.\u0275fac=function(be){return new(be||ve)(E.LFG(N.K0))},ve.\u0275prov=E.Yz7({token:ve,factory:function(be){let Oe=null;return Oe=be?new be:function oi(){return new _r((0,E.LFG)(N.K0))}(),Oe},providedIn:"root"}),ve})();typeof window<"u"&&window;let Si=(()=>{class ve{}return ve.\u0275fac=function(be){return new(be||ve)},ve.\u0275prov=E.Yz7({token:ve,factory:function(be){let Oe=null;return Oe=be?new(be||ve):E.LFG(Mn),Oe},providedIn:"root"}),ve})(),Mn=(()=>{class ve extends Si{constructor(be){super(),this._doc=be}sanitize(be,Oe){if(null==Oe)return null;switch(be){case E.q3G.NONE:return Oe;case E.q3G.HTML:return(0,E.qzn)(Oe,"HTML")?(0,E.z3N)(Oe):(0,E.EiD)(this._doc,String(Oe)).toString();case E.q3G.STYLE:return(0,E.qzn)(Oe,"Style")?(0,E.z3N)(Oe):Oe;case E.q3G.SCRIPT:if((0,E.qzn)(Oe,"Script"))return(0,E.z3N)(Oe);throw new E.vHH(5200,!1);case E.q3G.URL:return(0,E.qzn)(Oe,"URL")?(0,E.z3N)(Oe):(0,E.mCW)(String(Oe));case E.q3G.RESOURCE_URL:if((0,E.qzn)(Oe,"ResourceURL"))return(0,E.z3N)(Oe);throw new E.vHH(5201,!1);default:throw new E.vHH(5202,!1)}}bypassSecurityTrustHtml(be){return(0,E.JVY)(be)}bypassSecurityTrustStyle(be){return(0,E.L6k)(be)}bypassSecurityTrustScript(be){return(0,E.eBb)(be)}bypassSecurityTrustUrl(be){return(0,E.LAX)(be)}bypassSecurityTrustResourceUrl(be){return(0,E.pB0)(be)}}return ve.\u0275fac=function(be){return new(be||ve)(E.LFG(N.K0))},ve.\u0275prov=E.Yz7({token:ve,factory:function(be){let Oe=null;return Oe=be?new be:function Hr(ve){return new Mn(ve.get(N.K0))}(E.LFG(E.zs3)),Oe},providedIn:"root"}),ve})()},9120:(en,ut,X)=>{"use strict";X.d(ut,{gz:()=>js,m2:()=>_a,F0:()=>zs,rH:()=>bu,Od:()=>_n,Bz:()=>id,lC:()=>hs});var E=X(6547),N=X(6498),Be=X(5254),_e=X(1086),xe=X(591),He=X(3426),Re=X(4450),Ue=X(1221),ye=X(8896);function Ae(k){return new N.y(F=>{let D;try{D=k()}catch(ae){return void F.error(ae)}return(D?(0,Be.D)(D):(0,ye.c)()).subscribe(F)})}var Fe=X(4843),rt=X(1737),ce=X(1762),wt=X(8929),Ye=X(4755),Ke=X(4850),Ze=X(7545),lt=X(2986),q=X(1059),ge=X(2198),re=X(1709),Ct=X(7224);function bt(k,F){return(0,re.zg)(k,F,1)}var st=X(2868),Y=X(1177);function Te(k){return function(D){const H=new Xe(k),ae=D.lift(H);return H.caught=ae}}class Xe{constructor(F){this.selector=F}call(F,D){return D.subscribe(new ot(F,this.selector,this.caught))}}class ot extends Y.Ds{constructor(F,D,H){super(F),this.selector=D,this.caught=H}error(F){if(!this.isStopped){let D;try{D=this.selector(F,this.caught)}catch(Pe){return void super.error(Pe)}this._unsubscribeAndRecycle();const H=new Y.IY(this);this.add(H);const ae=(0,Y.ft)(D,H);ae!==H&&this.add(ae)}}}var Rt=X(2014),xt=X(7314),Wt=X(3489),Sn=X(4231);function Yt(k){return function(D){return 0===k?(0,ye.c)():D.lift(new vn(k))}}class vn{constructor(F){if(this.total=F,this.total<0)throw new Sn.W}call(F,D){return D.subscribe(new an(F,this.total))}}class an extends Wt.L{constructor(F,D){super(F),this.total=D,this.ring=new Array,this.count=0}_next(F){const D=this.ring,H=this.total,ae=this.count++;D.length<H?D.push(F):D[ae%H]=F}_complete(){const F=this.destination;let D=this.count;if(D>0){const H=this.count>=this.total?this.total:this.count,ae=this.ring;for(let Pe=0;Pe<H;Pe++){const Le=D++%H;F.next(ae[Le])}}F.complete()}}var Ut=X(4907),Vt=X(5379);class on{constructor(F){this.value=F}call(F,D){return D.subscribe(new Jt(F,this.value))}}class Jt extends Wt.L{constructor(F,D){super(F),this.value=D}_next(F){this.destination.next(this.value)}}var Nn=X(2654);function Cn(k){return F=>F.lift(new pr(k))}class pr{constructor(F){this.callback=F}call(F,D){return D.subscribe(new xr(F,this.callback))}}class xr extends Wt.L{constructor(F,D){super(F),this.add(new Nn.w(D))}}var kr=X(4327),On=X(9146),Ai=X(6550);const In="primary",Tr=Symbol("RouteTitle");class Rr{constructor(F){this.params=F||{}}has(F){return Object.prototype.hasOwnProperty.call(this.params,F)}get(F){if(this.has(F)){const D=this.params[F];return Array.isArray(D)?D[0]:D}return null}getAll(F){if(this.has(F)){const D=this.params[F];return Array.isArray(D)?D:[D]}return[]}get keys(){return Object.keys(this.params)}}function ir(k){return new Rr(k)}function Pi(k,F,D){const H=D.path.split("/");if(H.length>k.length||"full"===D.pathMatch&&(F.hasChildren()||H.length<k.length))return null;const ae={};for(let Pe=0;Pe<H.length;Pe++){const Le=H[Pe],Tt=k[Pe];if(Le.startsWith(":"))ae[Le.substring(1)]=Tt;else if(Le!==Tt.path)return null}return{consumed:k.slice(0,H.length),posParams:ae}}function _r(k,F){const D=k?Object.keys(k):void 0,H=F?Object.keys(F):void 0;if(!D||!H||D.length!=H.length)return!1;let ae;for(let Pe=0;Pe<D.length;Pe++)if(ae=D[Pe],!Ht(k[ae],F[ae]))return!1;return!0}function Ht(k,F){if(Array.isArray(k)&&Array.isArray(F)){if(k.length!==F.length)return!1;const D=[...k].sort(),H=[...F].sort();return D.every((ae,Pe)=>H[Pe]===ae)}return k===F}function sr(k){return k.length>0?k[k.length-1]:null}function Hn(k){return function fe(k){return!!k&&(k instanceof N.y||"function"==typeof k.lift&&"function"==typeof k.subscribe)}(k)?k:(0,E.QGY)(k)?(0,Be.D)(Promise.resolve(k)):(0,_e.of)(k)}const tn={exact:function Oi(k,F,D){if(!Si(k.segments,F.segments)||!Kr(k.segments,F.segments,D)||k.numberOfChildren!==F.numberOfChildren)return!1;for(const H in F.children)if(!k.children[H]||!Oi(k.children[H],F.children[H],D))return!1;return!0},subset:Sr},Rn={exact:function ai(k,F){return _r(k,F)},subset:function cs(k,F){return Object.keys(F).length<=Object.keys(k).length&&Object.keys(F).every(D=>Ht(k[D],F[D]))},ignored:()=>!0};function Ei(k,F,D){return tn[D.paths](k.root,F.root,D.matrixParams)&&Rn[D.queryParams](k.queryParams,F.queryParams)&&!("exact"===D.fragment&&k.fragment!==F.fragment)}function Sr(k,F,D){return fo(k,F,F.segments,D)}function fo(k,F,D,H){if(k.segments.length>D.length){const ae=k.segments.slice(0,D.length);return!(!Si(ae,D)||F.hasChildren()||!Kr(ae,D,H))}if(k.segments.length===D.length){if(!Si(k.segments,D)||!Kr(k.segments,D,H))return!1;for(const ae in F.children)if(!k.children[ae]||!Sr(k.children[ae],F.children[ae],H))return!1;return!0}{const ae=D.slice(0,k.segments.length),Pe=D.slice(k.segments.length);return!!(Si(k.segments,ae)&&Kr(k.segments,ae,H)&&k.children[In])&&fo(k.children[In],F,Pe,H)}}function Kr(k,F,D){return F.every((H,ae)=>Rn[D](k[ae].parameters,H.parameters))}class ms{constructor(F=new Tn([],{}),D={},H=null){this.root=F,this.queryParams=D,this.fragment=H}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ir(this.queryParams)),this._queryParamMap}toString(){return Zi.serialize(this)}}class Tn{constructor(F,D){this.segments=F,this.children=D,this.parent=null,Object.values(D).forEach(H=>H.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ar(this)}}class Vr{constructor(F,D){this.path=F,this.parameters=D}get parameterMap(){return this._parameterMap||(this._parameterMap=ir(this.parameters)),this._parameterMap}toString(){return be(this)}}function Si(k,F){return k.length===F.length&&k.every((D,H)=>D.path===F[H].path)}let Mn=(()=>{class k{}return k.\u0275fac=function(D){return new(D||k)},k.\u0275prov=E.Yz7({token:k,factory:function(){return new $i},providedIn:"root"}),k})();class $i{parse(F){const D=new Nr(F);return new ms(D.parseRootSegment(),D.parseQueryParams(),D.parseFragment())}serialize(F){const D=`/${ni(F.root,!0)}`,H=function gt(k){const F=Object.keys(k).map(D=>{const H=k[D];return Array.isArray(H)?H.map(ae=>`${Zr(D)}=${Zr(ae)}`).join("&"):`${Zr(D)}=${Zr(H)}`}).filter(D=>!!D);return F.length?`?${F.join("&")}`:""}(F.queryParams);return`${D}${H}${"string"==typeof F.fragment?`#${function Vs(k){return encodeURI(k)}(F.fragment)}`:""}`}}const Zi=new $i;function Ar(k){return k.segments.map(F=>be(F)).join("/")}function ni(k,F){if(!k.hasChildren())return Ar(k);if(F){const D=k.children[In]?ni(k.children[In],!1):"",H=[];return Object.entries(k.children).forEach(([ae,Pe])=>{ae!==In&&H.push(`${ae}:${ni(Pe,!1)}`)}),H.length>0?`${D}(${H.join("//")})`:D}{const D=function Hr(k,F){let D=[];return Object.entries(k.children).forEach(([H,ae])=>{H===In&&(D=D.concat(F(ae,H)))}),Object.entries(k.children).forEach(([H,ae])=>{H!==In&&(D=D.concat(F(ae,H)))}),D}(k,(H,ae)=>ae===In?[ni(k.children[In],!1)]:[`${ae}:${ni(H,!1)}`]);return 1===Object.keys(k.children).length&&null!=k.children[In]?`${Ar(k)}/${D[0]}`:`${Ar(k)}/(${D.join("//")})`}}function ds(k){return encodeURIComponent(k).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Zr(k){return ds(k).replace(/%3B/gi,";")}function tt(k){return ds(k).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ve(k){return decodeURIComponent(k)}function Ce(k){return ve(k.replace(/\+/g,"%20"))}function be(k){return`${tt(k.path)}${function Oe(k){return Object.keys(k).map(F=>`;${tt(F)}=${tt(k[F])}`).join("")}(k.parameters)}`}const nn=/^[^\/()?;#]+/;function gn(k){const F=k.match(nn);return F?F[0]:""}const me=/^[^\/()?;=#]+/,qe=/^[^=?&#]+/,Gt=/^[^&#]+/;class Nr{constructor(F){this.url=F,this.remaining=F}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Tn([],{}):new Tn([],this.parseChildren())}parseQueryParams(){const F={};if(this.consumeOptional("?"))do{this.parseQueryParam(F)}while(this.consumeOptional("&"));return F}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const F=[];for(this.peekStartsWith("(")||F.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),F.push(this.parseSegment());let D={};this.peekStartsWith("/(")&&(this.capture("/"),D=this.parseParens(!0));let H={};return this.peekStartsWith("(")&&(H=this.parseParens(!1)),(F.length>0||Object.keys(D).length>0)&&(H[In]=new Tn(F,D)),H}parseSegment(){const F=gn(this.remaining);if(""===F&&this.peekStartsWith(";"))throw new E.vHH(4009,!1);return this.capture(F),new Vr(ve(F),this.parseMatrixParams())}parseMatrixParams(){const F={};for(;this.consumeOptional(";");)this.parseParam(F);return F}parseParam(F){const D=function Ee(k){const F=k.match(me);return F?F[0]:""}(this.remaining);if(!D)return;this.capture(D);let H="";if(this.consumeOptional("=")){const ae=gn(this.remaining);ae&&(H=ae,this.capture(H))}F[ve(D)]=ve(H)}parseQueryParam(F){const D=function ct(k){const F=k.match(qe);return F?F[0]:""}(this.remaining);if(!D)return;this.capture(D);let H="";if(this.consumeOptional("=")){const Le=function ar(k){const F=k.match(Gt);return F?F[0]:""}(this.remaining);Le&&(H=Le,this.capture(H))}const ae=Ce(D),Pe=Ce(H);if(F.hasOwnProperty(ae)){let Le=F[ae];Array.isArray(Le)||(Le=[Le],F[ae]=Le),Le.push(Pe)}else F[ae]=Pe}parseParens(F){const D={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const H=gn(this.remaining),ae=this.remaining[H.length];if("/"!==ae&&")"!==ae&&";"!==ae)throw new E.vHH(4010,!1);let Pe;H.indexOf(":")>-1?(Pe=H.slice(0,H.indexOf(":")),this.capture(Pe),this.capture(":")):F&&(Pe=In);const Le=this.parseChildren();D[Pe]=1===Object.keys(Le).length?Le[In]:new Tn([],Le),this.consumeOptional("//")}return D}peekStartsWith(F){return this.remaining.startsWith(F)}consumeOptional(F){return!!this.peekStartsWith(F)&&(this.remaining=this.remaining.substring(F.length),!0)}capture(F){if(!this.consumeOptional(F))throw new E.vHH(4011,!1)}}function ii(k){return k.segments.length>0?new Tn([],{[In]:k}):k}function Dt(k){const F={};for(const H of Object.keys(k.children)){const Pe=Dt(k.children[H]);if(H===In&&0===Pe.segments.length&&Pe.hasChildren())for(const[Le,Tt]of Object.entries(Pe.children))F[Le]=Tt;else(Pe.segments.length>0||Pe.hasChildren())&&(F[H]=Pe)}return function yt(k){if(1===k.numberOfChildren&&k.children[In]){const F=k.children[In];return new Tn(k.segments.concat(F.segments),F.children)}return k}(new Tn(k.segments,F))}function Kt(k){return k instanceof ms}function Qn(k){let F;const ae=ii(function D(Pe){const Le={};for(const wn of Pe.children){const vr=D(wn);Le[wn.outlet]=vr}const Tt=new Tn(Pe.url,Le);return Pe===k&&(F=Tt),Tt}(k.root));return F??ae}function cr(k,F,D,H){let ae=k;for(;ae.parent;)ae=ae.parent;if(0===F.length)return si(ae,ae,ae,D,H);const Pe=function Fi(k){if("string"==typeof k[0]&&1===k.length&&"/"===k[0])return new Ji(!0,0,k);let F=0,D=!1;const H=k.reduce((ae,Pe,Le)=>{if("object"==typeof Pe&&null!=Pe){if(Pe.outlets){const Tt={};return Object.entries(Pe.outlets).forEach(([wn,vr])=>{Tt[wn]="string"==typeof vr?vr.split("/"):vr}),[...ae,{outlets:Tt}]}if(Pe.segmentPath)return[...ae,Pe.segmentPath]}return"string"!=typeof Pe?[...ae,Pe]:0===Le?(Pe.split("/").forEach((Tt,wn)=>{0==wn&&"."===Tt||(0==wn&&""===Tt?D=!0:".."===Tt?F++:""!=Tt&&ae.push(Tt))}),ae):[...ae,Pe]},[]);return new Ji(D,F,H)}(F);if(Pe.toRoot())return si(ae,ae,new Tn([],{}),D,H);const Le=function go(k,F,D){if(k.isAbsolute)return new po(F,!0,0);if(!D)return new po(F,!1,NaN);if(null===D.parent)return new po(D,!0,0);const H=yr(k.commands[0])?0:1;return function Fs(k,F,D){let H=k,ae=F,Pe=D;for(;Pe>ae;){if(Pe-=ae,H=H.parent,!H)throw new E.vHH(4005,!1);ae=H.segments.length}return new po(H,!1,ae-Pe)}(D,D.segments.length-1+H,k.numberOfDoubleDots)}(Pe,ae,k),Tt=Le.processChildren?Hs(Le.segmentGroup,Le.index,Pe.commands):Oa(Le.segmentGroup,Le.index,Pe.commands);return si(ae,Le.segmentGroup,Tt,D,H)}function yr(k){return"object"==typeof k&&null!=k&&!k.outlets&&!k.segmentPath}function Fr(k){return"object"==typeof k&&null!=k&&k.outlets}function si(k,F,D,H,ae){let Le,Pe={};H&&Object.entries(H).forEach(([wn,vr])=>{Pe[wn]=Array.isArray(vr)?vr.map(hr=>`${hr}`):`${vr}`}),Le=k===F?D:Yr(k,F,D);const Tt=ii(Dt(Le));return new ms(Tt,Pe,ae)}function Yr(k,F,D){const H={};return Object.entries(k.children).forEach(([ae,Pe])=>{H[ae]=Pe===F?D:Yr(Pe,F,D)}),new Tn(k.segments,H)}class Ji{constructor(F,D,H){if(this.isAbsolute=F,this.numberOfDoubleDots=D,this.commands=H,F&&H.length>0&&yr(H[0]))throw new E.vHH(4003,!1);const ae=H.find(Fr);if(ae&&ae!==sr(H))throw new E.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class po{constructor(F,D,H){this.segmentGroup=F,this.processChildren=D,this.index=H}}function Oa(k,F,D){if(k||(k=new Tn([],{})),0===k.segments.length&&k.hasChildren())return Hs(k,F,D);const H=function Lo(k,F,D){let H=0,ae=F;const Pe={match:!1,pathIndex:0,commandIndex:0};for(;ae<k.segments.length;){if(H>=D.length)return Pe;const Le=k.segments[ae],Tt=D[H];if(Fr(Tt))break;const wn=`${Tt}`,vr=H<D.length-1?D[H+1]:null;if(ae>0&&void 0===wn)break;if(wn&&vr&&"object"==typeof vr&&void 0===vr.outlets){if(!sa(wn,vr,Le))return Pe;H+=2}else{if(!sa(wn,{},Le))return Pe;H++}ae++}return{match:!0,pathIndex:ae,commandIndex:H}}(k,F,D),ae=D.slice(H.commandIndex);if(H.match&&H.pathIndex<k.segments.length){const Pe=new Tn(k.segments.slice(0,H.pathIndex),{});return Pe.children[In]=new Tn(k.segments.slice(H.pathIndex),k.children),Hs(Pe,0,ae)}return H.match&&0===ae.length?new Tn(k.segments,{}):H.match&&!k.hasChildren()?Ra(k,F,D):H.match?Hs(k,0,ae):Ra(k,F,D)}function Hs(k,F,D){if(0===D.length)return new Tn(k.segments,{});{const H=function Zs(k){return Fr(k[0])?k[0].outlets:{[In]:k}}(D),ae={};if(!H[In]&&k.children[In]&&1===k.numberOfChildren&&0===k.children[In].segments.length){const Pe=Hs(k.children[In],F,D);return new Tn(k.segments,Pe.children)}return Object.entries(H).forEach(([Pe,Le])=>{"string"==typeof Le&&(Le=[Le]),null!==Le&&(ae[Pe]=Oa(k.children[Pe],F,Le))}),Object.entries(k.children).forEach(([Pe,Le])=>{void 0===H[Pe]&&(ae[Pe]=Le)}),new Tn(k.segments,ae)}}function Ra(k,F,D){const H=k.segments.slice(0,F);let ae=0;for(;ae<D.length;){const Pe=D[ae];if(Fr(Pe)){const wn=so(Pe.outlets);return new Tn(H,wn)}if(0===ae&&yr(D[0])){H.push(new Vr(k.segments[F].path,$s(D[0]))),ae++;continue}const Le=Fr(Pe)?Pe.outlets[In]:`${Pe}`,Tt=ae<D.length-1?D[ae+1]:null;Le&&Tt&&yr(Tt)?(H.push(new Vr(Le,$s(Tt))),ae+=2):(H.push(new Vr(Le,{})),ae++)}return new Tn(H,{})}function so(k){const F={};return Object.entries(k).forEach(([D,H])=>{"string"==typeof H&&(H=[H]),null!==H&&(F[D]=Ra(new Tn([],{}),0,H))}),F}function $s(k){const F={};return Object.entries(k).forEach(([D,H])=>F[D]=`${H}`),F}function sa(k,F,D){return k==D.path&&_r(F,D.parameters)}const mo="imperative";class Wi{constructor(F,D){this.id=F,this.url=D}}class ya extends Wi{constructor(F,D,H="imperative",ae=null){super(F,D),this.type=0,this.navigationTrigger=H,this.restoredState=ae}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _a extends Wi{constructor(F,D,H){super(F,D),this.urlAfterRedirects=H,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class es extends Wi{constructor(F,D,H,ae){super(F,D),this.reason=H,this.code=ae,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class oa extends Wi{constructor(F,D,H,ae){super(F,D),this.reason=H,this.code=ae,this.type=16}}class Wa extends Wi{constructor(F,D,H,ae){super(F,D),this.error=H,this.target=ae,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Gs extends Wi{constructor(F,D,H,ae){super(F,D),this.urlAfterRedirects=H,this.state=ae,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mu extends Wi{constructor(F,D,H,ae){super(F,D),this.urlAfterRedirects=H,this.state=ae,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ba extends Wi{constructor(F,D,H,ae,Pe){super(F,D),this.urlAfterRedirects=H,this.state=ae,this.shouldActivate=Pe,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Is extends Wi{constructor(F,D,H,ae){super(F,D),this.urlAfterRedirects=H,this.state=ae,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wr extends Wi{constructor(F,D,H,ae){super(F,D),this.urlAfterRedirects=H,this.state=ae,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gi{constructor(F){this.route=F,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wi{constructor(F){this.route=F,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class aa{constructor(F){this.snapshot=F,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xs{constructor(F){this.snapshot=F,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vt{constructor(F){this.snapshot=F,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ft{constructor(F){this.snapshot=F,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class At{constructor(F,D,H){this.routerEvent=F,this.position=D,this.anchor=H,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class kn{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Gn,this.attachRef=null}}let Gn=(()=>{class k{constructor(){this.contexts=new Map}onChildOutletCreated(D,H){const ae=this.getOrCreateContext(D);ae.outlet=H,this.contexts.set(D,ae)}onChildOutletDestroyed(D){const H=this.getContext(D);H&&(H.outlet=null,H.attachRef=null)}onOutletDeactivated(){const D=this.contexts;return this.contexts=new Map,D}onOutletReAttached(D){this.contexts=D}getOrCreateContext(D){let H=this.getContext(D);return H||(H=new kn,this.contexts.set(D,H)),H}getContext(D){return this.contexts.get(D)||null}}return k.\u0275fac=function(D){return new(D||k)},k.\u0275prov=E.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();class cn{constructor(F){this._root=F}get root(){return this._root.value}parent(F){const D=this.pathFromRoot(F);return D.length>1?D[D.length-2]:null}children(F){const D=$n(F,this._root);return D?D.children.map(H=>H.value):[]}firstChild(F){const D=$n(F,this._root);return D&&D.children.length>0?D.children[0].value:null}siblings(F){const D=fr(F,this._root);return D.length<2?[]:D[D.length-2].children.map(ae=>ae.value).filter(ae=>ae!==F)}pathFromRoot(F){return fr(F,this._root).map(D=>D.value)}}function $n(k,F){if(k===F.value)return F;for(const D of F.children){const H=$n(k,D);if(H)return H}return null}function fr(k,F){if(k===F.value)return[F];for(const D of F.children){const H=fr(k,D);if(H.length)return H.unshift(F),H}return[]}class Er{constructor(F,D){this.value=F,this.children=D}toString(){return`TreeNode(${this.value})`}}function $r(k){const F={};return k&&k.children.forEach(D=>F[D.value.outlet]=D),F}class Ci extends cn{constructor(F,D){super(F),this.snapshot=D,oo(this,F)}toString(){return this.snapshot.toString()}}function Wo(k,F){const D=function Ri(k,F){const Le=new wo([],{},{},"",{},In,F,null,{});return new Qo("",new Er(Le,[]))}(0,F),H=new xe.X([new Vr("",{})]),ae=new xe.X({}),Pe=new xe.X({}),Le=new xe.X({}),Tt=new xe.X(""),wn=new js(H,ae,Le,Tt,Pe,In,F,D.root);return wn.snapshot=D.root,new Ci(new Er(wn,[]),D)}class js{constructor(F,D,H,ae,Pe,Le,Tt,wn){this.urlSubject=F,this.paramsSubject=D,this.queryParamsSubject=H,this.fragmentSubject=ae,this.dataSubject=Pe,this.outlet=Le,this.component=Tt,this._futureSnapshot=wn,this.title=this.dataSubject?.pipe((0,Ke.U)(vr=>vr[Tr]))??(0,_e.of)(void 0),this.url=F,this.params=D,this.queryParams=H,this.fragment=ae,this.data=Pe}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ke.U)(F=>ir(F)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ke.U)(F=>ir(F)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Bi(k,F="emptyOnly"){const D=k.pathFromRoot;let H=0;if("always"!==F)for(H=D.length-1;H>=1;){const ae=D[H],Pe=D[H-1];if(ae.routeConfig&&""===ae.routeConfig.path)H--;else{if(Pe.component)break;H--}}return function Dr(k){return k.reduce((F,D)=>({params:{...F.params,...D.params},data:{...F.data,...D.data},resolve:{...D.data,...F.resolve,...D.routeConfig?.data,...D._resolvedData}}),{params:{},data:{},resolve:{}})}(D.slice(H))}class wo{get title(){return this.data?.[Tr]}constructor(F,D,H,ae,Pe,Le,Tt,wn,vr){this.url=F,this.params=D,this.queryParams=H,this.fragment=ae,this.data=Pe,this.outlet=Le,this.component=Tt,this.routeConfig=wn,this._resolve=vr}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ir(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ir(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(H=>H.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Qo extends cn{constructor(F,D){super(D),this.url=F,oo(this,D)}toString(){return ji(this._root)}}function oo(k,F){F.value._routerState=k,F.children.forEach(D=>oo(k,D))}function ji(k){const F=k.children.length>0?` { ${k.children.map(ji).join(", ")} } `:"";return`${k.value}${F}`}function Xo(k){if(k.snapshot){const F=k.snapshot,D=k._futureSnapshot;k.snapshot=D,_r(F.queryParams,D.queryParams)||k.queryParamsSubject.next(D.queryParams),F.fragment!==D.fragment&&k.fragmentSubject.next(D.fragment),_r(F.params,D.params)||k.paramsSubject.next(D.params),function oi(k,F){if(k.length!==F.length)return!1;for(let D=0;D<k.length;++D)if(!_r(k[D],F[D]))return!1;return!0}(F.url,D.url)||k.urlSubject.next(D.url),_r(F.data,D.data)||k.dataSubject.next(D.data)}else k.snapshot=k._futureSnapshot,k.dataSubject.next(k._futureSnapshot.data)}function vo(k,F){const D=_r(k.params,F.params)&&function Li(k,F){return Si(k,F)&&k.every((D,H)=>_r(D.parameters,F[H].parameters))}(k.url,F.url);return D&&!(!k.parent!=!F.parent)&&(!k.parent||vo(k.parent,F.parent))}let hs=(()=>{class k{constructor(){this.activated=null,this._activatedRoute=null,this.name=In,this.activateEvents=new E.vpe,this.deactivateEvents=new E.vpe,this.attachEvents=new E.vpe,this.detachEvents=new E.vpe,this.parentContexts=(0,E.f3M)(Gn),this.location=(0,E.f3M)(E.s_b),this.changeDetector=(0,E.f3M)(E.sBO),this.environmentInjector=(0,E.f3M)(E.lqb),this.inputBinder=(0,E.f3M)(jo,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(D){if(D.name){const{firstChange:H,previousValue:ae}=D.name;if(H)return;this.isTrackedInParentContexts(ae)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(ae)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(D){return this.parentContexts.getContext(D)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const D=this.parentContexts.getContext(this.name);D?.route&&(D.attachRef?this.attach(D.attachRef,D.route):this.activateWith(D.route,D.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E.vHH(4012,!1);this.location.detach();const D=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(D.instance),D}attach(D,H){this.activated=D,this._activatedRoute=H,this.location.insert(D.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(D.instance)}deactivate(){if(this.activated){const D=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(D)}}activateWith(D,H){if(this.isActivated)throw new E.vHH(4013,!1);this._activatedRoute=D;const ae=this.location,Le=D.snapshot.component,Tt=this.parentContexts.getOrCreateContext(this.name).children,wn=new Fo(D,Tt,ae.injector);this.activated=ae.createComponent(Le,{index:ae.length,injector:wn,environmentInjector:H??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return k.\u0275fac=function(D){return new(D||k)},k.\u0275dir=E.lG2({type:k,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[E.TTD]}),k})();class Fo{constructor(F,D,H){this.route=F,this.childContexts=D,this.parent=H}get(F,D){return F===js?this.route:F===Gn?this.childContexts:this.parent.get(F,D)}}const jo=new E.OlP("");let Ds=(()=>{class k{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(D){this.unsubscribeFromRouteData(D),this.subscribeToRouteData(D)}unsubscribeFromRouteData(D){this.outletDataSubscriptions.get(D)?.unsubscribe(),this.outletDataSubscriptions.delete(D)}subscribeToRouteData(D){const{activatedRoute:H}=D,ae=(0,He.aj)([H.queryParams,H.params,H.data]).pipe((0,Ze.w)(([Pe,Le,Tt],wn)=>(Tt={...Pe,...Le,...Tt},0===wn?(0,_e.of)(Tt):Promise.resolve(Tt)))).subscribe(Pe=>{if(!D.isActivated||!D.activatedComponentRef||D.activatedRoute!==H||null===H.component)return void this.unsubscribeFromRouteData(D);const Le=(0,E.qFp)(H.component);if(Le)for(const{templateName:Tt}of Le.inputs)D.activatedComponentRef.setInput(Tt,Pe[Tt]);else this.unsubscribeFromRouteData(D)});this.outletDataSubscriptions.set(D,ae)}}return k.\u0275fac=function(D){return new(D||k)},k.\u0275prov=E.Yz7({token:k,factory:k.\u0275fac}),k})();function qo(k,F,D){if(D&&k.shouldReuseRoute(F.value,D.value.snapshot)){const H=D.value;H._futureSnapshot=F.value;const ae=function Na(k,F,D){return F.children.map(H=>{for(const ae of D.children)if(k.shouldReuseRoute(H.value,ae.value.snapshot))return qo(k,H,ae);return qo(k,H)})}(k,F,D);return new Er(H,ae)}{if(k.shouldAttach(F.value)){const Pe=k.retrieve(F.value);if(null!==Pe){const Le=Pe.route;return Le.value._futureSnapshot=F.value,Le.children=F.children.map(Tt=>qo(k,Tt)),Le}}const H=function Wr(k){return new js(new xe.X(k.url),new xe.X(k.params),new xe.X(k.queryParams),new xe.X(k.fragment),new xe.X(k.data),k.outlet,k.component,k)}(F.value),ae=F.children.map(Pe=>qo(k,Pe));return new Er(H,ae)}}const ua="ngNavigationCancelingError";function ao(k,F){const{redirectTo:D,navigationBehaviorOptions:H}=Kt(F)?{redirectTo:F,navigationBehaviorOptions:void 0}:F,ae=La(!1,0,F);return ae.url=D,ae.navigationBehaviorOptions=H,ae}function La(k,F,D){const H=new Error("NavigationCancelingError: "+(k||""));return H[ua]=!0,H.cancellationCode=F,D&&(H.url=D),H}function vs(k){return Uo(k)&&Kt(k.url)}function Uo(k){return k&&k[ua]}let Ii=(()=>{class k{}return k.\u0275fac=function(D){return new(D||k)},k.\u0275cmp=E.Xpm({type:k,selectors:[["ng-component"]],standalone:!0,features:[E.jDz],decls:1,vars:0,template:function(D,H){1&D&&E._UZ(0,"router-outlet")},dependencies:[hs],encapsulation:2}),k})();function Xr(k){const F=k.children&&k.children.map(Xr),D=F?{...k,children:F}:{...k};return!D.component&&!D.loadComponent&&(F||D.loadChildren)&&D.outlet&&D.outlet!==In&&(D.component=Ii),D}function Mi(k){return k.outlet||In}function ja(k){if(!k)return null;if(k.routeConfig?._injector)return k.routeConfig._injector;for(let F=k.parent;F;F=F.parent){const D=F.routeConfig;if(D?._loadedInjector)return D._loadedInjector;if(D?._injector)return D._injector}return null}class Ml{constructor(F,D,H,ae,Pe){this.routeReuseStrategy=F,this.futureState=D,this.currState=H,this.forwardEvent=ae,this.inputBindingEnabled=Pe}activate(F){const D=this.futureState._root,H=this.currState?this.currState._root:null;this.deactivateChildRoutes(D,H,F),Xo(this.futureState.root),this.activateChildRoutes(D,H,F)}deactivateChildRoutes(F,D,H){const ae=$r(D);F.children.forEach(Pe=>{const Le=Pe.value.outlet;this.deactivateRoutes(Pe,ae[Le],H),delete ae[Le]}),Object.values(ae).forEach(Pe=>{this.deactivateRouteAndItsChildren(Pe,H)})}deactivateRoutes(F,D,H){const ae=F.value,Pe=D?D.value:null;if(ae===Pe)if(ae.component){const Le=H.getContext(ae.outlet);Le&&this.deactivateChildRoutes(F,D,Le.children)}else this.deactivateChildRoutes(F,D,H);else Pe&&this.deactivateRouteAndItsChildren(D,H)}deactivateRouteAndItsChildren(F,D){F.value.component&&this.routeReuseStrategy.shouldDetach(F.value.snapshot)?this.detachAndStoreRouteSubtree(F,D):this.deactivateRouteAndOutlet(F,D)}detachAndStoreRouteSubtree(F,D){const H=D.getContext(F.value.outlet),ae=H&&F.value.component?H.children:D,Pe=$r(F);for(const Le of Object.keys(Pe))this.deactivateRouteAndItsChildren(Pe[Le],ae);if(H&&H.outlet){const Le=H.outlet.detach(),Tt=H.children.onOutletDeactivated();this.routeReuseStrategy.store(F.value.snapshot,{componentRef:Le,route:F,contexts:Tt})}}deactivateRouteAndOutlet(F,D){const H=D.getContext(F.value.outlet),ae=H&&F.value.component?H.children:D,Pe=$r(F);for(const Le of Object.keys(Pe))this.deactivateRouteAndItsChildren(Pe[Le],ae);H&&(H.outlet&&(H.outlet.deactivate(),H.children.onOutletDeactivated()),H.attachRef=null,H.route=null)}activateChildRoutes(F,D,H){const ae=$r(D);F.children.forEach(Pe=>{this.activateRoutes(Pe,ae[Pe.value.outlet],H),this.forwardEvent(new ft(Pe.value.snapshot))}),F.children.length&&this.forwardEvent(new xs(F.value.snapshot))}activateRoutes(F,D,H){const ae=F.value,Pe=D?D.value:null;if(Xo(ae),ae===Pe)if(ae.component){const Le=H.getOrCreateContext(ae.outlet);this.activateChildRoutes(F,D,Le.children)}else this.activateChildRoutes(F,D,H);else if(ae.component){const Le=H.getOrCreateContext(ae.outlet);if(this.routeReuseStrategy.shouldAttach(ae.snapshot)){const Tt=this.routeReuseStrategy.retrieve(ae.snapshot);this.routeReuseStrategy.store(ae.snapshot,null),Le.children.onOutletReAttached(Tt.contexts),Le.attachRef=Tt.componentRef,Le.route=Tt.route.value,Le.outlet&&Le.outlet.attach(Tt.componentRef,Tt.route.value),Xo(Tt.route.value),this.activateChildRoutes(F,null,Le.children)}else{const Tt=ja(ae.snapshot);Le.attachRef=null,Le.route=ae,Le.injector=Tt,Le.outlet&&Le.outlet.activateWith(ae,Le.injector),this.activateChildRoutes(F,null,Le.children)}}else this.activateChildRoutes(F,null,H)}}class bi{constructor(F){this.path=F,this.route=this.path[this.path.length-1]}}class qa{constructor(F,D){this.component=F,this.route=D}}function tl(k,F,D){const H=k._root;return Za(H,F?F._root:null,D,[H.value])}function Ka(k,F){const D=Symbol(),H=F.get(k,D);return H===D?"function"!=typeof k||(0,E.Z0I)(k)?F.get(k):k:H}function Za(k,F,D,H,ae={canDeactivateChecks:[],canActivateChecks:[]}){const Pe=$r(F);return k.children.forEach(Le=>{(function ta(k,F,D,H,ae={canDeactivateChecks:[],canActivateChecks:[]}){const Pe=k.value,Le=F?F.value:null,Tt=D?D.getContext(k.value.outlet):null;if(Le&&Pe.routeConfig===Le.routeConfig){const wn=function ts(k,F,D){if("function"==typeof D)return D(k,F);switch(D){case"pathParamsChange":return!Si(k.url,F.url);case"pathParamsOrQueryParamsChange":return!Si(k.url,F.url)||!_r(k.queryParams,F.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vo(k,F)||!_r(k.queryParams,F.queryParams);default:return!vo(k,F)}}(Le,Pe,Pe.routeConfig.runGuardsAndResolvers);wn?ae.canActivateChecks.push(new bi(H)):(Pe.data=Le.data,Pe._resolvedData=Le._resolvedData),Za(k,F,Pe.component?Tt?Tt.children:null:D,H,ae),wn&&Tt&&Tt.outlet&&Tt.outlet.isActivated&&ae.canDeactivateChecks.push(new qa(Tt.outlet.component,Le))}else Le&&ne(F,Tt,ae),ae.canActivateChecks.push(new bi(H)),Za(k,null,Pe.component?Tt?Tt.children:null:D,H,ae)})(Le,Pe[Le.value.outlet],D,H.concat([Le.value]),ae),delete Pe[Le.value.outlet]}),Object.entries(Pe).forEach(([Le,Tt])=>ne(Tt,D.getContext(Le),ae)),ae}function ne(k,F,D){const H=$r(k),ae=k.value;Object.entries(H).forEach(([Pe,Le])=>{ne(Le,ae.component?F?F.children.getContext(Pe):null:F,D)}),D.canDeactivateChecks.push(new qa(ae.component&&F&&F.outlet&&F.outlet.isActivated?F.outlet.component:null,ae))}function Z(k){return"function"==typeof k}function et(k){return k instanceof Re.K||"EmptyError"===k?.name}const dt=Symbol("INITIAL_VALUE");function Nt(){return(0,Ze.w)(k=>(0,He.aj)(k.map(F=>F.pipe((0,lt.q)(1),(0,q.O)(dt)))).pipe((0,Ke.U)(F=>{for(const D of F)if(!0!==D){if(D===dt)return dt;if(!1===D||D instanceof ms)return D}return!0}),(0,ge.h)(F=>F!==dt),(0,lt.q)(1)))}function qi(k){return(0,Fe.z)((0,st.b)(F=>{if(Kt(F))throw ao(0,F)}),(0,Ke.U)(F=>!0===F))}class Ms{constructor(F){this.segmentGroup=F||null}}class bo{constructor(F){this.urlTree=F}}function rs(k){return(0,rt._)(new Ms(k))}function Ki(k){return(0,rt._)(new bo(k))}class Vo{constructor(F,D){this.urlSerializer=F,this.urlTree=D}noMatchError(F){return new E.vHH(4002,!1)}lineralizeSegments(F,D){let H=[],ae=D.root;for(;;){if(H=H.concat(ae.segments),0===ae.numberOfChildren)return(0,_e.of)(H);if(ae.numberOfChildren>1||!ae.children[In])return(0,rt._)(new E.vHH(4e3,!1));ae=ae.children[In]}}applyRedirectCommands(F,D,H){return this.applyRedirectCreateUrlTree(D,this.urlSerializer.parse(D),F,H)}applyRedirectCreateUrlTree(F,D,H,ae){const Pe=this.createSegmentGroup(F,D.root,H,ae);return new ms(Pe,this.createQueryParams(D.queryParams,this.urlTree.queryParams),D.fragment)}createQueryParams(F,D){const H={};return Object.entries(F).forEach(([ae,Pe])=>{if("string"==typeof Pe&&Pe.startsWith(":")){const Tt=Pe.substring(1);H[ae]=D[Tt]}else H[ae]=Pe}),H}createSegmentGroup(F,D,H,ae){const Pe=this.createSegments(F,D.segments,H,ae);let Le={};return Object.entries(D.children).forEach(([Tt,wn])=>{Le[Tt]=this.createSegmentGroup(F,wn,H,ae)}),new Tn(Pe,Le)}createSegments(F,D,H,ae){return D.map(Pe=>Pe.path.startsWith(":")?this.findPosParam(F,Pe,ae):this.findOrReturn(Pe,H))}findPosParam(F,D,H){const ae=H[D.path.substring(1)];if(!ae)throw new E.vHH(4001,!1);return ae}findOrReturn(F,D){let H=0;for(const ae of D){if(ae.path===F.path)return D.splice(H),ae;H++}return F}}const Vi={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ua(k,F,D,H,ae){const Pe=Co(k,F,D);return Pe.matched?(H=function Bo(k,F){return k.providers&&!k._injector&&(k._injector=(0,E.MMx)(k.providers,F,`Route: ${k.path}`)),k._injector??F}(F,H),function Jr(k,F,D,H){const ae=F.canMatch;if(!ae||0===ae.length)return(0,_e.of)(!0);const Pe=ae.map(Le=>{const Tt=Ka(Le,k);return Hn(function oe(k){return k&&Z(k.canMatch)}(Tt)?Tt.canMatch(F,D):k.runInContext(()=>Tt(F,D)))});return(0,_e.of)(Pe).pipe(Nt(),qi())}(H,F,D).pipe((0,Ke.U)(Le=>!0===Le?Pe:{...Vi}))):(0,_e.of)(Pe)}function Co(k,F,D){if(""===F.path)return"full"===F.pathMatch&&(k.hasChildren()||D.length>0)?{...Vi}:{matched:!0,consumedSegments:[],remainingSegments:D,parameters:{},positionalParamSegments:{}};const ae=(F.matcher||Pi)(D,k,F);if(!ae)return{...Vi};const Pe={};Object.entries(ae.posParams??{}).forEach(([Tt,wn])=>{Pe[Tt]=wn.path});const Le=ae.consumed.length>0?{...Pe,...ae.consumed[ae.consumed.length-1].parameters}:Pe;return{matched:!0,consumedSegments:ae.consumed,remainingSegments:D.slice(ae.consumed.length),parameters:Le,positionalParamSegments:ae.posParams??{}}}function Jl(k,F,D,H){return D.length>0&&function kl(k,F,D){return D.some(H=>Ya(k,F,H)&&Mi(H)!==In)}(k,D,H)?{segmentGroup:new Tn(F,ei(H,new Tn(D,k.children))),slicedSegments:[]}:0===D.length&&function Cu(k,F,D){return D.some(H=>Ya(k,F,H))}(k,D,H)?{segmentGroup:new Tn(k.segments,vu(k,0,D,H,k.children)),slicedSegments:D}:{segmentGroup:new Tn(k.segments,k.children),slicedSegments:D}}function vu(k,F,D,H,ae){const Pe={};for(const Le of H)if(Ya(k,D,Le)&&!ae[Mi(Le)]){const Tt=new Tn([],{});Pe[Mi(Le)]=Tt}return{...ae,...Pe}}function ei(k,F){const D={};D[In]=F;for(const H of k)if(""===H.path&&Mi(H)!==In){const ae=new Tn([],{});D[Mi(H)]=ae}return D}function Ya(k,F,D){return(!(k.hasChildren()||F.length>0)||"full"!==D.pathMatch)&&""===D.path}class Ea{constructor(F,D,H,ae,Pe,Le,Tt){this.injector=F,this.configLoader=D,this.rootComponentType=H,this.config=ae,this.urlTree=Pe,this.paramsInheritanceStrategy=Le,this.urlSerializer=Tt,this.allowRedirects=!0,this.applyRedirects=new Vo(this.urlSerializer,this.urlTree)}noMatchError(F){return new E.vHH(4002,!1)}recognize(){const F=Jl(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,F,In).pipe(Te(D=>{if(D instanceof bo)return this.allowRedirects=!1,this.urlTree=D.urlTree,this.match(D.urlTree);throw D instanceof Ms?this.noMatchError(D):D}),(0,Ke.U)(D=>{const H=new wo([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},In,this.rootComponentType,null,{}),ae=new Er(H,D),Pe=new Qo("",ae),Le=function er(k,F,D=null,H=null){return cr(Qn(k),F,D,H)}(H,[],this.urlTree.queryParams,this.urlTree.fragment);return Le.queryParams=this.urlTree.queryParams,Pe.url=this.urlSerializer.serialize(Le),this.inheritParamsAndData(Pe._root),{state:Pe,tree:Le}}))}match(F){return this.processSegmentGroup(this.injector,this.config,F.root,In).pipe(Te(H=>{throw H instanceof Ms?this.noMatchError(H):H}))}inheritParamsAndData(F){const D=F.value,H=Bi(D,this.paramsInheritanceStrategy);D.params=Object.freeze(H.params),D.data=Object.freeze(H.data),F.children.forEach(ae=>this.inheritParamsAndData(ae))}processSegmentGroup(F,D,H,ae){return 0===H.segments.length&&H.hasChildren()?this.processChildren(F,D,H):this.processSegment(F,D,H,H.segments,ae,!0)}processChildren(F,D,H){const ae=[];for(const Pe of Object.keys(H.children))"primary"===Pe?ae.unshift(Pe):ae.push(Pe);return(0,Be.D)(ae).pipe(bt(Pe=>{const Le=H.children[Pe],Tt=function Fa(k,F){const D=k.filter(H=>Mi(H)===F);return D.push(...k.filter(H=>Mi(H)!==F)),D}(D,Pe);return this.processSegmentGroup(F,Tt,Le,Pe)}),(0,Rt.R)((Pe,Le)=>(Pe.push(...Le),Pe)),(0,xt.d)(null),function qt(k,F){const D=arguments.length>=2;return H=>H.pipe(k?(0,ge.h)((ae,Pe)=>k(ae,Pe,H)):Vt.y,Yt(1),D?(0,xt.d)(F):(0,Ut.T)(()=>new Re.K))}(),(0,re.zg)(Pe=>{if(null===Pe)return rs(H);const Le=ks(Pe);return function Io(k){k.sort((F,D)=>F.value.outlet===In?-1:D.value.outlet===In?1:F.value.outlet.localeCompare(D.value.outlet))}(Le),(0,_e.of)(Le)}))}processSegment(F,D,H,ae,Pe,Le){return(0,Be.D)(D).pipe(bt(Tt=>this.processSegmentAgainstRoute(Tt._injector??F,D,Tt,H,ae,Pe,Le).pipe(Te(wn=>{if(wn instanceof Ms)return(0,_e.of)(null);throw wn}))),(0,Ct.P)(Tt=>!!Tt),Te(Tt=>{if(et(Tt))return function yu(k,F,D){return 0===F.length&&!k.children[D]}(H,ae,Pe)?(0,_e.of)([]):rs(H);throw Tt}))}processSegmentAgainstRoute(F,D,H,ae,Pe,Le,Tt){return function Qa(k,F,D,H){return!!(Mi(k)===H||H!==In&&Ya(F,D,k))&&("**"===k.path||Co(F,k,D).matched)}(H,ae,Pe,Le)?void 0===H.redirectTo?this.matchSegmentAgainstRoute(F,ae,H,Pe,Le,Tt):Tt&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(F,ae,D,H,Pe,Le):rs(ae):rs(ae)}expandSegmentAgainstRouteUsingRedirect(F,D,H,ae,Pe,Le){return"**"===ae.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(F,H,ae,Le):this.expandRegularSegmentAgainstRouteUsingRedirect(F,D,H,ae,Pe,Le)}expandWildCardWithParamsAgainstRouteUsingRedirect(F,D,H,ae){const Pe=this.applyRedirects.applyRedirectCommands([],H.redirectTo,{});return H.redirectTo.startsWith("/")?Ki(Pe):this.applyRedirects.lineralizeSegments(H,Pe).pipe((0,re.zg)(Le=>{const Tt=new Tn(Le,{});return this.processSegment(F,D,Tt,Le,ae,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(F,D,H,ae,Pe,Le){const{matched:Tt,consumedSegments:wn,remainingSegments:vr,positionalParamSegments:hr}=Co(D,ae,Pe);if(!Tt)return rs(D);const ci=this.applyRedirects.applyRedirectCommands(wn,ae.redirectTo,hr);return ae.redirectTo.startsWith("/")?Ki(ci):this.applyRedirects.lineralizeSegments(ae,ci).pipe((0,re.zg)(Ks=>this.processSegment(F,H,D,Ks.concat(vr),Le,!1)))}matchSegmentAgainstRoute(F,D,H,ae,Pe,Le){let Tt;if("**"===H.path){const wn=ae.length>0?sr(ae).parameters:{},vr=new wo(ae,wn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Bu(H),Mi(H),H.component??H._loadedComponent??null,H,Vu(H));Tt=(0,_e.of)({snapshot:vr,consumedSegments:[],remainingSegments:[]}),D.children={}}else Tt=Ua(D,H,ae,F).pipe((0,Ke.U)(({matched:wn,consumedSegments:vr,remainingSegments:hr,parameters:ci})=>wn?{snapshot:new wo(vr,ci,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Bu(H),Mi(H),H.component??H._loadedComponent??null,H,Vu(H)),consumedSegments:vr,remainingSegments:hr}:null));return Tt.pipe((0,Ze.w)(wn=>null===wn?rs(D):this.getChildConfig(F=H._injector??F,H,ae).pipe((0,Ze.w)(({routes:vr})=>{const hr=H._loadedInjector??F,{snapshot:ci,consumedSegments:Ks,remainingSegments:Ot}=wn,{segmentGroup:xa,slicedSegments:da}=Jl(D,Ks,Ot,vr);if(0===da.length&&xa.hasChildren())return this.processChildren(hr,vr,xa).pipe((0,Ke.U)(iu=>null===iu?null:[new Er(ci,iu)]));if(0===vr.length&&0===da.length)return(0,_e.of)([new Er(ci,[])]);const Ac=Mi(H)===Pe;return this.processSegment(hr,vr,xa,da,Ac?In:Pe,!0).pipe((0,Ke.U)(iu=>[new Er(ci,iu)]))}))))}getChildConfig(F,D,H){return D.children?(0,_e.of)({routes:D.children,injector:F}):D.loadChildren?void 0!==D._loadedRoutes?(0,_e.of)({routes:D._loadedRoutes,injector:D._loadedInjector}):function ns(k,F,D,H){const ae=F.canLoad;if(void 0===ae||0===ae.length)return(0,_e.of)(!0);const Pe=ae.map(Le=>{const Tt=Ka(Le,k);return Hn(function ke(k){return k&&Z(k.canLoad)}(Tt)?Tt.canLoad(F,D):k.runInContext(()=>Tt(F,D)))});return(0,_e.of)(Pe).pipe(Nt(),qi())}(F,D,H).pipe((0,re.zg)(ae=>ae?this.configLoader.loadChildren(F,D).pipe((0,st.b)(Pe=>{D._loadedRoutes=Pe.routes,D._loadedInjector=Pe.injector})):function la(k){return(0,rt._)(La(!1,3))}())):(0,_e.of)({routes:[],injector:F})}}function Iu(k){const F=k.value.routeConfig;return F&&""===F.path}function ks(k){const F=[],D=new Set;for(const H of k){if(!Iu(H)){F.push(H);continue}const ae=F.find(Pe=>H.value.routeConfig===Pe.value.routeConfig);void 0!==ae?(ae.children.push(...H.children),D.add(ae)):F.push(H)}for(const H of D){const ae=ks(H.children);F.push(new Er(H.value,ae))}return F.filter(H=>!D.has(H))}function Bu(k){return k.data||{}}function Vu(k){return k.resolve||{}}function Ie(k){return"string"==typeof k.title||null===k.title}function Ge(k){return(0,Ze.w)(F=>{const D=k(F);return D?(0,Be.D)(D).pipe((0,Ke.U)(()=>F)):(0,_e.of)(F)})}const Lt=new E.OlP("ROUTES");let zt=(()=>{class k{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,E.f3M)(E.Sil)}loadComponent(D){if(this.componentLoaders.get(D))return this.componentLoaders.get(D);if(D._loadedComponent)return(0,_e.of)(D._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(D);const H=Hn(D.loadComponent()).pipe((0,Ke.U)(ti),(0,st.b)(Pe=>{this.onLoadEndListener&&this.onLoadEndListener(D),D._loadedComponent=Pe}),Cn(()=>{this.componentLoaders.delete(D)})),ae=new ce.c(H,()=>new wt.xQ).pipe((0,kr.x)());return this.componentLoaders.set(D,ae),ae}loadChildren(D,H){if(this.childrenLoaders.get(H))return this.childrenLoaders.get(H);if(H._loadedRoutes)return(0,_e.of)({routes:H._loadedRoutes,injector:H._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(H);const Pe=this.loadModuleFactoryOrRoutes(H.loadChildren).pipe((0,Ke.U)(Tt=>{this.onLoadEndListener&&this.onLoadEndListener(H);let wn,vr;return Array.isArray(Tt)?vr=Tt:(wn=Tt.create(D).injector,vr=wn.get(Lt,[],E.XFs.Self|E.XFs.Optional).flat()),{routes:vr.map(Xr),injector:wn}}),Cn(()=>{this.childrenLoaders.delete(H)})),Le=new ce.c(Pe,()=>new wt.xQ).pipe((0,kr.x)());return this.childrenLoaders.set(H,Le),Le}loadModuleFactoryOrRoutes(D){return Hn(D()).pipe((0,Ke.U)(ti),(0,re.zg)(H=>H instanceof E.YKP||Array.isArray(H)?(0,_e.of)(H):(0,Be.D)(this.compiler.compileModuleAsync(H))))}}return k.\u0275fac=function(D){return new(D||k)},k.\u0275prov=E.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();function ti(k){return function ur(k){return k&&"object"==typeof k&&"default"in k}(k)?k.default:k}let mi=(()=>{class k{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new wt.xQ,this.configLoader=(0,E.f3M)(zt),this.environmentInjector=(0,E.f3M)(E.lqb),this.urlSerializer=(0,E.f3M)(Mn),this.rootContexts=(0,E.f3M)(Gn),this.inputBindingEnabled=null!==(0,E.f3M)(jo,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,_e.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=ae=>this.events.next(new wi(ae)),this.configLoader.onLoadStartListener=ae=>this.events.next(new gi(ae))}complete(){this.transitions?.complete()}handleNavigationRequest(D){const H=++this.navigationId;this.transitions?.next({...this.transitions.value,...D,id:H})}setupNavigations(D){return this.transitions=new xe.X({id:0,currentUrlTree:D.currentUrlTree,currentRawUrl:D.currentUrlTree,extractedUrl:D.urlHandlingStrategy.extract(D.currentUrlTree),urlAfterRedirects:D.urlHandlingStrategy.extract(D.currentUrlTree),rawUrl:D.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:mo,restoredState:null,currentSnapshot:D.routerState.snapshot,targetSnapshot:null,currentRouterState:D.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,ge.h)(H=>0!==H.id),(0,Ke.U)(H=>({...H,extractedUrl:D.urlHandlingStrategy.extract(H.rawUrl)})),(0,Ze.w)(H=>{let ae=!1,Pe=!1;return(0,_e.of)(H).pipe((0,st.b)(Le=>{this.currentNavigation={id:Le.id,initialUrl:Le.rawUrl,extractedUrl:Le.extractedUrl,trigger:Le.source,extras:Le.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ze.w)(Le=>{const Tt=D.browserUrlTree.toString(),wn=!D.navigated||Le.extractedUrl.toString()!==Tt||Tt!==D.currentUrlTree.toString();if(!wn&&"reload"!==(Le.extras.onSameUrlNavigation??D.onSameUrlNavigation)){const hr="";return this.events.next(new oa(Le.id,D.serializeUrl(H.rawUrl),hr,0)),D.rawUrlTree=Le.rawUrl,Le.resolve(null),ye.E}if(D.urlHandlingStrategy.shouldProcessUrl(Le.rawUrl))return hi(Le.source)&&(D.browserUrlTree=Le.extractedUrl),(0,_e.of)(Le).pipe((0,Ze.w)(hr=>{const ci=this.transitions?.getValue();return this.events.next(new ya(hr.id,this.urlSerializer.serialize(hr.extractedUrl),hr.source,hr.restoredState)),ci!==this.transitions?.getValue()?ye.E:Promise.resolve(hr)}),function li(k,F,D,H,ae,Pe){return(0,re.zg)(Le=>function as(k,F,D,H,ae,Pe,Le="emptyOnly"){return new Ea(k,F,D,H,ae,Le,Pe).recognize()}(k,F,D,H,Le.extractedUrl,ae,Pe).pipe((0,Ke.U)(({state:Tt,tree:wn})=>({...Le,targetSnapshot:Tt,urlAfterRedirects:wn}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,D.config,this.urlSerializer,D.paramsInheritanceStrategy),(0,st.b)(hr=>{if(H.targetSnapshot=hr.targetSnapshot,H.urlAfterRedirects=hr.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:hr.urlAfterRedirects},"eager"===D.urlUpdateStrategy){if(!hr.extras.skipLocationChange){const Ks=D.urlHandlingStrategy.merge(hr.urlAfterRedirects,hr.rawUrl);D.setBrowserUrl(Ks,hr)}D.browserUrlTree=hr.urlAfterRedirects}const ci=new Gs(hr.id,this.urlSerializer.serialize(hr.extractedUrl),this.urlSerializer.serialize(hr.urlAfterRedirects),hr.targetSnapshot);this.events.next(ci)}));if(wn&&D.urlHandlingStrategy.shouldProcessUrl(D.rawUrlTree)){const{id:hr,extractedUrl:ci,source:Ks,restoredState:Ot,extras:xa}=Le,da=new ya(hr,this.urlSerializer.serialize(ci),Ks,Ot);this.events.next(da);const Ac=Wo(0,this.rootComponentType).snapshot;return H={...Le,targetSnapshot:Ac,urlAfterRedirects:ci,extras:{...xa,skipLocationChange:!1,replaceUrl:!1}},(0,_e.of)(H)}{const hr="";return this.events.next(new oa(Le.id,D.serializeUrl(H.extractedUrl),hr,1)),D.rawUrlTree=Le.rawUrl,Le.resolve(null),ye.E}}),(0,st.b)(Le=>{const Tt=new mu(Le.id,this.urlSerializer.serialize(Le.extractedUrl),this.urlSerializer.serialize(Le.urlAfterRedirects),Le.targetSnapshot);this.events.next(Tt)}),(0,Ke.U)(Le=>H={...Le,guards:tl(Le.targetSnapshot,Le.currentSnapshot,this.rootContexts)}),function Qt(k,F){return(0,re.zg)(D=>{const{targetSnapshot:H,currentSnapshot:ae,guards:{canActivateChecks:Pe,canDeactivateChecks:Le}}=D;return 0===Le.length&&0===Pe.length?(0,_e.of)({...D,guardsResult:!0}):function tr(k,F,D,H){return(0,Be.D)(k).pipe((0,re.zg)(ae=>function ui(k,F,D,H,ae){const Pe=F&&F.routeConfig?F.routeConfig.canDeactivate:null;if(!Pe||0===Pe.length)return(0,_e.of)(!0);const Le=Pe.map(Tt=>{const wn=ja(F)??ae,vr=Ka(Tt,wn);return Hn(function fs(k){return k&&Z(k.canDeactivate)}(vr)?vr.canDeactivate(k,F,D,H):wn.runInContext(()=>vr(k,F,D,H))).pipe((0,Ct.P)())});return(0,_e.of)(Le).pipe(Nt())}(ae.component,ae.route,D,F,H)),(0,Ct.P)(ae=>!0!==ae,!0))}(Le,H,ae,k).pipe((0,re.zg)(Tt=>Tt&&function W(k){return"boolean"==typeof k}(Tt)?function dr(k,F,D,H){return(0,Be.D)(F).pipe(bt(ae=>(0,Ue.z)(function Mr(k,F){return null!==k&&F&&F(new aa(k)),(0,_e.of)(!0)}(ae.route.parent,H),function Pr(k,F){return null!==k&&F&&F(new vt(k)),(0,_e.of)(!0)}(ae.route,H),function Gr(k,F,D){const H=F[F.length-1],Pe=F.slice(0,F.length-1).reverse().map(Le=>function _o(k){const F=k.routeConfig?k.routeConfig.canActivateChild:null;return F&&0!==F.length?{node:k,guards:F}:null}(Le)).filter(Le=>null!==Le).map(Le=>Ae(()=>{const Tt=Le.guards.map(wn=>{const vr=ja(Le.node)??D,hr=Ka(wn,vr);return Hn(function qn(k){return k&&Z(k.canActivateChild)}(hr)?hr.canActivateChild(H,k):vr.runInContext(()=>hr(H,k))).pipe((0,Ct.P)())});return(0,_e.of)(Tt).pipe(Nt())}));return(0,_e.of)(Pe).pipe(Nt())}(k,ae.path,D),function Ui(k,F,D){const H=F.routeConfig?F.routeConfig.canActivate:null;if(!H||0===H.length)return(0,_e.of)(!0);const ae=H.map(Pe=>Ae(()=>{const Le=ja(F)??D,Tt=Ka(Pe,Le);return Hn(function $t(k){return k&&Z(k.canActivate)}(Tt)?Tt.canActivate(F,k):Le.runInContext(()=>Tt(F,k))).pipe((0,Ct.P)())}));return(0,_e.of)(ae).pipe(Nt())}(k,ae.route,D))),(0,Ct.P)(ae=>!0!==ae,!0))}(H,Pe,k,F):(0,_e.of)(Tt)),(0,Ke.U)(Tt=>({...D,guardsResult:Tt})))})}(this.environmentInjector,Le=>this.events.next(Le)),(0,st.b)(Le=>{if(H.guardsResult=Le.guardsResult,Kt(Le.guardsResult))throw ao(0,Le.guardsResult);const Tt=new ba(Le.id,this.urlSerializer.serialize(Le.extractedUrl),this.urlSerializer.serialize(Le.urlAfterRedirects),Le.targetSnapshot,!!Le.guardsResult);this.events.next(Tt)}),(0,ge.h)(Le=>!!Le.guardsResult||(D.restoreHistory(Le),this.cancelNavigationTransition(Le,"",3),!1)),Ge(Le=>{if(Le.guards.canActivateChecks.length)return(0,_e.of)(Le).pipe((0,st.b)(Tt=>{const wn=new Is(Tt.id,this.urlSerializer.serialize(Tt.extractedUrl),this.urlSerializer.serialize(Tt.urlAfterRedirects),Tt.targetSnapshot);this.events.next(wn)}),(0,Ze.w)(Tt=>{let wn=!1;return(0,_e.of)(Tt).pipe(function Ja(k,F){return(0,re.zg)(D=>{const{targetSnapshot:H,guards:{canActivateChecks:ae}}=D;if(!ae.length)return(0,_e.of)(D);let Pe=0;return(0,Be.D)(ae).pipe(bt(Le=>function eu(k,F,D,H){const ae=k.routeConfig,Pe=k._resolve;return void 0!==ae?.title&&!Ie(ae)&&(Pe[Tr]=ae.title),function B(k,F,D,H){const ae=function he(k){return[...Object.keys(k),...Object.getOwnPropertySymbols(k)]}(k);if(0===ae.length)return(0,_e.of)({});const Pe={};return(0,Be.D)(ae).pipe((0,re.zg)(Le=>function z(k,F,D,H){const ae=ja(F)??H,Pe=Ka(k,ae);return Hn(Pe.resolve?Pe.resolve(F,D):ae.runInContext(()=>Pe(F,D)))}(k[Le],F,D,H).pipe((0,Ct.P)(),(0,st.b)(Tt=>{Pe[Le]=Tt}))),Yt(1),function En(k){return F=>F.lift(new on(k))}(Pe),Te(Le=>et(Le)?ye.E:(0,rt._)(Le)))}(Pe,k,F,H).pipe((0,Ke.U)(Le=>(k._resolvedData=Le,k.data=Bi(k,D).resolve,ae&&Ie(ae)&&(k.data[Tr]=ae.title),null)))}(Le.route,H,k,F)),(0,st.b)(()=>Pe++),Yt(1),(0,re.zg)(Le=>Pe===ae.length?(0,_e.of)(D):ye.E))})}(D.paramsInheritanceStrategy,this.environmentInjector),(0,st.b)({next:()=>wn=!0,complete:()=>{wn||(D.restoreHistory(Tt),this.cancelNavigationTransition(Tt,"",2))}}))}),(0,st.b)(Tt=>{const wn=new wr(Tt.id,this.urlSerializer.serialize(Tt.extractedUrl),this.urlSerializer.serialize(Tt.urlAfterRedirects),Tt.targetSnapshot);this.events.next(wn)}))}),Ge(Le=>{const Tt=wn=>{const vr=[];wn.routeConfig?.loadComponent&&!wn.routeConfig._loadedComponent&&vr.push(this.configLoader.loadComponent(wn.routeConfig).pipe((0,st.b)(hr=>{wn.component=hr}),(0,Ke.U)(()=>{})));for(const hr of wn.children)vr.push(...Tt(hr));return vr};return(0,He.aj)(Tt(Le.targetSnapshot.root)).pipe((0,xt.d)(),(0,lt.q)(1))}),Ge(()=>this.afterPreactivation()),(0,Ke.U)(Le=>{const Tt=function Jo(k,F,D){const H=qo(k,F._root,D?D._root:void 0);return new Ci(H,F)}(D.routeReuseStrategy,Le.targetSnapshot,Le.currentRouterState);return H={...Le,targetRouterState:Tt}}),(0,st.b)(Le=>{D.currentUrlTree=Le.urlAfterRedirects,D.rawUrlTree=D.urlHandlingStrategy.merge(Le.urlAfterRedirects,Le.rawUrl),D.routerState=Le.targetRouterState,"deferred"===D.urlUpdateStrategy&&(Le.extras.skipLocationChange||D.setBrowserUrl(D.rawUrlTree,Le),D.browserUrlTree=Le.urlAfterRedirects)}),((k,F,D,H)=>(0,Ke.U)(ae=>(new Ml(F,ae.targetRouterState,ae.currentRouterState,D,H).activate(k),ae)))(this.rootContexts,D.routeReuseStrategy,Le=>this.events.next(Le),this.inputBindingEnabled),(0,lt.q)(1),(0,st.b)({next:Le=>{ae=!0,this.lastSuccessfulNavigation=this.currentNavigation,D.navigated=!0,this.events.next(new _a(Le.id,this.urlSerializer.serialize(Le.extractedUrl),this.urlSerializer.serialize(D.currentUrlTree))),D.titleStrategy?.updateTitle(Le.targetRouterState.snapshot),Le.resolve(!0)},complete:()=>{ae=!0}}),Cn(()=>{ae||Pe||this.cancelNavigationTransition(H,"",1),this.currentNavigation?.id===H.id&&(this.currentNavigation=null)}),Te(Le=>{if(Pe=!0,Uo(Le)){vs(Le)||(D.navigated=!0,D.restoreHistory(H,!0));const Tt=new es(H.id,this.urlSerializer.serialize(H.extractedUrl),Le.message,Le.cancellationCode);if(this.events.next(Tt),vs(Le)){const wn=D.urlHandlingStrategy.merge(Le.url,D.rawUrlTree),vr={skipLocationChange:H.extras.skipLocationChange,replaceUrl:"eager"===D.urlUpdateStrategy||hi(H.source)};D.scheduleNavigation(wn,mo,null,vr,{resolve:H.resolve,reject:H.reject,promise:H.promise})}else H.resolve(!1)}else{D.restoreHistory(H,!0);const Tt=new Wa(H.id,this.urlSerializer.serialize(H.extractedUrl),Le,H.targetSnapshot??void 0);this.events.next(Tt);try{H.resolve(D.errorHandler(Le))}catch(wn){H.reject(wn)}}return ye.E}))}))}cancelNavigationTransition(D,H,ae){const Pe=new es(D.id,this.urlSerializer.serialize(D.extractedUrl),H,ae);this.events.next(Pe),D.resolve(!1)}}return k.\u0275fac=function(D){return new(D||k)},k.\u0275prov=E.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();function hi(k){return k!==mo}let mr=(()=>{class k{buildTitle(D){let H,ae=D.root;for(;void 0!==ae;)H=this.getResolvedTitleForRoute(ae)??H,ae=ae.children.find(Pe=>Pe.outlet===In);return H}getResolvedTitleForRoute(D){return D.data[Tr]}}return k.\u0275fac=function(D){return new(D||k)},k.\u0275prov=E.Yz7({token:k,factory:function(){return(0,E.f3M)(us)},providedIn:"root"}),k})(),us=(()=>{class k extends mr{constructor(D){super(),this.title=D}updateTitle(D){const H=this.buildTitle(D);void 0!==H&&this.title.setTitle(H)}}return k.\u0275fac=function(D){return new(D||k)(E.LFG(Ai.Dx))},k.\u0275prov=E.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})(),fi=(()=>{class k{}return k.\u0275fac=function(D){return new(D||k)},k.\u0275prov=E.Yz7({token:k,factory:function(){return(0,E.f3M)(Jn)},providedIn:"root"}),k})();class Gi{shouldDetach(F){return!1}store(F,D){}shouldAttach(F){return!1}retrieve(F){return null}shouldReuseRoute(F,D){return F.routeConfig===D.routeConfig}}let Jn=(()=>{class k extends Gi{}return k.\u0275fac=function(){let F;return function(H){return(F||(F=E.n5z(k)))(H||k)}}(),k.\u0275prov=E.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();const xo=new E.OlP("",{providedIn:"root",factory:()=>({})});let Do=(()=>{class k{}return k.\u0275fac=function(D){return new(D||k)},k.\u0275prov=E.Yz7({token:k,factory:function(){return(0,E.f3M)(Js)},providedIn:"root"}),k})(),Js=(()=>{class k{shouldProcessUrl(D){return!0}extract(D){return D}merge(D,H){return D}}return k.\u0275fac=function(D){return new(D||k)},k.\u0275prov=E.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();var is=(()=>((is=is||{})[is.COMPLETE=0]="COMPLETE",is[is.FAILED=1]="FAILED",is[is.REDIRECTING=2]="REDIRECTING",is))();function tu(k,F){k.events.pipe((0,ge.h)(D=>D instanceof _a||D instanceof es||D instanceof Wa||D instanceof oa),(0,Ke.U)(D=>D instanceof _a||D instanceof oa?is.COMPLETE:D instanceof es&&(0===D.code||1===D.code)?is.REDIRECTING:is.FAILED),(0,ge.h)(D=>D!==is.REDIRECTING),(0,lt.q)(1)).subscribe(()=>{F()})}function jr(k){throw k}function Sa(k,F,D){return F.parse("/")}const wc={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_u={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let zs=(()=>{class k{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,E.f3M)(E.c2e),this.isNgZoneEnabled=!1,this.options=(0,E.f3M)(xo,{optional:!0})||{},this.pendingTasks=(0,E.f3M)(E.HDt),this.errorHandler=this.options.errorHandler||jr,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Sa,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,E.f3M)(Do),this.routeReuseStrategy=(0,E.f3M)(fi),this.titleStrategy=(0,E.f3M)(mr),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,E.f3M)(Lt,{optional:!0})?.flat()??[],this.navigationTransitions=(0,E.f3M)(mi),this.urlSerializer=(0,E.f3M)(Mn),this.location=(0,E.f3M)(Ye.Ye),this.componentInputBindingEnabled=!!(0,E.f3M)(jo,{optional:!0}),this.isNgZoneEnabled=(0,E.f3M)(E.R0b)instanceof E.R0b&&E.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ms,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Wo(0,null),this.navigationTransitions.setupNavigations(this).subscribe(D=>{this.lastSuccessfulId=D.id,this.currentPageId=this.browserPageId??0},D=>{this.console.warn(`Unhandled Navigation Error: ${D}`)})}resetRootComponentType(D){this.routerState.root.component=D,this.navigationTransitions.rootComponentType=D}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const D=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),mo,D)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(D=>{const H="popstate"===D.type?"popstate":"hashchange";"popstate"===H&&setTimeout(()=>{this.navigateToSyncWithBrowser(D.url,H,D.state)},0)}))}navigateToSyncWithBrowser(D,H,ae){const Pe={replaceUrl:!0},Le=ae?.navigationId?ae:null;if(ae){const wn={...ae};delete wn.navigationId,delete wn.\u0275routerPageId,0!==Object.keys(wn).length&&(Pe.state=wn)}const Tt=this.parseUrl(D);this.scheduleNavigation(Tt,H,Le,Pe)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(D){this.config=D.map(Xr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(D,H={}){const{relativeTo:ae,queryParams:Pe,fragment:Le,queryParamsHandling:Tt,preserveFragment:wn}=H,vr=wn?this.currentUrlTree.fragment:Le;let ci,hr=null;switch(Tt){case"merge":hr={...this.currentUrlTree.queryParams,...Pe};break;case"preserve":hr=this.currentUrlTree.queryParams;break;default:hr=Pe||null}null!==hr&&(hr=this.removeEmptyProps(hr));try{ci=Qn(ae?ae.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof D[0]||!D[0].startsWith("/"))&&(D=[]),ci=this.currentUrlTree.root}return cr(ci,D,hr,vr??null)}navigateByUrl(D,H={skipLocationChange:!1}){const ae=Kt(D)?D:this.parseUrl(D),Pe=this.urlHandlingStrategy.merge(ae,this.rawUrlTree);return this.scheduleNavigation(Pe,mo,null,H)}navigate(D,H={skipLocationChange:!1}){return function ec(k){for(let F=0;F<k.length;F++)if(null==k[F])throw new E.vHH(4008,!1)}(D),this.navigateByUrl(this.createUrlTree(D,H),H)}serializeUrl(D){return this.urlSerializer.serialize(D)}parseUrl(D){let H;try{H=this.urlSerializer.parse(D)}catch(ae){H=this.malformedUriErrorHandler(ae,this.urlSerializer,D)}return H}isActive(D,H){let ae;if(ae=!0===H?{...wc}:!1===H?{..._u}:H,Kt(D))return Ei(this.currentUrlTree,D,ae);const Pe=this.parseUrl(D);return Ei(this.currentUrlTree,Pe,ae)}removeEmptyProps(D){return Object.keys(D).reduce((H,ae)=>{const Pe=D[ae];return null!=Pe&&(H[ae]=Pe),H},{})}scheduleNavigation(D,H,ae,Pe,Le){if(this.disposed)return Promise.resolve(!1);let Tt,wn,vr;Le?(Tt=Le.resolve,wn=Le.reject,vr=Le.promise):vr=new Promise((ci,Ks)=>{Tt=ci,wn=Ks});const hr=this.pendingTasks.add();return tu(this,()=>{Promise.resolve().then(()=>this.pendingTasks.remove(hr))}),this.navigationTransitions.handleNavigationRequest({source:H,restoredState:ae,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:D,extras:Pe,resolve:Tt,reject:wn,promise:vr,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),vr.catch(ci=>Promise.reject(ci))}setBrowserUrl(D,H){const ae=this.urlSerializer.serialize(D);if(this.location.isCurrentPathEqualTo(ae)||H.extras.replaceUrl){const Le={...H.extras.state,...this.generateNgRouterState(H.id,this.browserPageId)};this.location.replaceState(ae,"",Le)}else{const Pe={...H.extras.state,...this.generateNgRouterState(H.id,(this.browserPageId??0)+1)};this.location.go(ae,"",Pe)}}restoreHistory(D,H=!1){if("computed"===this.canceledNavigationResolution){const Pe=this.currentPageId-(this.browserPageId??this.currentPageId);0!==Pe?this.location.historyGo(Pe):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===Pe&&(this.resetState(D),this.browserUrlTree=D.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(H&&this.resetState(D),this.resetUrlToCurrentUrlTree())}resetState(D){this.routerState=D.currentRouterState,this.currentUrlTree=D.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,D.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(D,H){return"computed"===this.canceledNavigationResolution?{navigationId:D,\u0275routerPageId:H}:{navigationId:D}}}return k.\u0275fac=function(D){return new(D||k)},k.\u0275prov=E.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})(),bu=(()=>{class k{constructor(D,H,ae,Pe,Le,Tt){this.router=D,this.route=H,this.tabIndexAttribute=ae,this.renderer=Pe,this.el=Le,this.locationStrategy=Tt,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new wt.xQ;const wn=Le.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===wn||"area"===wn,this.isAnchorElement?this.subscription=D.events.subscribe(vr=>{vr instanceof _a&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(D){this._preserveFragment=(0,E.D6c)(D)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(D){this._skipLocationChange=(0,E.D6c)(D)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(D){this._replaceUrl=(0,E.D6c)(D)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(D){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",D)}ngOnChanges(D){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(D){null!=D?(this.commands=Array.isArray(D)?D:[D],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(D,H,ae,Pe,Le){return!!(null===this.urlTree||this.isAnchorElement&&(0!==D||H||ae||Pe||Le||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const D=null===this.href?null:(0,E.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",D)}applyAttributeValue(D,H){const ae=this.renderer,Pe=this.el.nativeElement;null!==H?ae.setAttribute(Pe,D,H):ae.removeAttribute(Pe,D)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return k.\u0275fac=function(D){return new(D||k)(E.Y36(zs),E.Y36(js),E.$8M("tabindex"),E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36(Ye.S$))},k.\u0275dir=E.lG2({type:k,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(D,H){1&D&&E.NdJ("click",function(Pe){return H.onClick(Pe.button,Pe.ctrlKey,Pe.shiftKey,Pe.altKey,Pe.metaKey)}),2&D&&E.uIk("target",H.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[E.TTD]}),k})(),_n=(()=>{class k{get isActive(){return this._isActive}constructor(D,H,ae,Pe,Le){this.router=D,this.element=H,this.renderer=ae,this.cdr=Pe,this.link=Le,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new E.vpe,this.routerEventsSubscription=D.events.subscribe(Tt=>{Tt instanceof _a&&this.update()})}ngAfterContentInit(){(0,_e.of)(this.links.changes,(0,_e.of)(null)).pipe((0,On.J)()).subscribe(D=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const D=[...this.links.toArray(),this.link].filter(H=>!!H).map(H=>H.onChanges);this.linkInputChangesSubscription=(0,Be.D)(D).pipe((0,On.J)()).subscribe(H=>{this._isActive!==this.isLinkActive(this.router)(H)&&this.update()})}set routerLinkActive(D){const H=Array.isArray(D)?D:D.split(" ");this.classes=H.filter(ae=>!!ae)}ngOnChanges(D){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const D=this.hasActiveLinks();this._isActive!==D&&(this._isActive=D,this.cdr.markForCheck(),this.classes.forEach(H=>{D?this.renderer.addClass(this.element.nativeElement,H):this.renderer.removeClass(this.element.nativeElement,H)}),D&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(D))})}isLinkActive(D){const H=function qr(k){return!!k.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return ae=>!!ae.urlTree&&D.isActive(ae.urlTree,H)}hasActiveLinks(){const D=this.isLinkActive(this.router);return this.link&&D(this.link)||this.links.some(D)}}return k.\u0275fac=function(D){return new(D||k)(E.Y36(zs),E.Y36(E.SBq),E.Y36(E.Qsj),E.Y36(E.sBO),E.Y36(bu,8))},k.\u0275dir=E.lG2({type:k,selectors:[["","routerLinkActive",""]],contentQueries:function(D,H,ae){if(1&D&&E.Suo(ae,bu,5),2&D){let Pe;E.iGM(Pe=E.CRH())&&(H.links=Pe)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[E.TTD]}),k})();class Cc{}let nd=(()=>{class k{constructor(D,H,ae,Pe,Le){this.router=D,this.injector=ae,this.preloadingStrategy=Pe,this.loader=Le}setUpPreloading(){this.subscription=this.router.events.pipe((0,ge.h)(D=>D instanceof _a),bt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(D,H){const ae=[];for(const Pe of H){Pe.providers&&!Pe._injector&&(Pe._injector=(0,E.MMx)(Pe.providers,D,`Route: ${Pe.path}`));const Le=Pe._injector??D,Tt=Pe._loadedInjector??Le;(Pe.loadChildren&&!Pe._loadedRoutes&&void 0===Pe.canLoad||Pe.loadComponent&&!Pe._loadedComponent)&&ae.push(this.preloadConfig(Le,Pe)),(Pe.children||Pe._loadedRoutes)&&ae.push(this.processRoutes(Tt,Pe.children??Pe._loadedRoutes))}return(0,Be.D)(ae).pipe((0,On.J)())}preloadConfig(D,H){return this.preloadingStrategy.preload(H,()=>{let ae;ae=H.loadChildren&&void 0===H.canLoad?this.loader.loadChildren(D,H):(0,_e.of)(null);const Pe=ae.pipe((0,re.zg)(Le=>null===Le?(0,_e.of)(void 0):(H._loadedRoutes=Le.routes,H._loadedInjector=Le.injector,this.processRoutes(Le.injector??D,Le.routes))));if(H.loadComponent&&!H._loadedComponent){const Le=this.loader.loadComponent(H);return(0,Be.D)([Pe,Le]).pipe((0,On.J)())}return Pe})}}return k.\u0275fac=function(D){return new(D||k)(E.LFG(zs),E.LFG(E.Sil),E.LFG(E.lqb),E.LFG(Cc),E.LFG(zt))},k.\u0275prov=E.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();const Ws=new E.OlP("");let eo=(()=>{class k{constructor(D,H,ae,Pe,Le={}){this.urlSerializer=D,this.transitions=H,this.viewportScroller=ae,this.zone=Pe,this.options=Le,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Le.scrollPositionRestoration=Le.scrollPositionRestoration||"disabled",Le.anchorScrolling=Le.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(D=>{D instanceof ya?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=D.navigationTrigger,this.restoredId=D.restoredState?D.restoredState.navigationId:0):D instanceof _a?(this.lastId=D.id,this.scheduleScrollEvent(D,this.urlSerializer.parse(D.urlAfterRedirects).fragment)):D instanceof oa&&0===D.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(D,this.urlSerializer.parse(D.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(D=>{D instanceof At&&(D.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(D.position):D.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(D.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(D,H){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new At(D,"popstate"===this.lastSource?this.store[this.restoredId]:null,H))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return k.\u0275fac=function(D){E.$Z()},k.\u0275prov=E.Yz7({token:k,factory:k.\u0275fac}),k})();function ru(k,F){return{\u0275kind:k,\u0275providers:F}}function Xn(){const k=(0,E.f3M)(E.zs3);return F=>{const D=k.get(E.z2F);if(F!==D.components[0])return;const H=k.get(zs),ae=k.get(Ln);1===k.get(wa)&&H.initialNavigation(),k.get(Ao,null,E.XFs.Optional)?.setUpPreloading(),k.get(Ws,null,E.XFs.Optional)?.init(),H.resetRootComponentType(D.componentTypes[0]),ae.closed||(ae.next(),ae.complete(),ae.unsubscribe())}}const Ln=new E.OlP("",{factory:()=>new wt.xQ}),wa=new E.OlP("",{providedIn:"root",factory:()=>1}),Ao=new E.OlP("");function Pl(k){return ru(0,[{provide:Ao,useExisting:nd},{provide:Cc,useExisting:k}])}const Ca=new E.OlP("ROUTER_FORROOT_GUARD"),rd=[Ye.Ye,{provide:Mn,useClass:$i},zs,Gn,{provide:js,useFactory:function rl(k){return k.routerState.root},deps:[zs]},zt,[]];function ca(){return new E.PXZ("Router",zs)}let id=(()=>{class k{constructor(D){}static forRoot(D,H){return{ngModule:k,providers:[rd,[],{provide:Lt,multi:!0,useValue:D},{provide:Ca,useFactory:$u,deps:[[zs,new E.FiY,new E.tp0]]},{provide:xo,useValue:H||{}},H?.useHash?{provide:Ye.S$,useClass:Ye.Do}:{provide:Ye.S$,useClass:Ye.b0},{provide:Ws,useFactory:()=>{const k=(0,E.f3M)(Ye.EM),F=(0,E.f3M)(E.R0b),D=(0,E.f3M)(xo),H=(0,E.f3M)(mi),ae=(0,E.f3M)(Mn);return D.scrollOffset&&k.setOffset(D.scrollOffset),new eo(ae,H,k,F,D)}},H?.preloadingStrategy?Pl(H.preloadingStrategy).\u0275providers:[],{provide:E.PXZ,multi:!0,useFactory:ca},H?.initialNavigation?Ti(H):[],H?.bindToComponentInputs?ru(8,[Ds,{provide:jo,useExisting:Ds}]).\u0275providers:[],[{provide:Zn,useFactory:Xn},{provide:E.tb,multi:!0,useExisting:Zn}]]}}static forChild(D){return{ngModule:k,providers:[{provide:Lt,multi:!0,useValue:D}]}}}return k.\u0275fac=function(D){return new(D||k)(E.LFG(Ca,8))},k.\u0275mod=E.oAB({type:k}),k.\u0275inj=E.cJS({}),k})();function $u(k){return"guarded"}function Ti(k){return["disabled"===k.initialNavigation?ru(3,[{provide:E.ip1,multi:!0,useFactory:()=>{const F=(0,E.f3M)(zs);return()=>{F.setUpLocationChangeListener()}}},{provide:wa,useValue:2}]).\u0275providers:[],"enabledBlocking"===k.initialNavigation?ru(2,[{provide:wa,useValue:0},{provide:E.ip1,multi:!0,deps:[E.zs3],useFactory:F=>{const D=F.get(Ye.V_,Promise.resolve());return()=>D.then(()=>new Promise(H=>{const ae=F.get(zs),Pe=F.get(Ln);tu(ae,()=>{H(!0)}),F.get(mi).afterPreactivation=()=>(H(!0),Pe.closed?(0,_e.of)(void 0):Pe),ae.initialNavigation()}))}}]).\u0275providers:[]]}const Zn=new E.OlP("")},3942:(en,ut,X)=>{"use strict";X.d(ut,{Z:()=>wt});var E=X(2090),N=X(4859),fe=X(6881),Be=X(1877);class _e{constructor(Ke,Ze){this._delegate=Ke,this.firebase=Ze,(0,fe._addComponent)(Ke,new N.wA("app-compat",()=>this,"PUBLIC")),this.container=Ke.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ke){this._delegate.automaticDataCollectionEnabled=Ke}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ke=>{this._delegate.checkDestroyed(),Ke()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,fe.deleteApp)(this._delegate)))}_getService(Ke,Ze=fe._DEFAULT_ENTRY_NAME){var lt;this._delegate.checkDestroyed();const q=this._delegate.container.getProvider(Ke);return!q.isInitialized()&&"EXPLICIT"===(null===(lt=q.getComponent())||void 0===lt?void 0:lt.instantiationMode)&&q.initialize(),q.getImmediate({identifier:Ze})}_removeServiceInstance(Ke,Ze=fe._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ke).clearInstance(Ze)}_addComponent(Ke){(0,fe._addComponent)(this._delegate,Ke)}_addOrOverwriteComponent(Ke){(0,fe._addOrOverwriteComponent)(this._delegate,Ke)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const He=new E.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ye=function Ue(){const Ye=function Re(Ye){const Ke={},Ze={__esModule:!0,initializeApp:function ge(st,Y={}){const Te=fe.initializeApp(st,Y);if((0,E.r3)(Ke,Te.name))return Ke[Te.name];const Xe=new Ye(Te,Ze);return Ke[Te.name]=Xe,Xe},app:q,registerVersion:fe.registerVersion,setLogLevel:fe.setLogLevel,onLog:fe.onLog,apps:null,SDK_VERSION:fe.SDK_VERSION,INTERNAL:{registerComponent:function Ct(st){const Y=st.name,Te=Y.replace("-compat","");if(fe._registerComponent(st)&&"PUBLIC"===st.type){const Xe=(ot=q())=>{if("function"!=typeof ot[Te])throw He.create("invalid-app-argument",{appName:Y});return ot[Te]()};void 0!==st.serviceProps&&(0,E.ZB)(Xe,st.serviceProps),Ze[Te]=Xe,Ye.prototype[Te]=function(...ot){return this._getService.bind(this,Y).apply(this,st.multipleInstances?ot:[])}}return"PUBLIC"===st.type?Ze[Te]:null},removeApp:function lt(st){delete Ke[st]},useAsService:function bt(st,Y){return"serverAuth"===Y?null:Y},modularAPIs:fe}};function q(st){if(!(0,E.r3)(Ke,st=st||fe._DEFAULT_ENTRY_NAME))throw He.create("no-app",{appName:st});return Ke[st]}return Ze.default=Ze,Object.defineProperty(Ze,"apps",{get:function re(){return Object.keys(Ke).map(st=>Ke[st])}}),q.App=Ye,Ze}(_e);return Ye.INTERNAL=Object.assign(Object.assign({},Ye.INTERNAL),{createFirebaseNamespace:Ue,extendNamespace:function Ke(Ze){(0,E.ZB)(Ye,Ze)},createSubscribe:E.ne,ErrorFactory:E.LL,deepExtend:E.ZB}),Ye}(),Ae=new Be.Yd("@firebase/app-compat");if((0,E.jU)()&&void 0!==self.firebase){Ae.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ye=self.firebase.SDK_VERSION;Ye&&Ye.indexOf("LITE")>=0&&Ae.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const wt=ye;!function ce(Ye){(0,fe.registerVersion)("@firebase/app-compat","0.2.10",Ye)}()},6881:(en,ut,X)=>{"use strict";X.r(ut),X.d(ut,{FirebaseError:()=>Be.ZR,SDK_VERSION:()=>Li,_DEFAULT_ENTRY_NAME:()=>Hn,_addComponent:()=>ai,_addOrOverwriteComponent:()=>Oi,_apps:()=>Rn,_clearComponents:()=>Kr,_components:()=>Ei,_getProvider:()=>Sr,_registerComponent:()=>cs,_removeServiceInstance:()=>fo,deleteApp:()=>$i,getApp:()=>Hr,getApps:()=>Mn,initializeApp:()=>Si,onLog:()=>ni,registerVersion:()=>Ar,setLogLevel:()=>ds});var E=X(5861),N=X(4859),fe=X(1877),Be=X(2090);const _e=(Dt,yt)=>yt.some(Kt=>Dt instanceof Kt);let xe,He;const ye=new WeakMap,Ae=new WeakMap,Fe=new WeakMap,rt=new WeakMap,ce=new WeakMap;let Ke={get(Dt,yt,Kt){if(Dt instanceof IDBTransaction){if("done"===yt)return Ae.get(Dt);if("objectStoreNames"===yt)return Dt.objectStoreNames||Fe.get(Dt);if("store"===yt)return Kt.objectStoreNames[1]?void 0:Kt.objectStore(Kt.objectStoreNames[0])}return ge(Dt[yt])},set:(Dt,yt,Kt)=>(Dt[yt]=Kt,!0),has:(Dt,yt)=>Dt instanceof IDBTransaction&&("done"===yt||"store"===yt)||yt in Dt};function q(Dt){return"function"==typeof Dt?function lt(Dt){return Dt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ue(){return He||(He=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Dt)?function(...yt){return Dt.apply(re(this),yt),ge(ye.get(this))}:function(...yt){return ge(Dt.apply(re(this),yt))}:function(yt,...Kt){const er=Dt.call(re(this),yt,...Kt);return Fe.set(er,yt.sort?yt.sort():[yt]),ge(er)}}(Dt):(Dt instanceof IDBTransaction&&function Ye(Dt){if(Ae.has(Dt))return;const yt=new Promise((Kt,er)=>{const Qn=()=>{Dt.removeEventListener("complete",cr),Dt.removeEventListener("error",yr),Dt.removeEventListener("abort",yr)},cr=()=>{Kt(),Qn()},yr=()=>{er(Dt.error||new DOMException("AbortError","AbortError")),Qn()};Dt.addEventListener("complete",cr),Dt.addEventListener("error",yr),Dt.addEventListener("abort",yr)});Ae.set(Dt,yt)}(Dt),_e(Dt,function Re(){return xe||(xe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Dt,Ke):Dt)}function ge(Dt){if(Dt instanceof IDBRequest)return function wt(Dt){const yt=new Promise((Kt,er)=>{const Qn=()=>{Dt.removeEventListener("success",cr),Dt.removeEventListener("error",yr)},cr=()=>{Kt(ge(Dt.result)),Qn()},yr=()=>{er(Dt.error),Qn()};Dt.addEventListener("success",cr),Dt.addEventListener("error",yr)});return yt.then(Kt=>{Kt instanceof IDBCursor&&ye.set(Kt,Dt)}).catch(()=>{}),ce.set(yt,Dt),yt}(Dt);if(rt.has(Dt))return rt.get(Dt);const yt=q(Dt);return yt!==Dt&&(rt.set(Dt,yt),ce.set(yt,Dt)),yt}const re=Dt=>ce.get(Dt),st=["get","getKey","getAll","getAllKeys","count"],Y=["put","add","delete","clear"],Te=new Map;function Xe(Dt,yt){if(!(Dt instanceof IDBDatabase)||yt in Dt||"string"!=typeof yt)return;if(Te.get(yt))return Te.get(yt);const Kt=yt.replace(/FromIndex$/,""),er=yt!==Kt,Qn=Y.includes(Kt);if(!(Kt in(er?IDBIndex:IDBObjectStore).prototype)||!Qn&&!st.includes(Kt))return;const cr=function(){var yr=(0,E.Z)(function*(Fr,...si){const Yr=this.transaction(Fr,Qn?"readwrite":"readonly");let Ji=Yr.store;return er&&(Ji=Ji.index(si.shift())),(yield Promise.all([Ji[Kt](...si),Qn&&Yr.done]))[0]});return function(si){return yr.apply(this,arguments)}}();return Te.set(yt,cr),cr}!function Ze(Dt){Ke=Dt(Ke)}(Dt=>({...Dt,get:(yt,Kt,er)=>Xe(yt,Kt)||Dt.get(yt,Kt,er),has:(yt,Kt)=>!!Xe(yt,Kt)||Dt.has(yt,Kt)}));class ot{constructor(yt){this.container=yt}getPlatformInfoString(){return this.container.getProviders().map(Kt=>{if(function Rt(Dt){const yt=Dt.getComponent();return"VERSION"===yt?.type}(Kt)){const er=Kt.getImmediate();return`${er.library}/${er.version}`}return null}).filter(Kt=>Kt).join(" ")}}const xt="@firebase/app",Sn=new fe.Yd("@firebase/app"),Hn="[DEFAULT]",tn={[xt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Rn=new Map,Ei=new Map;function ai(Dt,yt){try{Dt.container.addComponent(yt)}catch(Kt){Sn.debug(`Component ${yt.name} failed to register with FirebaseApp ${Dt.name}`,Kt)}}function Oi(Dt,yt){Dt.container.addOrOverwriteComponent(yt)}function cs(Dt){const yt=Dt.name;if(Ei.has(yt))return Sn.debug(`There were multiple attempts to register component ${yt}.`),!1;Ei.set(yt,Dt);for(const Kt of Rn.values())ai(Kt,Dt);return!0}function Sr(Dt,yt){const Kt=Dt.container.getProvider("heartbeat").getImmediate({optional:!0});return Kt&&Kt.triggerHeartbeat(),Dt.container.getProvider(yt)}function fo(Dt,yt,Kt=Hn){Sr(Dt,yt).clearInstance(Kt)}function Kr(){Ei.clear()}const Tn=new Be.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Vr{constructor(yt,Kt,er){this._isDeleted=!1,this._options=Object.assign({},yt),this._config=Object.assign({},Kt),this._name=Kt.name,this._automaticDataCollectionEnabled=Kt.automaticDataCollectionEnabled,this._container=er,this.container.addComponent(new N.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(yt){this.checkDestroyed(),this._automaticDataCollectionEnabled=yt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(yt){this._isDeleted=yt}checkDestroyed(){if(this.isDeleted)throw Tn.create("app-deleted",{appName:this._name})}}const Li="9.22.0";function Si(Dt,yt={}){let Kt=Dt;"object"!=typeof yt&&(yt={name:yt});const er=Object.assign({name:Hn,automaticDataCollectionEnabled:!1},yt),Qn=er.name;if("string"!=typeof Qn||!Qn)throw Tn.create("bad-app-name",{appName:String(Qn)});if(Kt||(Kt=(0,Be.aH)()),!Kt)throw Tn.create("no-options");const cr=Rn.get(Qn);if(cr){if((0,Be.vZ)(Kt,cr.options)&&(0,Be.vZ)(er,cr.config))return cr;throw Tn.create("duplicate-app",{appName:Qn})}const yr=new N.H0(Qn);for(const si of Ei.values())yr.addComponent(si);const Fr=new Vr(Kt,er,yr);return Rn.set(Qn,Fr),Fr}function Hr(Dt=Hn){const yt=Rn.get(Dt);if(!yt&&Dt===Hn&&(0,Be.aH)())return Si();if(!yt)throw Tn.create("no-app",{appName:Dt});return yt}function Mn(){return Array.from(Rn.values())}function $i(Dt){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,E.Z)(function*(Dt){const yt=Dt.name;Rn.has(yt)&&(Rn.delete(yt),yield Promise.all(Dt.container.getProviders().map(Kt=>Kt.delete())),Dt.isDeleted=!0)})).apply(this,arguments)}function Ar(Dt,yt,Kt){var er;let Qn=null!==(er=tn[Dt])&&void 0!==er?er:Dt;Kt&&(Qn+=`-${Kt}`);const cr=Qn.match(/\s|\//),yr=yt.match(/\s|\//);if(cr||yr){const Fr=[`Unable to register library "${Qn}" with version "${yt}":`];return cr&&Fr.push(`library name "${Qn}" contains illegal characters (whitespace or "/")`),cr&&yr&&Fr.push("and"),yr&&Fr.push(`version name "${yt}" contains illegal characters (whitespace or "/")`),void Sn.warn(Fr.join(" "))}cs(new N.wA(`${Qn}-version`,()=>({library:Qn,version:yt}),"VERSION"))}function ni(Dt,yt){if(null!==Dt&&"function"!=typeof Dt)throw Tn.create("invalid-log-argument");(0,fe.Am)(Dt,yt)}function ds(Dt){(0,fe.Ub)(Dt)}const Zr="firebase-heartbeat-database",Vs=1,tt="firebase-heartbeat-store";let ve=null;function Ce(){return ve||(ve=function Ct(Dt,yt,{blocked:Kt,upgrade:er,blocking:Qn,terminated:cr}={}){const yr=indexedDB.open(Dt,yt),Fr=ge(yr);return er&&yr.addEventListener("upgradeneeded",si=>{er(ge(yr.result),si.oldVersion,si.newVersion,ge(yr.transaction),si)}),Kt&&yr.addEventListener("blocked",si=>Kt(si.oldVersion,si.newVersion,si)),Fr.then(si=>{cr&&si.addEventListener("close",()=>cr()),Qn&&si.addEventListener("versionchange",Yr=>Qn(Yr.oldVersion,Yr.newVersion,Yr))}).catch(()=>{}),Fr}(Zr,Vs,{upgrade:(Dt,yt)=>{0===yt&&Dt.createObjectStore(tt)}}).catch(Dt=>{throw Tn.create("idb-open",{originalErrorMessage:Dt.message})})),ve}function Oe(){return(Oe=(0,E.Z)(function*(Dt){try{return yield(yield Ce()).transaction(tt).objectStore(tt).get(gn(Dt))}catch(yt){if(yt instanceof Be.ZR)Sn.warn(yt.message);else{const Kt=Tn.create("idb-get",{originalErrorMessage:yt?.message});Sn.warn(Kt.message)}}})).apply(this,arguments)}function gt(Dt,yt){return nn.apply(this,arguments)}function nn(){return(nn=(0,E.Z)(function*(Dt,yt){try{const er=(yield Ce()).transaction(tt,"readwrite");yield er.objectStore(tt).put(yt,gn(Dt)),yield er.done}catch(Kt){if(Kt instanceof Be.ZR)Sn.warn(Kt.message);else{const er=Tn.create("idb-set",{originalErrorMessage:Kt?.message});Sn.warn(er.message)}}})).apply(this,arguments)}function gn(Dt){return`${Dt.name}!${Dt.options.appId}`}class qe{constructor(yt){this.container=yt,this._heartbeatsCache=null;const Kt=this.container.getProvider("app").getImmediate();this._storage=new ar(Kt),this._heartbeatsCachePromise=this._storage.read().then(er=>(this._heartbeatsCache=er,er))}triggerHeartbeat(){var yt=this;return(0,E.Z)(function*(){const er=yt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Qn=ct();if(null===yt._heartbeatsCache&&(yt._heartbeatsCache=yield yt._heartbeatsCachePromise),yt._heartbeatsCache.lastSentHeartbeatDate!==Qn&&!yt._heartbeatsCache.heartbeats.some(cr=>cr.date===Qn))return yt._heartbeatsCache.heartbeats.push({date:Qn,agent:er}),yt._heartbeatsCache.heartbeats=yt._heartbeatsCache.heartbeats.filter(cr=>{const yr=new Date(cr.date).valueOf();return Date.now()-yr<=2592e6}),yt._storage.overwrite(yt._heartbeatsCache)})()}getHeartbeatsHeader(){var yt=this;return(0,E.Z)(function*(){if(null===yt._heartbeatsCache&&(yield yt._heartbeatsCachePromise),null===yt._heartbeatsCache||0===yt._heartbeatsCache.heartbeats.length)return"";const Kt=ct(),{heartbeatsToSend:er,unsentEntries:Qn}=function Gt(Dt,yt=1024){const Kt=[];let er=Dt.slice();for(const Qn of Dt){const cr=Kt.find(yr=>yr.agent===Qn.agent);if(cr){if(cr.dates.push(Qn.date),Nr(Kt)>yt){cr.dates.pop();break}}else if(Kt.push({agent:Qn.agent,dates:[Qn.date]}),Nr(Kt)>yt){Kt.pop();break}er=er.slice(1)}return{heartbeatsToSend:Kt,unsentEntries:er}}(yt._heartbeatsCache.heartbeats),cr=(0,Be.L)(JSON.stringify({version:2,heartbeats:er}));return yt._heartbeatsCache.lastSentHeartbeatDate=Kt,Qn.length>0?(yt._heartbeatsCache.heartbeats=Qn,yield yt._storage.overwrite(yt._heartbeatsCache)):(yt._heartbeatsCache.heartbeats=[],yt._storage.overwrite(yt._heartbeatsCache)),cr})()}}function ct(){return(new Date).toISOString().substring(0,10)}class ar{constructor(yt){this.app=yt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,E.Z)(function*(){return!!(0,Be.hl)()&&(0,Be.eu)().then(()=>!0).catch(()=>!1)})()}read(){var yt=this;return(0,E.Z)(function*(){return(yield yt._canUseIndexedDBPromise)&&(yield function be(Dt){return Oe.apply(this,arguments)}(yt.app))||{heartbeats:[]}})()}overwrite(yt){var Kt=this;return(0,E.Z)(function*(){var er;if(yield Kt._canUseIndexedDBPromise){const cr=yield Kt.read();return gt(Kt.app,{lastSentHeartbeatDate:null!==(er=yt.lastSentHeartbeatDate)&&void 0!==er?er:cr.lastSentHeartbeatDate,heartbeats:yt.heartbeats})}})()}add(yt){var Kt=this;return(0,E.Z)(function*(){var er;if(yield Kt._canUseIndexedDBPromise){const cr=yield Kt.read();return gt(Kt.app,{lastSentHeartbeatDate:null!==(er=yt.lastSentHeartbeatDate)&&void 0!==er?er:cr.lastSentHeartbeatDate,heartbeats:[...cr.heartbeats,...yt.heartbeats]})}})()}}function Nr(Dt){return(0,Be.L)(JSON.stringify({version:2,heartbeats:Dt})).length}!function ii(Dt){cs(new N.wA("platform-logger",yt=>new ot(yt),"PRIVATE")),cs(new N.wA("heartbeat",yt=>new qe(yt),"PRIVATE")),Ar(xt,"0.9.10",Dt),Ar(xt,"0.9.10","esm2017"),Ar("fire-js","")}("")},4859:(en,ut,X)=>{"use strict";X.d(ut,{H0:()=>Re,wA:()=>fe});var E=X(5861),N=X(2090);class fe{constructor(ye,Ae,Fe){this.name=ye,this.instanceFactory=Ae,this.type=Fe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ye){return this.instantiationMode=ye,this}setMultipleInstances(ye){return this.multipleInstances=ye,this}setServiceProps(ye){return this.serviceProps=ye,this}setInstanceCreatedCallback(ye){return this.onInstanceCreated=ye,this}}const Be="[DEFAULT]";class _e{constructor(ye,Ae){this.name=ye,this.container=Ae,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ye){const Ae=this.normalizeInstanceIdentifier(ye);if(!this.instancesDeferred.has(Ae)){const Fe=new N.BH;if(this.instancesDeferred.set(Ae,Fe),this.isInitialized(Ae)||this.shouldAutoInitialize())try{const rt=this.getOrInitializeService({instanceIdentifier:Ae});rt&&Fe.resolve(rt)}catch{}}return this.instancesDeferred.get(Ae).promise}getImmediate(ye){var Ae;const Fe=this.normalizeInstanceIdentifier(ye?.identifier),rt=null!==(Ae=ye?.optional)&&void 0!==Ae&&Ae;if(!this.isInitialized(Fe)&&!this.shouldAutoInitialize()){if(rt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Fe})}catch(ce){if(rt)return null;throw ce}}getComponent(){return this.component}setComponent(ye){if(ye.name!==this.name)throw Error(`Mismatching Component ${ye.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ye,this.shouldAutoInitialize()){if(function He(Ue){return"EAGER"===Ue.instantiationMode}(ye))try{this.getOrInitializeService({instanceIdentifier:Be})}catch{}for(const[Ae,Fe]of this.instancesDeferred.entries()){const rt=this.normalizeInstanceIdentifier(Ae);try{const ce=this.getOrInitializeService({instanceIdentifier:rt});Fe.resolve(ce)}catch{}}}}clearInstance(ye=Be){this.instancesDeferred.delete(ye),this.instancesOptions.delete(ye),this.instances.delete(ye)}delete(){var ye=this;return(0,E.Z)(function*(){const Ae=Array.from(ye.instances.values());yield Promise.all([...Ae.filter(Fe=>"INTERNAL"in Fe).map(Fe=>Fe.INTERNAL.delete()),...Ae.filter(Fe=>"_delete"in Fe).map(Fe=>Fe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ye=Be){return this.instances.has(ye)}getOptions(ye=Be){return this.instancesOptions.get(ye)||{}}initialize(ye={}){const{options:Ae={}}=ye,Fe=this.normalizeInstanceIdentifier(ye.instanceIdentifier);if(this.isInitialized(Fe))throw Error(`${this.name}(${Fe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const rt=this.getOrInitializeService({instanceIdentifier:Fe,options:Ae});for(const[ce,wt]of this.instancesDeferred.entries())Fe===this.normalizeInstanceIdentifier(ce)&&wt.resolve(rt);return rt}onInit(ye,Ae){var Fe;const rt=this.normalizeInstanceIdentifier(Ae),ce=null!==(Fe=this.onInitCallbacks.get(rt))&&void 0!==Fe?Fe:new Set;ce.add(ye),this.onInitCallbacks.set(rt,ce);const wt=this.instances.get(rt);return wt&&ye(wt,rt),()=>{ce.delete(ye)}}invokeOnInitCallbacks(ye,Ae){const Fe=this.onInitCallbacks.get(Ae);if(Fe)for(const rt of Fe)try{rt(ye,Ae)}catch{}}getOrInitializeService({instanceIdentifier:ye,options:Ae={}}){let Fe=this.instances.get(ye);if(!Fe&&this.component&&(Fe=this.component.instanceFactory(this.container,{instanceIdentifier:(Ue=ye,Ue===Be?void 0:Ue),options:Ae}),this.instances.set(ye,Fe),this.instancesOptions.set(ye,Ae),this.invokeOnInitCallbacks(Fe,ye),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ye,Fe)}catch{}var Ue;return Fe||null}normalizeInstanceIdentifier(ye=Be){return this.component?this.component.multipleInstances?ye:Be:ye}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Re{constructor(ye){this.name=ye,this.providers=new Map}addComponent(ye){const Ae=this.getProvider(ye.name);if(Ae.isComponentSet())throw new Error(`Component ${ye.name} has already been registered with ${this.name}`);Ae.setComponent(ye)}addOrOverwriteComponent(ye){this.getProvider(ye.name).isComponentSet()&&this.providers.delete(ye.name),this.addComponent(ye)}getProvider(ye){if(this.providers.has(ye))return this.providers.get(ye);const Ae=new _e(ye,this);return this.providers.set(ye,Ae),Ae}getProviders(){return Array.from(this.providers.values())}}},1877:(en,ut,X)=>{"use strict";X.d(ut,{Am:()=>Ue,Ub:()=>Re,Yd:()=>He,in:()=>N});const E=[];var N=(()=>((N=N||{})[N.DEBUG=0]="DEBUG",N[N.VERBOSE=1]="VERBOSE",N[N.INFO=2]="INFO",N[N.WARN=3]="WARN",N[N.ERROR=4]="ERROR",N[N.SILENT=5]="SILENT",N))();const fe={debug:N.DEBUG,verbose:N.VERBOSE,info:N.INFO,warn:N.WARN,error:N.ERROR,silent:N.SILENT},Be=N.INFO,_e={[N.DEBUG]:"log",[N.VERBOSE]:"log",[N.INFO]:"info",[N.WARN]:"warn",[N.ERROR]:"error"},xe=(ye,Ae,...Fe)=>{if(Ae<ye.logLevel)return;const rt=(new Date).toISOString(),ce=_e[Ae];if(!ce)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ae})`);console[ce](`[${rt}]  ${ye.name}:`,...Fe)};class He{constructor(Ae){this.name=Ae,this._logLevel=Be,this._logHandler=xe,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(Ae){if(!(Ae in N))throw new TypeError(`Invalid value "${Ae}" assigned to \`logLevel\``);this._logLevel=Ae}setLogLevel(Ae){this._logLevel="string"==typeof Ae?fe[Ae]:Ae}get logHandler(){return this._logHandler}set logHandler(Ae){if("function"!=typeof Ae)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ae}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ae){this._userLogHandler=Ae}debug(...Ae){this._userLogHandler&&this._userLogHandler(this,N.DEBUG,...Ae),this._logHandler(this,N.DEBUG,...Ae)}log(...Ae){this._userLogHandler&&this._userLogHandler(this,N.VERBOSE,...Ae),this._logHandler(this,N.VERBOSE,...Ae)}info(...Ae){this._userLogHandler&&this._userLogHandler(this,N.INFO,...Ae),this._logHandler(this,N.INFO,...Ae)}warn(...Ae){this._userLogHandler&&this._userLogHandler(this,N.WARN,...Ae),this._logHandler(this,N.WARN,...Ae)}error(...Ae){this._userLogHandler&&this._userLogHandler(this,N.ERROR,...Ae),this._logHandler(this,N.ERROR,...Ae)}}function Re(ye){E.forEach(Ae=>{Ae.setLogLevel(ye)})}function Ue(ye,Ae){for(const Fe of E){let rt=null;Ae&&Ae.level&&(rt=fe[Ae.level]),Fe.userLogHandler=null===ye?null:(ce,wt,...Ye)=>{const Ke=Ye.map(Ze=>{if(null==Ze)return null;if("string"==typeof Ze)return Ze;if("number"==typeof Ze||"boolean"==typeof Ze)return Ze.toString();if(Ze instanceof Error)return Ze.message;try{return JSON.stringify(Ze)}catch{return null}}).filter(Ze=>Ze).join(" ");wt>=(rt??ce.logLevel)&&ye({level:N[wt].toLowerCase(),message:Ke,args:Ye,type:ce.name})}}}},259:(en,ut,X)=>{"use strict";X.d(ut,{C6:()=>E.getApps,Mq:()=>E.getApp});var E=X(6881);(0,E.registerVersion)("firebase","9.22.0","app")},9260:(en,ut,X)=>{"use strict";X.d(ut,{Z:()=>E.Z});var E=X(3942);E.Z.registerVersion("firebase","9.22.0","app-compat")},8073:(en,ut,X)=>{"use strict";X.r(ut);var E=X(5861),N=X(3942),fe=X(2090),Be=X(6881);function Re(w,v){var b={};for(var x in w)Object.prototype.hasOwnProperty.call(w,x)&&v.indexOf(x)<0&&(b[x]=w[x]);if(null!=w&&"function"==typeof Object.getOwnPropertySymbols){var K=0;for(x=Object.getOwnPropertySymbols(w);K<x.length;K++)v.indexOf(x[K])<0&&Object.prototype.propertyIsEnumerable.call(w,x[K])&&(b[x[K]]=w[x[K]])}return b}var an=X(1877),Ut=X(4859);const qt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const pr=function Nn(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},xr=function Cn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},kr=new fe.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ai=new an.Yd("@firebase/auth");function Tr(w,...v){Ai.logLevel<=an.in.ERROR&&Ai.error(`Auth (${Be.SDK_VERSION}): ${w}`,...v)}function Rr(w,...v){throw _r(w,...v)}function ir(w,...v){return _r(w,...v)}function Pi(w,v,b){const x=Object.assign(Object.assign({},xr()),{[v]:b});return new fe.LL("auth","Firebase",x).create(v,{appName:w.name})}function oi(w,v,b){if(!(v instanceof b))throw b.name!==v.constructor.name&&Rr(w,"argument-error"),Pi(w,"argument-error",`Type of ${v.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _r(w,...v){if("string"!=typeof w){const b=v[0],x=[...v.slice(1)];return x[0]&&(x[0].appName=w.name),w._errorFactory.create(b,...x)}return kr.create(w,...v)}function Ht(w,v,...b){if(!w)throw _r(v,...b)}function sr(w){const v="INTERNAL ASSERTION FAILED: "+w;throw Tr(v),new Error(v)}function Hn(w,v){w||sr(v)}function tn(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Rn(){return"http:"===Ei()||"https:"===Ei()}function Ei(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class cs{constructor(v,b){this.shortDelay=v,this.longDelay=b,Hn(b>v,"Short delay should be less than long delay!"),this.isMobile=(0,fe.uI)()||(0,fe.b$)()}get(){return function ai(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Rn()||(0,fe.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Sr(w,v){Hn(w.emulator,"Emulator should always be set here");const{url:b}=w.emulator;return v?`${b}${v.startsWith("/")?v.slice(1):v}`:b}class fo{static initialize(v,b,x){this.fetchImpl=v,b&&(this.headersImpl=b),x&&(this.responseImpl=x)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Kr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ms=new cs(3e4,6e4);function Tn(w,v){return w.tenantId&&!v.tenantId?Object.assign(Object.assign({},v),{tenantId:w.tenantId}):v}function Vr(w,v,b,x){return Li.apply(this,arguments)}function Li(){return(Li=(0,E.Z)(function*(w,v,b,x,K={}){return Si(w,K,(0,E.Z)(function*(){let le={},Je={};x&&("GET"===v?Je=x:le={body:JSON.stringify(x)});const _t=(0,fe.xO)(Object.assign({key:w.config.apiKey},Je)).slice(1),dn=yield w._getAdditionalHeaders();return dn["Content-Type"]="application/json",w.languageCode&&(dn["X-Firebase-Locale"]=w.languageCode),fo.fetch()(Zi(w,w.config.apiHost,b,_t),Object.assign({method:v,headers:dn,referrerPolicy:"no-referrer"},le))}))})).apply(this,arguments)}function Si(w,v,b){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,E.Z)(function*(w,v,b){w._canInitEmulator=!1;const x=Object.assign(Object.assign({},Kr),v);try{const K=new Ar(w),le=yield Promise.race([b(),K.promise]);K.clearNetworkTimeout();const Je=yield le.json();if("needConfirmation"in Je)throw ni(w,"account-exists-with-different-credential",Je);if(le.ok&&!("errorMessage"in Je))return Je;{const _t=le.ok?Je.errorMessage:Je.error.message,[dn,Bt]=_t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===dn)throw ni(w,"credential-already-in-use",Je);if("EMAIL_EXISTS"===dn)throw ni(w,"email-already-in-use",Je);if("USER_DISABLED"===dn)throw ni(w,"user-disabled",Je);const Un=x[dn]||dn.toLowerCase().replace(/[_\s]+/g,"-");if(Bt)throw Pi(w,Un,Bt);Rr(w,Un)}}catch(K){if(K instanceof fe.ZR)throw K;Rr(w,"network-request-failed",{message:String(K)})}})).apply(this,arguments)}function Mn(w,v,b,x){return $i.apply(this,arguments)}function $i(){return($i=(0,E.Z)(function*(w,v,b,x,K={}){const le=yield Vr(w,v,b,x,K);return"mfaPendingCredential"in le&&Rr(w,"multi-factor-auth-required",{_serverResponse:le}),le})).apply(this,arguments)}function Zi(w,v,b,x){const K=`${v}${b}?${x}`;return w.config.emulator?Sr(w.config,K):`${w.config.apiScheme}://${K}`}class Ar{constructor(v){this.auth=v,this.timer=null,this.promise=new Promise((b,x)=>{this.timer=setTimeout(()=>x(ir(this.auth,"network-request-failed")),ms.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ni(w,v,b){const x={appName:w.name};b.email&&(x.email=b.email),b.phoneNumber&&(x.phoneNumber=b.phoneNumber);const K=ir(w,v,x);return K.customData._tokenResponse=b,K}function Zr(){return(Zr=(0,E.Z)(function*(w,v){return Vr(w,"POST","/v1/accounts:delete",v)})).apply(this,arguments)}function tt(){return(tt=(0,E.Z)(function*(w,v){return Vr(w,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function Ce(){return(Ce=(0,E.Z)(function*(w,v){return Vr(w,"POST","/v1/accounts:lookup",v)})).apply(this,arguments)}function be(w){if(w)try{const v=new Date(Number(w));if(!isNaN(v.getTime()))return v.toUTCString()}catch{}}function nn(){return(nn=(0,E.Z)(function*(w,v=!1){const b=(0,fe.m9)(w),x=yield b.getIdToken(v),K=me(x);Ht(K&&K.exp&&K.auth_time&&K.iat,b.auth,"internal-error");const le="object"==typeof K.firebase?K.firebase:void 0,Je=le?.sign_in_provider;return{claims:K,token:x,authTime:be(gn(K.auth_time)),issuedAtTime:be(gn(K.iat)),expirationTime:be(gn(K.exp)),signInProvider:Je||null,signInSecondFactor:le?.sign_in_second_factor||null}})).apply(this,arguments)}function gn(w){return 1e3*Number(w)}function me(w){const[v,b,x]=w.split(".");if(void 0===v||void 0===b||void 0===x)return Tr("JWT malformed, contained fewer than 3 sections"),null;try{const K=(0,fe.tV)(b);return K?JSON.parse(K):(Tr("Failed to decode base64 JWT payload"),null)}catch(K){return Tr("Caught error parsing JWT payload as JSON",K?.toString()),null}}function qe(w,v){return ct.apply(this,arguments)}function ct(){return(ct=(0,E.Z)(function*(w,v,b=!1){if(b)return v;try{return yield v}catch(x){throw x instanceof fe.ZR&&function Gt({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(x)&&w.auth.currentUser===w&&(yield w.auth.signOut()),x}})).apply(this,arguments)}class ar{constructor(v){this.user=v,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(v){var b;if(v){const x=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),x}{this.errorBackoff=3e4;const K=(null!==(b=this.user.stsTokenManager.expirationTime)&&void 0!==b?b:0)-Date.now()-3e5;return Math.max(0,K)}}schedule(v=!1){var b=this;if(!this.isRunning)return;const x=this.getInterval(v);this.timerId=setTimeout((0,E.Z)(function*(){yield b.iteration()}),x)}iteration(){var v=this;return(0,E.Z)(function*(){try{yield v.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===b?.code&&v.schedule(!0))}v.schedule()})()}}class Nr{constructor(v,b){this.createdAt=v,this.lastLoginAt=b,this._initializeTime()}_initializeTime(){this.lastSignInTime=be(this.lastLoginAt),this.creationTime=be(this.createdAt)}_copy(v){this.createdAt=v.createdAt,this.lastLoginAt=v.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ii(w){return Dt.apply(this,arguments)}function Dt(){return Dt=(0,E.Z)(function*(w){var v;const b=w.auth,x=yield w.getIdToken(),K=yield qe(w,function ve(w,v){return Ce.apply(this,arguments)}(b,{idToken:x}));Ht(K?.users.length,b,"internal-error");const le=K.users[0];w._notifyReloadListener(le);const Je=null!==(v=le.providerUserInfo)&&void 0!==v&&v.length?function Qn(w){return w.map(v=>{var{providerId:b}=v,x=Re(v,["providerId"]);return{providerId:b,uid:x.rawId||"",displayName:x.displayName||null,email:x.email||null,phoneNumber:x.phoneNumber||null,photoURL:x.photoUrl||null}})}(le.providerUserInfo):[],_t=function er(w,v){return[...w.filter(x=>!v.some(K=>K.providerId===x.providerId)),...v]}(w.providerData,Je),Un=!!w.isAnonymous&&!(w.email&&le.passwordHash||_t?.length),Wn={uid:le.localId,displayName:le.displayName||null,photoURL:le.photoUrl||null,email:le.email||null,emailVerified:le.emailVerified||!1,phoneNumber:le.phoneNumber||null,tenantId:le.tenantId||null,providerData:_t,metadata:new Nr(le.createdAt,le.lastLoginAt),isAnonymous:Un};Object.assign(w,Wn)}),Dt.apply(this,arguments)}function Kt(){return(Kt=(0,E.Z)(function*(w){const v=(0,fe.m9)(w);yield ii(v),yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)})).apply(this,arguments)}function yr(){return(yr=(0,E.Z)(function*(w,v){const b=yield Si(w,{},(0,E.Z)(function*(){const x=(0,fe.xO)({grant_type:"refresh_token",refresh_token:v}).slice(1),{tokenApiHost:K,apiKey:le}=w.config,Je=Zi(w,K,"/v1/token",`key=${le}`),_t=yield w._getAdditionalHeaders();return _t["Content-Type"]="application/x-www-form-urlencoded",fo.fetch()(Je,{method:"POST",headers:_t,body:x})}));return{accessToken:b.access_token,expiresIn:b.expires_in,refreshToken:b.refresh_token}})).apply(this,arguments)}class Fr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(v){Ht(v.idToken,"internal-error"),Ht(typeof v.idToken<"u","internal-error"),Ht(typeof v.refreshToken<"u","internal-error");const b="expiresIn"in v&&typeof v.expiresIn<"u"?Number(v.expiresIn):function Ee(w){const v=me(w);return Ht(v,"internal-error"),Ht(typeof v.exp<"u","internal-error"),Ht(typeof v.iat<"u","internal-error"),Number(v.exp)-Number(v.iat)}(v.idToken);this.updateTokensAndExpiration(v.idToken,v.refreshToken,b)}getToken(v,b=!1){var x=this;return(0,E.Z)(function*(){return Ht(!x.accessToken||x.refreshToken,v,"user-token-expired"),b||!x.accessToken||x.isExpired?x.refreshToken?(yield x.refresh(v,x.refreshToken),x.accessToken):null:x.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(v,b){var x=this;return(0,E.Z)(function*(){const{accessToken:K,refreshToken:le,expiresIn:Je}=yield function cr(w,v){return yr.apply(this,arguments)}(v,b);x.updateTokensAndExpiration(K,le,Number(Je))})()}updateTokensAndExpiration(v,b,x){this.refreshToken=b||null,this.accessToken=v||null,this.expirationTime=Date.now()+1e3*x}static fromJSON(v,b){const{refreshToken:x,accessToken:K,expirationTime:le}=b,Je=new Fr;return x&&(Ht("string"==typeof x,"internal-error",{appName:v}),Je.refreshToken=x),K&&(Ht("string"==typeof K,"internal-error",{appName:v}),Je.accessToken=K),le&&(Ht("number"==typeof le,"internal-error",{appName:v}),Je.expirationTime=le),Je}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(v){this.accessToken=v.accessToken,this.refreshToken=v.refreshToken,this.expirationTime=v.expirationTime}_clone(){return Object.assign(new Fr,this.toJSON())}_performRefresh(){return sr("not implemented")}}function si(w,v){Ht("string"==typeof w||typeof w>"u","internal-error",{appName:v})}class Yr{constructor(v){var{uid:b,auth:x,stsTokenManager:K}=v,le=Re(v,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ar(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=b,this.auth=x,this.stsTokenManager=K,this.accessToken=K.accessToken,this.displayName=le.displayName||null,this.email=le.email||null,this.emailVerified=le.emailVerified||!1,this.phoneNumber=le.phoneNumber||null,this.photoURL=le.photoURL||null,this.isAnonymous=le.isAnonymous||!1,this.tenantId=le.tenantId||null,this.providerData=le.providerData?[...le.providerData]:[],this.metadata=new Nr(le.createdAt||void 0,le.lastLoginAt||void 0)}getIdToken(v){var b=this;return(0,E.Z)(function*(){const x=yield qe(b,b.stsTokenManager.getToken(b.auth,v));return Ht(x,b.auth,"internal-error"),b.accessToken!==x&&(b.accessToken=x,yield b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)),x})()}getIdTokenResult(v){return function gt(w){return nn.apply(this,arguments)}(this,v)}reload(){return function yt(w){return Kt.apply(this,arguments)}(this)}_assign(v){this!==v&&(Ht(this.uid===v.uid,this.auth,"internal-error"),this.displayName=v.displayName,this.photoURL=v.photoURL,this.email=v.email,this.emailVerified=v.emailVerified,this.phoneNumber=v.phoneNumber,this.isAnonymous=v.isAnonymous,this.tenantId=v.tenantId,this.providerData=v.providerData.map(b=>Object.assign({},b)),this.metadata._copy(v.metadata),this.stsTokenManager._assign(v.stsTokenManager))}_clone(v){const b=new Yr(Object.assign(Object.assign({},this),{auth:v,stsTokenManager:this.stsTokenManager._clone()}));return b.metadata._copy(this.metadata),b}_onReload(v){Ht(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=v,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(v){this.reloadListener?this.reloadListener(v):this.reloadUserInfo=v}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(v,b=!1){var x=this;return(0,E.Z)(function*(){let K=!1;v.idToken&&v.idToken!==x.stsTokenManager.accessToken&&(x.stsTokenManager.updateFromServerResponse(v),K=!0),b&&(yield ii(x)),yield x.auth._persistUserIfCurrent(x),K&&x.auth._notifyListenersIfCurrent(x)})()}delete(){var v=this;return(0,E.Z)(function*(){const b=yield v.getIdToken();return yield qe(v,function ds(w,v){return Zr.apply(this,arguments)}(v.auth,{idToken:b})),v.stsTokenManager.clearRefreshToken(),v.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(v=>Object.assign({},v)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(v,b){var x,K,le,Je,_t,dn,Bt,Un;const Wn=null!==(x=b.displayName)&&void 0!==x?x:void 0,zr=null!==(K=b.email)&&void 0!==K?K:void 0,zi=null!==(le=b.phoneNumber)&&void 0!==le?le:void 0,ma=null!==(Je=b.photoURL)&&void 0!==Je?Je:void 0,Fu=null!==(_t=b.tenantId)&&void 0!==_t?_t:void 0,$a=null!==(dn=b._redirectEventId)&&void 0!==dn?dn:void 0,bl=null!==(Bt=b.createdAt)&&void 0!==Bt?Bt:void 0,pc=null!==(Un=b.lastLoginAt)&&void 0!==Un?Un:void 0,{uid:$f,emailVerified:Fp,isAnonymous:jp,providerData:Tl,stsTokenManager:Vh}=b;Ht($f&&Vh,v,"internal-error");const gc=Fr.fromJSON(this.name,Vh);Ht("string"==typeof $f,v,"internal-error"),si(Wn,v.name),si(zr,v.name),Ht("boolean"==typeof Fp,v,"internal-error"),Ht("boolean"==typeof jp,v,"internal-error"),si(zi,v.name),si(ma,v.name),si(Fu,v.name),si($a,v.name),si(bl,v.name),si(pc,v.name);const mc=new Yr({uid:$f,auth:v,email:zr,emailVerified:Fp,displayName:Wn,isAnonymous:jp,photoURL:ma,phoneNumber:zi,tenantId:Fu,stsTokenManager:gc,createdAt:bl,lastLoginAt:pc});return Tl&&Array.isArray(Tl)&&(mc.providerData=Tl.map(Gf=>Object.assign({},Gf))),$a&&(mc._redirectEventId=$a),mc}static _fromIdTokenResponse(v,b,x=!1){return(0,E.Z)(function*(){const K=new Fr;K.updateFromServerResponse(b);const le=new Yr({uid:b.localId,auth:v,stsTokenManager:K,isAnonymous:x});return yield ii(le),le})()}}const Ji=new Map;function Fi(w){Hn(w instanceof Function,"Expected a class definition");let v=Ji.get(w);return v?(Hn(v instanceof w,"Instance stored in cache mismatched with class"),v):(v=new w,Ji.set(w,v),v)}const go=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(b,x){var K=this;return(0,E.Z)(function*(){K.storage[b]=x})()}_get(b){var x=this;return(0,E.Z)(function*(){const K=x.storage[b];return void 0===K?null:K})()}_remove(b){var x=this;return(0,E.Z)(function*(){delete x.storage[b]})()}_addListener(b,x){}_removeListener(b,x){}}return w.type="NONE",w})();function Fs(w,v,b){return`firebase:${w}:${v}:${b}`}class Zs{constructor(v,b,x){this.persistence=v,this.auth=b,this.userKey=x;const{config:K,name:le}=this.auth;this.fullUserKey=Fs(this.userKey,K.apiKey,le),this.fullPersistenceKey=Fs("persistence",K.apiKey,le),this.boundEventHandler=b._onStorageEvent.bind(b),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(v){return this.persistence._set(this.fullUserKey,v.toJSON())}getCurrentUser(){var v=this;return(0,E.Z)(function*(){const b=yield v.persistence._get(v.fullUserKey);return b?Yr._fromJSON(v.auth,b):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(v){var b=this;return(0,E.Z)(function*(){if(b.persistence===v)return;const x=yield b.getCurrentUser();return yield b.removeCurrentUser(),b.persistence=v,x?b.setCurrentUser(x):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(v,b,x="authUser"){return(0,E.Z)(function*(){if(!b.length)return new Zs(Fi(go),v,x);const K=(yield Promise.all(b.map(function(){var Bt=(0,E.Z)(function*(Un){if(yield Un._isAvailable())return Un});return function(Un){return Bt.apply(this,arguments)}}()))).filter(Bt=>Bt);let le=K[0]||Fi(go);const Je=Fs(x,v.config.apiKey,v.name);let _t=null;for(const Bt of b)try{const Un=yield Bt._get(Je);if(Un){const Wn=Yr._fromJSON(v,Un);Bt!==le&&(_t=Wn),le=Bt;break}}catch{}const dn=K.filter(Bt=>Bt._shouldAllowMigration);return le._shouldAllowMigration&&dn.length?(le=dn[0],_t&&(yield le._set(Je,_t.toJSON())),yield Promise.all(b.map(function(){var Bt=(0,E.Z)(function*(Un){if(Un!==le)try{yield Un._remove(Je)}catch{}});return function(Un){return Bt.apply(this,arguments)}}())),new Zs(le,v,x)):new Zs(le,v,x)})()}}function Oa(w){const v=w.toLowerCase();if(v.includes("opera/")||v.includes("opr/")||v.includes("opios/"))return"Opera";if(so(v))return"IEMobile";if(v.includes("msie")||v.includes("trident/"))return"IE";if(v.includes("edge/"))return"Edge";if(Hs(v))return"Firefox";if(v.includes("silk/"))return"Silk";if(sa(v))return"Blackberry";if(mo(v))return"Webos";if(Lo(v))return"Safari";if((v.includes("chrome/")||Ra(v))&&!v.includes("edge/"))return"Chrome";if($s(v))return"Android";{const x=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===x?.length)return x[1]}return"Other"}function Hs(w=(0,fe.z$)()){return/firefox\//i.test(w)}function Lo(w=(0,fe.z$)()){const v=w.toLowerCase();return v.includes("safari/")&&!v.includes("chrome/")&&!v.includes("crios/")&&!v.includes("android")}function Ra(w=(0,fe.z$)()){return/crios\//i.test(w)}function so(w=(0,fe.z$)()){return/iemobile/i.test(w)}function $s(w=(0,fe.z$)()){return/android/i.test(w)}function sa(w=(0,fe.z$)()){return/blackberry/i.test(w)}function mo(w=(0,fe.z$)()){return/webos/i.test(w)}function Wi(w=(0,fe.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function oa(w=(0,fe.z$)()){return Wi(w)||$s(w)||mo(w)||sa(w)||/windows phone/i.test(w)||so(w)}function Gs(w,v=[]){let b;switch(w){case"Browser":b=Oa((0,fe.z$)());break;case"Worker":b=`${Oa((0,fe.z$)())}-${w}`;break;default:b=w}const x=v.length?v.join(","):"FirebaseCore-web";return`${b}/JsCore/${Be.SDK_VERSION}/${x}`}function ba(){return(ba=(0,E.Z)(function*(w){return(yield Vr(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Is(w,v){return wr.apply(this,arguments)}function wr(){return(wr=(0,E.Z)(function*(w,v){return Vr(w,"GET","/v2/recaptchaConfig",Tn(w,v))})).apply(this,arguments)}function gi(w){return void 0!==w&&void 0!==w.getResponse}function wi(w){return void 0!==w&&void 0!==w.enterprise}class aa{constructor(v){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===v.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=v.recaptchaKey.split("/")[3],this.emailPasswordEnabled=v.recaptchaEnforcementState.some(b=>"EMAIL_PASSWORD_PROVIDER"===b.provider&&"OFF"!==b.enforcementState)}}function vt(w){return new Promise((v,b)=>{const x=document.createElement("script");x.setAttribute("src",w),x.onload=v,x.onerror=K=>{const le=ir("internal-error");le.customData=K,b(le)},x.type="text/javascript",x.charset="UTF-8",function xs(){var w,v;return null!==(v=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==v?v:document}().appendChild(x)})}function ft(w){return`__${w}${Math.floor(1e6*Math.random())}`}class Gn{constructor(v){this.type="recaptcha-enterprise",this.auth=$r(v)}verify(v="verify",b=!1){var x=this;return(0,E.Z)(function*(){function le(){return le=(0,E.Z)(function*(_t){if(!b){if(null==_t.tenantId&&null!=_t._agentRecaptchaConfig)return _t._agentRecaptchaConfig.siteKey;if(null!=_t.tenantId&&void 0!==_t._tenantRecaptchaConfigs[_t.tenantId])return _t._tenantRecaptchaConfigs[_t.tenantId].siteKey}return new Promise(function(){var dn=(0,E.Z)(function*(Bt,Un){Is(_t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Wn=>{if(void 0!==Wn.recaptchaKey){const zr=new aa(Wn);return null==_t.tenantId?_t._agentRecaptchaConfig=zr:_t._tenantRecaptchaConfigs[_t.tenantId]=zr,Bt(zr.siteKey)}Un(new Error("recaptcha Enterprise site key undefined"))}).catch(Wn=>{Un(Wn)})});return function(Bt,Un){return dn.apply(this,arguments)}}())}),le.apply(this,arguments)}function Je(_t,dn,Bt){const Un=window.grecaptcha;wi(Un)?Un.enterprise.ready(()=>{Un.enterprise.execute(_t,{action:v}).then(Wn=>{dn(Wn)}).catch(()=>{dn("NO_RECAPTCHA")})}):Bt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((_t,dn)=>{(function K(_t){return le.apply(this,arguments)})(x.auth).then(Bt=>{if(!b&&wi(window.grecaptcha))Je(Bt,_t,dn);else{if(typeof window>"u")return void dn(new Error("RecaptchaVerifier is only supported in browser"));vt("https://www.google.com/recaptcha/enterprise.js?render="+Bt).then(()=>{Je(Bt,_t,dn)}).catch(Un=>{dn(Un)})}}).catch(Bt=>{dn(Bt)})})})()}}function cn(w,v,b){return $n.apply(this,arguments)}function $n(){return($n=(0,E.Z)(function*(w,v,b,x=!1){const K=new Gn(w);let le;try{le=yield K.verify(b)}catch{le=yield K.verify(b,!0)}const Je=Object.assign({},v);return Object.assign(Je,x?{captchaResp:le}:{captchaResponse:le}),Object.assign(Je,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Je,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Je})).apply(this,arguments)}class fr{constructor(v){this.auth=v,this.queue=[]}pushCallback(v,b){const x=le=>new Promise((Je,_t)=>{try{Je(v(le))}catch(dn){_t(dn)}});x.onAbort=b,this.queue.push(x);const K=this.queue.length-1;return()=>{this.queue[K]=()=>Promise.resolve()}}runMiddleware(v){var b=this;return(0,E.Z)(function*(){if(b.auth.currentUser===v)return;const x=[];try{for(const K of b.queue)yield K(v),K.onAbort&&x.push(K.onAbort)}catch(K){x.reverse();for(const le of x)try{le()}catch{}throw b.auth._errorFactory.create("login-blocked",{originalMessage:K?.message})}})()}}class Er{constructor(v,b,x,K){this.app=v,this.heartbeatServiceProvider=b,this.appCheckServiceProvider=x,this.config=K,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ci(this),this.idTokenSubscription=new Ci(this),this.beforeStateQueue=new fr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=v.name,this.clientVersion=K.sdkClientVersion}_initializeWithPersistence(v,b){var x=this;return b&&(this._popupRedirectResolver=Fi(b)),this._initializationPromise=this.queue((0,E.Z)(function*(){var K,le;if(!x._deleted&&(x.persistenceManager=yield Zs.create(x,v),!x._deleted)){if(null!==(K=x._popupRedirectResolver)&&void 0!==K&&K._shouldInitProactively)try{yield x._popupRedirectResolver._initialize(x)}catch{}yield x.initializeCurrentUser(b),x.lastNotifiedUid=(null===(le=x.currentUser)||void 0===le?void 0:le.uid)||null,!x._deleted&&(x._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var v=this;return(0,E.Z)(function*(){if(v._deleted)return;const b=yield v.assertedPersistence.getCurrentUser();if(v.currentUser||b){if(v.currentUser&&b&&v.currentUser.uid===b.uid)return v._currentUser._assign(b),void(yield v.currentUser.getIdToken());yield v._updateCurrentUser(b,!0)}})()}initializeCurrentUser(v){var b=this;return(0,E.Z)(function*(){var x;const K=yield b.assertedPersistence.getCurrentUser();let le=K,Je=!1;if(v&&b.config.authDomain){yield b.getOrInitRedirectPersistenceManager();const _t=null===(x=b.redirectUser)||void 0===x?void 0:x._redirectEventId,dn=le?._redirectEventId,Bt=yield b.tryRedirectSignIn(v);(!_t||_t===dn)&&Bt?.user&&(le=Bt.user,Je=!0)}if(!le)return b.directlySetCurrentUser(null);if(!le._redirectEventId){if(Je)try{yield b.beforeStateQueue.runMiddleware(le)}catch(_t){le=K,b._popupRedirectResolver._overrideRedirectResult(b,()=>Promise.reject(_t))}return le?b.reloadAndSetCurrentUserOrClear(le):b.directlySetCurrentUser(null)}return Ht(b._popupRedirectResolver,b,"argument-error"),yield b.getOrInitRedirectPersistenceManager(),b.redirectUser&&b.redirectUser._redirectEventId===le._redirectEventId?b.directlySetCurrentUser(le):b.reloadAndSetCurrentUserOrClear(le)})()}tryRedirectSignIn(v){var b=this;return(0,E.Z)(function*(){let x=null;try{x=yield b._popupRedirectResolver._completeRedirectFn(b,v,!0)}catch{yield b._setRedirectUser(null)}return x})()}reloadAndSetCurrentUserOrClear(v){var b=this;return(0,E.Z)(function*(){try{yield ii(v)}catch(x){if("auth/network-request-failed"!==x?.code)return b.directlySetCurrentUser(null)}return b.directlySetCurrentUser(v)})()}useDeviceLanguage(){this.languageCode=function Oi(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var v=this;return(0,E.Z)(function*(){v._deleted=!0})()}updateCurrentUser(v){var b=this;return(0,E.Z)(function*(){const x=v?(0,fe.m9)(v):null;return x&&Ht(x.auth.config.apiKey===b.config.apiKey,b,"invalid-user-token"),b._updateCurrentUser(x&&x._clone(b))})()}_updateCurrentUser(v,b=!1){var x=this;return(0,E.Z)(function*(){if(!x._deleted)return v&&Ht(x.tenantId===v.tenantId,x,"tenant-id-mismatch"),b||(yield x.beforeStateQueue.runMiddleware(v)),x.queue((0,E.Z)(function*(){yield x.directlySetCurrentUser(v),x.notifyAuthListeners()}))})()}signOut(){var v=this;return(0,E.Z)(function*(){return yield v.beforeStateQueue.runMiddleware(null),(v.redirectPersistenceManager||v._popupRedirectResolver)&&(yield v._setRedirectUser(null)),v._updateCurrentUser(null,!0)})()}setPersistence(v){var b=this;return this.queue((0,E.Z)(function*(){yield b.assertedPersistence.setPersistence(Fi(v))}))}initializeRecaptchaConfig(){var v=this;return(0,E.Z)(function*(){const b=yield Is(v,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),x=new aa(b);null==v.tenantId?v._agentRecaptchaConfig=x:v._tenantRecaptchaConfigs[v.tenantId]=x,x.emailPasswordEnabled&&new Gn(v).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(v){this._errorFactory=new fe.LL("auth","Firebase",v())}onAuthStateChanged(v,b,x){return this.registerStateListener(this.authStateSubscription,v,b,x)}beforeAuthStateChanged(v,b){return this.beforeStateQueue.pushCallback(v,b)}onIdTokenChanged(v,b,x){return this.registerStateListener(this.idTokenSubscription,v,b,x)}toJSON(){var v;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(v=this._currentUser)||void 0===v?void 0:v.toJSON()}}_setRedirectUser(v,b){var x=this;return(0,E.Z)(function*(){const K=yield x.getOrInitRedirectPersistenceManager(b);return null===v?K.removeCurrentUser():K.setCurrentUser(v)})()}getOrInitRedirectPersistenceManager(v){var b=this;return(0,E.Z)(function*(){if(!b.redirectPersistenceManager){const x=v&&Fi(v)||b._popupRedirectResolver;Ht(x,b,"argument-error"),b.redirectPersistenceManager=yield Zs.create(b,[Fi(x._redirectPersistence)],"redirectUser"),b.redirectUser=yield b.redirectPersistenceManager.getCurrentUser()}return b.redirectPersistenceManager})()}_redirectUserForId(v){var b=this;return(0,E.Z)(function*(){var x,K;return b._isInitialized&&(yield b.queue((0,E.Z)(function*(){}))),(null===(x=b._currentUser)||void 0===x?void 0:x._redirectEventId)===v?b._currentUser:(null===(K=b.redirectUser)||void 0===K?void 0:K._redirectEventId)===v?b.redirectUser:null})()}_persistUserIfCurrent(v){var b=this;return(0,E.Z)(function*(){if(v===b.currentUser)return b.queue((0,E.Z)(function*(){return b.directlySetCurrentUser(v)}))})()}_notifyListenersIfCurrent(v){v===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var v,b;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const x=null!==(b=null===(v=this.currentUser)||void 0===v?void 0:v.uid)&&void 0!==b?b:null;this.lastNotifiedUid!==x&&(this.lastNotifiedUid=x,this.authStateSubscription.next(this.currentUser))}registerStateListener(v,b,x,K){if(this._deleted)return()=>{};const le="function"==typeof b?b:b.next.bind(b),Je=this._isInitialized?Promise.resolve():this._initializationPromise;return Ht(Je,this,"internal-error"),Je.then(()=>le(this.currentUser)),"function"==typeof b?v.addObserver(b,x,K):v.addObserver(b)}directlySetCurrentUser(v){var b=this;return(0,E.Z)(function*(){b.currentUser&&b.currentUser!==v&&b._currentUser._stopProactiveRefresh(),v&&b.isProactiveRefreshEnabled&&v._startProactiveRefresh(),b.currentUser=v,v?yield b.assertedPersistence.setCurrentUser(v):yield b.assertedPersistence.removeCurrentUser()})()}queue(v){return this.operations=this.operations.then(v,v),this.operations}get assertedPersistence(){return Ht(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(v){!v||this.frameworks.includes(v)||(this.frameworks.push(v),this.frameworks.sort(),this.clientVersion=Gs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var v=this;return(0,E.Z)(function*(){var b;const x={"X-Client-Version":v.clientVersion};v.app.options.appId&&(x["X-Firebase-gmpid"]=v.app.options.appId);const K=yield null===(b=v.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===b?void 0:b.getHeartbeatsHeader();K&&(x["X-Firebase-Client"]=K);const le=yield v._getAppCheckToken();return le&&(x["X-Firebase-AppCheck"]=le),x})()}_getAppCheckToken(){var v=this;return(0,E.Z)(function*(){var b;const x=yield null===(b=v.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===b?void 0:b.getToken();return x?.error&&function In(w,...v){Ai.logLevel<=an.in.WARN&&Ai.warn(`Auth (${Be.SDK_VERSION}): ${w}`,...v)}(`Error while retrieving App Check token: ${x.error}`),x?.token})()}}function $r(w){return(0,fe.m9)(w)}class Ci{constructor(v){this.auth=v,this.observer=null,this.addObserver=(0,fe.ne)(b=>this.observer=b)}get next(){return Ht(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Bi(w){const v=w.indexOf(":");return v<0?"":w.substr(0,v+1)}function wo(w){if(!w)return null;const v=Number(w);return isNaN(v)?null:v}class oo{constructor(v,b){this.providerId=v,this.signInMethod=b}toJSON(){return sr("not implemented")}_getIdTokenResponse(v){return sr("not implemented")}_linkToIdToken(v,b){return sr("not implemented")}_getReauthenticationResolver(v){return sr("not implemented")}}function ji(w,v){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,E.Z)(function*(w,v){return Vr(w,"POST","/v1/accounts:resetPassword",Tn(w,v))})).apply(this,arguments)}function vo(w,v){return hs.apply(this,arguments)}function hs(){return(hs=(0,E.Z)(function*(w,v){return Vr(w,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function jo(){return(jo=(0,E.Z)(function*(w,v){return Vr(w,"POST","/v1/accounts:update",Tn(w,v))})).apply(this,arguments)}function Ds(w,v){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,E.Z)(function*(w,v){return Mn(w,"POST","/v1/accounts:signInWithPassword",Tn(w,v))})).apply(this,arguments)}function qo(w,v){return Na.apply(this,arguments)}function Na(){return(Na=(0,E.Z)(function*(w,v){return Vr(w,"POST","/v1/accounts:sendOobCode",Tn(w,v))})).apply(this,arguments)}function ua(){return(ua=(0,E.Z)(function*(w,v){return qo(w,v)})).apply(this,arguments)}function ao(w,v){return La.apply(this,arguments)}function La(){return(La=(0,E.Z)(function*(w,v){return qo(w,v)})).apply(this,arguments)}function vs(w,v){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,E.Z)(function*(w,v){return qo(w,v)})).apply(this,arguments)}function Bo(){return(Bo=(0,E.Z)(function*(w,v){return qo(w,v)})).apply(this,arguments)}function Ta(){return(Ta=(0,E.Z)(function*(w,v){return Mn(w,"POST","/v1/accounts:signInWithEmailLink",Tn(w,v))})).apply(this,arguments)}function yo(){return(yo=(0,E.Z)(function*(w,v){return Mn(w,"POST","/v1/accounts:signInWithEmailLink",Tn(w,v))})).apply(this,arguments)}class Ko extends oo{constructor(v,b,x,K=null){super("password",x),this._email=v,this._password=b,this._tenantId=K}static _fromEmailAndPassword(v,b){return new Ko(v,b,"password")}static _fromEmailAndCode(v,b,x=null){return new Ko(v,b,"emailLink",x)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(v){const b="string"==typeof v?JSON.parse(v):v;if(b?.email&&b?.password){if("password"===b.signInMethod)return this._fromEmailAndPassword(b.email,b.password);if("emailLink"===b.signInMethod)return this._fromEmailAndCode(b.email,b.password,b.tenantId)}return null}_getIdTokenResponse(v){var b=this;return(0,E.Z)(function*(){var x;switch(b.signInMethod){case"password":const K={returnSecureToken:!0,email:b._email,password:b._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(x=v._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const le=yield cn(v,K,"signInWithPassword");return Ds(v,le)}return Ds(v,K).catch(function(){var le=(0,E.Z)(function*(Je){if("auth/missing-recaptcha-token"===Je.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const _t=yield cn(v,K,"signInWithPassword");return Ds(v,_t)}return Promise.reject(Je)});return function(Je){return le.apply(this,arguments)}}());case"emailLink":return function As(w,v){return Ta.apply(this,arguments)}(v,{email:b._email,oobCode:b._password});default:Rr(v,"internal-error")}})()}_linkToIdToken(v,b){var x=this;return(0,E.Z)(function*(){switch(x.signInMethod){case"password":return vo(v,{idToken:b,returnSecureToken:!0,email:x._email,password:x._password});case"emailLink":return function ea(w,v){return yo.apply(this,arguments)}(v,{idToken:b,email:x._email,oobCode:x._password});default:Rr(v,"internal-error")}})()}_getReauthenticationResolver(v){return this._getIdTokenResponse(v)}}function Ys(w,v){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,E.Z)(function*(w,v){return Mn(w,"POST","/v1/accounts:signInWithIdp",Tn(w,v))})).apply(this,arguments)}class Xr extends oo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(v){const b=new Xr(v.providerId,v.signInMethod);return v.idToken||v.accessToken?(v.idToken&&(b.idToken=v.idToken),v.accessToken&&(b.accessToken=v.accessToken),v.nonce&&!v.pendingToken&&(b.nonce=v.nonce),v.pendingToken&&(b.pendingToken=v.pendingToken)):v.oauthToken&&v.oauthTokenSecret?(b.accessToken=v.oauthToken,b.secret=v.oauthTokenSecret):Rr("argument-error"),b}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(v){const b="string"==typeof v?JSON.parse(v):v,{providerId:x,signInMethod:K}=b,le=Re(b,["providerId","signInMethod"]);if(!x||!K)return null;const Je=new Xr(x,K);return Je.idToken=le.idToken||void 0,Je.accessToken=le.accessToken||void 0,Je.secret=le.secret,Je.nonce=le.nonce,Je.pendingToken=le.pendingToken||null,Je}_getIdTokenResponse(v){return Ys(v,this.buildRequest())}_linkToIdToken(v,b){const x=this.buildRequest();return x.idToken=b,Ys(v,x)}_getReauthenticationResolver(v){const b=this.buildRequest();return b.autoCreate=!1,Ys(v,b)}buildRequest(){const v={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)v.pendingToken=this.pendingToken;else{const b={};this.idToken&&(b.id_token=this.idToken),this.accessToken&&(b.access_token=this.accessToken),this.secret&&(b.oauth_token_secret=this.secret),b.providerId=this.providerId,this.nonce&&!this.pendingToken&&(b.nonce=this.nonce),v.postBody=(0,fe.xO)(b)}return v}}function Fa(){return(Fa=(0,E.Z)(function*(w,v){return Vr(w,"POST","/v1/accounts:sendVerificationCode",Tn(w,v))})).apply(this,arguments)}function Su(){return(Su=(0,E.Z)(function*(w,v){return Mn(w,"POST","/v1/accounts:signInWithPhoneNumber",Tn(w,v))})).apply(this,arguments)}function Ml(){return(Ml=(0,E.Z)(function*(w,v){const b=yield Mn(w,"POST","/v1/accounts:signInWithPhoneNumber",Tn(w,v));if(b.temporaryProof)throw ni(w,"account-exists-with-different-credential",b);return b})).apply(this,arguments)}const bi={USER_NOT_FOUND:"user-not-found"};function tl(){return(tl=(0,E.Z)(function*(w,v){return Mn(w,"POST","/v1/accounts:signInWithPhoneNumber",Tn(w,Object.assign(Object.assign({},v),{operation:"REAUTH"})),bi)})).apply(this,arguments)}class _o extends oo{constructor(v){super("phone","phone"),this.params=v}static _fromVerification(v,b){return new _o({verificationId:v,verificationCode:b})}static _fromTokenResponse(v,b){return new _o({phoneNumber:v,temporaryProof:b})}_getIdTokenResponse(v){return function ja(w,v){return Su.apply(this,arguments)}(v,this._makeVerificationRequest())}_linkToIdToken(v,b){return function wu(w,v){return Ml.apply(this,arguments)}(v,Object.assign({idToken:b},this._makeVerificationRequest()))}_getReauthenticationResolver(v){return function qa(w,v){return tl.apply(this,arguments)}(v,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:v,phoneNumber:b,verificationId:x,verificationCode:K}=this.params;return v&&b?{temporaryProof:v,phoneNumber:b}:{sessionInfo:x,code:K}}toJSON(){const v={providerId:this.providerId};return this.params.phoneNumber&&(v.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(v.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(v.verificationCode=this.params.verificationCode),this.params.verificationId&&(v.verificationId=this.params.verificationId),v}static fromJSON(v){"string"==typeof v&&(v=JSON.parse(v));const{verificationId:b,verificationCode:x,phoneNumber:K,temporaryProof:le}=v;return x||b||K||le?new _o({verificationId:b,verificationCode:x,phoneNumber:K,temporaryProof:le}):null}}class ta{constructor(v){var b,x,K,le,Je,_t;const dn=(0,fe.zd)((0,fe.pd)(v)),Bt=null!==(b=dn.apiKey)&&void 0!==b?b:null,Un=null!==(x=dn.oobCode)&&void 0!==x?x:null,Wn=function Ka(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(K=dn.mode)&&void 0!==K?K:null);Ht(Bt&&Un&&Wn,"argument-error"),this.apiKey=Bt,this.operation=Wn,this.code=Un,this.continueUrl=null!==(le=dn.continueUrl)&&void 0!==le?le:null,this.languageCode=null!==(Je=dn.languageCode)&&void 0!==Je?Je:null,this.tenantId=null!==(_t=dn.tenantId)&&void 0!==_t?_t:null}static parseLink(v){const b=function Za(w){const v=(0,fe.zd)((0,fe.pd)(w)).link,b=v?(0,fe.zd)((0,fe.pd)(v)).deep_link_id:null,x=(0,fe.zd)((0,fe.pd)(w)).deep_link_id;return(x?(0,fe.zd)((0,fe.pd)(x)).link:null)||x||b||v||w}(v);try{return new ta(b)}catch{return null}}}let ne=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(b,x){return Ko._fromEmailAndPassword(b,x)}static credentialWithLink(b,x){const K=ta.parseLink(x);return Ht(K,"argument-error"),Ko._fromEmailAndCode(b,K.code,K.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Z{constructor(v){this.providerId=v,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(v){this.defaultLanguageCode=v}setCustomParameters(v){return this.customParameters=v,this}getCustomParameters(){return this.customParameters}}class W extends Z{constructor(){super(...arguments),this.scopes=[]}addScope(v){return this.scopes.includes(v)||this.scopes.push(v),this}getScopes(){return[...this.scopes]}}class ke extends W{static credentialFromJSON(v){const b="string"==typeof v?JSON.parse(v):v;return Ht("providerId"in b&&"signInMethod"in b,"argument-error"),Xr._fromParams(b)}credential(v){return this._credential(Object.assign(Object.assign({},v),{nonce:v.rawNonce}))}_credential(v){return Ht(v.idToken||v.accessToken,"argument-error"),Xr._fromParams(Object.assign(Object.assign({},v),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(v){return ke.oauthCredentialFromTaggedObject(v)}static credentialFromError(v){return ke.oauthCredentialFromTaggedObject(v.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:b,oauthAccessToken:x,oauthTokenSecret:K,pendingToken:le,nonce:Je,providerId:_t}=v;if(!x&&!K&&!b&&!le||!_t)return null;try{return new ke(_t)._credential({idToken:b,accessToken:x,nonce:Je,pendingToken:le})}catch{return null}}}let $t=(()=>{class w extends W{constructor(){super("facebook.com")}static credential(b){return Xr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return w.credentialFromTaggedObject(b)}static credentialFromError(b){return w.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return w.credential(b.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),qn=(()=>{class w extends W{constructor(){super("google.com"),this.addScope("profile")}static credential(b,x){return Xr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:b,accessToken:x})}static credentialFromResult(b){return w.credentialFromTaggedObject(b)}static credentialFromError(b){return w.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthIdToken:x,oauthAccessToken:K}=b;if(!x&&!K)return null;try{return w.credential(x,K)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),fs=(()=>{class w extends W{constructor(){super("github.com")}static credential(b){return Xr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return w.credentialFromTaggedObject(b)}static credentialFromError(b){return w.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return w.credential(b.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class ee extends oo{constructor(v,b){super(v,v),this.pendingToken=b}_getIdTokenResponse(v){return Ys(v,this.buildRequest())}_linkToIdToken(v,b){const x=this.buildRequest();return x.idToken=b,Ys(v,x)}_getReauthenticationResolver(v){const b=this.buildRequest();return b.autoCreate=!1,Ys(v,b)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(v){const b="string"==typeof v?JSON.parse(v):v,{providerId:x,signInMethod:K,pendingToken:le}=b;return x&&K&&le&&x===K?new ee(x,le):null}static _create(v,b){return new ee(v,b)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class et extends Z{constructor(v){Ht(v.startsWith("saml."),"argument-error"),super(v)}static credentialFromResult(v){return et.samlCredentialFromTaggedObject(v)}static credentialFromError(v){return et.samlCredentialFromTaggedObject(v.customData||{})}static credentialFromJSON(v){const b=ee.fromJSON(v);return Ht(b,"argument-error"),b}static samlCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{pendingToken:b,providerId:x}=v;if(!b||!x)return null;try{return ee._create(x,b)}catch{return null}}}let dt=(()=>{class w extends W{constructor(){super("twitter.com")}static credential(b,x){return Xr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:b,oauthTokenSecret:x})}static credentialFromResult(b){return w.credentialFromTaggedObject(b)}static credentialFromError(b){return w.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthAccessToken:x,oauthTokenSecret:K}=b;if(!x||!K)return null;try{return w.credential(x,K)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Nt(w,v){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,E.Z)(function*(w,v){return Mn(w,"POST","/v1/accounts:signUp",Tn(w,v))})).apply(this,arguments)}class tr{constructor(v){this.user=v.user,this.providerId=v.providerId,this._tokenResponse=v._tokenResponse,this.operationType=v.operationType}static _fromIdTokenResponse(v,b,x,K=!1){return(0,E.Z)(function*(){const le=yield Yr._fromIdTokenResponse(v,x,K),Je=dr(x);return new tr({user:le,providerId:Je,_tokenResponse:x,operationType:b})})()}static _forOperation(v,b,x){return(0,E.Z)(function*(){yield v._updateTokensIfNecessary(x,!0);const K=dr(x);return new tr({user:v,providerId:K,_tokenResponse:x,operationType:b})})()}}function dr(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Mr(){return(Mr=(0,E.Z)(function*(w){var v;const b=$r(w);if(yield b._initializationPromise,null!==(v=b.currentUser)&&void 0!==v&&v.isAnonymous)return new tr({user:b.currentUser,providerId:null,operationType:"signIn"});const x=yield Nt(b,{returnSecureToken:!0}),K=yield tr._fromIdTokenResponse(b,"signIn",x,!0);return yield b._updateCurrentUser(K.user),K})).apply(this,arguments)}class Ui extends fe.ZR{constructor(v,b,x,K){var le;super(b.code,b.message),this.operationType=x,this.user=K,Object.setPrototypeOf(this,Ui.prototype),this.customData={appName:v.name,tenantId:null!==(le=v.tenantId)&&void 0!==le?le:void 0,_serverResponse:b.customData._serverResponse,operationType:x}}static _fromErrorAndOperation(v,b,x,K){return new Ui(v,b,x,K)}}function Gr(w,v,b,x){return("reauthenticate"===v?b._getReauthenticationResolver(w):b._getIdTokenResponse(w)).catch(le=>{throw"auth/multi-factor-auth-required"===le.code?Ui._fromErrorAndOperation(w,le,v,x):le})}function ui(w){return new Set(w.map(({providerId:v})=>v).filter(v=>!!v))}function qi(){return qi=(0,E.Z)(function*(w,v){const b=(0,fe.m9)(w);yield bo(!0,b,v);const{providerUserInfo:x}=yield function Vs(w,v){return tt.apply(this,arguments)}(b.auth,{idToken:yield b.getIdToken(),deleteProvider:[v]}),K=ui(x||[]);return b.providerData=b.providerData.filter(le=>K.has(le.providerId)),K.has("phone")||(b.phoneNumber=null),yield b.auth._persistUserIfCurrent(b),b}),qi.apply(this,arguments)}function Jr(w,v){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,E.Z)(function*(w,v,b=!1){const x=yield qe(w,v._linkToIdToken(w.auth,yield w.getIdToken()),b);return tr._forOperation(w,"link",x)})).apply(this,arguments)}function bo(w,v,b){return rs.apply(this,arguments)}function rs(){return(rs=(0,E.Z)(function*(w,v,b){yield ii(v);const K=!1===w?"provider-already-linked":"no-such-provider";Ht(ui(v.providerData).has(b)===w,v.auth,K)})).apply(this,arguments)}function Ki(w,v){return uo.apply(this,arguments)}function uo(){return(uo=(0,E.Z)(function*(w,v,b=!1){const{auth:x}=w,K="reauthenticate";try{const le=yield qe(w,Gr(x,K,v,w),b);Ht(le.idToken,x,"internal-error");const Je=me(le.idToken);Ht(Je,x,"internal-error");const{sub:_t}=Je;return Ht(w.uid===_t,x,"user-mismatch"),tr._forOperation(w,K,le)}catch(le){throw"auth/user-not-found"===le?.code&&Rr(x,"user-mismatch"),le}})).apply(this,arguments)}function la(w,v){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,E.Z)(function*(w,v,b=!1){const x="signIn",K=yield Gr(w,x,v),le=yield tr._fromIdTokenResponse(w,x,K);return b||(yield w._updateCurrentUser(le.user)),le})).apply(this,arguments)}function Vi(w,v){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,E.Z)(function*(w,v){return la($r(w),v)})).apply(this,arguments)}function Co(w,v){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,E.Z)(function*(w,v){const b=(0,fe.m9)(w);return yield bo(!1,b,v.providerId),Jr(b,v)})).apply(this,arguments)}function vu(w,v){return ei.apply(this,arguments)}function ei(){return(ei=(0,E.Z)(function*(w,v){return Ki((0,fe.m9)(w),v)})).apply(this,arguments)}function Cu(){return(Cu=(0,E.Z)(function*(w,v){return Mn(w,"POST","/v1/accounts:signInWithCustomToken",Tn(w,v))})).apply(this,arguments)}function Qa(){return Qa=(0,E.Z)(function*(w,v){const b=$r(w),x=yield function kl(w,v){return Cu.apply(this,arguments)}(b,{token:v,returnSecureToken:!0}),K=yield tr._fromIdTokenResponse(b,"signIn",x);return yield b._updateCurrentUser(K.user),K}),Qa.apply(this,arguments)}class yu{constructor(v,b){this.factorId=v,this.uid=b.mfaEnrollmentId,this.enrollmentTime=new Date(b.enrolledAt).toUTCString(),this.displayName=b.displayName}static _fromServerResponse(v,b){return"phoneInfo"in b?as._fromServerResponse(v,b):"totpInfo"in b?Ea._fromServerResponse(v,b):Rr(v,"internal-error")}}class as extends yu{constructor(v){super("phone",v),this.phoneNumber=v.phoneInfo}static _fromServerResponse(v,b){return new as(b)}}class Ea extends yu{constructor(v){super("totp",v)}static _fromServerResponse(v,b){return new Ea(b)}}function Io(w,v,b){var x;Ht((null===(x=b.url)||void 0===x?void 0:x.length)>0,w,"invalid-continue-uri"),Ht(typeof b.dynamicLinkDomain>"u"||b.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),v.continueUrl=b.url,v.dynamicLinkDomain=b.dynamicLinkDomain,v.canHandleCodeInApp=b.handleCodeInApp,b.iOS&&(Ht(b.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),v.iOSBundleId=b.iOS.bundleId),b.android&&(Ht(b.android.packageName.length>0,w,"missing-android-pkg-name"),v.androidInstallApp=b.android.installApp,v.androidMinimumVersionCode=b.android.minimumVersion,v.androidPackageName=b.android.packageName)}function ks(){return ks=(0,E.Z)(function*(w,v,b){var x;const K=$r(w),le={requestType:"PASSWORD_RESET",email:v,clientType:"CLIENT_TYPE_WEB"};if(null!==(x=K._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const Je=yield cn(K,le,"getOobCode",!0);b&&Io(K,Je,b),yield ao(K,Je)}else b&&Io(K,le,b),yield ao(K,le).catch(function(){var Je=(0,E.Z)(function*(_t){if("auth/missing-recaptcha-token"!==_t.code)return Promise.reject(_t);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const dn=yield cn(K,le,"getOobCode",!0);b&&Io(K,dn,b),yield ao(K,dn)}});return function(_t){return Je.apply(this,arguments)}}())}),ks.apply(this,arguments)}function Bu(){return(Bu=(0,E.Z)(function*(w,v,b){yield ji((0,fe.m9)(w),{oobCode:v,newPassword:b})})).apply(this,arguments)}function li(){return li=(0,E.Z)(function*(w,v){yield function Fo(w,v){return jo.apply(this,arguments)}((0,fe.m9)(w),{oobCode:v})}),li.apply(this,arguments)}function Ja(w,v){return eu.apply(this,arguments)}function eu(){return(eu=(0,E.Z)(function*(w,v){const b=(0,fe.m9)(w),x=yield ji(b,{oobCode:v}),K=x.requestType;switch(Ht(K,b,"internal-error"),K){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ht(x.newEmail,b,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ht(x.mfaInfo,b,"internal-error");default:Ht(x.email,b,"internal-error")}let le=null;return x.mfaInfo&&(le=yu._fromServerResponse($r(b),x.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.newEmail:x.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.email:x.newEmail)||null,multiFactorInfo:le},operation:K}})).apply(this,arguments)}function he(){return(he=(0,E.Z)(function*(w,v){const{data:b}=yield Ja((0,fe.m9)(w),v);return b.email})).apply(this,arguments)}function Ie(){return Ie=(0,E.Z)(function*(w,v,b){var x;const K=$r(w),le={returnSecureToken:!0,email:v,password:b,clientType:"CLIENT_TYPE_WEB"};let Je;if(null!==(x=K._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const Bt=yield cn(K,le,"signUpPassword");Je=Nt(K,Bt)}else Je=Nt(K,le).catch(function(){var Bt=(0,E.Z)(function*(Un){if("auth/missing-recaptcha-token"===Un.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Wn=yield cn(K,le,"signUpPassword");return Nt(K,Wn)}return Promise.reject(Un)});return function(Un){return Bt.apply(this,arguments)}}());const _t=yield Je.catch(Bt=>Promise.reject(Bt)),dn=yield tr._fromIdTokenResponse(K,"signIn",_t);return yield K._updateCurrentUser(dn.user),dn}),Ie.apply(this,arguments)}function zt(){return zt=(0,E.Z)(function*(w,v,b){var x;const K=$r(w),le={requestType:"EMAIL_SIGNIN",email:v,clientType:"CLIENT_TYPE_WEB"};function Je(_t,dn){Ht(dn.handleCodeInApp,K,"argument-error"),dn&&Io(K,_t,dn)}if(null!==(x=K._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const _t=yield cn(K,le,"getOobCode",!0);Je(_t,b),yield vs(K,_t)}else Je(le,b),yield vs(K,le).catch(function(){var _t=(0,E.Z)(function*(dn){if("auth/missing-recaptcha-token"!==dn.code)return Promise.reject(dn);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Bt=yield cn(K,le,"getOobCode",!0);Je(Bt,b),yield vs(K,Bt)}});return function(dn){return _t.apply(this,arguments)}}())}),zt.apply(this,arguments)}function mi(){return(mi=(0,E.Z)(function*(w,v,b){const x=(0,fe.m9)(w),K=ne.credentialWithLink(v,b||tn());return Ht(K._tenantId===(x.tenantId||null),x,"tenant-id-mismatch"),Vi(x,K)})).apply(this,arguments)}function mr(){return(mr=(0,E.Z)(function*(w,v){return Vr(w,"POST","/v1/accounts:createAuthUri",Tn(w,v))})).apply(this,arguments)}function fi(){return fi=(0,E.Z)(function*(w,v){const x={identifier:v,continueUri:Rn()?tn():"http://localhost"},{signinMethods:K}=yield function hi(w,v){return mr.apply(this,arguments)}((0,fe.m9)(w),x);return K||[]}),fi.apply(this,arguments)}function Jn(){return Jn=(0,E.Z)(function*(w,v){const b=(0,fe.m9)(w),K={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};v&&Io(b.auth,K,v);const{email:le}=yield function Wr(w,v){return ua.apply(this,arguments)}(b.auth,K);le!==w.email&&(yield w.reload())}),Jn.apply(this,arguments)}function Do(){return Do=(0,E.Z)(function*(w,v,b){const x=(0,fe.m9)(w),le={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:v};b&&Io(x.auth,le,b);const{email:Je}=yield function Ii(w,v){return Bo.apply(this,arguments)}(x.auth,le);Je!==w.email&&(yield w.reload())}),Do.apply(this,arguments)}function is(){return(is=(0,E.Z)(function*(w,v){return Vr(w,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function jr(){return jr=(0,E.Z)(function*(w,{displayName:v,photoURL:b}){if(void 0===v&&void 0===b)return;const x=(0,fe.m9)(w),le={idToken:yield x.getIdToken(),displayName:v,photoUrl:b,returnSecureToken:!0},Je=yield qe(x,function Js(w,v){return is.apply(this,arguments)}(x.auth,le));x.displayName=Je.displayName||null,x.photoURL=Je.photoUrl||null;const _t=x.providerData.find(({providerId:dn})=>"password"===dn);_t&&(_t.displayName=x.displayName,_t.photoURL=x.photoURL),yield x._updateTokensIfNecessary(Je)}),jr.apply(this,arguments)}function _u(w,v,b){return zs.apply(this,arguments)}function zs(){return(zs=(0,E.Z)(function*(w,v,b){const{auth:x}=w,le={idToken:yield w.getIdToken(),returnSecureToken:!0};v&&(le.email=v),b&&(le.password=b);const Je=yield qe(w,vo(x,le));yield w._updateTokensIfNecessary(Je,!0)})).apply(this,arguments)}class bu{constructor(v,b,x={}){this.isNewUser=v,this.providerId=b,this.profile=x}}class _n extends bu{constructor(v,b,x,K){super(v,b,x),this.username=K}}class qr extends bu{constructor(v,b){super(v,"facebook.com",b)}}class Cc extends _n{constructor(v,b){super(v,"github.com",b,"string"==typeof b?.login?b?.login:null)}}class nl extends bu{constructor(v,b){super(v,"google.com",b)}}class Us extends _n{constructor(v,b,x){super(v,"twitter.com",b,x)}}function nd(w){const{user:v,_tokenResponse:b}=w;return v.isAnonymous&&!b?{providerId:null,isNewUser:!1,profile:null}:function ec(w){var v,b;if(!w)return null;const{providerId:x}=w,K=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},le=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!x&&w?.idToken){const Je=null===(b=null===(v=me(w.idToken))||void 0===v?void 0:v.firebase)||void 0===b?void 0:b.sign_in_provider;if(Je)return new bu(le,"anonymous"!==Je&&"custom"!==Je?Je:null)}if(!x)return null;switch(x){case"facebook.com":return new qr(le,K);case"github.com":return new Cc(le,K);case"google.com":return new nl(le,K);case"twitter.com":return new Us(le,K,w.screenName||null);case"custom":case"anonymous":return new bu(le,null);default:return new bu(le,x,K)}}(b)}class Ln{constructor(v,b,x){this.type=v,this.credential=b,this.auth=x}static _fromIdtoken(v,b){return new Ln("enroll",v,b)}static _fromMfaPendingCredential(v){return new Ln("signin",v)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(v){var b,x;if(v?.multiFactorSession){if(null!==(b=v.multiFactorSession)&&void 0!==b&&b.pendingCredential)return Ln._fromMfaPendingCredential(v.multiFactorSession.pendingCredential);if(null!==(x=v.multiFactorSession)&&void 0!==x&&x.idToken)return Ln._fromIdtoken(v.multiFactorSession.idToken)}return null}}class wa{constructor(v,b,x){this.session=v,this.hints=b,this.signInResolver=x}static _fromError(v,b){const x=$r(v),K=b.customData._serverResponse,le=(K.mfaInfo||[]).map(_t=>yu._fromServerResponse(x,_t));Ht(K.mfaPendingCredential,x,"internal-error");const Je=Ln._fromMfaPendingCredential(K.mfaPendingCredential);return new wa(Je,le,function(){var _t=(0,E.Z)(function*(dn){const Bt=yield dn._process(x,Je);delete K.mfaInfo,delete K.mfaPendingCredential;const Un=Object.assign(Object.assign({},K),{idToken:Bt.idToken,refreshToken:Bt.refreshToken});switch(b.operationType){case"signIn":const Wn=yield tr._fromIdTokenResponse(x,b.operationType,Un);return yield x._updateCurrentUser(Wn.user),Wn;case"reauthenticate":return Ht(b.user,x,"internal-error"),tr._forOperation(b.user,b.operationType,Un);default:Rr(x,"internal-error")}});return function(dn){return _t.apply(this,arguments)}}())}resolveSignIn(v){var b=this;return(0,E.Z)(function*(){return b.signInResolver(v)})()}}class xc{constructor(v){this.user=v,this.enrolledFactors=[],v._onReload(b=>{b.mfaInfo&&(this.enrolledFactors=b.mfaInfo.map(x=>yu._fromServerResponse(v.auth,x)))})}static _fromUser(v){return new xc(v)}getSession(){var v=this;return(0,E.Z)(function*(){return Ln._fromIdtoken(yield v.user.getIdToken(),v.user.auth)})()}enroll(v,b){var x=this;return(0,E.Z)(function*(){const K=v,le=yield x.getSession(),Je=yield qe(x.user,K._process(x.user.auth,le,b));return yield x.user._updateTokensIfNecessary(Je),x.user.reload()})()}unenroll(v){var b=this;return(0,E.Z)(function*(){const x="string"==typeof v?v:v.uid,K=yield b.user.getIdToken();try{const le=yield qe(b.user,function Ic(w,v){return Vr(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Tn(w,v))}(b.user.auth,{idToken:K,mfaEnrollmentId:x}));b.enrolledFactors=b.enrolledFactors.filter(({uid:Je})=>Je!==x),yield b.user._updateTokensIfNecessary(le),yield b.user.reload()}catch(le){throw le}})()}}const fl=new WeakMap,Ol="__sak";class Ca{constructor(v,b){this.storageRetriever=v,this.type=b}_isAvailable(){try{return this.storage?(this.storage.setItem(Ol,"1"),this.storage.removeItem(Ol),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(v,b){return this.storage.setItem(v,JSON.stringify(b)),Promise.resolve()}_get(v){const b=this.storage.getItem(v);return Promise.resolve(b?JSON.parse(b):null)}_remove(v){return this.storage.removeItem(v),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ir=(()=>{class w extends Ca{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(b,x)=>this.onStorageEvent(b,x),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function rd(){const w=(0,fe.z$)();return Lo(w)||Wi(w)}()&&function Wa(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=oa(),this._shouldAllowMigration=!0}forAllChangedKeys(b){for(const x of Object.keys(this.listeners)){const K=this.storage.getItem(x),le=this.localCache[x];K!==le&&b(x,le,K)}}onStorageEvent(b,x=!1){if(!b.key)return void this.forAllChangedKeys((_t,dn,Bt)=>{this.notifyListeners(_t,Bt)});const K=b.key;if(x?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const _t=this.storage.getItem(K);if(b.newValue!==_t)null!==b.newValue?this.storage.setItem(K,b.newValue):this.storage.removeItem(K);else if(this.localCache[K]===b.newValue&&!x)return}const le=()=>{const _t=this.storage.getItem(K);!x&&this.localCache[K]===_t||this.notifyListeners(K,_t)},Je=this.storage.getItem(K);!function es(){return(0,fe.w1)()&&10===document.documentMode}()||Je===b.newValue||b.newValue===b.oldValue?le():setTimeout(le,10)}notifyListeners(b,x){this.localCache[b]=x;const K=this.listeners[b];if(K)for(const le of Array.from(K))le(x&&JSON.parse(x))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((b,x,K)=>{this.onStorageEvent(new StorageEvent("storage",{key:b,oldValue:x,newValue:K}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(b,x){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[b]||(this.listeners[b]=new Set,this.localCache[b]=this.storage.getItem(b)),this.listeners[b].add(x)}_removeListener(b,x){this.listeners[b]&&(this.listeners[b].delete(x),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(b,x){var K=()=>super._set,le=this;return(0,E.Z)(function*(){yield K().call(le,b,x),le.localCache[b]=JSON.stringify(x)})()}_get(b){var x=()=>super._get,K=this;return(0,E.Z)(function*(){const le=yield x().call(K,b);return K.localCache[b]=JSON.stringify(le),le})()}_remove(b){var x=()=>super._remove,K=this;return(0,E.Z)(function*(){yield x().call(K,b),delete K.localCache[b]})()}}return w.type="LOCAL",w})(),$u=(()=>{class w extends Ca{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(b,x){}_removeListener(b,x){}}return w.type="SESSION",w})();let Zn=(()=>{class w{constructor(b){this.eventTarget=b,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(b){const x=this.receivers.find(le=>le.isListeningto(b));if(x)return x;const K=new w(b);return this.receivers.push(K),K}isListeningto(b){return this.eventTarget===b}handleEvent(b){var x=this;return(0,E.Z)(function*(){const K=b,{eventId:le,eventType:Je,data:_t}=K.data,dn=x.handlersMap[Je];if(!dn?.size)return;K.ports[0].postMessage({status:"ack",eventId:le,eventType:Je});const Bt=Array.from(dn).map(function(){var Wn=(0,E.Z)(function*(zr){return zr(K.origin,_t)});return function(zr){return Wn.apply(this,arguments)}}()),Un=yield function Ti(w){return Promise.all(w.map(function(){var v=(0,E.Z)(function*(b){try{return{fulfilled:!0,value:yield b}}catch(x){return{fulfilled:!1,reason:x}}});return function(b){return v.apply(this,arguments)}}()))}(Bt);K.ports[0].postMessage({status:"done",eventId:le,eventType:Je,response:Un})})()}_subscribe(b,x){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[b]||(this.handlersMap[b]=new Set),this.handlersMap[b].add(x)}_unsubscribe(b,x){this.handlersMap[b]&&x&&this.handlersMap[b].delete(x),(!x||0===this.handlersMap[b].size)&&delete this.handlersMap[b],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Qr(w="",v=10){let b="";for(let x=0;x<v;x++)b+=Math.floor(10*Math.random());return w+b}class pi{constructor(v){this.target=v,this.handlers=new Set}removeMessageHandler(v){v.messageChannel&&(v.messageChannel.port1.removeEventListener("message",v.onMessage),v.messageChannel.port1.close()),this.handlers.delete(v)}_send(v,b,x=50){var K=this;return(0,E.Z)(function*(){const le=typeof MessageChannel<"u"?new MessageChannel:null;if(!le)throw new Error("connection_unavailable");let Je,_t;return new Promise((dn,Bt)=>{const Un=Qr("",20);le.port1.start();const Wn=setTimeout(()=>{Bt(new Error("unsupported_event"))},x);_t={messageChannel:le,onMessage(zr){const zi=zr;if(zi.data.eventId===Un)switch(zi.data.status){case"ack":clearTimeout(Wn),Je=setTimeout(()=>{Bt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Je),dn(zi.data.response);break;default:clearTimeout(Wn),clearTimeout(Je),Bt(new Error("invalid_response"))}}},K.handlers.add(_t),le.port1.addEventListener("message",_t.onMessage),K.target.postMessage({eventType:v,eventId:Un,data:b},[le.port2])}).finally(()=>{_t&&K.removeMessageHandler(_t)})})()}}function qs(){return window}function Yn(){return typeof qs().WorkerGlobalScope<"u"&&"function"==typeof qs().importScripts}function ss(){return(ss=(0,E.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const D="firebaseLocalStorageDb",ae="firebaseLocalStorage",Pe="fbase_key";class Le{constructor(v){this.request=v}toPromise(){return new Promise((v,b)=>{this.request.addEventListener("success",()=>{v(this.request.result)}),this.request.addEventListener("error",()=>{b(this.request.error)})})}}function Tt(w,v){return w.transaction([ae],v?"readwrite":"readonly").objectStore(ae)}function vr(){const w=indexedDB.open(D,1);return new Promise((v,b)=>{w.addEventListener("error",()=>{b(w.error)}),w.addEventListener("upgradeneeded",()=>{const x=w.result;try{x.createObjectStore(ae,{keyPath:Pe})}catch(K){b(K)}}),w.addEventListener("success",(0,E.Z)(function*(){const x=w.result;x.objectStoreNames.contains(ae)?v(x):(x.close(),yield function wn(){const w=indexedDB.deleteDatabase(D);return new Le(w).toPromise()}(),v(yield vr()))}))})}function hr(w,v,b){return ci.apply(this,arguments)}function ci(){return(ci=(0,E.Z)(function*(w,v,b){const x=Tt(w,!0).put({[Pe]:v,value:b});return new Le(x).toPromise()})).apply(this,arguments)}function Ot(){return(Ot=(0,E.Z)(function*(w,v){const b=Tt(w,!1).get(v),x=yield new Le(b).toPromise();return void 0===x?null:x.value})).apply(this,arguments)}function xa(w,v){const b=Tt(w,!0).delete(v);return new Le(b).toPromise()}const Yi=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var b=this;return(0,E.Z)(function*(){return b.db||(b.db=yield vr()),b.db})()}_withRetries(b){var x=this;return(0,E.Z)(function*(){let K=0;for(;;)try{const le=yield x._openDb();return yield b(le)}catch(le){if(K++>3)throw le;x.db&&(x.db.close(),x.db=void 0)}})()}initializeServiceWorkerMessaging(){var b=this;return(0,E.Z)(function*(){return Yn()?b.initializeReceiver():b.initializeSender()})()}initializeReceiver(){var b=this;return(0,E.Z)(function*(){b.receiver=Zn._getInstance(function F(){return Yn()?self:null}()),b.receiver._subscribe("keyChanged",function(){var x=(0,E.Z)(function*(K,le){return{keyProcessed:(yield b._poll()).includes(le.key)}});return function(K,le){return x.apply(this,arguments)}}()),b.receiver._subscribe("ping",function(){var x=(0,E.Z)(function*(K,le){return["keyChanged"]});return function(K,le){return x.apply(this,arguments)}}())})()}initializeSender(){var b=this;return(0,E.Z)(function*(){var x,K;if(b.activeServiceWorker=yield function Ia(){return ss.apply(this,arguments)}(),!b.activeServiceWorker)return;b.sender=new pi(b.activeServiceWorker);const le=yield b.sender._send("ping",{},800);le&&null!==(x=le[0])&&void 0!==x&&x.fulfilled&&null!==(K=le[0])&&void 0!==K&&K.value.includes("keyChanged")&&(b.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(b){var x=this;return(0,E.Z)(function*(){if(x.sender&&x.activeServiceWorker&&function k(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===x.activeServiceWorker)try{yield x.sender._send("keyChanged",{key:b},x.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,E.Z)(function*(){try{if(!indexedDB)return!1;const b=yield vr();return yield hr(b,Ol,"1"),yield xa(b,Ol),!0}catch{}return!1})()}_withPendingWrite(b){var x=this;return(0,E.Z)(function*(){x.pendingWrites++;try{yield b()}finally{x.pendingWrites--}})()}_set(b,x){var K=this;return(0,E.Z)(function*(){return K._withPendingWrite((0,E.Z)(function*(){return yield K._withRetries(le=>hr(le,b,x)),K.localCache[b]=x,K.notifyServiceWorker(b)}))})()}_get(b){var x=this;return(0,E.Z)(function*(){const K=yield x._withRetries(le=>function Ks(w,v){return Ot.apply(this,arguments)}(le,b));return x.localCache[b]=K,K})()}_remove(b){var x=this;return(0,E.Z)(function*(){return x._withPendingWrite((0,E.Z)(function*(){return yield x._withRetries(K=>xa(K,b)),delete x.localCache[b],x.notifyServiceWorker(b)}))})()}_poll(){var b=this;return(0,E.Z)(function*(){const x=yield b._withRetries(Je=>{const _t=Tt(Je,!1).getAll();return new Le(_t).toPromise()});if(!x)return[];if(0!==b.pendingWrites)return[];const K=[],le=new Set;for(const{fbase_key:Je,value:_t}of x)le.add(Je),JSON.stringify(b.localCache[Je])!==JSON.stringify(_t)&&(b.notifyListeners(Je,_t),K.push(Je));for(const Je of Object.keys(b.localCache))b.localCache[Je]&&!le.has(Je)&&(b.notifyListeners(Je,null),K.push(Je));return K})()}notifyListeners(b,x){this.localCache[b]=x;const K=this.listeners[b];if(K)for(const le of Array.from(K))le(x)}startPolling(){var b=this;this.stopPolling(),this.pollTimer=setInterval((0,E.Z)(function*(){return b._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(b,x){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[b]||(this.listeners[b]=new Set,this._get(b)),this.listeners[b].add(x)}_removeListener(b,x){this.listeners[b]&&(this.listeners[b].delete(x),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})(),Gu=1e12;class fn{constructor(v){this.auth=v,this.counter=Gu,this._widgets=new Map}render(v,b){const x=this.counter;return this._widgets.set(x,new od(v,this.auth.name,b||{})),this.counter++,x}reset(v){var b;const x=v||Gu;null===(b=this._widgets.get(x))||void 0===b||b.delete(),this._widgets.delete(x)}getResponse(v){var b;return(null===(b=this._widgets.get(v||Gu))||void 0===b?void 0:b.getResponse())||""}execute(v){var b=this;return(0,E.Z)(function*(){var x;return null===(x=b._widgets.get(v||Gu))||void 0===x||x.execute(),""})()}}class od{constructor(v,b,x){this.params=x,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const K="string"==typeof v?document.getElementById(v):v;Ht(K,"argument-error",{appName:b}),this.container=K,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Da(w){const v=[],b="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let x=0;x<w;x++)v.push(b.charAt(Math.floor(62*Math.random())));return v.join("")}(50);const{callback:v,"expired-callback":b}=this.params;if(v)try{v(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,b)try{b()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const pl=ft("rcb"),Mo=new cs(3e4,6e4);class Aa{constructor(){var v;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(v=qs().grecaptcha)||void 0===v||!v.render)}load(v,b=""){return Ht(function ha(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(b),v,"argument-error"),this.shouldResolveImmediately(b)&&gi(qs().grecaptcha)?Promise.resolve(qs().grecaptcha):new Promise((x,K)=>{const le=qs().setTimeout(()=>{K(ir(v,"network-request-failed"))},Mo.get());qs()[pl]=()=>{qs().clearTimeout(le),delete qs()[pl];const _t=qs().grecaptcha;if(!_t||!gi(_t))return void K(ir(v,"internal-error"));const dn=_t.render;_t.render=(Bt,Un)=>{const Wn=dn(Bt,Un);return this.counter++,Wn},this.hostLanguage=b,x(_t)},vt(`https://www.google.com/recaptcha/api.js??${(0,fe.xO)({onload:pl,render:"explicit",hl:b})}`).catch(()=>{clearTimeout(le),K(ir(v,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(v){var b;return!(null===(b=qs().grecaptcha)||void 0===b||!b.render)&&(v===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Rl{load(v){return(0,E.Z)(function*(){return new fn(v)})()}clearedOneInstance(){}}const Ba="recaptcha",Nl={theme:"light",type:"image"};class Mf{constructor(v,b=Object.assign({},Nl),x){this.parameters=b,this.type=Ba,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=$r(x),this.isInvisible="invisible"===this.parameters.size,Ht(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const K="string"==typeof v?document.getElementById(v):v;Ht(K,this.auth,"argument-error"),this.container=K,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Rl:new Aa,this.validateStartingState()}verify(){var v=this;return(0,E.Z)(function*(){v.assertNotDestroyed();const b=yield v.render(),x=v.getAssertedRecaptcha();return x.getResponse(b)||new Promise(le=>{const Je=_t=>{_t&&(v.tokenChangeListeners.delete(Je),le(_t))};v.tokenChangeListeners.add(Je),v.isInvisible&&x.execute(b)})})()}render(){try{this.assertNotDestroyed()}catch(v){return Promise.reject(v)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(v=>{throw this.renderPromise=null,v})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(v=>{this.container.removeChild(v)})}validateStartingState(){Ht(!this.parameters.sitekey,this.auth,"argument-error"),Ht(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ht(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(v){return b=>{if(this.tokenChangeListeners.forEach(x=>x(b)),"function"==typeof v)v(b);else if("string"==typeof v){const x=qs()[v];"function"==typeof x&&x(b)}}}assertNotDestroyed(){Ht(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var v=this;return(0,E.Z)(function*(){if(yield v.init(),!v.widgetId){let b=v.container;if(!v.isInvisible){const x=document.createElement("div");b.appendChild(x),b=x}v.widgetId=v.getAssertedRecaptcha().render(b,v.parameters)}return v.widgetId})()}init(){var v=this;return(0,E.Z)(function*(){Ht(Rn()&&!Yn(),v.auth,"internal-error"),yield function jg(){let w=null;return new Promise(v=>{"complete"!==document.readyState?(w=()=>v(),window.addEventListener("load",w)):v()}).catch(v=>{throw w&&window.removeEventListener("load",w),v})}(),v.recaptcha=yield v._recaptchaLoader.load(v.auth,v.auth.languageCode||void 0);const b=yield function mu(w){return ba.apply(this,arguments)}(v.auth);Ht(b,v.auth,"internal-error"),v.parameters.sitekey=b})()}getAssertedRecaptcha(){return Ht(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class tc{constructor(v,b){this.verificationId=v,this.onConfirmation=b}confirm(v){const b=_o._fromVerification(this.verificationId,v);return this.onConfirmation(b)}}function Ll(){return(Ll=(0,E.Z)(function*(w,v,b){const x=$r(w),K=yield nc(x,v,(0,fe.m9)(b));return new tc(K,le=>Vi(x,le))})).apply(this,arguments)}function kf(){return(kf=(0,E.Z)(function*(w,v,b){const x=(0,fe.m9)(w);yield bo(!1,x,"phone");const K=yield nc(x.auth,v,(0,fe.m9)(b));return new tc(K,le=>Co(x,le))})).apply(this,arguments)}function Fl(){return(Fl=(0,E.Z)(function*(w,v,b){const x=(0,fe.m9)(w),K=yield nc(x.auth,v,(0,fe.m9)(b));return new tc(K,le=>vu(x,le))})).apply(this,arguments)}function nc(w,v,b){return ad.apply(this,arguments)}function ad(){return ad=(0,E.Z)(function*(w,v,b){var x;const K=yield b.verify();try{let le;if(Ht("string"==typeof K,w,"argument-error"),Ht(b.type===Ba,w,"argument-error"),le="string"==typeof v?{phoneNumber:v}:v,"session"in le){const Je=le.session;if("phoneNumber"in le)return Ht("enroll"===Je.type,w,"internal-error"),(yield function jt(w,v){return Vr(w,"POST","/v2/accounts/mfaEnrollment:start",Tn(w,v))}(w,{idToken:Je.credential,phoneEnrollmentInfo:{phoneNumber:le.phoneNumber,recaptchaToken:K}})).phoneSessionInfo.sessionInfo;{Ht("signin"===Je.type,w,"internal-error");const _t=(null===(x=le.multiFactorHint)||void 0===x?void 0:x.uid)||le.multiFactorUid;return Ht(_t,w,"missing-multi-factor-info"),(yield function Af(w,v){return Vr(w,"POST","/v2/accounts/mfaSignIn:start",Tn(w,v))}(w,{mfaPendingCredential:Je.credential,mfaEnrollmentId:_t,phoneSignInInfo:{recaptchaToken:K}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Je}=yield function Mi(w,v){return Fa.apply(this,arguments)}(w,{phoneNumber:le.phoneNumber,recaptchaToken:K});return Je}}finally{b._reset()}}),ad.apply(this,arguments)}function jl(){return(jl=(0,E.Z)(function*(w,v){yield Jr((0,fe.m9)(w),v)})).apply(this,arguments)}let Pc=(()=>{class w{constructor(b){this.providerId=w.PROVIDER_ID,this.auth=$r(b)}verifyPhoneNumber(b,x){return nc(this.auth,b,(0,fe.m9)(x))}static credential(b,x){return _o._fromVerification(b,x)}static credentialFromResult(b){return w.credentialFromTaggedObject(b)}static credentialFromError(b){return w.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{phoneNumber:x,temporaryProof:K}=b;return x&&K?_o._fromTokenResponse(x,K):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Ul(w,v){return v?Fi(v):(Ht(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class rc extends oo{constructor(v){super("custom","custom"),this.params=v}_getIdTokenResponse(v){return Ys(v,this._buildIdpRequest())}_linkToIdToken(v,b){return Ys(v,this._buildIdpRequest(b))}_getReauthenticationResolver(v){return Ys(v,this._buildIdpRequest())}_buildIdpRequest(v){const b={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return v&&(b.idToken=v),b}}function wp(w){return la(w.auth,new rc(w),w.bypassAuthState)}function Bd(w){const{auth:v,user:b}=w;return Ht(b,v,"internal-error"),Ki(b,new rc(w),w.bypassAuthState)}function Bl(w){return Du.apply(this,arguments)}function Du(){return(Du=(0,E.Z)(function*(w){const{auth:v,user:b}=w;return Ht(b,v,"internal-error"),Jr(b,new rc(w),w.bypassAuthState)})).apply(this,arguments)}class Au{constructor(v,b,x,K,le=!1){this.auth=v,this.resolver=x,this.user=K,this.bypassAuthState=le,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(b)?b:[b]}execute(){var v=this;return new Promise(function(){var b=(0,E.Z)(function*(x,K){v.pendingPromise={resolve:x,reject:K};try{v.eventManager=yield v.resolver._initialize(v.auth),yield v.onExecution(),v.eventManager.registerConsumer(v)}catch(le){v.reject(le)}});return function(x,K){return b.apply(this,arguments)}}())}onAuthEvent(v){var b=this;return(0,E.Z)(function*(){const{urlResponse:x,sessionId:K,postBody:le,tenantId:Je,error:_t,type:dn}=v;if(_t)return void b.reject(_t);const Bt={auth:b.auth,requestUri:x,sessionId:K,tenantId:Je||void 0,postBody:le||void 0,user:b.user,bypassAuthState:b.bypassAuthState};try{b.resolve(yield b.getIdpTask(dn)(Bt))}catch(Un){b.reject(Un)}})()}onError(v){this.reject(v)}getIdpTask(v){switch(v){case"signInViaPopup":case"signInViaRedirect":return wp;case"linkViaPopup":case"linkViaRedirect":return Bl;case"reauthViaPopup":case"reauthViaRedirect":return Bd;default:Rr(this.auth,"internal-error")}}resolve(v){Hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(v),this.unregisterAndCleanUp()}reject(v){Hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(v),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Os=new cs(2e3,1e4);function ou(){return(ou=(0,E.Z)(function*(w,v,b){const x=$r(w);oi(w,v,Z);const K=Ul(x,b);return new Ns(x,"signInViaPopup",v,K).executeNotNull()})).apply(this,arguments)}function Rs(){return(Rs=(0,E.Z)(function*(w,v,b){const x=(0,fe.m9)(w);oi(x.auth,v,Z);const K=Ul(x.auth,b);return new Ns(x.auth,"reauthViaPopup",v,K,x).executeNotNull()})).apply(this,arguments)}function na(){return(na=(0,E.Z)(function*(w,v,b){const x=(0,fe.m9)(w);oi(x.auth,v,Z);const K=Ul(x.auth,b);return new Ns(x.auth,"linkViaPopup",v,K,x).executeNotNull()})).apply(this,arguments)}let Ns=(()=>{class w extends Au{constructor(b,x,K,le,Je){super(b,x,le,Je),this.provider=K,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var b=this;return(0,E.Z)(function*(){const x=yield b.execute();return Ht(x,b.auth,"internal-error"),x})()}onExecution(){var b=this;return(0,E.Z)(function*(){Hn(1===b.filter.length,"Popup operations only handle one event");const x=Qr();b.authWindow=yield b.resolver._openPopup(b.auth,b.provider,b.filter[0],x),b.authWindow.associatedEvent=x,b.resolver._originValidation(b.auth).catch(K=>{b.reject(K)}),b.resolver._isIframeWebStorageSupported(b.auth,K=>{K||b.reject(ir(b.auth,"web-storage-unsupported"))}),b.pollUserCancellation()})()}get eventId(){var b;return(null===(b=this.authWindow)||void 0===b?void 0:b.associatedEvent)||null}cancel(){this.reject(ir(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const b=()=>{var x,K;this.pollId=null!==(K=null===(x=this.authWindow)||void 0===x?void 0:x.window)&&void 0!==K&&K.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ir(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(b,Os.get())};b()}}return w.currentPopupAction=null,w})();const Pf="pendingRedirect",au=new Map;class Va extends Au{constructor(v,b,x=!1){super(v,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],b,void 0,x),this.eventId=null}execute(){var v=()=>super.execute,b=this;return(0,E.Z)(function*(){let x=au.get(b.auth._key());if(!x){try{const le=(yield function Cp(w,v){return Mu.apply(this,arguments)}(b.resolver,b.auth))?yield v().call(b):null;x=()=>Promise.resolve(le)}catch(K){x=()=>Promise.reject(K)}au.set(b.auth._key(),x)}return b.bypassAuthState||au.set(b.auth._key(),()=>Promise.resolve(null)),x()})()}onAuthEvent(v){var b=()=>super.onAuthEvent,x=this;return(0,E.Z)(function*(){if("signInViaRedirect"===v.type)return b().call(x,v);if("unknown"!==v.type){if(v.eventId){const K=yield x.auth._redirectUserForId(v.eventId);if(K)return x.user=K,b().call(x,v);x.resolve(null)}}else x.resolve(null)})()}onExecution(){return(0,E.Z)(function*(){})()}cleanUp(){}}function Mu(){return(Mu=(0,E.Z)(function*(w,v){const b=ku(v),x=xi(w);if(!(yield x._isAvailable()))return!1;const K="true"===(yield x._get(b));return yield x._remove(b),K})).apply(this,arguments)}function Ni(w,v){return sc.apply(this,arguments)}function sc(){return(sc=(0,E.Z)(function*(w,v){return xi(w)._set(ku(v),"true")})).apply(this,arguments)}function to(w,v){au.set(w._key(),v)}function xi(w){return Fi(w._redirectPersistence)}function ku(w){return Fs(Pf,w.config.apiKey,w.name)}function fa(w,v,b){return function Pu(w,v,b){return wh.apply(this,arguments)}(w,v,b)}function wh(){return(wh=(0,E.Z)(function*(w,v,b){const x=$r(w);oi(w,v,Z),yield x._initializationPromise;const K=Ul(x,b);return yield Ni(K,x),K._openRedirect(x,v,"signInViaRedirect")})).apply(this,arguments)}function O(w,v,b){return function G(w,v,b){return pe.apply(this,arguments)}(w,v,b)}function pe(){return(pe=(0,E.Z)(function*(w,v,b){const x=(0,fe.m9)(w);oi(x.auth,v,Z),yield x.auth._initializationPromise;const K=Ul(x.auth,b);yield Ni(K,x.auth);const le=yield Ur(x);return K._openRedirect(x.auth,v,"reauthViaRedirect",le)})).apply(this,arguments)}function ze(w,v,b){return function ht(w,v,b){return It.apply(this,arguments)}(w,v,b)}function It(){return(It=(0,E.Z)(function*(w,v,b){const x=(0,fe.m9)(w);oi(x.auth,v,Z),yield x.auth._initializationPromise;const K=Ul(x.auth,b);yield bo(!1,x,v.providerId),yield Ni(K,x.auth);const le=yield Ur(x);return K._openRedirect(x.auth,v,"linkViaRedirect",le)})).apply(this,arguments)}function Kn(){return(Kn=(0,E.Z)(function*(w,v){return yield $r(w)._initializationPromise,Fn(w,v,!1)})).apply(this,arguments)}function Fn(w,v){return gr.apply(this,arguments)}function gr(){return(gr=(0,E.Z)(function*(w,v,b=!1){const x=$r(w),K=Ul(x,v),Je=yield new Va(x,K,b).execute();return Je&&!b&&(delete Je.user._redirectEventId,yield x._persistUserIfCurrent(Je.user),yield x._setRedirectUser(null,v)),Je})).apply(this,arguments)}function Ur(w){return Or.apply(this,arguments)}function Or(){return(Or=(0,E.Z)(function*(w){const v=Qr(`${w.uid}:::`);return w._redirectEventId=v,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),v})).apply(this,arguments)}class To{constructor(v){this.auth=v,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(v){this.consumers.add(v),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,v)&&(this.sendToConsumer(this.queuedRedirectEvent,v),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(v){this.consumers.delete(v)}onEvent(v){if(this.hasEventBeenHandled(v))return!1;let b=!1;return this.consumers.forEach(x=>{this.isEventForConsumer(v,x)&&(b=!0,this.sendToConsumer(v,x),this.saveEventToCache(v))}),this.hasHandledPotentialRedirect||!function Hl(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ud(w);default:return!1}}(v)||(this.hasHandledPotentialRedirect=!0,b||(this.queuedRedirectEvent=v,b=!0)),b}sendToConsumer(v,b){var x;if(v.error&&!ud(v)){const K=(null===(x=v.error.code)||void 0===x?void 0:x.split("auth/")[1])||"internal-error";b.onError(ir(this.auth,K))}else b.onAuthEvent(v)}isEventForConsumer(v,b){const x=null===b.eventId||!!v.eventId&&v.eventId===b.eventId;return b.filter.includes(v.type)&&x}hasEventBeenHandled(v){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gl(v))}saveEventToCache(v){this.cachedEventUids.add(gl(v)),this.lastProcessedEventTime=Date.now()}}function gl(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(v=>v).join("-")}function ud({type:w,error:v}){return"unknown"===w&&"auth/no-auth-event"===v?.code}function Zo(w){return uu.apply(this,arguments)}function uu(){return(uu=(0,E.Z)(function*(w,v={}){return Vr(w,"GET","/v1/projects",v)})).apply(this,arguments)}const ld=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Of=/^https?/;function Oc(){return(Oc=(0,E.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:v}=yield Zo(w);for(const b of v)try{if(Ha(b))return}catch{}Rr(w,"unauthorized-domain")})).apply(this,arguments)}function Ha(w){const v=tn(),{protocol:b,hostname:x}=new URL(v);if(w.startsWith("chrome-extension://")){const Je=new URL(w);return""===Je.hostname&&""===x?"chrome-extension:"===b&&w.replace("chrome-extension://","")===v.replace("chrome-extension://",""):"chrome-extension:"===b&&Je.hostname===x}if(!Of.test(b))return!1;if(ld.test(w))return x===w;const K=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+K+"|"+K+")$","i").test(x)}const Ch=new cs(3e4,6e4);function _s(){const w=qs().___jsl;if(w?.H)for(const v of Object.keys(w.H))if(w.H[v].r=w.H[v].r||[],w.H[v].L=w.H[v].L||[],w.H[v].r=[...w.H[v].L],w.CP)for(let b=0;b<w.CP.length;b++)w.CP[b]=null}let Vd=null;const cd=new cs(5e3,15e3),Hd="__/auth/iframe",dd="emulator/auth/iframe",Hi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hd(w){const v=w.config;Ht(v.authDomain,w,"auth-domain-config-required");const b=v.emulator?Sr(v,dd):`https://${w.config.authDomain}/${Hd}`,x={apiKey:v.apiKey,appName:w.name,v:Be.SDK_VERSION},K=bs.get(w.config.apiHost);K&&(x.eid=K);const le=w._getFrameworks();return le.length&&(x.fw=le.join(",")),`${b}?${(0,fe.xO)(x).slice(1)}`}function oc(){return oc=(0,E.Z)(function*(w){const v=yield function sl(w){return Vd=Vd||function ml(w){return new Promise((v,b)=>{var x,K,le;function Je(){_s(),gapi.load("gapi.iframes",{callback:()=>{v(gapi.iframes.getContext())},ontimeout:()=>{_s(),b(ir(w,"network-request-failed"))},timeout:Ch.get()})}if(null!==(K=null===(x=qs().gapi)||void 0===x?void 0:x.iframes)&&void 0!==K&&K.Iframe)v(gapi.iframes.getContext());else{if(null===(le=qs().gapi)||void 0===le||!le.load){const _t=ft("iframefcb");return qs()[_t]=()=>{gapi.load?Je():b(ir(w,"network-request-failed"))},vt(`https://apis.google.com/js/api.js?onload=${_t}`).catch(dn=>b(dn))}Je()}}).catch(v=>{throw Vd=null,v})}(w),Vd}(w),b=qs().gapi;return Ht(b,w,"internal-error"),v.open({where:document.body,url:hd(w),messageHandlersFilter:b.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hi,dontclear:!0},x=>new Promise(function(){var K=(0,E.Z)(function*(le,Je){yield x.restyle({setHideOnLeave:!1});const _t=ir(w,"network-request-failed"),dn=qs().setTimeout(()=>{Je(_t)},cd.get());function Bt(){qs().clearTimeout(dn),le(x)}x.ping(Bt).then(Bt,()=>{Je(_t)})});return function(le,Je){return K.apply(this,arguments)}}()))}),oc.apply(this,arguments)}const fd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ug{constructor(v){this.window=v,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ah="__/auth/handler",Bg="emulator/auth/handler",Vg=encodeURIComponent("fac");function Ap(w,v,b,x,K,le){return pd.apply(this,arguments)}function pd(){return(pd=(0,E.Z)(function*(w,v,b,x,K,le){Ht(w.config.authDomain,w,"auth-domain-config-required"),Ht(w.config.apiKey,w,"invalid-api-key");const Je={apiKey:w.config.apiKey,appName:w.name,authType:b,redirectUrl:x,v:Be.SDK_VERSION,eventId:K};if(v instanceof Z){v.setDefaultLanguage(w.languageCode),Je.providerId=v.providerId||"",(0,fe.xb)(v.getCustomParameters())||(Je.customParameters=JSON.stringify(v.getCustomParameters()));for(const[Un,Wn]of Object.entries(le||{}))Je[Un]=Wn}if(v instanceof W){const Un=v.getScopes().filter(Wn=>""!==Wn);Un.length>0&&(Je.scopes=Un.join(","))}w.tenantId&&(Je.tid=w.tenantId);const _t=Je;for(const Un of Object.keys(_t))void 0===_t[Un]&&delete _t[Un];const dn=yield w._getAppCheckToken(),Bt=dn?`#${Vg}=${encodeURIComponent(dn)}`:"";return`${function Xm({config:w}){return w.emulator?Sr(w,Bg):`https://${w.authDomain}/${Ah}`}(w)}?${(0,fe.xO)(_t).slice(1)}${Bt}`})).apply(this,arguments)}const gd="webStorageSupport",md=class $l{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$u,this._completeRedirectFn=Fn,this._overrideRedirectResult=to}_openPopup(v,b,x,K){var le=this;return(0,E.Z)(function*(){var Je;Hn(null===(Je=le.eventManagers[v._key()])||void 0===Je?void 0:Je.manager,"_initialize() not called before _openPopup()");const _t=yield Ap(v,b,x,tn(),K);return function xp(w,v,b,x=500,K=600){const le=Math.max((window.screen.availHeight-K)/2,0).toString(),Je=Math.max((window.screen.availWidth-x)/2,0).toString();let _t="";const dn=Object.assign(Object.assign({},fd),{width:x.toString(),height:K.toString(),top:le,left:Je}),Bt=(0,fe.z$)().toLowerCase();b&&(_t=Ra(Bt)?"_blank":b),Hs(Bt)&&(v=v||"http://localhost",dn.scrollbars="yes");const Un=Object.entries(dn).reduce((zr,[zi,ma])=>`${zr}${zi}=${ma},`,"");if(function _a(w=(0,fe.z$)()){var v;return Wi(w)&&!(null===(v=window.navigator)||void 0===v||!v.standalone)}(Bt)&&"_self"!==_t)return function Dp(w,v){const b=document.createElement("a");b.href=w,b.target=v;const x=document.createEvent("MouseEvent");x.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),b.dispatchEvent(x)}(v||"",_t),new Ug(null);const Wn=window.open(v||"",_t,Un);Ht(Wn,w,"popup-blocked");try{Wn.focus()}catch{}return new Ug(Wn)}(v,_t,Qr())})()}_openRedirect(v,b,x,K){var le=this;return(0,E.Z)(function*(){return yield le._originValidation(v),function Ps(w){qs().location.href=w}(yield Ap(v,b,x,tn(),K)),new Promise(()=>{})})()}_initialize(v){const b=v._key();if(this.eventManagers[b]){const{manager:K,promise:le}=this.eventManagers[b];return K?Promise.resolve(K):(Hn(le,"If manager is not set, promise should be"),le)}const x=this.initAndGetManager(v);return this.eventManagers[b]={promise:x},x.catch(()=>{delete this.eventManagers[b]}),x}initAndGetManager(v){var b=this;return(0,E.Z)(function*(){const x=yield function Ip(w){return oc.apply(this,arguments)}(v),K=new To(v);return x.register("authEvent",le=>(Ht(le?.authEvent,v,"invalid-auth-event"),{status:K.onEvent(le.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),b.eventManagers[v._key()]={manager:K},b.iframes[v._key()]=x,K})()}_isIframeWebStorageSupported(v,b){this.iframes[v._key()].send(gd,{type:gd},K=>{var le;const Je=null===(le=K?.[0])||void 0===le?void 0:le[gd];void 0!==Je&&b(!!Je),Rr(v,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(v){const b=v._key();return this.originValidationPromises[b]||(this.originValidationPromises[b]=function Wu(w){return Oc.apply(this,arguments)}(v)),this.originValidationPromises[b]}get _shouldInitProactively(){return oa()||Lo()||Wi()}};class Nf{constructor(v){this.factorId=v}_process(v,b,x){switch(b.type){case"enroll":return this._finalizeEnroll(v,b.credential,x);case"signin":return this._finalizeSignIn(v,b.credential);default:return sr("unexpected MultiFactorSessionType")}}}class $d extends Nf{constructor(v){super("phone"),this.credential=v}static _fromCredential(v){return new $d(v)}_finalizeEnroll(v,b,x){return function mn(w,v){return Vr(w,"POST","/v2/accounts/mfaEnrollment:finalize",Tn(w,v))}(v,{idToken:b,displayName:x,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(v,b){return function Qi(w,v){return Vr(w,"POST","/v2/accounts/mfaSignIn:finalize",Tn(w,v))}(v,{mfaPendingCredential:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Hg=(()=>{class w{constructor(){}static assertion(b){return $d._fromCredential(b)}}return w.FACTOR_ID="phone",w})();var vd="@firebase/auth";class kh{constructor(v){this.auth=v,this.internalListeners=new Map}getUid(){var v;return this.assertAuthConfigured(),(null===(v=this.auth.currentUser)||void 0===v?void 0:v.uid)||null}getToken(v){var b=this;return(0,E.Z)(function*(){return b.assertAuthConfigured(),yield b.auth._initializationPromise,b.auth.currentUser?{accessToken:yield b.auth.currentUser.getIdToken(v)}:null})()}addAuthTokenListener(v){if(this.assertAuthConfigured(),this.internalListeners.has(v))return;const b=this.auth.onIdTokenChanged(x=>{v(x?.stsTokenManager.accessToken||null)});this.internalListeners.set(v,b),this.updateProactiveRefresh()}removeAuthTokenListener(v){this.assertAuthConfigured();const b=this.internalListeners.get(v);b&&(this.internalListeners.delete(v),b(),this.updateProactiveRefresh())}assertAuthConfigured(){Ht(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function qu(){return window}(0,fe.Pz)("authIdTokenMaxAge"),function uc(w){(0,Be._registerComponent)(new Ut.wA("auth",(v,{options:b})=>{const x=v.getProvider("app").getImmediate(),K=v.getProvider("heartbeat"),le=v.getProvider("app-check-internal"),{apiKey:Je,authDomain:_t}=x.options;Ht(Je&&!Je.includes(":"),"invalid-api-key",{appName:x.name});const dn={apiKey:Je,authDomain:_t,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gs(w)},Bt=new Er(x,K,le,dn);return function Ri(w,v){const b=v?.persistence||[],x=(Array.isArray(b)?b:[b]).map(Fi);v?.errorMap&&w._updateErrorMap(v.errorMap),w._initializeWithPersistence(x,v?.popupRedirectResolver)}(Bt,b),Bt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((v,b,x)=>{v.getProvider("auth-internal").initialize()})),(0,Be._registerComponent)(new Ut.wA("auth-internal",v=>{const b=$r(v.getProvider("auth").getImmediate());return new kh(b)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Be.registerVersion)(vd,"0.23.2",function ac(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,Be.registerVersion)(vd,"0.23.2","esm2017")}("Browser");function Rh(){return Rh=(0,E.Z)(function*(w,v,b){var x;const{BuildInfo:K}=qu();Hn(v.sessionId,"AuthEvent did not contain a session ID");const le=yield function Wd(w){return Ou.apply(this,arguments)}(v.sessionId),Je={};return Wi()?Je.ibi=K.packageName:$s()?Je.apn=K.packageName:Rr(w,"operation-not-supported-in-this-environment"),K.displayName&&(Je.appDisplayName=K.displayName),Je.sessionId=le,Ap(w,b,v.type,void 0,null!==(x=v.eventId)&&void 0!==x?x:void 0,Je)}),Rh.apply(this,arguments)}function Ku(){return(Ku=(0,E.Z)(function*(w){const{BuildInfo:v}=qu(),b={};Wi()?b.iosBundleId=v.packageName:$s()?b.androidPackageName=v.packageName:Rr(w,"operation-not-supported-in-this-environment"),yield Zo(w,b)})).apply(this,arguments)}function zd(){return(zd=(0,E.Z)(function*(w,v,b){const{cordova:x}=qu();let K=()=>{};try{yield new Promise((le,Je)=>{let _t=null;function dn(){var Wn;le();const zr=null===(Wn=x.plugins.browsertab)||void 0===Wn?void 0:Wn.close;"function"==typeof zr&&zr(),"function"==typeof b?.close&&b.close()}function Bt(){_t||(_t=window.setTimeout(()=>{Je(ir(w,"redirect-cancelled-by-user"))},2e3))}function Un(){"visible"===document?.visibilityState&&Bt()}v.addPassiveListener(dn),document.addEventListener("resume",Bt,!1),$s()&&document.addEventListener("visibilitychange",Un,!1),K=()=>{v.removePassiveListener(dn),document.removeEventListener("resume",Bt,!1),document.removeEventListener("visibilitychange",Un,!1),_t&&window.clearTimeout(_t)}})}finally{K()}})).apply(this,arguments)}function Ou(){return(Ou=(0,E.Z)(function*(w){const v=function Nh(w){if(Hn(/[0-9a-zA-Z]+/.test(w),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(w);const v=new ArrayBuffer(w.length),b=new Uint8Array(v);for(let x=0;x<w.length;x++)b[x]=w.charCodeAt(x);return b}(w),b=yield crypto.subtle.digest("SHA-256",v);return Array.from(new Uint8Array(b)).map(K=>K.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class qd extends To{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(v=>{this.resolveInialized=v})}addPassiveListener(v){this.passiveListeners.add(v)}removePassiveListener(v){this.passiveListeners.delete(v)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(v){return this.resolveInialized(),this.passiveListeners.forEach(b=>b(v)),super.onEvent(v)}initialized(){var v=this;return(0,E.Z)(function*(){yield v.initPromise})()}}function Lh(w){return _d.apply(this,arguments)}function _d(){return(_d=(0,E.Z)(function*(w){const v=yield Fh()._get(Nc(w));return v&&(yield Fh()._remove(Nc(w))),v})).apply(this,arguments)}function jf(){const w=[];for(let b=0;b<20;b++){const x=Math.floor(62*Math.random());w.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(x))}return w.join("")}function Fh(){return Fi(Ir)}function Nc(w){return Fs("authEvent",w.config.apiKey,w.name)}function Lc(w){if(!w?.includes("?"))return{};const[v,...b]=w.split("?");return(0,fe.zd)(b.join("?"))}const jc=class Fc{constructor(){this._redirectPersistence=$u,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fn,this._overrideRedirectResult=to}_initialize(v){var b=this;return(0,E.Z)(function*(){const x=v._key();let K=b.eventManagers.get(x);return K||(K=new qd(v),b.eventManagers.set(x,K),b.attachCallbackListeners(v,K)),K})()}_openPopup(v){Rr(v,"operation-not-supported-in-this-environment")}_openRedirect(v,b,x,K){var le=this;return(0,E.Z)(function*(){!function ga(w){var v,b,x,K,le,Je,_t,dn,Bt,Un;const Wn=qu();Ht("function"==typeof(null===(v=Wn?.universalLinks)||void 0===v?void 0:v.subscribe),w,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ht(typeof(null===(b=Wn?.BuildInfo)||void 0===b?void 0:b.packageName)<"u",w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ht("function"==typeof(null===(le=null===(K=null===(x=Wn?.cordova)||void 0===x?void 0:x.plugins)||void 0===K?void 0:K.browsertab)||void 0===le?void 0:le.openUrl),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ht("function"==typeof(null===(dn=null===(_t=null===(Je=Wn?.cordova)||void 0===Je?void 0:Je.plugins)||void 0===_t?void 0:_t.browsertab)||void 0===dn?void 0:dn.isAvailable),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ht("function"==typeof(null===(Un=null===(Bt=Wn?.cordova)||void 0===Bt?void 0:Bt.InAppBrowser)||void 0===Un?void 0:Un.open),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(v);const Je=yield le._initialize(v);yield Je.initialized(),Je.resetRedirect(),function ri(){au.clear()}(),yield le._originValidation(v);const _t=function kp(w,v,b=null){return{type:v,eventId:b,urlResponse:null,sessionId:jf(),postBody:null,tenantId:w.tenantId,error:ir(w,"no-auth-event")}}(v,x,K);yield function vi(w,v){return Fh()._set(Nc(w),v)}(v,_t);const dn=yield function lc(w,v,b){return Rh.apply(this,arguments)}(v,_t,b),Bt=yield function Lf(w){const{cordova:v}=qu();return new Promise(b=>{v.plugins.browsertab.isAvailable(x=>{let K=null;x?v.plugins.browsertab.openUrl(w):K=v.InAppBrowser.open(w,function ya(w=(0,fe.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}()?"_blank":"_system","location=yes"),b(K)})})}(dn);return function cu(w,v,b){return zd.apply(this,arguments)}(v,Je,Bt)})()}_isIframeWebStorageSupported(v,b){throw new Error("Method not implemented.")}_originValidation(v){const b=v._key();return this.originValidationPromises[b]||(this.originValidationPromises[b]=function Mp(w){return Ku.apply(this,arguments)}(v)),this.originValidationPromises[b]}attachCallbackListeners(v,b){const{universalLinks:x,handleOpenURL:K,BuildInfo:le}=qu(),Je=setTimeout((0,E.Z)(function*(){yield Lh(v),b.onEvent(Gl())}),500),_t=function(){var Un=(0,E.Z)(function*(Wn){clearTimeout(Je);const zr=yield Lh(v);let zi=null;zr&&Wn?.url&&(zi=function Ff(w,v){var b,x;const K=function Gg(w){const v=Lc(w),b=v.link?decodeURIComponent(v.link):void 0,x=Lc(b).link,K=v.deep_link_id?decodeURIComponent(v.deep_link_id):void 0;return Lc(K).link||K||x||b||w}(v);if(K.includes("/__/auth/callback")){const le=Lc(K),Je=le.firebaseError?function $g(w){try{return JSON.parse(w)}catch{return null}}(decodeURIComponent(le.firebaseError)):null,_t=null===(x=null===(b=Je?.code)||void 0===b?void 0:b.split("auth/"))||void 0===x?void 0:x[1],dn=_t?ir(_t):null;return dn?{type:w.type,eventId:w.eventId,tenantId:w.tenantId,error:dn,urlResponse:null,sessionId:null,postBody:null}:{type:w.type,eventId:w.eventId,tenantId:w.tenantId,sessionId:w.sessionId,urlResponse:K,postBody:null}}return null}(zr,Wn.url)),b.onEvent(zi||Gl())});return function(zr){return Un.apply(this,arguments)}}();typeof x<"u"&&"function"==typeof x.subscribe&&x.subscribe(null,_t);const dn=K,Bt=`${le.packageName.toLowerCase()}://`;qu().handleOpenURL=function(){var Un=(0,E.Z)(function*(Wn){if(Wn.toLowerCase().startsWith(Bt)&&_t({url:Wn}),"function"==typeof dn)try{dn(Wn)}catch(zr){console.error(zr)}});return function(Wn){return Un.apply(this,arguments)}}()}};function Gl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ir("no-auth-event")}}function Nu(){var w;return(null===(w=self?.location)||void 0===w?void 0:w.protocol)||null}function Rp(w=(0,fe.z$)()){return!("file:"!==Nu()&&"ionic:"!==Nu()&&"capacitor:"!==Nu()||!w.toLowerCase().match(/iphone|ipad|ipod|android/))}function Np(){try{const w=self.localStorage,v=Qr();if(w)return w.setItem(v,"1"),w.removeItem(v),!function zg(w=(0,fe.z$)()){return function bd(){return(0,fe.w1)()&&11===document?.documentMode}()||function Kd(w=(0,fe.z$)()){return/Edge\/\d+/.test(w)}(w)}()||(0,fe.hl)()}catch{return Td()&&(0,fe.hl)()}return!1}function Td(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Bf(){return(function Uf(){return"http:"===Nu()||"https:"===Nu()}()||(0,fe.ru)()||Rp())&&!function no(){return(0,fe.b$)()||(0,fe.UG)()}()&&Np()&&!Td()}function Lp(){return Rp()&&typeof document<"u"}function Zu(){return(Zu=(0,E.Z)(function*(){return!!Lp()&&new Promise(w=>{const v=setTimeout(()=>{w(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(v),w(!0)})})})).apply(this,arguments)}const zn={LOCAL:"local",NONE:"none",SESSION:"session"},dc=Ht,Uc="persistence";function Bc(w){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,E.Z)(function*(w){yield w._initializationPromise;const v=Go(),b=Fs(Uc,w.config.apiKey,w.name);v&&v.setItem(b,w._getPersistence())})).apply(this,arguments)}function Go(){var w;try{return(null===(w=function Uh(){return typeof window<"u"?window:null}())||void 0===w?void 0:w.sessionStorage)||null}catch{return null}}const Bh=Ht;class Ls{constructor(){this.browserResolver=Fi(md),this.cordovaResolver=Fi(jc),this.underlyingResolver=null,this._redirectPersistence=$u,this._completeRedirectFn=Fn,this._overrideRedirectResult=to}_initialize(v){var b=this;return(0,E.Z)(function*(){return yield b.selectUnderlyingResolver(),b.assertedUnderlyingResolver._initialize(v)})()}_openPopup(v,b,x,K){var le=this;return(0,E.Z)(function*(){return yield le.selectUnderlyingResolver(),le.assertedUnderlyingResolver._openPopup(v,b,x,K)})()}_openRedirect(v,b,x,K){var le=this;return(0,E.Z)(function*(){return yield le.selectUnderlyingResolver(),le.assertedUnderlyingResolver._openRedirect(v,b,x,K)})()}_isIframeWebStorageSupported(v,b){this.assertedUnderlyingResolver._isIframeWebStorageSupported(v,b)}_originValidation(v){return this.assertedUnderlyingResolver._originValidation(v)}get _shouldInitProactively(){return Lp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Bh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var v=this;return(0,E.Z)(function*(){if(v.underlyingResolver)return;const b=yield function Ed(){return Zu.apply(this,arguments)}();v.underlyingResolver=b?v.cordovaResolver:v.browserResolver})()}}function yi(w){return w.unwrap()}function Zd(w){return Id(w)}function Id(w){const{_tokenResponse:v}=w instanceof fe.ZR?w.customData:w;if(!v)return null;if(!(w instanceof fe.ZR)&&"temporaryProof"in v&&"phoneNumber"in v)return Pc.credentialFromResult(w);const b=v.providerId;if(!b||b===qt.PASSWORD)return null;let x;switch(b){case qt.GOOGLE:x=qn;break;case qt.FACEBOOK:x=$t;break;case qt.GITHUB:x=fs;break;case qt.TWITTER:x=dt;break;default:const{oauthIdToken:K,oauthAccessToken:le,oauthTokenSecret:Je,pendingToken:_t,nonce:dn}=v;return le||Je||K||_t?_t?b.startsWith("saml.")?ee._create(b,_t):Xr._fromParams({providerId:b,signInMethod:b,pendingToken:_t,idToken:K,accessToken:le}):new ke(b).credential({idToken:K,accessToken:le,rawNonce:dn}):null}return w instanceof fe.ZR?x.credentialFromError(w):x.credentialFromResult(w)}function ra(w,v){return v.catch(b=>{throw b instanceof fe.ZR&&function Cd(w,v){var b;const x=null===(b=v.customData)||void 0===b?void 0:b._tokenResponse;if("auth/multi-factor-auth-required"===v?.code)v.resolver=new Tu(w,function Bn(w,v){var b;const x=(0,fe.m9)(w),K=v;return Ht(v.customData.operationType,x,"argument-error"),Ht(null===(b=K.customData._serverResponse)||void 0===b?void 0:b.mfaPendingCredential,x,"argument-error"),wa._fromError(x,K)}(w,v));else if(x){const K=Id(v),le=v;K&&(le.credential=K,le.tenantId=x.tenantId||void 0,le.email=x.email||void 0,le.phoneNumber=x.phoneNumber||void 0)}}(w,b),b}).then(b=>{const K=b.user;return{operationType:b.operationType,credential:Zd(b),additionalUserInfo:nd(b),user:Yu.getOrCreate(K)}})}function Hf(w,v){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,E.Z)(function*(w,v){const b=yield v;return{verificationId:b.verificationId,confirm:x=>ra(w,b.confirm(x))}})).apply(this,arguments)}class Tu{constructor(v,b){this.resolver=b,this.auth=function wd(w){return w.wrapped()}(v)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(v){return ra(yi(this.auth),this.resolver.resolveSignIn(v))}}class Yu{constructor(v){this._delegate=v,this.multiFactor=function Th(w){const v=(0,fe.m9)(w);return fl.has(v)||fl.set(v,xc._fromUser(v)),fl.get(v)}(v)}static getOrCreate(v){return Yu.USER_MAP.has(v)||Yu.USER_MAP.set(v,new Yu(v)),Yu.USER_MAP.get(v)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(v){return this._delegate.getIdTokenResult(v)}getIdToken(v){return this._delegate.getIdToken(v)}linkAndRetrieveDataWithCredential(v){return this.linkWithCredential(v)}linkWithCredential(v){var b=this;return(0,E.Z)(function*(){return ra(b.auth,Co(b._delegate,v))})()}linkWithPhoneNumber(v,b){var x=this;return(0,E.Z)(function*(){return Hf(x.auth,function Mc(w,v,b){return kf.apply(this,arguments)}(x._delegate,v,b))})()}linkWithPopup(v){var b=this;return(0,E.Z)(function*(){return ra(b.auth,function ic(w,v,b){return na.apply(this,arguments)}(b._delegate,v,Ls))})()}linkWithRedirect(v){var b=this;return(0,E.Z)(function*(){return yield Bc($r(b.auth)),ze(b._delegate,v,Ls)})()}reauthenticateAndRetrieveDataWithCredential(v){return this.reauthenticateWithCredential(v)}reauthenticateWithCredential(v){var b=this;return(0,E.Z)(function*(){return ra(b.auth,vu(b._delegate,v))})()}reauthenticateWithPhoneNumber(v,b){return Hf(this.auth,function kc(w,v,b){return Fl.apply(this,arguments)}(this._delegate,v,b))}reauthenticateWithPopup(v){return ra(this.auth,function il(w,v,b){return Rs.apply(this,arguments)}(this._delegate,v,Ls))}reauthenticateWithRedirect(v){var b=this;return(0,E.Z)(function*(){return yield Bc($r(b.auth)),O(b._delegate,v,Ls)})()}sendEmailVerification(v){return function Gi(w,v){return Jn.apply(this,arguments)}(this._delegate,v)}unlink(v){var b=this;return(0,E.Z)(function*(){return yield function ns(w,v){return qi.apply(this,arguments)}(b._delegate,v),b})()}updateEmail(v){return function Sa(w,v){return _u((0,fe.m9)(w),v,null)}(this._delegate,v)}updatePassword(v){return function wc(w,v){return _u((0,fe.m9)(w),null,v)}(this._delegate,v)}updatePhoneNumber(v){return function Sh(w,v){return jl.apply(this,arguments)}(this._delegate,v)}updateProfile(v){return function tu(w,v){return jr.apply(this,arguments)}(this._delegate,v)}verifyBeforeUpdateEmail(v,b){return function xo(w,v,b){return Do.apply(this,arguments)}(this._delegate,v,b)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Yu.USER_MAP=new WeakMap;const yl=Ht;let zl=(()=>{class w{constructor(b,x){if(this.app=b,x.isInitialized())return this._delegate=x.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:K}=b.options;yl(K,"invalid-api-key",{appName:b.name}),yl(K,"invalid-api-key",{appName:b.name});const le=typeof window<"u"?Ls:void 0;this._delegate=x.initialize({options:{persistence:hc(K,b.name),popupRedirectResolver:le}}),this._delegate._updateErrorMap(pr),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Yu.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(b){this._delegate.languageCode=b}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(b){this._delegate.tenantId=b}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(b,x){!function js(w,v,b){const x=$r(w);Ht(x._canInitEmulator,x,"emulator-config-failed"),Ht(/^https?:\/\//.test(v),x,"invalid-emulator-scheme");const K=!!b?.disableWarnings,le=Bi(v),{host:Je,port:_t}=function Dr(w){const v=Bi(w),b=/(\/\/)?([^?#/]+)/.exec(w.substr(v.length));if(!b)return{host:"",port:null};const x=b[2].split("@").pop()||"",K=/^(\[[^\]]+\])(:|$)/.exec(x);if(K){const le=K[1];return{host:le,port:wo(x.substr(le.length+1))}}{const[le,Je]=x.split(":");return{host:le,port:wo(Je)}}}(v);x.config.emulator={url:`${le}//${Je}${null===_t?"":`:${_t}`}/`},x.settings.appVerificationDisabledForTesting=!0,x.emulatorConfig=Object.freeze({host:Je,port:_t,protocol:le.replace(":",""),options:Object.freeze({disableWarnings:K})}),K||function Qo(){function w(){const v=document.createElement("p"),b=v.style;v.innerText="Running in emulator mode. Do not use with production credentials.",b.position="fixed",b.width="100%",b.backgroundColor="#ffffff",b.border=".1em solid #000000",b.color="#b50000",b.bottom="0px",b.left="0px",b.margin="0px",b.zIndex="10000",b.textAlign="center",v.classList.add("firebase-emulator-warning"),document.body.appendChild(v)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}(this._delegate,b,x)}applyActionCode(b){return function Vu(w,v){return li.apply(this,arguments)}(this._delegate,b)}checkActionCode(b){return Ja(this._delegate,b)}confirmPasswordReset(b,x){return function Xa(w,v,b){return Bu.apply(this,arguments)}(this._delegate,b,x)}createUserWithEmailAndPassword(b,x){var K=this;return(0,E.Z)(function*(){return ra(K._delegate,function z(w,v,b){return Ie.apply(this,arguments)}(K._delegate,b,x))})()}fetchProvidersForEmail(b){return this.fetchSignInMethodsForEmail(b)}fetchSignInMethodsForEmail(b){return function us(w,v){return fi.apply(this,arguments)}(this._delegate,b)}isSignInWithEmailLink(b){return function ur(w,v){const b=ta.parseLink(v);return"EMAIL_SIGNIN"===b?.operation}(0,b)}getRedirectResult(){var b=this;return(0,E.Z)(function*(){yl(Bf(),b._delegate,"operation-not-supported-in-this-environment");const x=yield function Ft(w,v){return Kn.apply(this,arguments)}(b._delegate,Ls);return x?ra(b._delegate,Promise.resolve(x)):{credential:null,user:null}})()}addFrameworkForLogging(b){!function Pp(w,v){$r(w)._logFramework(v)}(this._delegate,b)}onAuthStateChanged(b,x,K){const{next:le,error:Je,complete:_t}=St(b,x,K);return this._delegate.onAuthStateChanged(le,Je,_t)}onIdTokenChanged(b,x,K){const{next:le,error:Je,complete:_t}=St(b,x,K);return this._delegate.onIdTokenChanged(le,Je,_t)}sendSignInLinkToEmail(b,x){return function Lt(w,v,b){return zt.apply(this,arguments)}(this._delegate,b,x)}sendPasswordResetEmail(b,x){return function Iu(w,v,b){return ks.apply(this,arguments)}(this._delegate,b,x||void 0)}setPersistence(b){var x=this;return(0,E.Z)(function*(){let K;switch(function Sd(w,v){dc(Object.values(zn).includes(v),w,"invalid-persistence-type"),(0,fe.b$)()?dc(v!==zn.SESSION,w,"unsupported-persistence-type"):(0,fe.UG)()?dc(v===zn.NONE,w,"unsupported-persistence-type"):Td()?dc(v===zn.NONE||v===zn.LOCAL&&(0,fe.hl)(),w,"unsupported-persistence-type"):dc(v===zn.NONE||Np(),w,"unsupported-persistence-type")}(x._delegate,b),b){case zn.SESSION:K=$u;break;case zn.LOCAL:K=(yield Fi(Yi)._isAvailable())?Yi:Ir;break;case zn.NONE:K=go;break;default:return Rr("argument-error",{appName:x._delegate.name})}return x._delegate.setPersistence(K)})()}signInAndRetrieveDataWithCredential(b){return this.signInWithCredential(b)}signInAnonymously(){return ra(this._delegate,function Pr(w){return Mr.apply(this,arguments)}(this._delegate))}signInWithCredential(b){return ra(this._delegate,Vi(this._delegate,b))}signInWithCustomToken(b){return ra(this._delegate,function Ya(w,v){return Qa.apply(this,arguments)}(this._delegate,b))}signInWithEmailAndPassword(b,x){return ra(this._delegate,function Ge(w,v,b){return Vi((0,fe.m9)(w),ne.credential(v,b))}(this._delegate,b,x))}signInWithEmailLink(b,x){return ra(this._delegate,function ti(w,v,b){return mi.apply(this,arguments)}(this._delegate,b,x))}signInWithPhoneNumber(b,x){return Hf(this._delegate,function Eh(w,v,b){return Ll.apply(this,arguments)}(this._delegate,b,x))}signInWithPopup(b){var x=this;return(0,E.Z)(function*(){return yl(Bf(),x._delegate,"operation-not-supported-in-this-environment"),ra(x._delegate,function Vl(w,v,b){return ou.apply(this,arguments)}(x._delegate,b,Ls))})()}signInWithRedirect(b){var x=this;return(0,E.Z)(function*(){return yl(Bf(),x._delegate,"operation-not-supported-in-this-environment"),yield Bc(x._delegate),fa(x._delegate,b,Ls)})()}updateCurrentUser(b){return this._delegate.updateCurrentUser(b)}verifyPasswordResetCode(b){return function B(w,v){return he.apply(this,arguments)}(this._delegate,b)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return w.Persistence=zn,w})();function St(w,v,b){let x=w;"function"!=typeof w&&({next:x,error:v,complete:b}=w);const K=x;return{next:Je=>K(Je&&Yu.getOrCreate(Je)),error:v,complete:b}}function hc(w,v){const b=function Vf(w,v){const b=Go();if(!b)return[];const x=Fs(Uc,w,v);switch(b.getItem(x)){case zn.NONE:return[go];case zn.LOCAL:return[Yi,$u];case zn.SESSION:return[$u];default:return[]}}(w,v);if(typeof self<"u"&&!b.includes(Yi)&&b.push(Yi),typeof window<"u")for(const x of[Ir,$u])b.includes(x)||b.push(x);return b.includes(go)||b.push(go),b}class Wl{constructor(){this.providerId="phone",this._delegate=new Pc(yi(N.Z.auth()))}static credential(v,b){return Pc.credential(v,b)}verifyPhoneNumber(v,b){return this._delegate.verifyPhoneNumber(v,b)}unwrap(){return this._delegate}}Wl.PHONE_SIGN_IN_METHOD=Pc.PHONE_SIGN_IN_METHOD,Wl.PROVIDER_ID=Pc.PROVIDER_ID;const al=Ht;class Yd{constructor(v,b,x=N.Z.app()){var K;al(null===(K=x.options)||void 0===K?void 0:K.apiKey,"invalid-api-key",{appName:x.name}),this._delegate=new Mf(v,b,x.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function fc(w){w.INTERNAL.registerComponent(new Ut.wA("auth-compat",v=>{const b=v.getProvider("app-compat").getImmediate(),x=v.getProvider("auth");return new zl(b,x)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ne,FacebookAuthProvider:$t,GithubAuthProvider:fs,GoogleAuthProvider:qn,OAuthProvider:ke,SAMLAuthProvider:et,PhoneAuthProvider:Wl,PhoneMultiFactorGenerator:Hg,RecaptchaVerifier:Yd,TwitterAuthProvider:dt,Auth:zl,AuthCredential:oo,Error:fe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),w.registerVersion("@firebase/auth-compat","0.4.2")}(N.Z)},1094:(en,ut,X)=>{"use strict";X.d(ut,{Z6:()=>Ye,np:()=>wt});var E=X(5861),N=X(6547),fe=X(4755),Be=X(2142);const _e=new N.OlP("ngx-mask config"),xe=new N.OlP("new ngx-mask config"),He=new N.OlP("initial ngx-mask config"),Re={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,triggerOnMaskChange:!1,maskFilled:new N.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},Ue=["Hh:m0:s0","Hh:m0","m0:s0"],ye=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let Ae=(()=>{class Ze{constructor(){this._config=(0,N.f3M)(_e),this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.hiddenInput=this._config.hiddenInput,this.clearIfNotMatch=this._config.clearIfNotMatch,this.specialCharacters=this._config.specialCharacters,this.patterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime,this._shift=new Set,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(q,ge,re,Ct)=>{let bt=[],st="";if(Array.isArray(re)){const Rt=new RegExp(re.map(xt=>"[\\^$.|?*+()".indexOf(xt)>=0?`\\${xt}`:xt).join("|"));bt=q.split(Rt),st=q.match(Rt)?.[0]??""}else bt=q.split(re),st=re;const Y=bt.length>1?`${st}${bt[1]}`:"";let Te=bt[0]??"";const Xe=this.separatorLimit.replace(/\s/g,"");Xe&&+Xe&&(Te="-"===Te[0]?`-${Te.slice(1,Te.length).slice(0,Xe.length)}`:Te.slice(0,Xe.length));const ot=/(\d+)(\d{3})/;for(;ge&&ot.test(Te);)Te=Te.replace(ot,"$1"+ge+"$2");return void 0===Ct?Te+Y:0===Ct?Te:Te+Y.substring(0,Ct+1)},this.percentage=q=>Number(q)>=0&&Number(q)<=100,this.getPrecision=q=>{const ge=q.split(".");return ge.length>1?Number(ge[ge.length-1]):1/0},this.checkAndRemoveSuffix=q=>{for(let ge=this.suffix?.length-1;ge>=0;ge--){const re=this.suffix.substring(ge,this.suffix?.length);if(q.includes(re)&&ge!==this.suffix?.length-1&&(ge-1<0||!q.includes(this.suffix.substring(ge-1,this.suffix?.length))))return q.replace(re,"")}return q},this.checkInputPrecision=(q,ge,re)=>{if(ge<1/0){if(Array.isArray(re)){const Y=re.find(Te=>Te!==this.thousandSeparator);re=Y||re[0]}const Ct=new RegExp(this._charToRegExpExpression(re)+`\\d{${ge}}.*$`),bt=q.match(Ct),st=(bt&&bt[0]?.length)??0;st-1>ge&&(q=q.substring(0,q.length-(st-1-ge))),0===ge&&this._compareOrIncludes(q[q.length-1],re,this.thousandSeparator)&&(q=q.substring(0,q.length-1))}return q}}applyMaskWithPattern(q,ge){const[re,Ct]=ge;return this.customPattern=Ct,this.applyMask(q,re)}applyMask(q,ge,re=0,Ct=!1,bt=!1,st=(()=>{})){if(!ge||"string"!=typeof q)return"";let Y=0,Te="",Xe=!1,ot=!1,Rt=1,xt=!1;q.slice(0,this.prefix.length)===this.prefix&&(q=q.slice(this.prefix.length,q.length)),this.suffix&&q?.length>0&&(q=this.checkAndRemoveSuffix(q));const Wt=q.toString().split("");if("IP"===ge){const Vt=q.split(".");this.ipError=this._validIP(Vt),ge="099.099.099.099"}const Sn=[];for(let Vt=0;Vt<q.length;Vt++)q[Vt]?.match("\\d")&&Sn.push(q[Vt]??"");if("CPF_CNPJ"===ge&&(this.cpfCnpjError=11!==Sn.length&&14!==Sn.length,ge=Sn.length>11?"00.000.000/0000-00":"000.000.000-00"),ge.startsWith("percent")){if(q.match("[a-z]|[A-Z]")||q.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){q=this._stripToDecimal(q);const Vt=this.getPrecision(ge);q=this.checkInputPrecision(q,Vt,this.decimalMarker)}q.indexOf(".")>0&&!this.percentage(q.substring(0,q.indexOf(".")))&&(q=`${q.substring(0,q.indexOf(".")-1)}${q.substring(q.indexOf("."),q.length)}`),Te=this.percentage(q)?q:q.substring(0,q.length-1)}else if(ge.startsWith("separator")){(q.match("[w\u0430-\u044f\u0410-\u042f]")||q.match("[\u0401\u0451\u0410-\u044f]")||q.match("[a-z]|[A-Z]")||q.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\]:";<>.?/]/)||q.match("[^A-Za-z0-9,]"))&&(q=this._stripToDecimal(q)),q=q.length>1&&"0"===q[0]&&q[1]!==this.thousandSeparator&&!this._compareOrIncludes(q[1],this.decimalMarker,this.thousandSeparator)&&!bt?q.slice(0,q.length-1):q,bt&&(q=this._compareOrIncludes(q[q.length-1],this.decimalMarker,this.thousandSeparator)?q.slice(0,q.length-1):q);const Vt=this._charToRegExpExpression(this.thousandSeparator);let qt='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(Vt,"");if(Array.isArray(this.decimalMarker))for(const pr of this.decimalMarker)qt=qt.replace(this._charToRegExpExpression(pr),"");else qt=qt.replace(this._charToRegExpExpression(this.decimalMarker),"");const En=new RegExp("["+qt+"]");(q.match(En)||1===q.length&&this._compareOrIncludes(q,this.decimalMarker,this.thousandSeparator))&&(q=q.substring(0,q.length-1));const on=this.getPrecision(ge),Jt=(q=this.checkInputPrecision(q,on,this.decimalMarker)).replace(new RegExp(Vt,"g"),"");Te=this._formatWithSeparators(Jt,this.thousandSeparator,this.decimalMarker,on);const Nn=Te.indexOf(",")-q.indexOf(","),Cn=Te.length-q.length;if(Cn>0&&","!==Te[re]){ot=!0;let pr=0;do{this._shift.add(re+pr),pr++}while(pr<Cn)}else 0!==Nn&&re>0&&!(Te.indexOf(",")>=re&&re>3)||!(Te.indexOf(".")>=re&&re>3)&&Cn<=0?(this._shift.clear(),ot=!0,Rt=Cn,this._shift.add(re+=Cn)):this._shift.clear()}else for(let Vt=0,qt=Wt[0];Vt<Wt.length&&Y!==ge.length;Vt++,qt=Wt[Vt]??"")if(this._checkSymbolMask(qt,ge[Y]??"")&&"?"===ge[Y+1])Te+=qt,Y+=2;else if("*"===ge[Y+1]&&Xe&&this._checkSymbolMask(qt,ge[Y+2]??""))Te+=qt,Y+=3,Xe=!1;else if(this._checkSymbolMask(qt,ge[Y]??"")&&"*"===ge[Y+1])Te+=qt,Xe=!0;else if("?"===ge[Y+1]&&this._checkSymbolMask(qt,ge[Y+2]??""))Te+=qt,Y+=3;else if(this._checkSymbolMask(qt,ge[Y]??"")){if("H"===ge[Y]&&Number(qt)>2){Y+=1,this._shiftStep(ge,Y,Wt.length),Vt--,this.leadZeroDateTime&&(Te+="0");continue}if("h"===ge[Y]&&"2"===Te&&Number(qt)>3){Y+=1,Vt--;continue}if("m"===ge[Y]&&Number(qt)>5){Y+=1,this._shiftStep(ge,Y,Wt.length),Vt--,this.leadZeroDateTime&&(Te+="0");continue}if("s"===ge[Y]&&Number(qt)>5){Y+=1,this._shiftStep(ge,Y,Wt.length),Vt--,this.leadZeroDateTime&&(Te+="0");continue}const En=31;if("d"===ge[Y]){const on="M0"===ge.slice(0,2),Jt="M0"===ge.slice(0,2)&&("/"===q[Y-2]||"."===q[Y-2]||"-"===q[Y-2]);if(Number(qt)>3&&this.leadZeroDateTime||!on&&(Number(q.slice(Y,Y+2))>En||Number(q.slice(Y-1,Y+1))>En||"/"===q[Y+1]||"-"===q[Y+1])||(Jt?Number(q.slice(Y-1,Y+1))>En||"/"!==q[Y]&&("."===q[Y+2]||"/"===q[Y+2]||"-"===q[Y+2])||"."===q[Y]||"/"===q[Y]||"-"===q[Y]:Number(q.slice(Y,Y+2))>En||"/"===q[Y+1]||"-"===q[Y+1]||"."===q[Y+1])){Y+=1,this._shiftStep(ge,Y,Wt.length),Vt--,this.leadZeroDateTime&&(Te+="0");continue}}if("M"===ge[Y]){const Jt=0===Y&&(Number(qt)>2||Number(q.slice(Y,Y+2))>12||"/"===q[Y+1]),Nn=q.slice(Y-3,Y-1).includes("/")&&("/"===q[Y-2]&&Number(q.slice(Y-1,Y+1))>12&&"/"!==q[Y]||"/"===q[Y]||"-"===q[Y]||"/"===q[Y-3]&&Number(q.slice(Y-2,Y))>12&&"/"!==q[Y-1]||"/"===q[Y-1]||"-"===q[Y-1]),Cn=Number(q.slice(Y-3,Y-1))<=En&&!q.slice(Y-3,Y-1).includes("/")&&("/"===q[Y-1]||"-"===q[Y-1])&&(Number(q.slice(Y,Y+2))>12||"/"===q[Y+1]||"-"===q[Y+1]),pr=Number(q.slice(Y,Y+2))>12&&5===Y||"."===q[Y+1]||"-"===q[Y+1]||"/"===q[Y+1],xr=Number(q.slice(Y-3,Y-1))>En&&!q.slice(Y-3,Y-1).includes("/")&&!q.slice(Y-2,Y).includes("/")&&Number(q.slice(Y-2,Y))>12,kr=Number(q.slice(Y-3,Y-1))<=En&&!q.slice(Y-3,Y-1).includes("/")&&"/"!==q[Y-1]&&Number(q.slice(Y-1,Y+1))>12;if(Number(qt)>1&&this.leadZeroDateTime||Jt||Nn||kr||xr||Cn||pr){Y+=1,this._shiftStep(ge,Y,Wt.length),Vt--,this.leadZeroDateTime&&(Te+="0");continue}}Te+=qt,Y++}else" "===qt&&" "===ge[Y]?(Te+=qt,Y++):-1!==this.specialCharacters.indexOf(ge[Y]??"")?(Te+=ge[Y],Y++,this._shiftStep(ge,Y,Wt.length),Vt--):"9"===ge[Y]&&this.showMaskTyped?this._shiftStep(ge,Y,Wt.length):this.specialCharacters.indexOf(qt)>-1&&this.patterns[ge[Y]??""]&&this.patterns[ge[Y]??""]?.optional?(Wt[Y]&&"099.099.099.099"!==ge&&"000.000.000-00"!==ge&&"00.000.000/0000-00"!==ge&&!ge.match(/^9+\.0+$/)&&(Te+=Wt[Y]),Y++,Vt--):"*"===this.maskExpression[Y+1]&&this._findSpecialChar(this.maskExpression[Y+2]??"")&&this._findSpecialChar(qt)===this.maskExpression[Y+2]&&Xe||"?"===this.maskExpression[Y+1]&&this._findSpecialChar(this.maskExpression[Y+2]??"")&&this._findSpecialChar(qt)===this.maskExpression[Y+2]&&Xe?(Y+=3,Te+=qt):this.showMaskTyped&&this.specialCharacters.indexOf(qt)<0&&qt!==this.placeHolderCharacter&&(xt=!0);Te.length+1===ge.length&&-1!==this.specialCharacters.indexOf(ge[ge.length-1]??"")&&(Te+=ge[ge.length-1]);let Yt=re+1;for(;this._shift.has(Yt);)Rt++,Yt++;let vn=Ct&&!ge.startsWith("separator")?Y:this._shift.has(re)?Rt:0;xt&&vn--,st(vn,ot),Rt<0&&this._shift.clear();let an=!1;bt&&(an=Wt.every(Vt=>this.specialCharacters.includes(Vt)));let Ut=`${this.prefix}${an?"":Te}${this.suffix}`;return 0===Te.length&&(Ut=`${this.prefix}${Te}`),Ut}_findSpecialChar(q){return this.specialCharacters.find(ge=>ge===q)}_checkSymbolMask(q,ge){return this.patterns=this.customPattern?this.customPattern:this.patterns,(this.patterns[ge]?.pattern&&this.patterns[ge]?.pattern.test(q))??!1}_stripToDecimal(q){return q.split("").filter((ge,re)=>{const Ct="string"==typeof this.decimalMarker?ge===this.decimalMarker:this.decimalMarker.includes(ge);return ge.match("^-?\\d")||ge===this.thousandSeparator||Ct||"-"===ge&&0===re&&this.allowNegativeNumbers}).join("")}_charToRegExpExpression(q){return q&&(" "===q?"\\s":"[\\^$.|?*+()".indexOf(q)>=0?`\\${q}`:q)}_shiftStep(q,ge,re){const Ct=/[*?]/g.test(q.slice(0,ge))?re:ge;this._shift.add(Ct+this.prefix.length||0)}_compareOrIncludes(q,ge,re){return Array.isArray(ge)?ge.filter(Ct=>Ct!==re).includes(q):q===ge}_validIP(q){return!(4===q.length&&!q.some((ge,re)=>q.length!==re+1?""===ge||Number(ge)>255:""===ge||Number(ge.substring(0,3))>255))}}return Ze.\u0275fac=function(q){return new(q||Ze)},Ze.\u0275prov=N.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze})(),Fe=(()=>{class Ze extends Ae{constructor(){super(...arguments),this.isNumberValue=!1,this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.triggerOnMaskChange=!1,this.onChange=q=>{},this.document=(0,N.f3M)(fe.K0),this._config=(0,N.f3M)(_e),this._elementRef=(0,N.f3M)(N.SBq,{optional:!0}),this._renderer=(0,N.f3M)(N.Qsj,{optional:!0})}applyMask(q,ge,re=0,Ct=!1,bt=!1,st=(()=>{})){if(!ge)return q!==this.actualValue?this.actualValue:q;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(q||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(q||"#")),!q&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const Y=q&&"number"==typeof this.selStart?q[this.selStart]??"":"";let Te="";if(void 0!==this.hiddenInput&&!this.writingValue){let xt=this.actualValue.split("");""!==q&&xt.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(q.length>xt.length?xt.splice(this.selStart,0,Y):q.length<xt.length&&(xt.length-q.length==1?xt.splice(this.selStart-1,1):xt.splice(this.selStart,this.selEnd-this.selStart))):xt=[],this.showMaskTyped&&(q=this.removeMask(q)),Te=this.actualValue.length&&xt.length<=q.length?this.shiftTypedSymbols(xt.join("")):q}this.showMaskTyped&&(q=this.removeMask(q)),Te=Te&&Te.length?Te:q;const Xe=super.applyMask(Te,ge,re,Ct,bt,st);if(this.actualValue=this.getActualValue(Xe),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.specialCharacters=this.specialCharacters.filter(xt=>!this._compareOrIncludes(xt,this.decimalMarker,this.thousandSeparator))),this.formControlResult(Xe),!this.showMaskTyped)return this.hiddenInput&&Xe&&Xe.length?this.hideInput(Xe,this.maskExpression):Xe;const ot=Xe.length,Rt=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const xt=this._numberSkipedSymbols(Xe);return Xe+Rt.slice(ot+xt)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?Xe+Rt:Xe+Rt.slice(ot)}_numberSkipedSymbols(q){const ge=/(^|\D)(\d\D)/g;let re=ge.exec(q),Ct=0;for(;null!=re;)Ct+=1,re=ge.exec(q);return Ct}applyValueChanges(q,ge,re,Ct=(()=>{})){const bt=this._elementRef?.nativeElement;bt&&(bt.value=this.applyMask(bt.value,this.maskExpression,q,ge,re,Ct),bt!==this._getActiveElement()&&this.clearIfNotMatchFn())}hideInput(q,ge){return q.split("").map((re,Ct)=>this.patterns&&this.patterns[ge[Ct]??""]&&this.patterns[ge[Ct]??""]?.symbol?this.patterns[ge[Ct]??""]?.symbol:re).join("")}getActualValue(q){const ge=q.split("").filter((re,Ct)=>{const bt=this.maskExpression[Ct]??"";return this._checkSymbolMask(re,bt)||this.specialCharacters.includes(bt)&&re===bt});return ge.join("")===q?ge.join(""):q}shiftTypedSymbols(q){let ge="";return(q&&q.split("").map((Ct,bt)=>{if(this.specialCharacters.includes(q[bt+1]??"")&&q[bt+1]!==this.maskExpression[bt+1])return ge=Ct,q[bt+1];if(ge.length){const st=ge;return ge="",st}return Ct})||[]).join("")}numberToString(q){return q||0===q?Number(q).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}):String(q)}showMaskInInput(q){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(q){if("IP"===this.maskExpression)return this._checkForIp(q);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(q)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const q=this._elementRef?.nativeElement;q&&this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==q.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(q.value,this.maskExpression))}set formElementProperty([q,ge]){!this._renderer||!this._elementRef||Promise.resolve().then(()=>this._renderer?.setProperty(this._elementRef?.nativeElement,q,ge))}checkSpecialCharAmount(q){return q.split("").filter(re=>this._findSpecialChar(re)).length}removeMask(q){return this._removeMask(this._removeSuffix(this._removePrefix(q)),this.specialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(q){if("#"===q)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const ge=[];for(let re=0;re<q.length;re++){const Ct=q[re]??"";Ct&&Ct.match("\\d")&&ge.push(Ct)}return ge.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:ge.length>3&&ge.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:ge.length>6&&ge.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(q){const ge=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,re=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===q)return ge;const Ct=[];for(let bt=0;bt<q.length;bt++){const st=q[bt]??"";st&&st.match("\\d")&&Ct.push(st)}return Ct.length<=3?ge.slice(Ct.length,ge.length):Ct.length>3&&Ct.length<=6?ge.slice(Ct.length+1,ge.length):Ct.length>6&&Ct.length<=9?ge.slice(Ct.length+2,ge.length):Ct.length>9&&Ct.length<11?ge.slice(Ct.length+3,ge.length):11===Ct.length?"":12===Ct.length?re.slice(17===q.length?16:15,re.length):Ct.length>12&&Ct.length<=14?re.slice(Ct.length+4,re.length):""}_getActiveElement(q=this.document){const ge=q?.activeElement?.shadowRoot;return ge?.activeElement?this._getActiveElement(ge):q.activeElement}formControlResult(q){this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._checkSymbols(this._removeMask(this._removeSuffix(this._removePrefix(q)),this.dropSpecialCharacters)))):this.onChange(this._toNumber(this.dropSpecialCharacters?this._checkSymbols(this._removeSuffix(this._removePrefix(q))):q))}_toNumber(q){if(!this.isNumberValue||""===q)return q;const ge=Number(q);return Number.isNaN(ge)?q:ge}_removeMask(q,ge){return q&&q.replace(this._regExpForRemove(ge),"")}_removePrefix(q){return this.prefix?q&&q.replace(this.prefix,""):q}_removeSuffix(q){return this.suffix?q&&q.replace(this.suffix,""):q}_retrieveSeparatorValue(q){const ge=Array.isArray(this.dropSpecialCharacters)?this.specialCharacters.filter(re=>this.dropSpecialCharacters.includes(re)):this.specialCharacters;return this._removeMask(q,ge)}_regExpForRemove(q){return new RegExp(q.map(ge=>`\\${ge}`).join("|"),"gi")}_replaceDecimalMarkerToDot(q){const ge=Array.isArray(this.decimalMarker)?this.decimalMarker:[this.decimalMarker];return q.replace(this._regExpForRemove(ge),".")}_checkSymbols(q){if(""===q)return q;const ge=this._retrieveSeparatorPrecision(this.maskExpression),re=this._replaceDecimalMarkerToDot(this._retrieveSeparatorValue(q));return this.isNumberValue&&ge?q===this.decimalMarker?null:this._checkPrecision(this.maskExpression,re):re}_retrieveSeparatorPrecision(q){const ge=q.match(new RegExp("^separator\\.([^d]*)"));return ge?Number(ge[1]):null}_checkPrecision(q,ge){return q.indexOf("2")>0?Number(ge).toFixed(2):Number(ge)}}return Ze.\u0275fac=function(){let lt;return function(ge){return(lt||(lt=N.n5z(Ze)))(ge||Ze)}}(),Ze.\u0275prov=N.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze})();function rt(){const Ze=(0,N.f3M)(He),lt=(0,N.f3M)(xe);return lt instanceof Function?{...Ze,...lt()}:{...Ze,...lt}}function wt(Ze){return(0,N.MR2)(function ce(Ze){return[{provide:xe,useValue:Ze},{provide:He,useValue:Re},{provide:_e,useFactory:rt},Fe]}(Ze))}let Ye=(()=>{class Ze{constructor(){this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.triggerOnMaskChange=null,this.maskFilled=new N.vpe,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.document=(0,N.f3M)(fe.K0),this._maskService=(0,N.f3M)(Fe,{self:!0}),this._config=(0,N.f3M)(_e),this.onChange=q=>{},this.onTouch=()=>{}}ngOnChanges(q){const{maskExpression:ge,specialCharacters:re,patterns:Ct,prefix:bt,suffix:st,thousandSeparator:Y,decimalMarker:Te,dropSpecialCharacters:Xe,hiddenInput:ot,showMaskTyped:Rt,placeHolderCharacter:xt,shownMaskExpression:Wt,showTemplate:Sn,clearIfNotMatch:Yt,validation:vn,separatorLimit:an,allowNegativeNumbers:Ut,leadZeroDateTime:Vt,triggerOnMaskChange:qt}=q;if(ge&&(ge.currentValue!==ge.previousValue&&!ge.firstChange&&(this._maskService.maskChanged=!0),ge.currentValue&&ge.currentValue.split("||").length>1?(this._maskExpressionArray=ge.currentValue.split("||").sort((En,on)=>En.length-on.length),this._setMask()):(this._maskExpressionArray=[],this._maskValue=ge.currentValue||"",this._maskService.maskExpression=this._maskValue)),re){if(!re.currentValue||!Array.isArray(re.currentValue))return;this._maskService.specialCharacters=re.currentValue||[]}Ct&&Ct.currentValue&&(this._maskService.patterns=Ct.currentValue),bt&&(this._maskService.prefix=bt.currentValue),st&&(this._maskService.suffix=st.currentValue),Y&&(this._maskService.thousandSeparator=Y.currentValue),Te&&(this._maskService.decimalMarker=Te.currentValue),Xe&&(this._maskService.dropSpecialCharacters=Xe.currentValue),ot&&(this._maskService.hiddenInput=ot.currentValue),Rt&&(this._maskService.showMaskTyped=Rt.currentValue),xt&&(this._maskService.placeHolderCharacter=xt.currentValue),Wt&&(this._maskService.shownMaskExpression=Wt.currentValue),Sn&&(this._maskService.showTemplate=Sn.currentValue),Yt&&(this._maskService.clearIfNotMatch=Yt.currentValue),vn&&(this._maskService.validation=vn.currentValue),an&&(this._maskService.separatorLimit=an.currentValue),Ut&&(this._maskService.allowNegativeNumbers=Ut.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.specialCharacters=this._maskService.specialCharacters.filter(En=>"-"!==En))),Vt&&(this._maskService.leadZeroDateTime=Vt.currentValue),qt&&(this._maskService.triggerOnMaskChange=qt.currentValue),this._applyMask()}validate({value:q}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(q);if(this._maskService.cpfCnpjError)return this._createValidationError(q);if(this._maskValue.startsWith("separator")||ye.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(Ue.includes(this._maskValue))return this._validateTime(q);if(q&&q.toString().length>=1){let ge=0;for(const re in this._maskService.patterns)if(this._maskService.patterns[re]?.optional&&(this._maskValue.indexOf(re)!==this._maskValue.lastIndexOf(re)?ge+=this._maskValue.split("").filter(bt=>bt===re).join("").length:-1!==this._maskValue.indexOf(re)&&ge++,-1!==this._maskValue.indexOf(re)&&q.toString().length>=this._maskValue.indexOf(re)||ge===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&q.toString().length===this._maskValue.length+Number((this._maskValue.split("{")[1]??"").split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&q.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&q.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(q);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const re=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-ge:this._maskValue.length-ge;if(q.toString().length<re)return this._createValidationError(q)}}return q&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onModelChange(q){(""===q||null==q)&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(q){const ge=q.target;if(this._inputValue=ge.value,this._setMask(),!this._maskValue)return void this.onChange(ge.value);let re=1===ge.selectionStart?ge.selectionStart+this._maskService.prefix.length:ge.selectionStart,Ct=0,bt=!1;if(this._maskService.applyValueChanges(re,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(Y,Te)=>{this._justPasted=!1,Ct=Y,bt=Te}),this._getActiveElement()!==ge)return;this._maskExpressionArray.length&&(re=1===ge.selectionStart?ge.selectionStart+this._maskService.prefix.length:ge.selectionStart),this._position=1===this._position&&1===this._inputValue.length?null:this._position;let st=this._position?this._inputValue.length+re+Ct:re+("Backspace"!==this._code||bt?Ct:0);st>this._getActualInputLength()&&(st=this._getActualInputLength()),st<0&&(st=0),ge.setSelectionRange(st,st),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onClick(q){if(!this._maskValue)return;const ge=q.target;null!==ge&&null!==ge.selectionStart&&ge.selectionStart===ge.selectionEnd&&ge.selectionStart>this._maskService.prefix.length&&38!==q.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),ge.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===ge.value?(ge.focus(),ge.setSelectionRange(0,0)):ge.selectionStart>this._maskService.actualValue.length&&ge.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const bt=ge&&(ge.value&&ge.value!==this._maskService.prefix?ge.value:this._maskService.prefix+this._maskService.maskIsShown);ge&&ge.value!==bt&&(ge.value=bt),ge&&(ge.selectionStart||ge.selectionEnd)<=this._maskService.prefix.length?ge.selectionStart=this._maskService.prefix.length:ge&&ge.selectionEnd>this._getActualInputLength()&&(ge.selectionEnd=this._getActualInputLength())}onKeyDown(q){if(!this._maskValue)return;this._code=q.code?q.code:q.key;const ge=q.target;if(this._inputValue=ge.value,this._setMask(),38===q.keyCode&&q.preventDefault(),37===q.keyCode||8===q.keyCode||46===q.keyCode){if(8===q.keyCode&&0===ge.value.length&&(ge.selectionStart=ge.selectionEnd),8===q.keyCode&&0!==ge.selectionStart)if(this.specialCharacters=this.specialCharacters?.length?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&ge.selectionStart<=this.prefix.length)ge.setSelectionRange(this.prefix.length,ge.selectionEnd);else if(this._inputValue.length!==ge.selectionStart&&1!==ge.selectionStart)for(;this.specialCharacters.includes((this._inputValue[ge.selectionStart-1]??"").toString())&&(this.prefix.length>=1&&ge.selectionStart>this.prefix.length||0===this.prefix.length);)ge.setSelectionRange(ge.selectionStart-1,ge.selectionEnd);this.checkSelectionOnDeletion(ge),this._maskService.prefix.length&&ge.selectionStart<=this._maskService.prefix.length&&ge.selectionEnd<=this._maskService.prefix.length&&q.preventDefault(),8===q.keyCode&&!ge.readOnly&&0===ge.selectionStart&&ge.selectionEnd===ge.value.length&&0!==ge.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<ge.selectionStart?ge.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===q.keyCode&&q.ctrlKey||65===q.keyCode&&q.metaKey)&&(ge.setSelectionRange(0,this._getActualInputLength()),q.preventDefault()),this._maskService.selStart=ge.selectionStart,this._maskService.selEnd=ge.selectionEnd}writeValue(q){var ge=this;return(0,E.Z)(function*(){if("object"==typeof q&&null!==q&&"value"in q&&("disable"in q&&ge.setDisabledState(!!q.disable),q=q.value),"number"==typeof q||ge._maskValue.startsWith("separator")){if(q=ge._maskService.numberToString(q),!Array.isArray(ge.decimalMarker)){const re=ge._currentLocaleDecimalMarker();q=ge.decimalMarker!==re?q.replace(re,ge.decimalMarker):q}ge._maskService.isNumberValue=!0}"string"!=typeof q&&(q=""),ge._inputValue=q,ge._setMask(),q&&ge._maskService.maskExpression||ge._maskService.maskExpression&&(ge._maskService.prefix||ge._maskService.showMaskTyped)?(ge._maskService.writingValue=!0,ge._maskService.formElementProperty=["value",ge._maskService.applyMask(q,ge._maskService.maskExpression)],ge._maskService.writingValue=!1):ge._maskService.formElementProperty=["value",q],ge._inputValue=q})()}registerOnChange(q){this._maskService.onChange=this.onChange=q}registerOnTouched(q){this.onTouch=q}_getActiveElement(q=this.document){const ge=q?.activeElement?.shadowRoot;return ge?.activeElement?this._getActiveElement(ge):q.activeElement}checkSelectionOnDeletion(q){q.selectionStart=Math.min(Math.max(this.prefix.length,q.selectionStart),this._inputValue.length-this.suffix.length),q.selectionEnd=Math.min(Math.max(this.prefix.length,q.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(q){this._maskService.formElementProperty=["disabled",q]}_repeatPatternSymbols(q){return q.match(/{[0-9]+}/)&&q.split("").reduce((ge,re,Ct)=>{if(this._start="{"===re?Ct:this._start,"}"!==re)return this._maskService._findSpecialChar(re)?ge+re:ge;this._end=Ct;const bt=Number(q.slice(this._start+1,this._end));return ge+new Array(bt+1).join(q[this._start-1])},"")||q}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(q){const ge=this._maskValue.split("").filter(re=>":"!==re).length;return q&&(0==+(q[q.length-1]??-1)&&q.length<ge||q.length<=ge-2)?this._createValidationError(q):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(q){return{mask:{requiredMask:this._maskValue,actualValue:q}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some(q=>{const ge=this._maskService.removeMask(this._inputValue)?.length<=this._maskService.removeMask(q)?.length;if(this._inputValue&&ge)return this._maskValue=q,this.maskExpression=q,this._maskService.maskExpression=q,ge;this._maskValue=this.maskExpression=this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]??""})}_currentLocaleDecimalMarker(){return 1.1.toLocaleString().substring(1,2)}}return Ze.\u0275fac=function(q){return new(q||Ze)},Ze.\u0275dir=N.lG2({type:Ze,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(q,ge){1&q&&N.NdJ("paste",function(){return ge.onPaste()})("ngModelChange",function(Ct){return ge.onModelChange(Ct)})("input",function(Ct){return ge.onInput(Ct)})("blur",function(){return ge.onBlur()})("click",function(Ct){return ge.onClick(Ct)})("keydown",function(Ct){return ge.onKeyDown(Ct)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",triggerOnMaskChange:"triggerOnMaskChange"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],standalone:!0,features:[N._Bn([{provide:Be.JU,useExisting:Ze,multi:!0},{provide:Be.Cf,useExisting:Ze,multi:!0},Fe]),N.TTD]}),Ze})()},5861:(en,ut,X)=>{"use strict";function E(fe,Be,_e,xe,He,Re,Ue){try{var ye=fe[Re](Ue),Ae=ye.value}catch(Fe){return void _e(Fe)}ye.done?Be(Ae):Promise.resolve(Ae).then(xe,He)}function N(fe){return function(){var Be=this,_e=arguments;return new Promise(function(xe,He){var Re=fe.apply(Be,_e);function Ue(Ae){E(Re,xe,He,Ue,ye,"next",Ae)}function ye(Ae){E(Re,xe,He,Ue,ye,"throw",Ae)}Ue(void 0)})}}X.d(ut,{Z:()=>N})}},en=>{en(en.s=2493)}]);